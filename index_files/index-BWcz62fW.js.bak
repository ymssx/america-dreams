var Fn=Object.defineProperty;var Hn=(t,n,a)=>n in t?Fn(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a;var fn=(t,n,a)=>Hn(t,typeof n!="symbol"?n+"":n,a);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function a(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=a(o);fetch(o.href,s)}})();/**
* @vue/shared v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function makeMap(t){const n=Object.create(null);for(const a of t.split(","))n[a]=1;return a=>a in n}const EMPTY_OBJ$1={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn$1=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),isModelListener=t=>t.startsWith("onUpdate:"),extend$1=Object.assign,remove=(t,n)=>{const a=t.indexOf(n);a>-1&&t.splice(a,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn$1=(t,n)=>hasOwnProperty$1.call(t,n),isArray$2=Array.isArray,isMap=t=>toTypeString(t)==="[object Map]",isSet=t=>toTypeString(t)==="[object Set]",isDate=t=>toTypeString(t)==="[object Date]",isFunction$1=t=>typeof t=="function",isString$1=t=>typeof t=="string",isSymbol=t=>typeof t=="symbol",isObject$4=t=>t!==null&&typeof t=="object",isPromise=t=>(isObject$4(t)||isFunction$1(t))&&isFunction$1(t.then)&&isFunction$1(t.catch),objectToString=Object.prototype.toString,toTypeString=t=>objectToString.call(t),toRawType=t=>toTypeString(t).slice(8,-1),isPlainObject$2=t=>toTypeString(t)==="[object Object]",isIntegerKey=t=>isString$1(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=t=>{const n=Object.create(null);return a=>n[a]||(n[a]=t(a))},camelizeRE=/-\w/g,camelize=cacheStringFunction(t=>t.replace(camelizeRE,n=>n.slice(1).toUpperCase())),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(t=>t.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(t=>t.charAt(0).toUpperCase()+t.slice(1)),toHandlerKey=cacheStringFunction(t=>t?`on${capitalize(t)}`:""),hasChanged=(t,n)=>!Object.is(t,n),invokeArrayFns=(t,...n)=>{for(let a=0;a<t.length;a++)t[a](...n)},def=(t,n,a,r=!1)=>{Object.defineProperty(t,n,{configurable:!0,enumerable:!1,writable:r,value:a})},looseToNumber=t=>{const n=parseFloat(t);return isNaN(n)?t:n},toNumber=t=>{const n=isString$1(t)?Number(t):NaN;return isNaN(n)?t:n};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle$1(t){if(isArray$2(t)){const n={};for(let a=0;a<t.length;a++){const r=t[a],o=isString$1(r)?parseStringStyle(r):normalizeStyle$1(r);if(o)for(const s in o)n[s]=o[s]}return n}else if(isString$1(t)||isObject$4(t))return t}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(t){const n={};return t.replace(styleCommentRE,"").split(listDelimiterRE).forEach(a=>{if(a){const r=a.split(propertyDelimiterRE);r.length>1&&(n[r[0].trim()]=r[1].trim())}}),n}function normalizeClass(t){let n="";if(isString$1(t))n=t;else if(isArray$2(t))for(let a=0;a<t.length;a++){const r=normalizeClass(t[a]);r&&(n+=r+" ")}else if(isObject$4(t))for(const a in t)t[a]&&(n+=a+" ");return n.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(t){return!!t||t===""}function looseCompareArrays(t,n){if(t.length!==n.length)return!1;let a=!0;for(let r=0;a&&r<t.length;r++)a=looseEqual(t[r],n[r]);return a}function looseEqual(t,n){if(t===n)return!0;let a=isDate(t),r=isDate(n);if(a||r)return a&&r?t.getTime()===n.getTime():!1;if(a=isSymbol(t),r=isSymbol(n),a||r)return t===n;if(a=isArray$2(t),r=isArray$2(n),a||r)return a&&r?looseCompareArrays(t,n):!1;if(a=isObject$4(t),r=isObject$4(n),a||r){if(!a||!r)return!1;const o=Object.keys(t).length,s=Object.keys(n).length;if(o!==s)return!1;for(const l in t){const c=t.hasOwnProperty(l),u=n.hasOwnProperty(l);if(c&&!u||!c&&u||!looseEqual(t[l],n[l]))return!1}}return String(t)===String(n)}function looseIndexOf(t,n){return t.findIndex(a=>looseEqual(a,n))}const isRef$1=t=>!!(t&&t.__v_isRef===!0),toDisplayString=t=>isString$1(t)?t:t==null?"":isArray$2(t)||isObject$4(t)&&(t.toString===objectToString||!isFunction$1(t.toString))?isRef$1(t)?toDisplayString(t.value):JSON.stringify(t,replacer,2):String(t),replacer=(t,n)=>isRef$1(n)?replacer(t,n.value):isMap(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((a,[r,o],s)=>(a[stringifySymbol(r,s)+" =>"]=o,a),{})}:isSet(n)?{[`Set(${n.size})`]:[...n.values()].map(a=>stringifySymbol(a))}:isSymbol(n)?stringifySymbol(n):isObject$4(n)&&!isArray$2(n)&&!isPlainObject$2(n)?String(n):n,stringifySymbol=(t,n="")=>{var a;return isSymbol(t)?`Symbol(${(a=t.description)!=null?a:n})`:t};/**
* @vue/reactivity v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(n=!1){this.detached=n,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=activeEffectScope,!n&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let n,a;if(this.scopes)for(n=0,a=this.scopes.length;n<a;n++)this.scopes[n].pause();for(n=0,a=this.effects.length;n<a;n++)this.effects[n].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let n,a;if(this.scopes)for(n=0,a=this.scopes.length;n<a;n++)this.scopes[n].resume();for(n=0,a=this.effects.length;n<a;n++)this.effects[n].resume()}}run(n){if(this._active){const a=activeEffectScope;try{return activeEffectScope=this,n()}finally{activeEffectScope=a}}}on(){++this._on===1&&(this.prevScope=activeEffectScope,activeEffectScope=this)}off(){this._on>0&&--this._on===0&&(activeEffectScope=this.prevScope,this.prevScope=void 0)}stop(n){if(this._active){this._active=!1;let a,r;for(a=0,r=this.effects.length;a<r;a++)this.effects[a].stop();for(this.effects.length=0,a=0,r=this.cleanups.length;a<r;a++)this.cleanups[a]();if(this.cleanups.length=0,this.scopes){for(a=0,r=this.scopes.length;a<r;a++)this.scopes[a].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!n){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function effectScope(t){return new EffectScope(t)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(t,n=!1){activeEffectScope&&activeEffectScope.cleanups.push(t)}let activeSub;const pausedQueueEffects=new WeakSet;class ReactiveEffect{constructor(n){this.fn=n,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,activeEffectScope&&activeEffectScope.active&&activeEffectScope.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pausedQueueEffects.has(this)&&(pausedQueueEffects.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||batch(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cleanupEffect(this),prepareDeps(this);const n=activeSub,a=shouldTrack;activeSub=this,shouldTrack=!0;try{return this.fn()}finally{cleanupDeps(this),activeSub=n,shouldTrack=a,this.flags&=-3}}stop(){if(this.flags&1){for(let n=this.deps;n;n=n.nextDep)removeSub(n);this.deps=this.depsTail=void 0,cleanupEffect(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pausedQueueEffects.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){isDirty(this)&&this.run()}get dirty(){return isDirty(this)}}let batchDepth=0,batchedSub,batchedComputed;function batch(t,n=!1){if(t.flags|=8,n){t.next=batchedComputed,batchedComputed=t;return}t.next=batchedSub,batchedSub=t}function startBatch(){batchDepth++}function endBatch(){if(--batchDepth>0)return;if(batchedComputed){let n=batchedComputed;for(batchedComputed=void 0;n;){const a=n.next;n.next=void 0,n.flags&=-9,n=a}}let t;for(;batchedSub;){let n=batchedSub;for(batchedSub=void 0;n;){const a=n.next;if(n.next=void 0,n.flags&=-9,n.flags&1)try{n.trigger()}catch(r){t||(t=r)}n=a}}if(t)throw t}function prepareDeps(t){for(let n=t.deps;n;n=n.nextDep)n.version=-1,n.prevActiveLink=n.dep.activeLink,n.dep.activeLink=n}function cleanupDeps(t){let n,a=t.depsTail,r=a;for(;r;){const o=r.prevDep;r.version===-1?(r===a&&(a=o),removeSub(r),removeDep(r)):n=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=o}t.deps=n,t.depsTail=a}function isDirty(t){for(let n=t.deps;n;n=n.nextDep)if(n.dep.version!==n.version||n.dep.computed&&(refreshComputed(n.dep.computed)||n.dep.version!==n.version))return!0;return!!t._dirty}function refreshComputed(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===globalVersion)||(t.globalVersion=globalVersion,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!isDirty(t))))return;t.flags|=2;const n=t.dep,a=activeSub,r=shouldTrack;activeSub=t,shouldTrack=!0;try{prepareDeps(t);const o=t.fn(t._value);(n.version===0||hasChanged(o,t._value))&&(t.flags|=128,t._value=o,n.version++)}catch(o){throw n.version++,o}finally{activeSub=a,shouldTrack=r,cleanupDeps(t),t.flags&=-3}}function removeSub(t,n=!1){const{dep:a,prevSub:r,nextSub:o}=t;if(r&&(r.nextSub=o,t.prevSub=void 0),o&&(o.prevSub=r,t.nextSub=void 0),a.subs===t&&(a.subs=r,!r&&a.computed)){a.computed.flags&=-5;for(let s=a.computed.deps;s;s=s.nextDep)removeSub(s,!0)}!n&&!--a.sc&&a.map&&a.map.delete(a.key)}function removeDep(t){const{prevDep:n,nextDep:a}=t;n&&(n.nextDep=a,t.prevDep=void 0),a&&(a.prevDep=n,t.nextDep=void 0)}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const t=trackStack.pop();shouldTrack=t===void 0?!0:t}function cleanupEffect(t){const{cleanup:n}=t;if(t.cleanup=void 0,n){const a=activeSub;activeSub=void 0;try{n()}finally{activeSub=a}}}let globalVersion=0;class Link{constructor(n,a){this.sub=n,this.dep=a,this.version=a.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Dep{constructor(n){this.computed=n,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(n){if(!activeSub||!shouldTrack||activeSub===this.computed)return;let a=this.activeLink;if(a===void 0||a.sub!==activeSub)a=this.activeLink=new Link(activeSub,this),activeSub.deps?(a.prevDep=activeSub.depsTail,activeSub.depsTail.nextDep=a,activeSub.depsTail=a):activeSub.deps=activeSub.depsTail=a,addSub(a);else if(a.version===-1&&(a.version=this.version,a.nextDep)){const r=a.nextDep;r.prevDep=a.prevDep,a.prevDep&&(a.prevDep.nextDep=r),a.prevDep=activeSub.depsTail,a.nextDep=void 0,activeSub.depsTail.nextDep=a,activeSub.depsTail=a,activeSub.deps===a&&(activeSub.deps=r)}return a}trigger(n){this.version++,globalVersion++,this.notify(n)}notify(n){startBatch();try{for(let a=this.subs;a;a=a.prevSub)a.sub.notify()&&a.sub.dep.notify()}finally{endBatch()}}}function addSub(t){if(t.dep.sc++,t.sub.flags&4){const n=t.dep.computed;if(n&&!t.dep.subs){n.flags|=20;for(let r=n.deps;r;r=r.nextDep)addSub(r)}const a=t.dep.subs;a!==t&&(t.prevSub=a,a&&(a.nextSub=t)),t.dep.subs=t}}const targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol(""),ARRAY_ITERATE_KEY=Symbol("");function track(t,n,a){if(shouldTrack&&activeSub){let r=targetMap.get(t);r||targetMap.set(t,r=new Map);let o=r.get(a);o||(r.set(a,o=new Dep),o.map=r,o.key=a),o.track()}}function trigger$1(t,n,a,r,o,s){const l=targetMap.get(t);if(!l){globalVersion++;return}const c=u=>{u&&u.trigger()};if(startBatch(),n==="clear")l.forEach(c);else{const u=isArray$2(t),d=u&&isIntegerKey(a);if(u&&a==="length"){const f=Number(r);l.forEach((v,_)=>{(_==="length"||_===ARRAY_ITERATE_KEY||!isSymbol(_)&&_>=f)&&c(v)})}else switch((a!==void 0||l.has(void 0))&&c(l.get(a)),d&&c(l.get(ARRAY_ITERATE_KEY)),n){case"add":u?d&&c(l.get("length")):(c(l.get(ITERATE_KEY)),isMap(t)&&c(l.get(MAP_KEY_ITERATE_KEY)));break;case"delete":u||(c(l.get(ITERATE_KEY)),isMap(t)&&c(l.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(t)&&c(l.get(ITERATE_KEY));break}}endBatch()}function getDepFromReactive(t,n){const a=targetMap.get(t);return a&&a.get(n)}function reactiveReadArray(t){const n=toRaw(t);return n===t?n:(track(n,"iterate",ARRAY_ITERATE_KEY),isShallow(t)?n:n.map(toReactive))}function shallowReadArray(t){return track(t=toRaw(t),"iterate",ARRAY_ITERATE_KEY),t}function toWrapped(t,n){return isReadonly(t)?isReactive(t)?toReadonly(toReactive(n)):toReadonly(n):toReactive(n)}const arrayInstrumentations={__proto__:null,[Symbol.iterator](){return iterator$1(this,Symbol.iterator,t=>toWrapped(this,t))},concat(...t){return reactiveReadArray(this).concat(...t.map(n=>isArray$2(n)?reactiveReadArray(n):n))},entries(){return iterator$1(this,"entries",t=>(t[1]=toWrapped(this,t[1]),t))},every(t,n){return apply(this,"every",t,n,void 0,arguments)},filter(t,n){return apply(this,"filter",t,n,a=>a.map(r=>toWrapped(this,r)),arguments)},find(t,n){return apply(this,"find",t,n,a=>toWrapped(this,a),arguments)},findIndex(t,n){return apply(this,"findIndex",t,n,void 0,arguments)},findLast(t,n){return apply(this,"findLast",t,n,a=>toWrapped(this,a),arguments)},findLastIndex(t,n){return apply(this,"findLastIndex",t,n,void 0,arguments)},forEach(t,n){return apply(this,"forEach",t,n,void 0,arguments)},includes(...t){return searchProxy(this,"includes",t)},indexOf(...t){return searchProxy(this,"indexOf",t)},join(t){return reactiveReadArray(this).join(t)},lastIndexOf(...t){return searchProxy(this,"lastIndexOf",t)},map(t,n){return apply(this,"map",t,n,void 0,arguments)},pop(){return noTracking(this,"pop")},push(...t){return noTracking(this,"push",t)},reduce(t,...n){return reduce$1(this,"reduce",t,n)},reduceRight(t,...n){return reduce$1(this,"reduceRight",t,n)},shift(){return noTracking(this,"shift")},some(t,n){return apply(this,"some",t,n,void 0,arguments)},splice(...t){return noTracking(this,"splice",t)},toReversed(){return reactiveReadArray(this).toReversed()},toSorted(t){return reactiveReadArray(this).toSorted(t)},toSpliced(...t){return reactiveReadArray(this).toSpliced(...t)},unshift(...t){return noTracking(this,"unshift",t)},values(){return iterator$1(this,"values",t=>toWrapped(this,t))}};function iterator$1(t,n,a){const r=shallowReadArray(t),o=r[n]();return r!==t&&!isShallow(t)&&(o._next=o.next,o.next=()=>{const s=o._next();return s.done||(s.value=a(s.value)),s}),o}const arrayProto$1=Array.prototype;function apply(t,n,a,r,o,s){const l=shallowReadArray(t),c=l!==t&&!isShallow(t),u=l[n];if(u!==arrayProto$1[n]){const v=u.apply(t,s);return c?toReactive(v):v}let d=a;l!==t&&(c?d=function(v,_){return a.call(this,toWrapped(t,v),_,t)}:a.length>2&&(d=function(v,_){return a.call(this,v,_,t)}));const f=u.call(l,d,r);return c&&o?o(f):f}function reduce$1(t,n,a,r){const o=shallowReadArray(t);let s=a;return o!==t&&(isShallow(t)?a.length>3&&(s=function(l,c,u){return a.call(this,l,c,u,t)}):s=function(l,c,u){return a.call(this,l,toWrapped(t,c),u,t)}),o[n](s,...r)}function searchProxy(t,n,a){const r=toRaw(t);track(r,"iterate",ARRAY_ITERATE_KEY);const o=r[n](...a);return(o===-1||o===!1)&&isProxy(a[0])?(a[0]=toRaw(a[0]),r[n](...a)):o}function noTracking(t,n,a=[]){pauseTracking(),startBatch();const r=toRaw(t)[n].apply(t,a);return endBatch(),resetTracking(),r}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(isSymbol));function hasOwnProperty(t){isSymbol(t)||(t=String(t));const n=toRaw(this);return track(n,"has",t),n.hasOwnProperty(t)}class BaseReactiveHandler{constructor(n=!1,a=!1){this._isReadonly=n,this._isShallow=a}get(n,a,r){if(a==="__v_skip")return n.__v_skip;const o=this._isReadonly,s=this._isShallow;if(a==="__v_isReactive")return!o;if(a==="__v_isReadonly")return o;if(a==="__v_isShallow")return s;if(a==="__v_raw")return r===(o?s?shallowReadonlyMap:readonlyMap:s?shallowReactiveMap:reactiveMap).get(n)||Object.getPrototypeOf(n)===Object.getPrototypeOf(r)?n:void 0;const l=isArray$2(n);if(!o){let u;if(l&&(u=arrayInstrumentations[a]))return u;if(a==="hasOwnProperty")return hasOwnProperty}const c=Reflect.get(n,a,isRef(n)?n:r);if((isSymbol(a)?builtInSymbols.has(a):isNonTrackableKeys(a))||(o||track(n,"get",a),s))return c;if(isRef(c)){const u=l&&isIntegerKey(a)?c:c.value;return o&&isObject$4(u)?readonly(u):u}return isObject$4(c)?o?readonly(c):reactive(c):c}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(n=!1){super(!1,n)}set(n,a,r,o){let s=n[a];const l=isArray$2(n)&&isIntegerKey(a);if(!this._isShallow){const d=isReadonly(s);if(!isShallow(r)&&!isReadonly(r)&&(s=toRaw(s),r=toRaw(r)),!l&&isRef(s)&&!isRef(r))return d||(s.value=r),!0}const c=l?Number(a)<n.length:hasOwn$1(n,a),u=Reflect.set(n,a,r,isRef(n)?n:o);return n===toRaw(o)&&(c?hasChanged(r,s)&&trigger$1(n,"set",a,r):trigger$1(n,"add",a,r)),u}deleteProperty(n,a){const r=hasOwn$1(n,a);n[a];const o=Reflect.deleteProperty(n,a);return o&&r&&trigger$1(n,"delete",a,void 0),o}has(n,a){const r=Reflect.has(n,a);return(!isSymbol(a)||!builtInSymbols.has(a))&&track(n,"has",a),r}ownKeys(n){return track(n,"iterate",isArray$2(n)?"length":ITERATE_KEY),Reflect.ownKeys(n)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(n=!1){super(!0,n)}set(n,a){return!0}deleteProperty(n,a){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=t=>t,getProto=t=>Reflect.getPrototypeOf(t);function createIterableMethod(t,n,a){return function(...r){const o=this.__v_raw,s=toRaw(o),l=isMap(s),c=t==="entries"||t===Symbol.iterator&&l,u=t==="keys"&&l,d=o[t](...r),f=a?toShallow:n?toReadonly:toReactive;return!n&&track(s,"iterate",u?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:v,done:_}=d.next();return _?{value:v,done:_}:{value:c?[f(v[0]),f(v[1])]:f(v),done:_}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(t){return function(...n){return t==="delete"?!1:t==="clear"?void 0:this}}function createInstrumentations(t,n){const a={get(o){const s=this.__v_raw,l=toRaw(s),c=toRaw(o);t||(hasChanged(o,c)&&track(l,"get",o),track(l,"get",c));const{has:u}=getProto(l),d=n?toShallow:t?toReadonly:toReactive;if(u.call(l,o))return d(s.get(o));if(u.call(l,c))return d(s.get(c));s!==l&&s.get(o)},get size(){const o=this.__v_raw;return!t&&track(toRaw(o),"iterate",ITERATE_KEY),o.size},has(o){const s=this.__v_raw,l=toRaw(s),c=toRaw(o);return t||(hasChanged(o,c)&&track(l,"has",o),track(l,"has",c)),o===c?s.has(o):s.has(o)||s.has(c)},forEach(o,s){const l=this,c=l.__v_raw,u=toRaw(c),d=n?toShallow:t?toReadonly:toReactive;return!t&&track(u,"iterate",ITERATE_KEY),c.forEach((f,v)=>o.call(s,d(f),d(v),l))}};return extend$1(a,t?{add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear")}:{add(o){!n&&!isShallow(o)&&!isReadonly(o)&&(o=toRaw(o));const s=toRaw(this);return getProto(s).has.call(s,o)||(s.add(o),trigger$1(s,"add",o,o)),this},set(o,s){!n&&!isShallow(s)&&!isReadonly(s)&&(s=toRaw(s));const l=toRaw(this),{has:c,get:u}=getProto(l);let d=c.call(l,o);d||(o=toRaw(o),d=c.call(l,o));const f=u.call(l,o);return l.set(o,s),d?hasChanged(s,f)&&trigger$1(l,"set",o,s):trigger$1(l,"add",o,s),this},delete(o){const s=toRaw(this),{has:l,get:c}=getProto(s);let u=l.call(s,o);u||(o=toRaw(o),u=l.call(s,o)),c&&c.call(s,o);const d=s.delete(o);return u&&trigger$1(s,"delete",o,void 0),d},clear(){const o=toRaw(this),s=o.size!==0,l=o.clear();return s&&trigger$1(o,"clear",void 0,void 0),l}}),["keys","values","entries",Symbol.iterator].forEach(o=>{a[o]=createIterableMethod(o,t,n)}),a}function createInstrumentationGetter(t,n){const a=createInstrumentations(t,n);return(r,o,s)=>o==="__v_isReactive"?!t:o==="__v_isReadonly"?t:o==="__v_raw"?r:Reflect.get(hasOwn$1(a,o)&&o in r?a:r,o,s)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(t){return t.__v_skip||!Object.isExtensible(t)?0:targetTypeMap(toRawType(t))}function reactive(t){return isReadonly(t)?t:createReactiveObject(t,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(t){return createReactiveObject(t,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(t){return createReactiveObject(t,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(t){return createReactiveObject(t,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(t,n,a,r,o){if(!isObject$4(t)||t.__v_raw&&!(n&&t.__v_isReactive))return t;const s=getTargetType(t);if(s===0)return t;const l=o.get(t);if(l)return l;const c=new Proxy(t,s===2?r:a);return o.set(t,c),c}function isReactive(t){return isReadonly(t)?isReactive(t.__v_raw):!!(t&&t.__v_isReactive)}function isReadonly(t){return!!(t&&t.__v_isReadonly)}function isShallow(t){return!!(t&&t.__v_isShallow)}function isProxy(t){return t?!!t.__v_raw:!1}function toRaw(t){const n=t&&t.__v_raw;return n?toRaw(n):t}function markRaw(t){return!hasOwn$1(t,"__v_skip")&&Object.isExtensible(t)&&def(t,"__v_skip",!0),t}const toReactive=t=>isObject$4(t)?reactive(t):t,toReadonly=t=>isObject$4(t)?readonly(t):t;function isRef(t){return t?t.__v_isRef===!0:!1}function ref(t){return createRef(t,!1)}function shallowRef(t){return createRef(t,!0)}function createRef(t,n){return isRef(t)?t:new RefImpl(t,n)}class RefImpl{constructor(n,a){this.dep=new Dep,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=a?n:toRaw(n),this._value=a?n:toReactive(n),this.__v_isShallow=a}get value(){return this.dep.track(),this._value}set value(n){const a=this._rawValue,r=this.__v_isShallow||isShallow(n)||isReadonly(n);n=r?n:toRaw(n),hasChanged(n,a)&&(this._rawValue=n,this._value=r?n:toReactive(n),this.dep.trigger())}}function unref(t){return isRef(t)?t.value:t}function toValue(t){return isFunction$1(t)?t():unref(t)}const shallowUnwrapHandlers={get:(t,n,a)=>n==="__v_raw"?t:unref(Reflect.get(t,n,a)),set:(t,n,a,r)=>{const o=t[n];return isRef(o)&&!isRef(a)?(o.value=a,!0):Reflect.set(t,n,a,r)}};function proxyRefs(t){return isReactive(t)?t:new Proxy(t,shallowUnwrapHandlers)}function toRefs(t){const n=isArray$2(t)?new Array(t.length):{};for(const a in t)n[a]=propertyToRef(t,a);return n}class ObjectRefImpl{constructor(n,a,r){this._object=n,this._key=a,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0,this._raw=toRaw(n);let o=!0,s=n;if(!isArray$2(n)||!isIntegerKey(String(a)))do o=!isProxy(s)||isShallow(s);while(o&&(s=s.__v_raw));this._shallow=o}get value(){let n=this._object[this._key];return this._shallow&&(n=unref(n)),this._value=n===void 0?this._defaultValue:n}set value(n){if(this._shallow&&isRef(this._raw[this._key])){const a=this._object[this._key];if(isRef(a)){a.value=n;return}}this._object[this._key]=n}get dep(){return getDepFromReactive(this._raw,this._key)}}function propertyToRef(t,n,a){return new ObjectRefImpl(t,n,a)}class ComputedRefImpl{constructor(n,a,r){this.fn=n,this.setter=a,this._value=void 0,this.dep=new Dep(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=globalVersion-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!a,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&activeSub!==this)return batch(this,!0),!0}get value(){const n=this.dep.track();return refreshComputed(this),n&&(n.version=this.dep.version),this._value}set value(n){this.setter&&this.setter(n)}}function computed$1(t,n,a=!1){let r,o;return isFunction$1(t)?r=t:(r=t.get,o=t.set),new ComputedRefImpl(r,o,a)}const INITIAL_WATCHER_VALUE={},cleanupMap=new WeakMap;let activeWatcher;function onWatcherCleanup(t,n=!1,a=activeWatcher){if(a){let r=cleanupMap.get(a);r||cleanupMap.set(a,r=[]),r.push(t)}}function watch$1(t,n,a=EMPTY_OBJ$1){const{immediate:r,deep:o,once:s,scheduler:l,augmentJob:c,call:u}=a,d=x=>o?x:isShallow(x)||o===!1||o===0?traverse(x,1):traverse(x);let f,v,_,g,y=!1,b=!1;if(isRef(t)?(v=()=>t.value,y=isShallow(t)):isReactive(t)?(v=()=>d(t),y=!0):isArray$2(t)?(b=!0,y=t.some(x=>isReactive(x)||isShallow(x)),v=()=>t.map(x=>{if(isRef(x))return x.value;if(isReactive(x))return d(x);if(isFunction$1(x))return u?u(x,2):x()})):isFunction$1(t)?n?v=u?()=>u(t,2):t:v=()=>{if(_){pauseTracking();try{_()}finally{resetTracking()}}const x=activeWatcher;activeWatcher=f;try{return u?u(t,3,[g]):t(g)}finally{activeWatcher=x}}:v=NOOP,n&&o){const x=v,A=o===!0?1/0:o;v=()=>traverse(x(),A)}const T=getCurrentScope(),S=()=>{f.stop(),T&&T.active&&remove(T.effects,f)};if(s&&n){const x=n;n=(...A)=>{x(...A),S()}}let C=b?new Array(t.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const E=x=>{if(!(!(f.flags&1)||!f.dirty&&!x))if(n){const A=f.run();if(o||y||(b?A.some((N,M)=>hasChanged(N,C[M])):hasChanged(A,C))){_&&_();const N=activeWatcher;activeWatcher=f;try{const M=[A,C===INITIAL_WATCHER_VALUE?void 0:b&&C[0]===INITIAL_WATCHER_VALUE?[]:C,g];C=A,u?u(n,3,M):n(...M)}finally{activeWatcher=N}}}else f.run()};return c&&c(E),f=new ReactiveEffect(v),f.scheduler=l?()=>l(E,!1):E,g=x=>onWatcherCleanup(x,!1,f),_=f.onStop=()=>{const x=cleanupMap.get(f);if(x){if(u)u(x,4);else for(const A of x)A();cleanupMap.delete(f)}},n?r?E(!0):C=f.run():l?l(E.bind(null,!0),!0):f.run(),S.pause=f.pause.bind(f),S.resume=f.resume.bind(f),S.stop=S,S}function traverse(t,n=1/0,a){if(n<=0||!isObject$4(t)||t.__v_skip||(a=a||new Map,(a.get(t)||0)>=n))return t;if(a.set(t,n),n--,isRef(t))traverse(t.value,n,a);else if(isArray$2(t))for(let r=0;r<t.length;r++)traverse(t[r],n,a);else if(isSet(t)||isMap(t))t.forEach(r=>{traverse(r,n,a)});else if(isPlainObject$2(t)){for(const r in t)traverse(t[r],n,a);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&traverse(t[r],n,a)}return t}/**
* @vue/runtime-core v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack=[];let isWarning=!1;function warn$1(t,...n){if(isWarning)return;isWarning=!0,pauseTracking();const a=stack.length?stack[stack.length-1].component:null,r=a&&a.appContext.config.warnHandler,o=getComponentTrace();if(r)callWithErrorHandling(r,a,11,[t+n.map(s=>{var l,c;return(c=(l=s.toString)==null?void 0:l.call(s))!=null?c:JSON.stringify(s)}).join(""),a&&a.proxy,o.map(({vnode:s})=>`at <${formatComponentName(a,s.type)}>`).join(`
`),o]);else{const s=[`[Vue warn]: ${t}`,...n];o.length&&s.push(`
`,...formatTrace(o)),console.warn(...s)}resetTracking(),isWarning=!1}function getComponentTrace(){let t=stack[stack.length-1];if(!t)return[];const n=[];for(;t;){const a=n[0];a&&a.vnode===t?a.recurseCount++:n.push({vnode:t,recurseCount:0});const r=t.component&&t.component.parent;t=r&&r.vnode}return n}function formatTrace(t){const n=[];return t.forEach((a,r)=>{n.push(...r===0?[]:[`
`],...formatTraceEntry(a))}),n}function formatTraceEntry({vnode:t,recurseCount:n}){const a=n>0?`... (${n} recursive calls)`:"",r=t.component?t.component.parent==null:!1,o=` at <${formatComponentName(t.component,t.type,r)}`,s=">"+a;return t.props?[o,...formatProps(t.props),s]:[o+s]}function formatProps(t){const n=[],a=Object.keys(t);return a.slice(0,3).forEach(r=>{n.push(...formatProp(r,t[r]))}),a.length>3&&n.push(" ..."),n}function formatProp(t,n,a){return isString$1(n)?(n=JSON.stringify(n),a?n:[`${t}=${n}`]):typeof n=="number"||typeof n=="boolean"||n==null?a?n:[`${t}=${n}`]:isRef(n)?(n=formatProp(t,toRaw(n.value),!0),a?n:[`${t}=Ref<`,n,">"]):isFunction$1(n)?[`${t}=fn${n.name?`<${n.name}>`:""}`]:(n=toRaw(n),a?n:[`${t}=`,n])}function callWithErrorHandling(t,n,a,r){try{return r?t(...r):t()}catch(o){handleError(o,n,a)}}function callWithAsyncErrorHandling(t,n,a,r){if(isFunction$1(t)){const o=callWithErrorHandling(t,n,a,r);return o&&isPromise(o)&&o.catch(s=>{handleError(s,n,a)}),o}if(isArray$2(t)){const o=[];for(let s=0;s<t.length;s++)o.push(callWithAsyncErrorHandling(t[s],n,a,r));return o}}function handleError(t,n,a,r=!0){const o=n?n.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:l}=n&&n.appContext.config||EMPTY_OBJ$1;if(n){let c=n.parent;const u=n.proxy,d=`https://vuejs.org/error-reference/#runtime-${a}`;for(;c;){const f=c.ec;if(f){for(let v=0;v<f.length;v++)if(f[v](t,u,d)===!1)return}c=c.parent}if(s){pauseTracking(),callWithErrorHandling(s,null,10,[t,u,d]),resetTracking();return}}logError$1(t,a,o,r,l)}function logError$1(t,n,a,r=!0,o=!1){if(o)throw t;console.error(t)}const queue=[];let flushIndex=-1;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(t){const n=currentFlushPromise||resolvedPromise;return t?n.then(this?t.bind(this):t):n}function findInsertionIndex(t){let n=flushIndex+1,a=queue.length;for(;n<a;){const r=n+a>>>1,o=queue[r],s=getId$1(o);s<t||s===t&&o.flags&2?n=r+1:a=r}return n}function queueJob(t){if(!(t.flags&1)){const n=getId$1(t),a=queue[queue.length-1];!a||!(t.flags&2)&&n>=getId$1(a)?queue.push(t):queue.splice(findInsertionIndex(n),0,t),t.flags|=1,queueFlush()}}function queueFlush(){currentFlushPromise||(currentFlushPromise=resolvedPromise.then(flushJobs))}function queuePostFlushCb(t){isArray$2(t)?pendingPostFlushCbs.push(...t):activePostFlushCbs&&t.id===-1?activePostFlushCbs.splice(postFlushIndex+1,0,t):t.flags&1||(pendingPostFlushCbs.push(t),t.flags|=1),queueFlush()}function flushPreFlushCbs(t,n,a=flushIndex+1){for(;a<queue.length;a++){const r=queue[a];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;queue.splice(a,1),a--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function flushPostFlushCbs(t){if(pendingPostFlushCbs.length){const n=[...new Set(pendingPostFlushCbs)].sort((a,r)=>getId$1(a)-getId$1(r));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...n);return}for(activePostFlushCbs=n,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++){const a=activePostFlushCbs[postFlushIndex];a.flags&4&&(a.flags&=-2),a.flags&8||a(),a.flags&=-2}activePostFlushCbs=null,postFlushIndex=0}}const getId$1=t=>t.id==null?t.flags&2?-1:1/0:t.id;function flushJobs(t){try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const n=queue[flushIndex];n&&!(n.flags&8)&&(n.flags&4&&(n.flags&=-2),callWithErrorHandling(n,n.i,n.i?15:14),n.flags&4||(n.flags&=-2))}}finally{for(;flushIndex<queue.length;flushIndex++){const n=queue[flushIndex];n&&(n.flags&=-2)}flushIndex=-1,queue.length=0,flushPostFlushCbs(),currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(t){const n=currentRenderingInstance;return currentRenderingInstance=t,currentScopeId=t&&t.type.__scopeId||null,n}function withCtx(t,n=currentRenderingInstance,a){if(!n||t._n)return t;const r=(...o)=>{r._d&&setBlockTracking(-1);const s=setCurrentRenderingInstance(n);let l;try{l=t(...o)}finally{setCurrentRenderingInstance(s),r._d&&setBlockTracking(1)}return l};return r._n=!0,r._c=!0,r._d=!0,r}function withDirectives(t,n){if(currentRenderingInstance===null)return t;const a=getComponentPublicInstance(currentRenderingInstance),r=t.dirs||(t.dirs=[]);for(let o=0;o<n.length;o++){let[s,l,c,u=EMPTY_OBJ$1]=n[o];s&&(isFunction$1(s)&&(s={mounted:s,updated:s}),s.deep&&traverse(l),r.push({dir:s,instance:a,value:l,oldValue:void 0,arg:c,modifiers:u}))}return t}function invokeDirectiveHook(t,n,a,r){const o=t.dirs,s=n&&n.dirs;for(let l=0;l<o.length;l++){const c=o[l];s&&(c.oldValue=s[l].value);let u=c.dir[r];u&&(pauseTracking(),callWithAsyncErrorHandling(u,a,8,[t.el,c,t,n]),resetTracking())}}function provide(t,n){if(currentInstance){let a=currentInstance.provides;const r=currentInstance.parent&&currentInstance.parent.provides;r===a&&(a=currentInstance.provides=Object.create(r)),a[t]=n}}function inject(t,n,a=!1){const r=getCurrentInstance();if(r||currentApp){let o=currentApp?currentApp._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(o&&t in o)return o[t];if(arguments.length>1)return a&&isFunction$1(n)?n.call(r&&r.proxy):n}}function hasInjectionContext(){return!!(getCurrentInstance()||currentApp)}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watchEffect(t,n){return doWatch(t,null,n)}function watch(t,n,a){return doWatch(t,n,a)}function doWatch(t,n,a=EMPTY_OBJ$1){const{immediate:r,deep:o,flush:s,once:l}=a,c=extend$1({},a),u=n&&r||!n&&s!=="post";let d;if(isInSSRComponentSetup){if(s==="sync"){const g=useSSRContext();d=g.__watcherHandles||(g.__watcherHandles=[])}else if(!u){const g=()=>{};return g.stop=NOOP,g.resume=NOOP,g.pause=NOOP,g}}const f=currentInstance;c.call=(g,y,b)=>callWithAsyncErrorHandling(g,f,y,b);let v=!1;s==="post"?c.scheduler=g=>{queuePostRenderEffect(g,f&&f.suspense)}:s!=="sync"&&(v=!0,c.scheduler=(g,y)=>{y?g():queueJob(g)}),c.augmentJob=g=>{n&&(g.flags|=4),v&&(g.flags|=2,f&&(g.id=f.uid,g.i=f))};const _=watch$1(t,n,c);return isInSSRComponentSetup&&(d?d.push(_):u&&_()),_}function instanceWatch(t,n,a){const r=this.proxy,o=isString$1(t)?t.includes(".")?createPathGetter(r,t):()=>r[t]:t.bind(r,r);let s;isFunction$1(n)?s=n:(s=n.handler,a=n);const l=setCurrentInstance(this),c=doWatch(o,s.bind(r),a);return l(),c}function createPathGetter(t,n){const a=n.split(".");return()=>{let r=t;for(let o=0;o<a.length&&r;o++)r=r[a[o]];return r}}const TeleportEndKey=Symbol("_vte"),isTeleport=t=>t.__isTeleport,isTeleportDisabled=t=>t&&(t.disabled||t.disabled===""),isTeleportDeferred=t=>t&&(t.defer||t.defer===""),isTargetSVG=t=>typeof SVGElement<"u"&&t instanceof SVGElement,isTargetMathML=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,resolveTarget=(t,n)=>{const a=t&&t.to;return isString$1(a)?n?n(a):null:a},TeleportImpl={name:"Teleport",__isTeleport:!0,process(t,n,a,r,o,s,l,c,u,d){const{mc:f,pc:v,pbc:_,o:{insert:g,querySelector:y,createText:b,createComment:T}}=d,S=isTeleportDisabled(n.props);let{shapeFlag:C,children:E,dynamicChildren:x}=n;if(t==null){const A=n.el=b(""),N=n.anchor=b("");g(A,a,r),g(N,a,r);const M=(D,L)=>{C&16&&f(E,D,L,o,s,l,c,u)},R=()=>{const D=n.target=resolveTarget(n.props,y),L=prepareAnchor(D,n,b,g);D&&(l!=="svg"&&isTargetSVG(D)?l="svg":l!=="mathml"&&isTargetMathML(D)&&(l="mathml"),o&&o.isCE&&(o.ce._teleportTargets||(o.ce._teleportTargets=new Set)).add(D),S||(M(D,L),updateCssVars(n,!1)))};S&&(M(a,N),updateCssVars(n,!0)),isTeleportDeferred(n.props)?(n.el.__isMounted=!1,queuePostRenderEffect(()=>{R(),delete n.el.__isMounted},s)):R()}else{if(isTeleportDeferred(n.props)&&t.el.__isMounted===!1){queuePostRenderEffect(()=>{TeleportImpl.process(t,n,a,r,o,s,l,c,u,d)},s);return}n.el=t.el,n.targetStart=t.targetStart;const A=n.anchor=t.anchor,N=n.target=t.target,M=n.targetAnchor=t.targetAnchor,R=isTeleportDisabled(t.props),D=R?a:N,L=R?A:M;if(l==="svg"||isTargetSVG(N)?l="svg":(l==="mathml"||isTargetMathML(N))&&(l="mathml"),x?(_(t.dynamicChildren,x,D,o,s,l,c),traverseStaticChildren(t,n,!0)):u||v(t,n,D,L,o,s,l,c,!1),S)R?n.props&&t.props&&n.props.to!==t.props.to&&(n.props.to=t.props.to):moveTeleport(n,a,A,d,1);else if((n.props&&n.props.to)!==(t.props&&t.props.to)){const I=n.target=resolveTarget(n.props,y);I&&moveTeleport(n,I,null,d,0)}else R&&moveTeleport(n,N,M,d,1);updateCssVars(n,S)}},remove(t,n,a,{um:r,o:{remove:o}},s){const{shapeFlag:l,children:c,anchor:u,targetStart:d,targetAnchor:f,target:v,props:_}=t;if(v&&(o(d),o(f)),s&&o(u),l&16){const g=s||!isTeleportDisabled(_);for(let y=0;y<c.length;y++){const b=c[y];r(b,n,a,g,!!b.dynamicChildren)}}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(t,n,a,{o:{insert:r},m:o},s=2){s===0&&r(t.targetAnchor,n,a);const{el:l,anchor:c,shapeFlag:u,children:d,props:f}=t,v=s===2;if(v&&r(l,n,a),(!v||isTeleportDisabled(f))&&u&16)for(let _=0;_<d.length;_++)o(d[_],n,a,2);v&&r(c,n,a)}function hydrateTeleport(t,n,a,r,o,s,{o:{nextSibling:l,parentNode:c,querySelector:u,insert:d,createText:f}},v){function _(b,T,S,C){T.anchor=v(l(b),T,c(b),a,r,o,s),T.targetStart=S,T.targetAnchor=C}const g=n.target=resolveTarget(n.props,u),y=isTeleportDisabled(n.props);if(g){const b=g._lpa||g.firstChild;if(n.shapeFlag&16)if(y)_(t,n,b,b&&l(b));else{n.anchor=l(t);let T=b;for(;T;){if(T&&T.nodeType===8){if(T.data==="teleport start anchor")n.targetStart=T;else if(T.data==="teleport anchor"){n.targetAnchor=T,g._lpa=n.targetAnchor&&l(n.targetAnchor);break}}T=l(T)}n.targetAnchor||prepareAnchor(g,n,f,d),v(b&&l(b),n,g,a,r,o,s)}updateCssVars(n,y)}else y&&n.shapeFlag&16&&_(t,n,t,l(t));return n.anchor&&l(n.anchor)}const Teleport=TeleportImpl;function updateCssVars(t,n){const a=t.ctx;if(a&&a.ut){let r,o;for(n?(r=t.el,o=t.anchor):(r=t.targetStart,o=t.targetAnchor);r&&r!==o;)r.nodeType===1&&r.setAttribute("data-v-owner",a.uid),r=r.nextSibling;a.ut()}}function prepareAnchor(t,n,a,r){const o=n.targetStart=a(""),s=n.targetAnchor=a("");return o[TeleportEndKey]=s,t&&(r(o,t),r(s,t)),s}const leaveCbKey=Symbol("_leaveCb"),enterCbKey=Symbol("_enterCb");function useTransitionState(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{t.isMounted=!0}),onBeforeUnmount(()=>{t.isUnmounting=!0}),t}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},recursiveGetSubtree=t=>{const n=t.subTree;return n.component?recursiveGetSubtree(n.component):n},BaseTransitionImpl={name:"BaseTransition",props:BaseTransitionPropsValidators,setup(t,{slots:n}){const a=getCurrentInstance(),r=useTransitionState();return()=>{const o=n.default&&getTransitionRawChildren(n.default(),!0);if(!o||!o.length)return;const s=findNonCommentChild(o),l=toRaw(t),{mode:c}=l;if(r.isLeaving)return emptyPlaceholder(s);const u=getInnerChild$1(s);if(!u)return emptyPlaceholder(s);let d=resolveTransitionHooks(u,l,r,a,v=>d=v);u.type!==Comment&&setTransitionHooks(u,d);let f=a.subTree&&getInnerChild$1(a.subTree);if(f&&f.type!==Comment&&!isSameVNodeType(f,u)&&recursiveGetSubtree(a).type!==Comment){let v=resolveTransitionHooks(f,l,r,a);if(setTransitionHooks(f,v),c==="out-in"&&u.type!==Comment)return r.isLeaving=!0,v.afterLeave=()=>{r.isLeaving=!1,a.job.flags&8||a.update(),delete v.afterLeave,f=void 0},emptyPlaceholder(s);c==="in-out"&&u.type!==Comment?v.delayLeave=(_,g,y)=>{const b=getLeavingNodesForType(r,f);b[String(f.key)]=f,_[leaveCbKey]=()=>{g(),_[leaveCbKey]=void 0,delete d.delayedLeave,f=void 0},d.delayedLeave=()=>{y(),delete d.delayedLeave,f=void 0}}:f=void 0}else f&&(f=void 0);return s}}};function findNonCommentChild(t){let n=t[0];if(t.length>1){for(const a of t)if(a.type!==Comment){n=a;break}}return n}const BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(t,n){const{leavingVNodes:a}=t;let r=a.get(n.type);return r||(r=Object.create(null),a.set(n.type,r)),r}function resolveTransitionHooks(t,n,a,r,o){const{appear:s,mode:l,persisted:c=!1,onBeforeEnter:u,onEnter:d,onAfterEnter:f,onEnterCancelled:v,onBeforeLeave:_,onLeave:g,onAfterLeave:y,onLeaveCancelled:b,onBeforeAppear:T,onAppear:S,onAfterAppear:C,onAppearCancelled:E}=n,x=String(t.key),A=getLeavingNodesForType(a,t),N=(D,L)=>{D&&callWithAsyncErrorHandling(D,r,9,L)},M=(D,L)=>{const I=L[1];N(D,L),isArray$2(D)?D.every($=>$.length<=1)&&I():D.length<=1&&I()},R={mode:l,persisted:c,beforeEnter(D){let L=u;if(!a.isMounted)if(s)L=T||u;else return;D[leaveCbKey]&&D[leaveCbKey](!0);const I=A[x];I&&isSameVNodeType(t,I)&&I.el[leaveCbKey]&&I.el[leaveCbKey](),N(L,[D])},enter(D){let L=d,I=f,$=v;if(!a.isMounted)if(s)L=S||d,I=C||f,$=E||v;else return;let V=!1;const H=D[enterCbKey]=X=>{V||(V=!0,X?N($,[D]):N(I,[D]),R.delayedLeave&&R.delayedLeave(),D[enterCbKey]=void 0)};L?M(L,[D,H]):H()},leave(D,L){const I=String(t.key);if(D[enterCbKey]&&D[enterCbKey](!0),a.isUnmounting)return L();N(_,[D]);let $=!1;const V=D[leaveCbKey]=H=>{$||($=!0,L(),H?N(b,[D]):N(y,[D]),D[leaveCbKey]=void 0,A[I]===t&&delete A[I])};A[I]=t,g?M(g,[D,V]):V()},clone(D){const L=resolveTransitionHooks(D,n,a,r,o);return o&&o(L),L}};return R}function emptyPlaceholder(t){if(isKeepAlive(t))return t=cloneVNode(t),t.children=null,t}function getInnerChild$1(t){if(!isKeepAlive(t))return isTeleport(t.type)&&t.children?findNonCommentChild(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:n,children:a}=t;if(a){if(n&16)return a[0];if(n&32&&isFunction$1(a.default))return a.default()}}function setTransitionHooks(t,n){t.shapeFlag&6&&t.component?(t.transition=n,setTransitionHooks(t.component.subTree,n)):t.shapeFlag&128?(t.ssContent.transition=n.clone(t.ssContent),t.ssFallback.transition=n.clone(t.ssFallback)):t.transition=n}function getTransitionRawChildren(t,n=!1,a){let r=[],o=0;for(let s=0;s<t.length;s++){let l=t[s];const c=a==null?l.key:String(a)+String(l.key!=null?l.key:s);l.type===Fragment?(l.patchFlag&128&&o++,r=r.concat(getTransitionRawChildren(l.children,n,c))):(n||l.type!==Comment)&&r.push(c!=null?cloneVNode(l,{key:c}):l)}if(o>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}function defineComponent(t,n){return isFunction$1(t)?extend$1({name:t.name},n,{setup:t}):t}function markAsyncBoundary(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const pendingSetRefMap=new WeakMap;function setRef(t,n,a,r,o=!1){if(isArray$2(t)){t.forEach((y,b)=>setRef(y,n&&(isArray$2(n)?n[b]:n),a,r,o));return}if(isAsyncWrapper(r)&&!o){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&setRef(t,n,a,r.component.subTree);return}const s=r.shapeFlag&4?getComponentPublicInstance(r.component):r.el,l=o?null:s,{i:c,r:u}=t,d=n&&n.r,f=c.refs===EMPTY_OBJ$1?c.refs={}:c.refs,v=c.setupState,_=toRaw(v),g=v===EMPTY_OBJ$1?NO:y=>hasOwn$1(_,y);if(d!=null&&d!==u){if(invalidatePendingSetRef(n),isString$1(d))f[d]=null,g(d)&&(v[d]=null);else if(isRef(d)){d.value=null;const y=n;y.k&&(f[y.k]=null)}}if(isFunction$1(u))callWithErrorHandling(u,c,12,[l,f]);else{const y=isString$1(u),b=isRef(u);if(y||b){const T=()=>{if(t.f){const S=y?g(u)?v[u]:f[u]:u.value;if(o)isArray$2(S)&&remove(S,s);else if(isArray$2(S))S.includes(s)||S.push(s);else if(y)f[u]=[s],g(u)&&(v[u]=f[u]);else{const C=[s];u.value=C,t.k&&(f[t.k]=C)}}else y?(f[u]=l,g(u)&&(v[u]=l)):b&&(u.value=l,t.k&&(f[t.k]=l))};if(l){const S=()=>{T(),pendingSetRefMap.delete(t)};S.id=-1,pendingSetRefMap.set(t,S),queuePostRenderEffect(S,a)}else invalidatePendingSetRef(t),T()}}}function invalidatePendingSetRef(t){const n=pendingSetRefMap.get(t);n&&(n.flags|=8,pendingSetRefMap.delete(t))}getGlobalThis().requestIdleCallback;getGlobalThis().cancelIdleCallback;const isAsyncWrapper=t=>!!t.type.__asyncLoader,isKeepAlive=t=>t.type.__isKeepAlive;function onActivated(t,n){registerKeepAliveHook(t,"a",n)}function onDeactivated(t,n){registerKeepAliveHook(t,"da",n)}function registerKeepAliveHook(t,n,a=currentInstance){const r=t.__wdc||(t.__wdc=()=>{let o=a;for(;o;){if(o.isDeactivated)return;o=o.parent}return t()});if(injectHook(n,r,a),a){let o=a.parent;for(;o&&o.parent;)isKeepAlive(o.parent.vnode)&&injectToKeepAliveRoot(r,n,a,o),o=o.parent}}function injectToKeepAliveRoot(t,n,a,r){const o=injectHook(n,t,r,!0);onUnmounted(()=>{remove(r[n],o)},a)}function injectHook(t,n,a=currentInstance,r=!1){if(a){const o=a[t]||(a[t]=[]),s=n.__weh||(n.__weh=(...l)=>{pauseTracking();const c=setCurrentInstance(a),u=callWithAsyncErrorHandling(n,a,t,l);return c(),resetTracking(),u});return r?o.unshift(s):o.push(s),s}}const createHook=t=>(n,a=currentInstance)=>{(!isInSSRComponentSetup||t==="sp")&&injectHook(t,(...r)=>n(...r),a)},onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(t,n=currentInstance){injectHook("ec",t,n)}const COMPONENTS="components",NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveDynamicComponent(t){return isString$1(t)?resolveAsset(COMPONENTS,t,!1)||t:t||NULL_DYNAMIC_COMPONENT}function resolveAsset(t,n,a=!0,r=!1){const o=currentRenderingInstance||currentInstance;if(o){const s=o.type;{const c=getComponentName(s,!1);if(c&&(c===n||c===camelize(n)||c===capitalize(camelize(n))))return s}const l=resolve(o[t]||s[t],n)||resolve(o.appContext[t],n);return!l&&r?s:l}}function resolve(t,n){return t&&(t[n]||t[camelize(n)]||t[capitalize(camelize(n))])}function renderList(t,n,a,r){let o;const s=a,l=isArray$2(t);if(l||isString$1(t)){const c=l&&isReactive(t);let u=!1,d=!1;c&&(u=!isShallow(t),d=isReadonly(t),t=shallowReadArray(t)),o=new Array(t.length);for(let f=0,v=t.length;f<v;f++)o[f]=n(u?d?toReadonly(toReactive(t[f])):toReactive(t[f]):t[f],f,void 0,s)}else if(typeof t=="number"){o=new Array(t);for(let c=0;c<t;c++)o[c]=n(c+1,c,void 0,s)}else if(isObject$4(t))if(t[Symbol.iterator])o=Array.from(t,(c,u)=>n(c,u,void 0,s));else{const c=Object.keys(t);o=new Array(c.length);for(let u=0,d=c.length;u<d;u++){const f=c[u];o[u]=n(t[f],f,u,s)}}else o=[];return o}const getPublicInstance=t=>t?isStatefulComponent(t)?getComponentPublicInstance(t):getPublicInstance(t.parent):null,publicPropertiesMap=extend$1(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>getPublicInstance(t.parent),$root:t=>getPublicInstance(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>resolveMergedOptions(t),$forceUpdate:t=>t.f||(t.f=()=>{queueJob(t.update)}),$nextTick:t=>t.n||(t.n=nextTick.bind(t.proxy)),$watch:t=>instanceWatch.bind(t)}),hasSetupBinding=(t,n)=>t!==EMPTY_OBJ$1&&!t.__isScriptSetup&&hasOwn$1(t,n),PublicInstanceProxyHandlers={get({_:t},n){if(n==="__v_skip")return!0;const{ctx:a,setupState:r,data:o,props:s,accessCache:l,type:c,appContext:u}=t;if(n[0]!=="$"){const _=l[n];if(_!==void 0)switch(_){case 1:return r[n];case 2:return o[n];case 4:return a[n];case 3:return s[n]}else{if(hasSetupBinding(r,n))return l[n]=1,r[n];if(o!==EMPTY_OBJ$1&&hasOwn$1(o,n))return l[n]=2,o[n];if(hasOwn$1(s,n))return l[n]=3,s[n];if(a!==EMPTY_OBJ$1&&hasOwn$1(a,n))return l[n]=4,a[n];shouldCacheAccess&&(l[n]=0)}}const d=publicPropertiesMap[n];let f,v;if(d)return n==="$attrs"&&track(t.attrs,"get",""),d(t);if((f=c.__cssModules)&&(f=f[n]))return f;if(a!==EMPTY_OBJ$1&&hasOwn$1(a,n))return l[n]=4,a[n];if(v=u.config.globalProperties,hasOwn$1(v,n))return v[n]},set({_:t},n,a){const{data:r,setupState:o,ctx:s}=t;return hasSetupBinding(o,n)?(o[n]=a,!0):r!==EMPTY_OBJ$1&&hasOwn$1(r,n)?(r[n]=a,!0):hasOwn$1(t.props,n)||n[0]==="$"&&n.slice(1)in t?!1:(s[n]=a,!0)},has({_:{data:t,setupState:n,accessCache:a,ctx:r,appContext:o,props:s,type:l}},c){let u;return!!(a[c]||t!==EMPTY_OBJ$1&&c[0]!=="$"&&hasOwn$1(t,c)||hasSetupBinding(n,c)||hasOwn$1(s,c)||hasOwn$1(r,c)||hasOwn$1(publicPropertiesMap,c)||hasOwn$1(o.config.globalProperties,c)||(u=l.__cssModules)&&u[c])},defineProperty(t,n,a){return a.get!=null?t._.accessCache[n]=0:hasOwn$1(a,"value")&&this.set(t,n,a.value,null),Reflect.defineProperty(t,n,a)}};function normalizePropsOrEmits(t){return isArray$2(t)?t.reduce((n,a)=>(n[a]=null,n),{}):t}let shouldCacheAccess=!0;function applyOptions(t){const n=resolveMergedOptions(t),a=t.proxy,r=t.ctx;shouldCacheAccess=!1,n.beforeCreate&&callHook$1(n.beforeCreate,t,"bc");const{data:o,computed:s,methods:l,watch:c,provide:u,inject:d,created:f,beforeMount:v,mounted:_,beforeUpdate:g,updated:y,activated:b,deactivated:T,beforeDestroy:S,beforeUnmount:C,destroyed:E,unmounted:x,render:A,renderTracked:N,renderTriggered:M,errorCaptured:R,serverPrefetch:D,expose:L,inheritAttrs:I,components:$,directives:V,filters:H}=n;if(d&&resolveInjections(d,r,null),l)for(const z in l){const G=l[z];isFunction$1(G)&&(r[z]=G.bind(a))}if(o){const z=o.call(a,a);isObject$4(z)&&(t.data=reactive(z))}if(shouldCacheAccess=!0,s)for(const z in s){const G=s[z],oe=isFunction$1(G)?G.bind(a,a):isFunction$1(G.get)?G.get.bind(a,a):NOOP,ne=!isFunction$1(G)&&isFunction$1(G.set)?G.set.bind(a):NOOP,ue=computed({get:oe,set:ne});Object.defineProperty(r,z,{enumerable:!0,configurable:!0,get:()=>ue.value,set:se=>ue.value=se})}if(c)for(const z in c)createWatcher(c[z],r,a,z);if(u){const z=isFunction$1(u)?u.call(a):u;Reflect.ownKeys(z).forEach(G=>{provide(G,z[G])})}f&&callHook$1(f,t,"c");function q(z,G){isArray$2(G)?G.forEach(oe=>z(oe.bind(a))):G&&z(G.bind(a))}if(q(onBeforeMount,v),q(onMounted,_),q(onBeforeUpdate,g),q(onUpdated,y),q(onActivated,b),q(onDeactivated,T),q(onErrorCaptured,R),q(onRenderTracked,N),q(onRenderTriggered,M),q(onBeforeUnmount,C),q(onUnmounted,x),q(onServerPrefetch,D),isArray$2(L))if(L.length){const z=t.exposed||(t.exposed={});L.forEach(G=>{Object.defineProperty(z,G,{get:()=>a[G],set:oe=>a[G]=oe,enumerable:!0})})}else t.exposed||(t.exposed={});A&&t.render===NOOP&&(t.render=A),I!=null&&(t.inheritAttrs=I),$&&(t.components=$),V&&(t.directives=V),D&&markAsyncBoundary(t)}function resolveInjections(t,n,a=NOOP){isArray$2(t)&&(t=normalizeInject(t));for(const r in t){const o=t[r];let s;isObject$4(o)?"default"in o?s=inject(o.from||r,o.default,!0):s=inject(o.from||r):s=inject(o),isRef(s)?Object.defineProperty(n,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:l=>s.value=l}):n[r]=s}}function callHook$1(t,n,a){callWithAsyncErrorHandling(isArray$2(t)?t.map(r=>r.bind(n.proxy)):t.bind(n.proxy),n,a)}function createWatcher(t,n,a,r){let o=r.includes(".")?createPathGetter(a,r):()=>a[r];if(isString$1(t)){const s=n[t];isFunction$1(s)&&watch(o,s)}else if(isFunction$1(t))watch(o,t.bind(a));else if(isObject$4(t))if(isArray$2(t))t.forEach(s=>createWatcher(s,n,a,r));else{const s=isFunction$1(t.handler)?t.handler.bind(a):n[t.handler];isFunction$1(s)&&watch(o,s,t)}}function resolveMergedOptions(t){const n=t.type,{mixins:a,extends:r}=n,{mixins:o,optionsCache:s,config:{optionMergeStrategies:l}}=t.appContext,c=s.get(n);let u;return c?u=c:!o.length&&!a&&!r?u=n:(u={},o.length&&o.forEach(d=>mergeOptions(u,d,l,!0)),mergeOptions(u,n,l)),isObject$4(n)&&s.set(n,u),u}function mergeOptions(t,n,a,r=!1){const{mixins:o,extends:s}=n;s&&mergeOptions(t,s,a,!0),o&&o.forEach(l=>mergeOptions(t,l,a,!0));for(const l in n)if(!(r&&l==="expose")){const c=internalOptionMergeStrats[l]||a&&a[l];t[l]=c?c(t[l],n[l]):n[l]}return t}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(t,n){return n?t?function(){return extend$1(isFunction$1(t)?t.call(this,this):t,isFunction$1(n)?n.call(this,this):n)}:n:t}function mergeInject(t,n){return mergeObjectOptions(normalizeInject(t),normalizeInject(n))}function normalizeInject(t){if(isArray$2(t)){const n={};for(let a=0;a<t.length;a++)n[t[a]]=t[a];return n}return t}function mergeAsArray(t,n){return t?[...new Set([].concat(t,n))]:n}function mergeObjectOptions(t,n){return t?extend$1(Object.create(null),t,n):n}function mergeEmitsOrPropsOptions(t,n){return t?isArray$2(t)&&isArray$2(n)?[...new Set([...t,...n])]:extend$1(Object.create(null),normalizePropsOrEmits(t),normalizePropsOrEmits(n??{})):n}function mergeWatchOptions(t,n){if(!t)return n;if(!n)return t;const a=extend$1(Object.create(null),t);for(const r in n)a[r]=mergeAsArray(t[r],n[r]);return a}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(t,n){return function(r,o=null){isFunction$1(r)||(r=extend$1({},r)),o!=null&&!isObject$4(o)&&(o=null);const s=createAppContext(),l=new WeakSet,c=[];let u=!1;const d=s.app={_uid:uid$1++,_component:r,_props:o,_container:null,_context:s,_instance:null,version:version$1,get config(){return s.config},set config(f){},use(f,...v){return l.has(f)||(f&&isFunction$1(f.install)?(l.add(f),f.install(d,...v)):isFunction$1(f)&&(l.add(f),f(d,...v))),d},mixin(f){return s.mixins.includes(f)||s.mixins.push(f),d},component(f,v){return v?(s.components[f]=v,d):s.components[f]},directive(f,v){return v?(s.directives[f]=v,d):s.directives[f]},mount(f,v,_){if(!u){const g=d._ceVNode||createVNode(r,o);return g.appContext=s,_===!0?_="svg":_===!1&&(_=void 0),t(g,f,_),u=!0,d._container=f,f.__vue_app__=d,getComponentPublicInstance(g.component)}},onUnmount(f){c.push(f)},unmount(){u&&(callWithAsyncErrorHandling(c,d._instance,16),t(null,d._container),delete d._container.__vue_app__)},provide(f,v){return s.provides[f]=v,d},runWithContext(f){const v=currentApp;currentApp=d;try{return f()}finally{currentApp=v}}};return d}}let currentApp=null;const getModelModifiers=(t,n)=>n==="modelValue"||n==="model-value"?t.modelModifiers:t[`${n}Modifiers`]||t[`${camelize(n)}Modifiers`]||t[`${hyphenate(n)}Modifiers`];function emit(t,n,...a){if(t.isUnmounted)return;const r=t.vnode.props||EMPTY_OBJ$1;let o=a;const s=n.startsWith("update:"),l=s&&getModelModifiers(r,n.slice(7));l&&(l.trim&&(o=a.map(f=>isString$1(f)?f.trim():f)),l.number&&(o=a.map(looseToNumber)));let c,u=r[c=toHandlerKey(n)]||r[c=toHandlerKey(camelize(n))];!u&&s&&(u=r[c=toHandlerKey(hyphenate(n))]),u&&callWithAsyncErrorHandling(u,t,6,o);const d=r[c+"Once"];if(d){if(!t.emitted)t.emitted={};else if(t.emitted[c])return;t.emitted[c]=!0,callWithAsyncErrorHandling(d,t,6,o)}}const mixinEmitsCache=new WeakMap;function normalizeEmitsOptions(t,n,a=!1){const r=a?mixinEmitsCache:n.emitsCache,o=r.get(t);if(o!==void 0)return o;const s=t.emits;let l={},c=!1;if(!isFunction$1(t)){const u=d=>{const f=normalizeEmitsOptions(d,n,!0);f&&(c=!0,extend$1(l,f))};!a&&n.mixins.length&&n.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}return!s&&!c?(isObject$4(t)&&r.set(t,null),null):(isArray$2(s)?s.forEach(u=>l[u]=null):extend$1(l,s),isObject$4(t)&&r.set(t,l),l)}function isEmitListener(t,n){return!t||!isOn$1(n)?!1:(n=n.slice(2).replace(/Once$/,""),hasOwn$1(t,n[0].toLowerCase()+n.slice(1))||hasOwn$1(t,hyphenate(n))||hasOwn$1(t,n))}function markAttrsAccessed(){}function renderComponentRoot(t){const{type:n,vnode:a,proxy:r,withProxy:o,propsOptions:[s],slots:l,attrs:c,emit:u,render:d,renderCache:f,props:v,data:_,setupState:g,ctx:y,inheritAttrs:b}=t,T=setCurrentRenderingInstance(t);let S,C;try{if(a.shapeFlag&4){const x=o||r,A=x;S=normalizeVNode(d.call(A,x,f,v,g,_,y)),C=c}else{const x=n;S=normalizeVNode(x.length>1?x(v,{attrs:c,slots:l,emit:u}):x(v,null)),C=n.props?c:getFunctionalFallthrough(c)}}catch(x){blockStack.length=0,handleError(x,t,1),S=createVNode(Comment)}let E=S;if(C&&b!==!1){const x=Object.keys(C),{shapeFlag:A}=E;x.length&&A&7&&(s&&x.some(isModelListener)&&(C=filterModelListeners(C,s)),E=cloneVNode(E,C,!1,!0))}return a.dirs&&(E=cloneVNode(E,null,!1,!0),E.dirs=E.dirs?E.dirs.concat(a.dirs):a.dirs),a.transition&&setTransitionHooks(E,a.transition),S=E,setCurrentRenderingInstance(T),S}const getFunctionalFallthrough=t=>{let n;for(const a in t)(a==="class"||a==="style"||isOn$1(a))&&((n||(n={}))[a]=t[a]);return n},filterModelListeners=(t,n)=>{const a={};for(const r in t)(!isModelListener(r)||!(r.slice(9)in n))&&(a[r]=t[r]);return a};function shouldUpdateComponent(t,n,a){const{props:r,children:o,component:s}=t,{props:l,children:c,patchFlag:u}=n,d=s.emitsOptions;if(n.dirs||n.transition)return!0;if(a&&u>=0){if(u&1024)return!0;if(u&16)return r?hasPropsChanged(r,l,d):!!l;if(u&8){const f=n.dynamicProps;for(let v=0;v<f.length;v++){const _=f[v];if(l[_]!==r[_]&&!isEmitListener(d,_))return!0}}}else return(o||c)&&(!c||!c.$stable)?!0:r===l?!1:r?l?hasPropsChanged(r,l,d):!0:!!l;return!1}function hasPropsChanged(t,n,a){const r=Object.keys(n);if(r.length!==Object.keys(t).length)return!0;for(let o=0;o<r.length;o++){const s=r[o];if(n[s]!==t[s]&&!isEmitListener(a,s))return!0}return!1}function updateHOCHostEl({vnode:t,parent:n},a){for(;n;){const r=n.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=n.vnode).el=a,n=n.parent;else break}}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=t=>Object.getPrototypeOf(t)===internalObjectProto;function initProps$1(t,n,a,r=!1){const o={},s=createInternalObject();t.propsDefaults=Object.create(null),setFullProps(t,n,o,s);for(const l in t.propsOptions[0])l in o||(o[l]=void 0);a?t.props=r?o:shallowReactive(o):t.type.props?t.props=o:t.props=s,t.attrs=s}function updateProps$2(t,n,a,r){const{props:o,attrs:s,vnode:{patchFlag:l}}=t,c=toRaw(o),[u]=t.propsOptions;let d=!1;if((r||l>0)&&!(l&16)){if(l&8){const f=t.vnode.dynamicProps;for(let v=0;v<f.length;v++){let _=f[v];if(isEmitListener(t.emitsOptions,_))continue;const g=n[_];if(u)if(hasOwn$1(s,_))g!==s[_]&&(s[_]=g,d=!0);else{const y=camelize(_);o[y]=resolvePropValue(u,c,y,g,t,!1)}else g!==s[_]&&(s[_]=g,d=!0)}}}else{setFullProps(t,n,o,s)&&(d=!0);let f;for(const v in c)(!n||!hasOwn$1(n,v)&&((f=hyphenate(v))===v||!hasOwn$1(n,f)))&&(u?a&&(a[v]!==void 0||a[f]!==void 0)&&(o[v]=resolvePropValue(u,c,v,void 0,t,!0)):delete o[v]);if(s!==c)for(const v in s)(!n||!hasOwn$1(n,v))&&(delete s[v],d=!0)}d&&trigger$1(t.attrs,"set","")}function setFullProps(t,n,a,r){const[o,s]=t.propsOptions;let l=!1,c;if(n)for(let u in n){if(isReservedProp(u))continue;const d=n[u];let f;o&&hasOwn$1(o,f=camelize(u))?!s||!s.includes(f)?a[f]=d:(c||(c={}))[f]=d:isEmitListener(t.emitsOptions,u)||(!(u in r)||d!==r[u])&&(r[u]=d,l=!0)}if(s){const u=toRaw(a),d=c||EMPTY_OBJ$1;for(let f=0;f<s.length;f++){const v=s[f];a[v]=resolvePropValue(o,u,v,d[v],t,!hasOwn$1(d,v))}}return l}function resolvePropValue(t,n,a,r,o,s){const l=t[a];if(l!=null){const c=hasOwn$1(l,"default");if(c&&r===void 0){const u=l.default;if(l.type!==Function&&!l.skipFactory&&isFunction$1(u)){const{propsDefaults:d}=o;if(a in d)r=d[a];else{const f=setCurrentInstance(o);r=d[a]=u.call(null,n),f()}}else r=u;o.ce&&o.ce._setProp(a,r)}l[0]&&(s&&!c?r=!1:l[1]&&(r===""||r===hyphenate(a))&&(r=!0))}return r}const mixinPropsCache=new WeakMap;function normalizePropsOptions(t,n,a=!1){const r=a?mixinPropsCache:n.propsCache,o=r.get(t);if(o)return o;const s=t.props,l={},c=[];let u=!1;if(!isFunction$1(t)){const f=v=>{u=!0;const[_,g]=normalizePropsOptions(v,n,!0);extend$1(l,_),g&&c.push(...g)};!a&&n.mixins.length&&n.mixins.forEach(f),t.extends&&f(t.extends),t.mixins&&t.mixins.forEach(f)}if(!s&&!u)return isObject$4(t)&&r.set(t,EMPTY_ARR),EMPTY_ARR;if(isArray$2(s))for(let f=0;f<s.length;f++){const v=camelize(s[f]);validatePropName(v)&&(l[v]=EMPTY_OBJ$1)}else if(s)for(const f in s){const v=camelize(f);if(validatePropName(v)){const _=s[f],g=l[v]=isArray$2(_)||isFunction$1(_)?{type:_}:extend$1({},_),y=g.type;let b=!1,T=!0;if(isArray$2(y))for(let S=0;S<y.length;++S){const C=y[S],E=isFunction$1(C)&&C.name;if(E==="Boolean"){b=!0;break}else E==="String"&&(T=!1)}else b=isFunction$1(y)&&y.name==="Boolean";g[0]=b,g[1]=T,(b||hasOwn$1(g,"default"))&&c.push(v)}}const d=[l,c];return isObject$4(t)&&r.set(t,d),d}function validatePropName(t){return t[0]!=="$"&&!isReservedProp(t)}const isInternalKey=t=>t==="_"||t==="_ctx"||t==="$stable",normalizeSlotValue=t=>isArray$2(t)?t.map(normalizeVNode):[normalizeVNode(t)],normalizeSlot=(t,n,a)=>{if(n._n)return n;const r=withCtx((...o)=>normalizeSlotValue(n(...o)),a);return r._c=!1,r},normalizeObjectSlots=(t,n,a)=>{const r=t._ctx;for(const o in t){if(isInternalKey(o))continue;const s=t[o];if(isFunction$1(s))n[o]=normalizeSlot(o,s,r);else if(s!=null){const l=normalizeSlotValue(s);n[o]=()=>l}}},normalizeVNodeSlots=(t,n)=>{const a=normalizeSlotValue(n);t.slots.default=()=>a},assignSlots=(t,n,a)=>{for(const r in n)(a||!isInternalKey(r))&&(t[r]=n[r])},initSlots=(t,n,a)=>{const r=t.slots=createInternalObject();if(t.vnode.shapeFlag&32){const o=n._;o?(assignSlots(r,n,a),a&&def(r,"_",o,!0)):normalizeObjectSlots(n,r)}else n&&normalizeVNodeSlots(t,n)},updateSlots=(t,n,a)=>{const{vnode:r,slots:o}=t;let s=!0,l=EMPTY_OBJ$1;if(r.shapeFlag&32){const c=n._;c?a&&c===1?s=!1:assignSlots(o,n,a):(s=!n.$stable,normalizeObjectSlots(n,o)),l=n}else n&&(normalizeVNodeSlots(t,n),l={default:1});if(s)for(const c in o)!isInternalKey(c)&&l[c]==null&&delete o[c]},queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(t){return baseCreateRenderer(t)}function baseCreateRenderer(t,n){const a=getGlobalThis();a.__VUE__=!0;const{insert:r,remove:o,patchProp:s,createElement:l,createText:c,createComment:u,setText:d,setElementText:f,parentNode:v,nextSibling:_,setScopeId:g=NOOP,insertStaticContent:y}=t,b=(w,P,F,Y=null,K=null,j=null,J=void 0,ee=null,te=!!P.dynamicChildren)=>{if(w===P)return;w&&!isSameVNodeType(w,P)&&(Y=le(w),se(w,K,j,!0),w=null),P.patchFlag===-2&&(te=!1,P.dynamicChildren=null);const{type:Z,ref:he,shapeFlag:re}=P;switch(Z){case Text:T(w,P,F,Y);break;case Comment:S(w,P,F,Y);break;case Static:w==null&&C(P,F,Y,J);break;case Fragment:$(w,P,F,Y,K,j,J,ee,te);break;default:re&1?A(w,P,F,Y,K,j,J,ee,te):re&6?V(w,P,F,Y,K,j,J,ee,te):(re&64||re&128)&&Z.process(w,P,F,Y,K,j,J,ee,te,U)}he!=null&&K?setRef(he,w&&w.ref,j,P||w,!P):he==null&&w&&w.ref!=null&&setRef(w.ref,null,j,w,!0)},T=(w,P,F,Y)=>{if(w==null)r(P.el=c(P.children),F,Y);else{const K=P.el=w.el;P.children!==w.children&&d(K,P.children)}},S=(w,P,F,Y)=>{w==null?r(P.el=u(P.children||""),F,Y):P.el=w.el},C=(w,P,F,Y)=>{[w.el,w.anchor]=y(w.children,P,F,Y,w.el,w.anchor)},E=({el:w,anchor:P},F,Y)=>{let K;for(;w&&w!==P;)K=_(w),r(w,F,Y),w=K;r(P,F,Y)},x=({el:w,anchor:P})=>{let F;for(;w&&w!==P;)F=_(w),o(w),w=F;o(P)},A=(w,P,F,Y,K,j,J,ee,te)=>{if(P.type==="svg"?J="svg":P.type==="math"&&(J="mathml"),w==null)N(P,F,Y,K,j,J,ee,te);else{const Z=w.el&&w.el._isVueCE?w.el:null;try{Z&&Z._beginPatch(),D(w,P,K,j,J,ee,te)}finally{Z&&Z._endPatch()}}},N=(w,P,F,Y,K,j,J,ee)=>{let te,Z;const{props:he,shapeFlag:re,transition:de,dirs:ge}=w;if(te=w.el=l(w.type,j,he&&he.is,he),re&8?f(te,w.children):re&16&&R(w.children,te,null,Y,K,resolveChildrenNamespace(w,j),J,ee),ge&&invokeDirectiveHook(w,null,Y,"created"),M(te,w,w.scopeId,J,Y),he){for(const be in he)be!=="value"&&!isReservedProp(be)&&s(te,be,null,he[be],j,Y);"value"in he&&s(te,"value",null,he.value,j),(Z=he.onVnodeBeforeMount)&&invokeVNodeHook(Z,Y,w)}ge&&invokeDirectiveHook(w,null,Y,"beforeMount");const _e=needTransition(K,de);_e&&de.beforeEnter(te),r(te,P,F),((Z=he&&he.onVnodeMounted)||_e||ge)&&queuePostRenderEffect(()=>{Z&&invokeVNodeHook(Z,Y,w),_e&&de.enter(te),ge&&invokeDirectiveHook(w,null,Y,"mounted")},K)},M=(w,P,F,Y,K)=>{if(F&&g(w,F),Y)for(let j=0;j<Y.length;j++)g(w,Y[j]);if(K){let j=K.subTree;if(P===j||isSuspense(j.type)&&(j.ssContent===P||j.ssFallback===P)){const J=K.vnode;M(w,J,J.scopeId,J.slotScopeIds,K.parent)}}},R=(w,P,F,Y,K,j,J,ee,te=0)=>{for(let Z=te;Z<w.length;Z++){const he=w[Z]=ee?cloneIfMounted(w[Z]):normalizeVNode(w[Z]);b(null,he,P,F,Y,K,j,J,ee)}},D=(w,P,F,Y,K,j,J)=>{const ee=P.el=w.el;let{patchFlag:te,dynamicChildren:Z,dirs:he}=P;te|=w.patchFlag&16;const re=w.props||EMPTY_OBJ$1,de=P.props||EMPTY_OBJ$1;let ge;if(F&&toggleRecurse(F,!1),(ge=de.onVnodeBeforeUpdate)&&invokeVNodeHook(ge,F,P,w),he&&invokeDirectiveHook(P,w,F,"beforeUpdate"),F&&toggleRecurse(F,!0),(re.innerHTML&&de.innerHTML==null||re.textContent&&de.textContent==null)&&f(ee,""),Z?L(w.dynamicChildren,Z,ee,F,Y,resolveChildrenNamespace(P,K),j):J||G(w,P,ee,null,F,Y,resolveChildrenNamespace(P,K),j,!1),te>0){if(te&16)I(ee,re,de,F,K);else if(te&2&&re.class!==de.class&&s(ee,"class",null,de.class,K),te&4&&s(ee,"style",re.style,de.style,K),te&8){const _e=P.dynamicProps;for(let be=0;be<_e.length;be++){const me=_e[be],Ae=re[me],Ce=de[me];(Ce!==Ae||me==="value")&&s(ee,me,Ae,Ce,K,F)}}te&1&&w.children!==P.children&&f(ee,P.children)}else!J&&Z==null&&I(ee,re,de,F,K);((ge=de.onVnodeUpdated)||he)&&queuePostRenderEffect(()=>{ge&&invokeVNodeHook(ge,F,P,w),he&&invokeDirectiveHook(P,w,F,"updated")},Y)},L=(w,P,F,Y,K,j,J)=>{for(let ee=0;ee<P.length;ee++){const te=w[ee],Z=P[ee],he=te.el&&(te.type===Fragment||!isSameVNodeType(te,Z)||te.shapeFlag&198)?v(te.el):F;b(te,Z,he,null,Y,K,j,J,!0)}},I=(w,P,F,Y,K)=>{if(P!==F){if(P!==EMPTY_OBJ$1)for(const j in P)!isReservedProp(j)&&!(j in F)&&s(w,j,P[j],null,K,Y);for(const j in F){if(isReservedProp(j))continue;const J=F[j],ee=P[j];J!==ee&&j!=="value"&&s(w,j,ee,J,K,Y)}"value"in F&&s(w,"value",P.value,F.value,K)}},$=(w,P,F,Y,K,j,J,ee,te)=>{const Z=P.el=w?w.el:c(""),he=P.anchor=w?w.anchor:c("");let{patchFlag:re,dynamicChildren:de,slotScopeIds:ge}=P;ge&&(ee=ee?ee.concat(ge):ge),w==null?(r(Z,F,Y),r(he,F,Y),R(P.children||[],F,he,K,j,J,ee,te)):re>0&&re&64&&de&&w.dynamicChildren&&w.dynamicChildren.length===de.length?(L(w.dynamicChildren,de,F,K,j,J,ee),(P.key!=null||K&&P===K.subTree)&&traverseStaticChildren(w,P,!0)):G(w,P,F,he,K,j,J,ee,te)},V=(w,P,F,Y,K,j,J,ee,te)=>{P.slotScopeIds=ee,w==null?P.shapeFlag&512?K.ctx.activate(P,F,Y,J,te):H(P,F,Y,K,j,J,te):X(w,P,te)},H=(w,P,F,Y,K,j,J)=>{const ee=w.component=createComponentInstance(w,Y,K);if(isKeepAlive(w)&&(ee.ctx.renderer=U),setupComponent(ee,!1,J),ee.asyncDep){if(K&&K.registerDep(ee,q,J),!w.el){const te=ee.subTree=createVNode(Comment);S(null,te,P,F),w.placeholder=te.el}}else q(ee,w,P,F,K,j,J)},X=(w,P,F)=>{const Y=P.component=w.component;if(shouldUpdateComponent(w,P,F))if(Y.asyncDep&&!Y.asyncResolved){z(Y,P,F);return}else Y.next=P,Y.update();else P.el=w.el,Y.vnode=P},q=(w,P,F,Y,K,j,J)=>{const ee=()=>{if(w.isMounted){let{next:re,bu:de,u:ge,parent:_e,vnode:be}=w;{const Ee=locateNonHydratedAsyncRoot(w);if(Ee){re&&(re.el=be.el,z(w,re,J)),Ee.asyncDep.then(()=>{w.isUnmounted||ee()});return}}let me=re,Ae;toggleRecurse(w,!1),re?(re.el=be.el,z(w,re,J)):re=be,de&&invokeArrayFns(de),(Ae=re.props&&re.props.onVnodeBeforeUpdate)&&invokeVNodeHook(Ae,_e,re,be),toggleRecurse(w,!0);const Ce=renderComponentRoot(w),Me=w.subTree;w.subTree=Ce,b(Me,Ce,v(Me.el),le(Me),w,K,j),re.el=Ce.el,me===null&&updateHOCHostEl(w,Ce.el),ge&&queuePostRenderEffect(ge,K),(Ae=re.props&&re.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(Ae,_e,re,be),K)}else{let re;const{el:de,props:ge}=P,{bm:_e,m:be,parent:me,root:Ae,type:Ce}=w,Me=isAsyncWrapper(P);toggleRecurse(w,!1),_e&&invokeArrayFns(_e),!Me&&(re=ge&&ge.onVnodeBeforeMount)&&invokeVNodeHook(re,me,P),toggleRecurse(w,!0);{Ae.ce&&Ae.ce._def.shadowRoot!==!1&&Ae.ce._injectChildStyle(Ce);const Ee=w.subTree=renderComponentRoot(w);b(null,Ee,F,Y,w,K,j),P.el=Ee.el}if(be&&queuePostRenderEffect(be,K),!Me&&(re=ge&&ge.onVnodeMounted)){const Ee=P;queuePostRenderEffect(()=>invokeVNodeHook(re,me,Ee),K)}(P.shapeFlag&256||me&&isAsyncWrapper(me.vnode)&&me.vnode.shapeFlag&256)&&w.a&&queuePostRenderEffect(w.a,K),w.isMounted=!0,P=F=Y=null}};w.scope.on();const te=w.effect=new ReactiveEffect(ee);w.scope.off();const Z=w.update=te.run.bind(te),he=w.job=te.runIfDirty.bind(te);he.i=w,he.id=w.uid,te.scheduler=()=>queueJob(he),toggleRecurse(w,!0),Z()},z=(w,P,F)=>{P.component=w;const Y=w.vnode.props;w.vnode=P,w.next=null,updateProps$2(w,P.props,Y,F),updateSlots(w,P.children,F),pauseTracking(),flushPreFlushCbs(w),resetTracking()},G=(w,P,F,Y,K,j,J,ee,te=!1)=>{const Z=w&&w.children,he=w?w.shapeFlag:0,re=P.children,{patchFlag:de,shapeFlag:ge}=P;if(de>0){if(de&128){ne(Z,re,F,Y,K,j,J,ee,te);return}else if(de&256){oe(Z,re,F,Y,K,j,J,ee,te);return}}ge&8?(he&16&&ve(Z,K,j),re!==Z&&f(F,re)):he&16?ge&16?ne(Z,re,F,Y,K,j,J,ee,te):ve(Z,K,j,!0):(he&8&&f(F,""),ge&16&&R(re,F,Y,K,j,J,ee,te))},oe=(w,P,F,Y,K,j,J,ee,te)=>{w=w||EMPTY_ARR,P=P||EMPTY_ARR;const Z=w.length,he=P.length,re=Math.min(Z,he);let de;for(de=0;de<re;de++){const ge=P[de]=te?cloneIfMounted(P[de]):normalizeVNode(P[de]);b(w[de],ge,F,null,K,j,J,ee,te)}Z>he?ve(w,K,j,!0,!1,re):R(P,F,Y,K,j,J,ee,te,re)},ne=(w,P,F,Y,K,j,J,ee,te)=>{let Z=0;const he=P.length;let re=w.length-1,de=he-1;for(;Z<=re&&Z<=de;){const ge=w[Z],_e=P[Z]=te?cloneIfMounted(P[Z]):normalizeVNode(P[Z]);if(isSameVNodeType(ge,_e))b(ge,_e,F,null,K,j,J,ee,te);else break;Z++}for(;Z<=re&&Z<=de;){const ge=w[re],_e=P[de]=te?cloneIfMounted(P[de]):normalizeVNode(P[de]);if(isSameVNodeType(ge,_e))b(ge,_e,F,null,K,j,J,ee,te);else break;re--,de--}if(Z>re){if(Z<=de){const ge=de+1,_e=ge<he?P[ge].el:Y;for(;Z<=de;)b(null,P[Z]=te?cloneIfMounted(P[Z]):normalizeVNode(P[Z]),F,_e,K,j,J,ee,te),Z++}}else if(Z>de)for(;Z<=re;)se(w[Z],K,j,!0),Z++;else{const ge=Z,_e=Z,be=new Map;for(Z=_e;Z<=de;Z++){const Ne=P[Z]=te?cloneIfMounted(P[Z]):normalizeVNode(P[Z]);Ne.key!=null&&be.set(Ne.key,Z)}let me,Ae=0;const Ce=de-_e+1;let Me=!1,Ee=0;const De=new Array(Ce);for(Z=0;Z<Ce;Z++)De[Z]=0;for(Z=ge;Z<=re;Z++){const Ne=w[Z];if(Ae>=Ce){se(Ne,K,j,!0);continue}let $e;if(Ne.key!=null)$e=be.get(Ne.key);else for(me=_e;me<=de;me++)if(De[me-_e]===0&&isSameVNodeType(Ne,P[me])){$e=me;break}$e===void 0?se(Ne,K,j,!0):(De[$e-_e]=Z+1,$e>=Ee?Ee=$e:Me=!0,b(Ne,P[$e],F,null,K,j,J,ee,te),Ae++)}const ze=Me?getSequence(De):EMPTY_ARR;for(me=ze.length-1,Z=Ce-1;Z>=0;Z--){const Ne=_e+Z,$e=P[Ne],Ye=P[Ne+1],We=Ne+1<he?Ye.el||resolveAsyncComponentPlaceholder(Ye):Y;De[Z]===0?b(null,$e,F,We,K,j,J,ee,te):Me&&(me<0||Z!==ze[me]?ue($e,F,We,2):me--)}}},ue=(w,P,F,Y,K=null)=>{const{el:j,type:J,transition:ee,children:te,shapeFlag:Z}=w;if(Z&6){ue(w.component.subTree,P,F,Y);return}if(Z&128){w.suspense.move(P,F,Y);return}if(Z&64){J.move(w,P,F,U);return}if(J===Fragment){r(j,P,F);for(let re=0;re<te.length;re++)ue(te[re],P,F,Y);r(w.anchor,P,F);return}if(J===Static){E(w,P,F);return}if(Y!==2&&Z&1&&ee)if(Y===0)ee.beforeEnter(j),r(j,P,F),queuePostRenderEffect(()=>ee.enter(j),K);else{const{leave:re,delayLeave:de,afterLeave:ge}=ee,_e=()=>{w.ctx.isUnmounted?o(j):r(j,P,F)},be=()=>{j._isLeaving&&j[leaveCbKey](!0),re(j,()=>{_e(),ge&&ge()})};de?de(j,_e,be):be()}else r(j,P,F)},se=(w,P,F,Y=!1,K=!1)=>{const{type:j,props:J,ref:ee,children:te,dynamicChildren:Z,shapeFlag:he,patchFlag:re,dirs:de,cacheIndex:ge}=w;if(re===-2&&(K=!1),ee!=null&&(pauseTracking(),setRef(ee,null,F,w,!0),resetTracking()),ge!=null&&(P.renderCache[ge]=void 0),he&256){P.ctx.deactivate(w);return}const _e=he&1&&de,be=!isAsyncWrapper(w);let me;if(be&&(me=J&&J.onVnodeBeforeUnmount)&&invokeVNodeHook(me,P,w),he&6)ie(w.component,F,Y);else{if(he&128){w.suspense.unmount(F,Y);return}_e&&invokeDirectiveHook(w,null,P,"beforeUnmount"),he&64?w.type.remove(w,P,F,U,Y):Z&&!Z.hasOnce&&(j!==Fragment||re>0&&re&64)?ve(Z,P,F,!1,!0):(j===Fragment&&re&384||!K&&he&16)&&ve(te,P,F),Y&&fe(w)}(be&&(me=J&&J.onVnodeUnmounted)||_e)&&queuePostRenderEffect(()=>{me&&invokeVNodeHook(me,P,w),_e&&invokeDirectiveHook(w,null,P,"unmounted")},F)},fe=w=>{const{type:P,el:F,anchor:Y,transition:K}=w;if(P===Fragment){ae(F,Y);return}if(P===Static){x(w);return}const j=()=>{o(F),K&&!K.persisted&&K.afterLeave&&K.afterLeave()};if(w.shapeFlag&1&&K&&!K.persisted){const{leave:J,delayLeave:ee}=K,te=()=>J(F,j);ee?ee(w.el,j,te):te()}else j()},ae=(w,P)=>{let F;for(;w!==P;)F=_(w),o(w),w=F;o(P)},ie=(w,P,F)=>{const{bum:Y,scope:K,job:j,subTree:J,um:ee,m:te,a:Z}=w;invalidateMount(te),invalidateMount(Z),Y&&invokeArrayFns(Y),K.stop(),j&&(j.flags|=8,se(J,w,P,F)),ee&&queuePostRenderEffect(ee,P),queuePostRenderEffect(()=>{w.isUnmounted=!0},P)},ve=(w,P,F,Y=!1,K=!1,j=0)=>{for(let J=j;J<w.length;J++)se(w[J],P,F,Y,K)},le=w=>{if(w.shapeFlag&6)return le(w.component.subTree);if(w.shapeFlag&128)return w.suspense.next();const P=_(w.anchor||w.el),F=P&&P[TeleportEndKey];return F?_(F):P};let pe=!1;const Te=(w,P,F)=>{let Y;w==null?P._vnode&&(se(P._vnode,null,null,!0),Y=P._vnode.component):b(P._vnode||null,w,P,null,null,null,F),P._vnode=w,pe||(pe=!0,flushPreFlushCbs(Y),flushPostFlushCbs(),pe=!1)},U={p:b,um:se,m:ue,r:fe,mt:H,mc:R,pc:G,pbc:L,n:le,o:t};return{render:Te,hydrate:void 0,createApp:createAppAPI(Te)}}function resolveChildrenNamespace({type:t,props:n},a){return a==="svg"&&t==="foreignObject"||a==="mathml"&&t==="annotation-xml"&&n&&n.encoding&&n.encoding.includes("html")?void 0:a}function toggleRecurse({effect:t,job:n},a){a?(t.flags|=32,n.flags|=4):(t.flags&=-33,n.flags&=-5)}function needTransition(t,n){return(!t||t&&!t.pendingBranch)&&n&&!n.persisted}function traverseStaticChildren(t,n,a=!1){const r=t.children,o=n.children;if(isArray$2(r)&&isArray$2(o))for(let s=0;s<r.length;s++){const l=r[s];let c=o[s];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=o[s]=cloneIfMounted(o[s]),c.el=l.el),!a&&c.patchFlag!==-2&&traverseStaticChildren(l,c)),c.type===Text&&(c.patchFlag!==-1?c.el=l.el:c.__elIndex=s+(t.type===Fragment?1:0)),c.type===Comment&&!c.el&&(c.el=l.el)}}function getSequence(t){const n=t.slice(),a=[0];let r,o,s,l,c;const u=t.length;for(r=0;r<u;r++){const d=t[r];if(d!==0){if(o=a[a.length-1],t[o]<d){n[r]=o,a.push(r);continue}for(s=0,l=a.length-1;s<l;)c=s+l>>1,t[a[c]]<d?s=c+1:l=c;d<t[a[s]]&&(s>0&&(n[r]=a[s-1]),a[s]=r)}}for(s=a.length,l=a[s-1];s-- >0;)a[s]=l,l=n[l];return a}function locateNonHydratedAsyncRoot(t){const n=t.subTree.component;if(n)return n.asyncDep&&!n.asyncResolved?n:locateNonHydratedAsyncRoot(n)}function invalidateMount(t){if(t)for(let n=0;n<t.length;n++)t[n].flags|=8}function resolveAsyncComponentPlaceholder(t){if(t.placeholder)return t.placeholder;const n=t.component;return n?resolveAsyncComponentPlaceholder(n.subTree):null}const isSuspense=t=>t.__isSuspense;function queueEffectWithSuspense(t,n){n&&n.pendingBranch?isArray$2(t)?n.effects.push(...t):n.effects.push(t):queuePostFlushCb(t)}const Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(t=!1){blockStack.push(currentBlock=t?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(t,n=!1){isBlockTreeEnabled+=t,t<0&&currentBlock&&n&&(currentBlock.hasOnce=!0)}function setupBlock(t){return t.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(t),t}function createElementBlock(t,n,a,r,o,s){return setupBlock(createBaseVNode(t,n,a,r,o,s,!0))}function createBlock(t,n,a,r,o){return setupBlock(createVNode(t,n,a,r,o,!0))}function isVNode(t){return t?t.__v_isVNode===!0:!1}function isSameVNodeType(t,n){return t.type===n.type&&t.key===n.key}const normalizeKey=({key:t})=>t??null,normalizeRef=({ref:t,ref_key:n,ref_for:a})=>(typeof t=="number"&&(t=""+t),t!=null?isString$1(t)||isRef(t)||isFunction$1(t)?{i:currentRenderingInstance,r:t,k:n,f:!!a}:t:null);function createBaseVNode(t,n=null,a=null,r=0,o=null,s=t===Fragment?0:1,l=!1,c=!1){const u={__v_isVNode:!0,__v_skip:!0,type:t,props:n,key:n&&normalizeKey(n),ref:n&&normalizeRef(n),scopeId:currentScopeId,slotScopeIds:null,children:a,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return c?(normalizeChildren(u,a),s&128&&t.normalize(u)):a&&(u.shapeFlag|=isString$1(a)?8:16),isBlockTreeEnabled>0&&!l&&currentBlock&&(u.patchFlag>0||s&6)&&u.patchFlag!==32&&currentBlock.push(u),u}const createVNode=_createVNode;function _createVNode(t,n=null,a=null,r=0,o=null,s=!1){if((!t||t===NULL_DYNAMIC_COMPONENT)&&(t=Comment),isVNode(t)){const c=cloneVNode(t,n,!0);return a&&normalizeChildren(c,a),isBlockTreeEnabled>0&&!s&&currentBlock&&(c.shapeFlag&6?currentBlock[currentBlock.indexOf(t)]=c:currentBlock.push(c)),c.patchFlag=-2,c}if(isClassComponent(t)&&(t=t.__vccOpts),n){n=guardReactiveProps(n);let{class:c,style:u}=n;c&&!isString$1(c)&&(n.class=normalizeClass(c)),isObject$4(u)&&(isProxy(u)&&!isArray$2(u)&&(u=extend$1({},u)),n.style=normalizeStyle$1(u))}const l=isString$1(t)?1:isSuspense(t)?128:isTeleport(t)?64:isObject$4(t)?4:isFunction$1(t)?2:0;return createBaseVNode(t,n,a,r,o,l,s,!0)}function guardReactiveProps(t){return t?isProxy(t)||isInternalObject(t)?extend$1({},t):t:null}function cloneVNode(t,n,a=!1,r=!1){const{props:o,ref:s,patchFlag:l,children:c,transition:u}=t,d=n?mergeProps(o||{},n):o,f={__v_isVNode:!0,__v_skip:!0,type:t.type,props:d,key:d&&normalizeKey(d),ref:n&&n.ref?a&&s?isArray$2(s)?s.concat(normalizeRef(n)):[s,normalizeRef(n)]:normalizeRef(n):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:c,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:n&&t.type!==Fragment?l===-1?16:l|16:l,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:u,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&cloneVNode(t.ssContent),ssFallback:t.ssFallback&&cloneVNode(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return u&&r&&setTransitionHooks(f,u.clone(f)),f}function createTextVNode(t=" ",n=0){return createVNode(Text,null,t,n)}function createStaticVNode(t,n){const a=createVNode(Static,null,t);return a.staticCount=n,a}function createCommentVNode(t="",n=!1){return n?(openBlock(),createBlock(Comment,null,t)):createVNode(Comment,null,t)}function normalizeVNode(t){return t==null||typeof t=="boolean"?createVNode(Comment):isArray$2(t)?createVNode(Fragment,null,t.slice()):isVNode(t)?cloneIfMounted(t):createVNode(Text,null,String(t))}function cloneIfMounted(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:cloneVNode(t)}function normalizeChildren(t,n){let a=0;const{shapeFlag:r}=t;if(n==null)n=null;else if(isArray$2(n))a=16;else if(typeof n=="object")if(r&65){const o=n.default;o&&(o._c&&(o._d=!1),normalizeChildren(t,o()),o._c&&(o._d=!0));return}else{a=32;const o=n._;!o&&!isInternalObject(n)?n._ctx=currentRenderingInstance:o===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?n._=1:(n._=2,t.patchFlag|=1024))}else isFunction$1(n)?(n={default:n,_ctx:currentRenderingInstance},a=32):(n=String(n),r&64?(a=16,n=[createTextVNode(n)]):a=8);t.children=n,t.shapeFlag|=a}function mergeProps(...t){const n={};for(let a=0;a<t.length;a++){const r=t[a];for(const o in r)if(o==="class")n.class!==r.class&&(n.class=normalizeClass([n.class,r.class]));else if(o==="style")n.style=normalizeStyle$1([n.style,r.style]);else if(isOn$1(o)){const s=n[o],l=r[o];l&&s!==l&&!(isArray$2(s)&&s.includes(l))&&(n[o]=s?[].concat(s,l):l)}else o!==""&&(n[o]=r[o])}return n}function invokeVNodeHook(t,n,a,r=null){callWithAsyncErrorHandling(t,n,7,[a,r])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(t,n,a){const r=t.type,o=(n?n.appContext:t.appContext)||emptyAppContext,s={uid:uid++,vnode:t,type:r,parent:n,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(o.provides),ids:n?n.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(r,o),emitsOptions:normalizeEmitsOptions(r,o),emit:null,emitted:null,propsDefaults:EMPTY_OBJ$1,inheritAttrs:r.inheritAttrs,ctx:EMPTY_OBJ$1,data:EMPTY_OBJ$1,props:EMPTY_OBJ$1,attrs:EMPTY_OBJ$1,slots:EMPTY_OBJ$1,refs:EMPTY_OBJ$1,setupState:EMPTY_OBJ$1,setupContext:null,suspense:a,suspenseId:a?a.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=n?n.root:s,s.emit=emit.bind(null,s),t.ce&&t.ce(s),s}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,setInSSRSetupState;{const t=getGlobalThis(),n=(a,r)=>{let o;return(o=t[a])||(o=t[a]=[]),o.push(r),s=>{o.length>1?o.forEach(l=>l(s)):o[0](s)}};internalSetCurrentInstance=n("__VUE_INSTANCE_SETTERS__",a=>currentInstance=a),setInSSRSetupState=n("__VUE_SSR_SETTERS__",a=>isInSSRComponentSetup=a)}const setCurrentInstance=t=>{const n=currentInstance;return internalSetCurrentInstance(t),t.scope.on(),()=>{t.scope.off(),internalSetCurrentInstance(n)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(t){return t.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(t,n=!1,a=!1){n&&setInSSRSetupState(n);const{props:r,children:o}=t.vnode,s=isStatefulComponent(t);initProps$1(t,r,s,n),initSlots(t,o,a||n);const l=s?setupStatefulComponent(t,n):void 0;return n&&setInSSRSetupState(!1),l}function setupStatefulComponent(t,n){const a=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,PublicInstanceProxyHandlers);const{setup:r}=a;if(r){pauseTracking();const o=t.setupContext=r.length>1?createSetupContext(t):null,s=setCurrentInstance(t),l=callWithErrorHandling(r,t,0,[t.props,o]),c=isPromise(l);if(resetTracking(),s(),(c||t.sp)&&!isAsyncWrapper(t)&&markAsyncBoundary(t),c){if(l.then(unsetCurrentInstance,unsetCurrentInstance),n)return l.then(u=>{handleSetupResult(t,u)}).catch(u=>{handleError(u,t,0)});t.asyncDep=l}else handleSetupResult(t,l)}else finishComponentSetup(t)}function handleSetupResult(t,n,a){isFunction$1(n)?t.type.__ssrInlineRender?t.ssrRender=n:t.render=n:isObject$4(n)&&(t.setupState=proxyRefs(n)),finishComponentSetup(t)}function finishComponentSetup(t,n,a){const r=t.type;t.render||(t.render=r.render||NOOP);{const o=setCurrentInstance(t);pauseTracking();try{applyOptions(t)}finally{resetTracking(),o()}}}const attrsProxyHandlers={get(t,n){return track(t,"get",""),t[n]}};function createSetupContext(t){const n=a=>{t.exposed=a||{}};return{attrs:new Proxy(t.attrs,attrsProxyHandlers),slots:t.slots,emit:t.emit,expose:n}}function getComponentPublicInstance(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(proxyRefs(markRaw(t.exposed)),{get(n,a){if(a in n)return n[a];if(a in publicPropertiesMap)return publicPropertiesMap[a](t)},has(n,a){return a in n||a in publicPropertiesMap}})):t.proxy}const classifyRE=/(?:^|[-_])\w/g,classify=t=>t.replace(classifyRE,n=>n.toUpperCase()).replace(/[-_]/g,"");function getComponentName(t,n=!0){return isFunction$1(t)?t.displayName||t.name:t.name||n&&t.__name}function formatComponentName(t,n,a=!1){let r=getComponentName(n);if(!r&&n.__file){const o=n.__file.match(/([^/\\]+)\.\w+$/);o&&(r=o[1])}if(!r&&t){const o=s=>{for(const l in s)if(s[l]===n)return l};r=o(t.components)||t.parent&&o(t.parent.type.components)||o(t.appContext.components)}return r?classify(r):a?"App":"Anonymous"}function isClassComponent(t){return isFunction$1(t)&&"__vccOpts"in t}const computed=(t,n)=>computed$1(t,n,isInSSRComponentSetup);function h(t,n,a){try{setBlockTracking(-1);const r=arguments.length;return r===2?isObject$4(n)&&!isArray$2(n)?isVNode(n)?createVNode(t,null,[n]):createVNode(t,n):createVNode(t,null,n):(r>3?a=Array.prototype.slice.call(arguments,2):r===3&&isVNode(a)&&(a=[a]),createVNode(t,n,a))}finally{setBlockTracking(1)}}const version$1="3.5.26";/**
* @vue/runtime-dom v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let policy;const tt=typeof window<"u"&&window.trustedTypes;if(tt)try{policy=tt.createPolicy("vue",{createHTML:t=>t})}catch{}const unsafeToTrustedHTML=policy?t=>policy.createHTML(t):t=>t,svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(t,n,a)=>{n.insertBefore(t,a||null)},remove:t=>{const n=t.parentNode;n&&n.removeChild(t)},createElement:(t,n,a,r)=>{const o=n==="svg"?doc.createElementNS(svgNS,t):n==="mathml"?doc.createElementNS(mathmlNS,t):a?doc.createElement(t,{is:a}):doc.createElement(t);return t==="select"&&r&&r.multiple!=null&&o.setAttribute("multiple",r.multiple),o},createText:t=>doc.createTextNode(t),createComment:t=>doc.createComment(t),setText:(t,n)=>{t.nodeValue=n},setElementText:(t,n)=>{t.textContent=n},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>doc.querySelector(t),setScopeId(t,n){t.setAttribute(n,"")},insertStaticContent(t,n,a,r,o,s){const l=a?a.previousSibling:n.lastChild;if(o&&(o===s||o.nextSibling))for(;n.insertBefore(o.cloneNode(!0),a),!(o===s||!(o=o.nextSibling)););else{templateContainer.innerHTML=unsafeToTrustedHTML(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const c=templateContainer.content;if(r==="svg"||r==="mathml"){const u=c.firstChild;for(;u.firstChild;)c.appendChild(u.firstChild);c.removeChild(u)}n.insertBefore(c,a)}return[l?l.nextSibling:n.firstChild,a?a.previousSibling:n.lastChild]}},TRANSITION="transition",ANIMATION="animation",vtcKey=Symbol("_vtc"),DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=extend$1({},BaseTransitionPropsValidators,DOMTransitionPropsValidators),decorate$1=t=>(t.displayName="Transition",t.props=TransitionPropsValidators,t),Transition=decorate$1((t,{slots:n})=>h(BaseTransition,resolveTransitionProps(t),n)),callHook=(t,n=[])=>{isArray$2(t)?t.forEach(a=>a(...n)):t&&t(...n)},hasExplicitCallback=t=>t?isArray$2(t)?t.some(n=>n.length>1):t.length>1:!1;function resolveTransitionProps(t){const n={};for(const $ in t)$ in DOMTransitionPropsValidators||(n[$]=t[$]);if(t.css===!1)return n;const{name:a="v",type:r,duration:o,enterFromClass:s=`${a}-enter-from`,enterActiveClass:l=`${a}-enter-active`,enterToClass:c=`${a}-enter-to`,appearFromClass:u=s,appearActiveClass:d=l,appearToClass:f=c,leaveFromClass:v=`${a}-leave-from`,leaveActiveClass:_=`${a}-leave-active`,leaveToClass:g=`${a}-leave-to`}=t,y=normalizeDuration(o),b=y&&y[0],T=y&&y[1],{onBeforeEnter:S,onEnter:C,onEnterCancelled:E,onLeave:x,onLeaveCancelled:A,onBeforeAppear:N=S,onAppear:M=C,onAppearCancelled:R=E}=n,D=($,V,H,X)=>{$._enterCancelled=X,removeTransitionClass($,V?f:c),removeTransitionClass($,V?d:l),H&&H()},L=($,V)=>{$._isLeaving=!1,removeTransitionClass($,v),removeTransitionClass($,g),removeTransitionClass($,_),V&&V()},I=$=>(V,H)=>{const X=$?M:C,q=()=>D(V,$,H);callHook(X,[V,q]),nextFrame(()=>{removeTransitionClass(V,$?u:s),addTransitionClass(V,$?f:c),hasExplicitCallback(X)||whenTransitionEnds(V,r,b,q)})};return extend$1(n,{onBeforeEnter($){callHook(S,[$]),addTransitionClass($,s),addTransitionClass($,l)},onBeforeAppear($){callHook(N,[$]),addTransitionClass($,u),addTransitionClass($,d)},onEnter:I(!1),onAppear:I(!0),onLeave($,V){$._isLeaving=!0;const H=()=>L($,V);addTransitionClass($,v),$._enterCancelled?(addTransitionClass($,_),forceReflow($)):(forceReflow($),addTransitionClass($,_)),nextFrame(()=>{$._isLeaving&&(removeTransitionClass($,v),addTransitionClass($,g),hasExplicitCallback(x)||whenTransitionEnds($,r,T,H))}),callHook(x,[$,H])},onEnterCancelled($){D($,!1,void 0,!0),callHook(E,[$])},onAppearCancelled($){D($,!0,void 0,!0),callHook(R,[$])},onLeaveCancelled($){L($),callHook(A,[$])}})}function normalizeDuration(t){if(t==null)return null;if(isObject$4(t))return[NumberOf(t.enter),NumberOf(t.leave)];{const n=NumberOf(t);return[n,n]}}function NumberOf(t){return toNumber(t)}function addTransitionClass(t,n){n.split(/\s+/).forEach(a=>a&&t.classList.add(a)),(t[vtcKey]||(t[vtcKey]=new Set)).add(n)}function removeTransitionClass(t,n){n.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const a=t[vtcKey];a&&(a.delete(n),a.size||(t[vtcKey]=void 0))}function nextFrame(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let endId=0;function whenTransitionEnds(t,n,a,r){const o=t._endId=++endId,s=()=>{o===t._endId&&r()};if(a!=null)return setTimeout(s,a);const{type:l,timeout:c,propCount:u}=getTransitionInfo(t,n);if(!l)return r();const d=l+"end";let f=0;const v=()=>{t.removeEventListener(d,_),s()},_=g=>{g.target===t&&++f>=u&&v()};setTimeout(()=>{f<u&&v()},c+1),t.addEventListener(d,_)}function getTransitionInfo(t,n){const a=window.getComputedStyle(t),r=y=>(a[y]||"").split(", "),o=r(`${TRANSITION}Delay`),s=r(`${TRANSITION}Duration`),l=getTimeout(o,s),c=r(`${ANIMATION}Delay`),u=r(`${ANIMATION}Duration`),d=getTimeout(c,u);let f=null,v=0,_=0;n===TRANSITION?l>0&&(f=TRANSITION,v=l,_=s.length):n===ANIMATION?d>0&&(f=ANIMATION,v=d,_=u.length):(v=Math.max(l,d),f=v>0?l>d?TRANSITION:ANIMATION:null,_=f?f===TRANSITION?s.length:u.length:0);const g=f===TRANSITION&&/\b(?:transform|all)(?:,|$)/.test(r(`${TRANSITION}Property`).toString());return{type:f,timeout:v,propCount:_,hasTransform:g}}function getTimeout(t,n){for(;t.length<n.length;)t=t.concat(t);return Math.max(...n.map((a,r)=>toMs(a)+toMs(t[r])))}function toMs(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function forceReflow(t){return(t?t.ownerDocument:document).body.offsetHeight}function patchClass(t,n,a){const r=t[vtcKey];r&&(n=(n?[n,...r]:[...r]).join(" ")),n==null?t.removeAttribute("class"):a?t.setAttribute("class",n):t.className=n}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),vShow={name:"show",beforeMount(t,{value:n},{transition:a}){t[vShowOriginalDisplay]=t.style.display==="none"?"":t.style.display,a&&n?a.beforeEnter(t):setDisplay(t,n)},mounted(t,{value:n},{transition:a}){a&&n&&a.enter(t)},updated(t,{value:n,oldValue:a},{transition:r}){!n!=!a&&(r?n?(r.beforeEnter(t),setDisplay(t,!0),r.enter(t)):r.leave(t,()=>{setDisplay(t,!1)}):setDisplay(t,n))},beforeUnmount(t,{value:n}){setDisplay(t,n)}};function setDisplay(t,n){t.style.display=n?t[vShowOriginalDisplay]:"none",t[vShowHidden]=!n}const CSS_VAR_TEXT=Symbol(""),displayRE=/(?:^|;)\s*display\s*:/;function patchStyle(t,n,a){const r=t.style,o=isString$1(a);let s=!1;if(a&&!o){if(n)if(isString$1(n))for(const l of n.split(";")){const c=l.slice(0,l.indexOf(":")).trim();a[c]==null&&setStyle(r,c,"")}else for(const l in n)a[l]==null&&setStyle(r,l,"");for(const l in a)l==="display"&&(s=!0),setStyle(r,l,a[l])}else if(o){if(n!==a){const l=r[CSS_VAR_TEXT];l&&(a+=";"+l),r.cssText=a,s=displayRE.test(a)}}else n&&t.removeAttribute("style");vShowOriginalDisplay in t&&(t[vShowOriginalDisplay]=s?r.display:"",t[vShowHidden]&&(r.display="none"))}const importantRE=/\s*!important$/;function setStyle(t,n,a){if(isArray$2(a))a.forEach(r=>setStyle(t,n,r));else if(a==null&&(a=""),n.startsWith("--"))t.setProperty(n,a);else{const r=autoPrefix(t,n);importantRE.test(a)?t.setProperty(hyphenate(r),a.replace(importantRE,""),"important"):t[r]=a}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(t,n){const a=prefixCache[n];if(a)return a;let r=camelize(n);if(r!=="filter"&&r in t)return prefixCache[n]=r;r=capitalize(r);for(let o=0;o<prefixes.length;o++){const s=prefixes[o]+r;if(s in t)return prefixCache[n]=s}return n}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(t,n,a,r,o,s=isSpecialBooleanAttr(n)){r&&n.startsWith("xlink:")?a==null?t.removeAttributeNS(xlinkNS,n.slice(6,n.length)):t.setAttributeNS(xlinkNS,n,a):a==null||s&&!includeBooleanAttr(a)?t.removeAttribute(n):t.setAttribute(n,s?"":isSymbol(a)?String(a):a)}function patchDOMProp(t,n,a,r,o){if(n==="innerHTML"||n==="textContent"){a!=null&&(t[n]=n==="innerHTML"?unsafeToTrustedHTML(a):a);return}const s=t.tagName;if(n==="value"&&s!=="PROGRESS"&&!s.includes("-")){const c=s==="OPTION"?t.getAttribute("value")||"":t.value,u=a==null?t.type==="checkbox"?"on":"":String(a);(c!==u||!("_value"in t))&&(t.value=u),a==null&&t.removeAttribute(n),t._value=a;return}let l=!1;if(a===""||a==null){const c=typeof t[n];c==="boolean"?a=includeBooleanAttr(a):a==null&&c==="string"?(a="",l=!0):c==="number"&&(a=0,l=!0)}try{t[n]=a}catch{}l&&t.removeAttribute(o||n)}function addEventListener$1(t,n,a,r){t.addEventListener(n,a,r)}function removeEventListener$1(t,n,a,r){t.removeEventListener(n,a,r)}const veiKey=Symbol("_vei");function patchEvent(t,n,a,r,o=null){const s=t[veiKey]||(t[veiKey]={}),l=s[n];if(r&&l)l.value=r;else{const[c,u]=parseName(n);if(r){const d=s[n]=createInvoker(r,o);addEventListener$1(t,c,d,u)}else l&&(removeEventListener$1(t,c,l,u),s[n]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(t){let n;if(optionsModifierRE.test(t)){n={};let r;for(;r=t.match(optionsModifierRE);)t=t.slice(0,t.length-r[0].length),n[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):hyphenate(t.slice(2)),n]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(t,n){const a=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=a.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(r,a.value),n,5,[r])};return a.value=t,a.attached=getNow(),a}function patchStopImmediatePropagation(t,n){if(isArray$2(n)){const a=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{a.call(t),t._stopped=!0},n.map(r=>o=>!o._stopped&&r&&r(o))}else return n}const isNativeOn=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,patchProp=(t,n,a,r,o,s)=>{const l=o==="svg";n==="class"?patchClass(t,r,l):n==="style"?patchStyle(t,a,r):isOn$1(n)?isModelListener(n)||patchEvent(t,n,a,r,s):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):shouldSetAsProp(t,n,r,l))?(patchDOMProp(t,n,r),!t.tagName.includes("-")&&(n==="value"||n==="checked"||n==="selected")&&patchAttr(t,n,r,l,s,n!=="value")):t._isVueCE&&(/[A-Z]/.test(n)||!isString$1(r))?patchDOMProp(t,camelize(n),r,s,n):(n==="true-value"?t._trueValue=r:n==="false-value"&&(t._falseValue=r),patchAttr(t,n,r,l))};function shouldSetAsProp(t,n,a,r){if(r)return!!(n==="innerHTML"||n==="textContent"||n in t&&isNativeOn(n)&&isFunction$1(a));if(n==="spellcheck"||n==="draggable"||n==="translate"||n==="autocorrect"||n==="sandbox"&&t.tagName==="IFRAME"||n==="form"||n==="list"&&t.tagName==="INPUT"||n==="type"&&t.tagName==="TEXTAREA")return!1;if(n==="width"||n==="height"){const o=t.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return isNativeOn(n)&&isString$1(a)?!1:n in t}const getModelAssigner=t=>{const n=t.props["onUpdate:modelValue"]||!1;return isArray$2(n)?a=>invokeArrayFns(n,a):n},assignKey=Symbol("_assign"),vModelSelect={deep:!0,created(t,{value:n,modifiers:{number:a}},r){const o=isSet(n);addEventListener$1(t,"change",()=>{const s=Array.prototype.filter.call(t.options,l=>l.selected).map(l=>a?looseToNumber(getValue(l)):getValue(l));t[assignKey](t.multiple?o?new Set(s):s:s[0]),t._assigning=!0,nextTick(()=>{t._assigning=!1})}),t[assignKey]=getModelAssigner(r)},mounted(t,{value:n}){setSelected(t,n)},beforeUpdate(t,n,a){t[assignKey]=getModelAssigner(a)},updated(t,{value:n}){t._assigning||setSelected(t,n)}};function setSelected(t,n){const a=t.multiple,r=isArray$2(n);if(!(a&&!r&&!isSet(n))){for(let o=0,s=t.options.length;o<s;o++){const l=t.options[o],c=getValue(l);if(a)if(r){const u=typeof c;u==="string"||u==="number"?l.selected=n.some(d=>String(d)===String(c)):l.selected=looseIndexOf(n,c)>-1}else l.selected=n.has(c);else if(looseEqual(getValue(l),n)){t.selectedIndex!==o&&(t.selectedIndex=o);return}}!a&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function getValue(t){return"_value"in t?t._value:t.value}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,n)=>systemModifiers.some(a=>t[`${a}Key`]&&!n.includes(a))},withModifiers=(t,n)=>{const a=t._withMods||(t._withMods={}),r=n.join(".");return a[r]||(a[r]=(o,...s)=>{for(let l=0;l<n.length;l++){const c=modifierGuards[n[l]];if(c&&c(o,n))return}return t(o,...s)})},rendererOptions=extend$1({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...t)=>{const n=ensureRenderer().createApp(...t),{mount:a}=n;return n.mount=r=>{const o=normalizeContainer(r);if(!o)return;const s=n._component;!isFunction$1(s)&&!s.render&&!s.template&&(s.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const l=a(o,!1,resolveRootNamespace(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),l},n};function resolveRootNamespace(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function normalizeContainer(t){return isString$1(t)?document.querySelector(t):t}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let activePinia;const setActivePinia=t=>activePinia=t,piniaSymbol=Symbol();function isPlainObject$1(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var MutationType;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(MutationType||(MutationType={}));function createPinia(){const t=effectScope(!0),n=t.run(()=>ref({}));let a=[],r=[];const o=markRaw({install(s){setActivePinia(o),o._a=s,s.provide(piniaSymbol,o),s.config.globalProperties.$pinia=o,r.forEach(l=>a.push(l)),r=[]},use(s){return this._a?a.push(s):r.push(s),this},_p:a,_a:null,_e:t,_s:new Map,state:n});return o}const noop$1=()=>{};function addSubscription(t,n,a,r=noop$1){t.push(n);const o=()=>{const s=t.indexOf(n);s>-1&&(t.splice(s,1),r())};return!a&&getCurrentScope()&&onScopeDispose(o),o}function triggerSubscriptions(t,...n){t.slice().forEach(a=>{a(...n)})}const fallbackRunWithContext=t=>t(),ACTION_MARKER=Symbol(),ACTION_NAME=Symbol();function mergeReactiveObjects(t,n){t instanceof Map&&n instanceof Map?n.forEach((a,r)=>t.set(r,a)):t instanceof Set&&n instanceof Set&&n.forEach(t.add,t);for(const a in n){if(!n.hasOwnProperty(a))continue;const r=n[a],o=t[a];isPlainObject$1(o)&&isPlainObject$1(r)&&t.hasOwnProperty(a)&&!isRef(r)&&!isReactive(r)?t[a]=mergeReactiveObjects(o,r):t[a]=r}return t}const skipHydrateSymbol=Symbol();function shouldHydrate(t){return!isPlainObject$1(t)||!t.hasOwnProperty(skipHydrateSymbol)}const{assign}=Object;function isComputed(t){return!!(isRef(t)&&t.effect)}function createOptionsStore(t,n,a,r){const{state:o,actions:s,getters:l}=n,c=a.state.value[t];let u;function d(){c||(a.state.value[t]=o?o():{});const f=toRefs(a.state.value[t]);return assign(f,s,Object.keys(l||{}).reduce((v,_)=>(v[_]=markRaw(computed(()=>{setActivePinia(a);const g=a._s.get(t);return l[_].call(g,g)})),v),{}))}return u=createSetupStore(t,d,n,a,r,!0),u}function createSetupStore(t,n,a={},r,o,s){let l;const c=assign({actions:{}},a),u={deep:!0};let d,f,v=[],_=[],g;const y=r.state.value[t];!s&&!y&&(r.state.value[t]={}),ref({});let b;function T(R){let D;d=f=!1,typeof R=="function"?(R(r.state.value[t]),D={type:MutationType.patchFunction,storeId:t,events:g}):(mergeReactiveObjects(r.state.value[t],R),D={type:MutationType.patchObject,payload:R,storeId:t,events:g});const L=b=Symbol();nextTick().then(()=>{b===L&&(d=!0)}),f=!0,triggerSubscriptions(v,D,r.state.value[t])}const S=s?function(){const{state:D}=a,L=D?D():{};this.$patch(I=>{assign(I,L)})}:noop$1;function C(){l.stop(),v=[],_=[],r._s.delete(t)}const E=(R,D="")=>{if(ACTION_MARKER in R)return R[ACTION_NAME]=D,R;const L=function(){setActivePinia(r);const I=Array.from(arguments),$=[],V=[];function H(z){$.push(z)}function X(z){V.push(z)}triggerSubscriptions(_,{args:I,name:L[ACTION_NAME],store:A,after:H,onError:X});let q;try{q=R.apply(this&&this.$id===t?this:A,I)}catch(z){throw triggerSubscriptions(V,z),z}return q instanceof Promise?q.then(z=>(triggerSubscriptions($,z),z)).catch(z=>(triggerSubscriptions(V,z),Promise.reject(z))):(triggerSubscriptions($,q),q)};return L[ACTION_MARKER]=!0,L[ACTION_NAME]=D,L},x={_p:r,$id:t,$onAction:addSubscription.bind(null,_),$patch:T,$reset:S,$subscribe(R,D={}){const L=addSubscription(v,R,D.detached,()=>I()),I=l.run(()=>watch(()=>r.state.value[t],$=>{(D.flush==="sync"?f:d)&&R({storeId:t,type:MutationType.direct,events:g},$)},assign({},u,D)));return L},$dispose:C},A=reactive(x);r._s.set(t,A);const M=(r._a&&r._a.runWithContext||fallbackRunWithContext)(()=>r._e.run(()=>(l=effectScope()).run(()=>n({action:E}))));for(const R in M){const D=M[R];if(isRef(D)&&!isComputed(D)||isReactive(D))s||(y&&shouldHydrate(D)&&(isRef(D)?D.value=y[R]:mergeReactiveObjects(D,y[R])),r.state.value[t][R]=D);else if(typeof D=="function"){const L=E(D,R);M[R]=L,c.actions[R]=D}}return assign(A,M),assign(toRaw(A),M),Object.defineProperty(A,"$state",{get:()=>r.state.value[t],set:R=>{T(D=>{assign(D,R)})}}),r._p.forEach(R=>{assign(A,l.run(()=>R({store:A,app:r._a,pinia:r,options:c})))}),y&&s&&a.hydrate&&a.hydrate(A.$state,y),d=!0,f=!0,A}/*! #__NO_SIDE_EFFECTS__ */function defineStore(t,n,a){let r,o;const s=typeof n=="function";typeof t=="string"?(r=t,o=s?a:n):(o=t,r=t.id);function l(c,u){const d=hasInjectionContext();return c=c||(d?inject(piniaSymbol,null):null),c&&setActivePinia(c),c=activePinia,c._s.has(r)||(s?createSetupStore(r,n,o,c):createOptionsStore(r,o,c)),c._s.get(r)}return l.$id=r,l}const STAGES={S00:{title:"",lines:["996... 35... ...","... 30... 0.00...","","","...","",""],cta:""},S01:{title:"",mainText:"",button:"",bg:"https://images.unsplash.com/photo-1517732306149-e8f829eb588a?q=80&w=2672&auto=format&fit=crop",lines:[{text:""},{text:""},{text:"37%400"},{text:"42%  "},{text:" 13% "},{text:" 56 "},{text:""},{text:""}]},S02:{title:"",desc:"",profileNarrative:"",locationOptions:[{id:"tier1",label:""},{id:"tier2",label:""},{id:"tier3",label:""},{id:"rural",label:"/"}],ageOptions:[{id:"young",label:"18-25"},{id:"prime",label:"26-32"},{id:"mid",label:"33-40"},{id:"senior",label:"40"}],genderOptions:[{id:"male",label:""},{id:"female",label:""}],occupationOptions:[{id:"tech",label:"/IT"},{id:"labor",label:""},{id:"service",label:""},{id:"student",label:"/"}],options:[{id:"A",name:"",desc:"H1B",stats:{money:500,health:70,san:55,stealth:30,stamina:75,luck:50}},{id:"B",name:"H1B",desc:"",stats:{money:200,health:50,san:45,stealth:70,stamina:60,luck:55}},{id:"C",name:"",desc:"",stats:{money:80,health:40,san:40,stealth:85,stamina:50,luck:70}},{id:"D",name:"",desc:"",stats:{money:400,health:65,san:55,stealth:45,stamina:80,luck:25}}]},S02b:{title:"",scenes:[{scene:"  5:47",monologue:`

...







paycheck to paycheck`,bg:"https://images.unsplash.com/photo-1545324418-cc1a3fa10c00?q=80&w=2670&auto=format&fit=crop"},{scene:"  ",monologue:`







working poor

`,bg:"https://images.unsplash.com/photo-1558618666-fcd25c85cd64?q=80&w=2532&auto=format&fit=crop"},{scene:"  ",monologue:`







`,bg:"https://images.unsplash.com/photo-1555041469-a586c61ea9bc?q=80&w=2670&auto=format&fit=crop"},{scene:"  ",monologue:`





$1000



`,bg:"https://images.unsplash.com/photo-1474487548417-781cb71495f3?q=80&w=2584&auto=format&fit=crop"},{scene:"  ",monologue:`



$7.83



`,bg:"https://images.unsplash.com/photo-1604719312566-8912e9227c6a?q=80&w=2574&auto=format&fit=crop"},{scene:"  ",monologue:`





`,bg:"https://images.unsplash.com/photo-1493314894560-5c412a56c17c?q=80&w=2670&auto=format&fit=crop"},{scene:"ATM  ",monologue:`

... 

$40

$20

4000`,bg:"https://images.unsplash.com/photo-1589758438368-0ad531db3366?q=80&w=2532&auto=format&fit=crop"},{scene:"  ",monologue:`URGENT

...



...

`,bg:"https://images.unsplash.com/photo-1450101499163-c8848c66ca85?q=80&w=2670&auto=format&fit=crop"},{scene:"  ",monologue:`$47.83

app





`,bg:"https://images.unsplash.com/photo-1534723452862-4c874018d66d?q=80&w=2670&auto=format&fit=crop"},{scene:"  ",monologue:`







`,bg:"https://images.unsplash.com/photo-1477959858617-67f85cf4f1df?q=80&w=2613&auto=format&fit=crop"},{scene:"  ",monologue:`









`,bg:"https://images.unsplash.com/photo-1519608487953-e999c86e7455?q=80&w=2670&auto=format&fit=crop"},{scene:"  ",monologue:`





40006000





`,bg:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?q=80&w=2574&auto=format&fit=crop"}]},S03:{title:"Loading",hint:"",byPath:{A:{bg:"https://images.unsplash.com/photo-1496568816309-51d7c20e3b21?q=80&w=2531&auto=format&fit=crop",button:"",lines:[{day:"Day 1",text:" LAX"},{day:"Day 2",text:"16"},{day:"Day 3",text:""},{day:"Day 3",text:""},{day:"Day 3",text:"'Business or Pleasure?'"},{day:"Day 3",text:"'Travel.'"},{day:"Day 3",text:"Pass"},{day:"Day 4",text:""}]},B:{bg:"https://media.istockphoto.com/id/899573836/photo/united-states-border-wall-with-mexico.jpg?s=612x612&w=0&k=20&c=BorKWhERLLGmB-RCgHTuIfu4IWABydfeQsDPLKKsHfM=",button:"",lines:[{day:"Day 1",text:"Quito500"},{day:"Day 4",text:""},{day:"Day 7",text:""},{day:"Day 10",text:""},{day:"Day 15",text:""},{day:"Day 18",text:"200"},{day:"Day 22",text:""},{day:"Day 22",text:""}]},C:{bg:"https://images.unsplash.com/photo-1504386106331-3e4e71712b38?q=80&w=2673&auto=format&fit=crop",button:"",lines:[{day:"Day 1",text:""},{day:"Day 2",text:""},{day:"Day 5",text:""},{day:"Day 9",text:""},{day:"Day 14",text:""},{day:"Day 18",text:""},{day:"Day 21",text:""},{day:"Day 21",text:""}]},D:{bg:"https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?q=80&w=2670&auto=format&fit=crop",button:"",lines:[{day:"Day 1",text:""},{day:"Day 2",text:""},{day:"Day 5",text:""},{day:"Day 6",text:""},{day:"Day 7",text:""},{day:"Day 10",text:""},{day:"Day 10",text:""}]}}},S04:{title:"",byPath:{A:{scene:"  4",monologue:`



H1B30%




`,unlock:"money"},B:{scene:"  ",monologue:`6

996H1B

30%





`,unlock:"health"},C:{scene:"  ",monologue:`

14



10



`,unlock:"exposure"},D:{scene:"  ",monologue:`











`,unlock:"money"}}},S05:{title:"",desc:"",tutorialByPath:{A:{button:"",script:[{day:1,text:"40",effects:[{t:"money",delta:-120,reason:""}],spotlight:{key:"money",tip:""}},{day:3,text:"Craigslist",effects:[{t:"health",delta:-3,reason:""}]},{day:7,text:"",effects:[{t:"money",delta:-1600,reason:""},{t:"housingSet",housingType:"",rent:800,daysToRent:23}],spotlight:{key:"money",tip:""}}],weekReport:{housing:"",rent:800,status:""}},B:{button:"",script:[{day:1,text:"",effects:[{t:"health",delta:-5,reason:""}],spotlight:{key:"health",tip:""}},{day:3,text:"",effects:[{t:"money",delta:120,reason:""},{t:"health",delta:-3,reason:""}],spotlight:{key:"health_money",tip:"''''"}},{day:7,text:"",effects:[{t:"money",delta:-250,reason:""},{t:"housingSet",housingType:"",rent:400,daysToRent:23}]}],weekReport:{housing:"",rent:400,status:""}},C:{button:"",script:[{day:1,text:"",effects:[{t:"exposure",delta:15,reason:""}],spotlight:{key:"exposure",tip:" =  = "}},{day:4,text:"",effects:[{t:"sanity",delta:-5,reason:""},{t:"health",delta:5,reason:""}]},{day:7,text:"ID",effects:[{t:"money",delta:-200,reason:""},{t:"exposure",delta:-15,reason:""},{t:"housingSet",housingType:"",rent:300,daysToRent:23}]}],weekReport:{housing:"",rent:300,status:""}},D:{button:"",script:[{day:1,text:"",effects:[{t:"sanity",delta:-5,reason:""}]},{day:3,text:"''",effects:[{t:"sanity",delta:-8,reason:""}],spotlight:{key:"money",tip:""}},{day:7,text:"''",effects:[{t:"money",delta:-500,reason:""},{t:"housingSet",housingType:"",rent:550,daysToRent:23}]}],weekReport:{housing:"",rent:550,status:""}}}}};function createModalQueue(){const t=[],n=new Set,a=()=>n.forEach(c=>c(r())),r=()=>({active:t.length?t[0]:null,size:t.length});return{push:c=>new Promise(u=>{t.push({...c,__resolve:u}),a()}),close:(c="close")=>{const u=t.shift();u!=null&&u.__resolve&&u.__resolve(c),a()},onChange:c=>(n.add(c),c(r()),()=>n.delete(c)),getState:r}}const initialStats={hell:{health:50,san:100,money:1e3,credit:560},hard:{health:65,san:100,money:1500,credit:580},normal:{health:80,san:100,money:2e3,credit:620},easy:{health:100,san:100,money:3e3,credit:660}},monsterDamage={1:110,2:115,3:95,4:120,5:95,6:110,7:130,8:120,9:100,10:120,11:120,12:125},housing={1:{sanMax:100,cost:0,name:"",description:""},2:{sanMax:110,cost:1600,name:"",description:""},3:{sanMax:130,cost:4500,name:"",description:""}},diet$1={1:{sanCost:10,healthChange:-10,moneyCost:200,name:"",description:""},2:{sanCost:9,healthChange:0,moneyCost:400,name:"",description:""},3:{sanCost:8,healthChange:10,moneyCost:600,name:"",description:""}},creditDecay=-10,game={totalRounds:12},sanEfficiency={1:1,2:1,3:1,4:1,5:1,6:1.05,7:1.05,8:1.05,9:1.1,10:1.1,11:1.1,12:1.1},constants={initialStats,monsterDamage,housing,diet:diet$1,creditDecay,game,sanEfficiency},LOOP_CONFIG={v3:{totalRounds:constants.game.totalRounds,roundTitles:{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",10:"",11:"",12:""}},sanityBright:60,sanityLow:30};function defaultState(){return{stage:"S00",bgLineIdx:0,innerClick:0,pathId:null,character:{name:"",age:0,gender:"",avatarEmoji:"",city:"",state:"",description:"",tags:[],archetype:"",innerVoice:""},money:300,health:50,sanity:50,exposure:0,hope:30,debt:{principal:0,dailyInterest:0},deepStats:{chronicDamage:0,organFailure:{liver:0,spine:0,heart:0},traumaStack:[],dissociationLevel:0,moralCorrosion:0,betrayalCount:0,criminalRecord:[],trustDebt:0},addictions:{gambling:0,alcohol:0,painkillers:0},timeDebts:[],subsystems:{body:{current:100,collapsed:!1},mind:{current:100,collapsed:!1},finance:{current:100,collapsed:!1},identity:{current:100,collapsed:!1}},npcs:{},monthlyNPCInteractions:[],unlockedActions:[],lockedActions:[],forcedActionThisWeek:null,activeEventChains:[],triggeredBeats:[],currentAct:"ACT_1",heat:0,debtPressure:0,bodyClock:0,flags:{},killFlags:{paidRentStreak2:!1,didSurvivalActionSuccess:!1},day:1,housing:{type:"",rent:0,daysToRent:0},ui:{hudUnlocked:!1,previewEffects:null,statusBarCollapsed:!1},feed:[],fullGameLog:[],spotlight:null,tutorial:{started:!1,done:!1,stepIndex:0},tags:{},province:null,loop:{week:1,month:1,phase:"weeks",selectedActionId:null,selectedVariantId:null,killPhase:"NONE",grace:!1,billData:null,weekActionCounts:{},monthActionCounts:{}},loopV2:{weekCategoryCounts:{work:0,rest:0,social:0,risk:0},weekTotalActions:0,triggeredEventIds:[],actionProgress:{active:!1,actionId:null,optionId:null,inProgressText:"",startTime:0},currentEvent:null},history:[],_rentDelayCount:0,_lowMoneyWeeks:0,_homelessStartMonth:0,_loadingIdx:0,_v:2,death:{active:!1,type:null,reason:"",month:1,week:1,at:0,stats:null,currentSceneId:null,sceneHistory:[],finalScene:null,completed:!1,modifiers:[],collapsedSystems:[]}}}function clamp$1(t,n,a){return Math.max(n,Math.min(a,t))}const useGameStore=defineStore("game",{state:()=>({s:defaultState(),modals:createModalQueue()}),getters:{stageContent:t=>STAGES[t.s.stage],computedMood:t=>({isPoor:t.s.money<500,isDanger:t.s.exposure>60,isCollapse:t.s.sanity<LOOP_CONFIG.sanityLow,isBright:t.s.sanity>LOOP_CONFIG.sanityBright,isNoise:t.s.sanity<LOOP_CONFIG.sanityLow}),monthsLeft:t=>Math.max(0,LOOP_CONFIG.totalMonths-t.s.loop.month+1),yearPhaseText:t=>{const n=t.s.loop.month;return n<=12?"The Chaos":n<=24?"The Numbness":"The Collapse"}},actions:{}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$1=function(t,n){return extendStatics$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(a[o]=r[o])},extendStatics$1(t,n)};function __extends$1(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");extendStatics$1(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}var Browser=function(){function t(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return t}(),Env=function(){function t(){this.browser=new Browser,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return t}(),env=new Env;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(env.wxa=!0,env.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?env.worker=!0:!env.hasGlobalWindow||"Deno"in window||typeof navigator<"u"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Node.js")>-1?(env.node=!0,env.svgSupported=!0):detect(navigator.userAgent,env);function detect(t,n){var a=n.browser,r=t.match(/Firefox\/([\d.]+)/),o=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/.+?rv:(([\d.]+))/),s=t.match(/Edge?\/([\d.]+)/),l=/micromessenger/i.test(t);r&&(a.firefox=!0,a.version=r[1]),o&&(a.ie=!0,a.version=o[1]),s&&(a.edge=!0,a.version=s[1],a.newEdge=+s[1].split(".")[0]>18),l&&(a.weChat=!0),n.svgSupported=typeof SVGRect<"u",n.touchEventsSupported="ontouchstart"in window&&!a.ie&&!a.edge,n.pointerEventsSupported="onpointerdown"in window&&(a.edge||a.ie&&+a.version>=11);var c=n.domSupported=typeof document<"u";if(c){var u=document.documentElement.style;n.transform3dSupported=(a.ie&&"transition"in u||a.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in u)&&!("OTransition"in u),n.transformSupported=n.transform3dSupported||a.ie&&+a.version>=9}}var DEFAULT_FONT_SIZE=12,DEFAULT_FONT_FAMILY="sans-serif",DEFAULT_FONT=DEFAULT_FONT_SIZE+"px "+DEFAULT_FONT_FAMILY,OFFSET=20,SCALE=100,defaultWidthMapStr="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function getTextWidthMap(t){var n={};if(typeof JSON>"u")return n;for(var a=0;a<t.length;a++){var r=String.fromCharCode(a+32),o=(t.charCodeAt(a)-OFFSET)/SCALE;n[r]=o}return n}var DEFAULT_TEXT_WIDTH_MAP=getTextWidthMap(defaultWidthMapStr),platformApi={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var t,n;return function(a,r){if(!t){var o=platformApi.createCanvas();t=o&&o.getContext("2d")}if(t)return n!==r&&(n=t.font=r||DEFAULT_FONT),t.measureText(a);a=a||"",r=r||DEFAULT_FONT;var s=/((?:\d+)?\.?\d*)px/.exec(r),l=s&&+s[1]||DEFAULT_FONT_SIZE,c=0;if(r.indexOf("mono")>=0)c=l*a.length;else for(var u=0;u<a.length;u++){var d=DEFAULT_TEXT_WIDTH_MAP[a[u]];c+=d==null?l:d*l}return{width:c}}}(),loadImage:function(t,n,a){var r=new Image;return r.onload=n,r.onerror=a,r.src=t,r}},BUILTIN_OBJECT=reduce(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(t,n){return t["[object "+n+"]"]=!0,t},{}),TYPED_ARRAY=reduce(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(t,n){return t["[object "+n+"Array]"]=!0,t},{}),objToString=Object.prototype.toString,arrayProto=Array.prototype,nativeForEach=arrayProto.forEach,nativeFilter=arrayProto.filter,nativeSlice=arrayProto.slice,nativeMap=arrayProto.map,ctorFunction=(function(){}).constructor,protoFunction=ctorFunction?ctorFunction.prototype:null,protoKey="__proto__",idStart=2311;function guid(){return idStart++}function logError(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];typeof console<"u"&&console.error.apply(console,t)}function clone$3(t){if(t==null||typeof t!="object")return t;var n=t,a=objToString.call(t);if(a==="[object Array]"){if(!isPrimitive(t)){n=[];for(var r=0,o=t.length;r<o;r++)n[r]=clone$3(t[r])}}else if(TYPED_ARRAY[a]){if(!isPrimitive(t)){var s=t.constructor;if(s.from)n=s.from(t);else{n=new s(t.length);for(var r=0,o=t.length;r<o;r++)n[r]=t[r]}}}else if(!BUILTIN_OBJECT[a]&&!isPrimitive(t)&&!isDom(t)){n={};for(var l in t)t.hasOwnProperty(l)&&l!==protoKey&&(n[l]=clone$3(t[l]))}return n}function merge(t,n,a){if(!isObject$3(n)||!isObject$3(t))return a?clone$3(n):t;for(var r in n)if(n.hasOwnProperty(r)&&r!==protoKey){var o=t[r],s=n[r];isObject$3(s)&&isObject$3(o)&&!isArray$1(s)&&!isArray$1(o)&&!isDom(s)&&!isDom(o)&&!isBuiltInObject(s)&&!isBuiltInObject(o)&&!isPrimitive(s)&&!isPrimitive(o)?merge(o,s,a):(a||!(r in t))&&(t[r]=clone$3(n[r]))}return t}function mergeAll(t,n){for(var a=t[0],r=1,o=t.length;r<o;r++)a=merge(a,t[r],n);return a}function extend(t,n){if(Object.assign)Object.assign(t,n);else for(var a in n)n.hasOwnProperty(a)&&a!==protoKey&&(t[a]=n[a]);return t}function defaults(t,n,a){for(var r=keys(n),o=0,s=r.length;o<s;o++){var l=r[o];t[l]==null&&(t[l]=n[l])}return t}function indexOf(t,n){if(t){if(t.indexOf)return t.indexOf(n);for(var a=0,r=t.length;a<r;a++)if(t[a]===n)return a}return-1}function inherits(t,n){var a=t.prototype;function r(){}r.prototype=n.prototype,t.prototype=new r;for(var o in a)a.hasOwnProperty(o)&&(t.prototype[o]=a[o]);t.prototype.constructor=t,t.superClass=n}function mixin(t,n,a){if(t="prototype"in t?t.prototype:t,n="prototype"in n?n.prototype:n,Object.getOwnPropertyNames)for(var r=Object.getOwnPropertyNames(n),o=0;o<r.length;o++){var s=r[o];s!=="constructor"&&t[s]==null&&(t[s]=n[s])}else defaults(t,n)}function isArrayLike(t){return!t||typeof t=="string"?!1:typeof t.length=="number"}function each$8(t,n,a){if(t&&n)if(t.forEach&&t.forEach===nativeForEach)t.forEach(n,a);else if(t.length===+t.length)for(var r=0,o=t.length;r<o;r++)n.call(a,t[r],r,t);else for(var s in t)t.hasOwnProperty(s)&&n.call(a,t[s],s,t)}function map$1(t,n,a){if(!t)return[];if(!n)return slice(t);if(t.map&&t.map===nativeMap)return t.map(n,a);for(var r=[],o=0,s=t.length;o<s;o++)r.push(n.call(a,t[o],o,t));return r}function reduce(t,n,a,r){if(t&&n){for(var o=0,s=t.length;o<s;o++)a=n.call(r,a,t[o],o,t);return a}}function filter(t,n,a){if(!t)return[];if(!n)return slice(t);if(t.filter&&t.filter===nativeFilter)return t.filter(n,a);for(var r=[],o=0,s=t.length;o<s;o++)n.call(a,t[o],o,t)&&r.push(t[o]);return r}function find(t,n,a){if(t&&n){for(var r=0,o=t.length;r<o;r++)if(n.call(a,t[r],r,t))return t[r]}}function keys(t){if(!t)return[];if(Object.keys)return Object.keys(t);var n=[];for(var a in t)t.hasOwnProperty(a)&&n.push(a);return n}function bindPolyfill(t,n){for(var a=[],r=2;r<arguments.length;r++)a[r-2]=arguments[r];return function(){return t.apply(n,a.concat(nativeSlice.call(arguments)))}}var bind$1=protoFunction&&isFunction(protoFunction.bind)?protoFunction.call.bind(protoFunction.bind):bindPolyfill;function curry(t){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];return function(){return t.apply(this,n.concat(nativeSlice.call(arguments)))}}function isArray$1(t){return Array.isArray?Array.isArray(t):objToString.call(t)==="[object Array]"}function isFunction(t){return typeof t=="function"}function isString(t){return typeof t=="string"}function isStringSafe(t){return objToString.call(t)==="[object String]"}function isNumber(t){return typeof t=="number"}function isObject$3(t){var n=typeof t;return n==="function"||!!t&&n==="object"}function isBuiltInObject(t){return!!BUILTIN_OBJECT[objToString.call(t)]}function isTypedArray(t){return!!TYPED_ARRAY[objToString.call(t)]}function isDom(t){return typeof t=="object"&&typeof t.nodeType=="number"&&typeof t.ownerDocument=="object"}function isGradientObject(t){return t.colorStops!=null}function isImagePatternObject(t){return t.image!=null}function eqNaN(t){return t!==t}function retrieve(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var a=0,r=t.length;a<r;a++)if(t[a]!=null)return t[a]}function retrieve2(t,n){return t??n}function retrieve3(t,n,a){return t??n??a}function slice(t){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];return nativeSlice.apply(t,n)}function normalizeCssArray$1(t){if(typeof t=="number")return[t,t,t,t];var n=t.length;return n===2?[t[0],t[1],t[0],t[1]]:n===3?[t[0],t[1],t[2],t[1]]:t}function assert(t,n){if(!t)throw new Error(n)}function trim(t){return t==null?null:typeof t.trim=="function"?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var primitiveKey="__ec_primitive__";function setAsPrimitive(t){t[primitiveKey]=!0}function isPrimitive(t){return t[primitiveKey]}var MapPolyfill=function(){function t(){this.data={}}return t.prototype.delete=function(n){var a=this.has(n);return a&&delete this.data[n],a},t.prototype.has=function(n){return this.data.hasOwnProperty(n)},t.prototype.get=function(n){return this.data[n]},t.prototype.set=function(n,a){return this.data[n]=a,this},t.prototype.keys=function(){return keys(this.data)},t.prototype.forEach=function(n){var a=this.data;for(var r in a)a.hasOwnProperty(r)&&n(a[r],r)},t}(),isNativeMapSupported=typeof Map=="function";function maybeNativeMap(){return isNativeMapSupported?new Map:new MapPolyfill}var HashMap=function(){function t(n){var a=isArray$1(n);this.data=maybeNativeMap();var r=this;n instanceof t?n.each(o):n&&each$8(n,o);function o(s,l){a?r.set(s,l):r.set(l,s)}}return t.prototype.hasKey=function(n){return this.data.has(n)},t.prototype.get=function(n){return this.data.get(n)},t.prototype.set=function(n,a){return this.data.set(n,a),a},t.prototype.each=function(n,a){this.data.forEach(function(r,o){n.call(a,r,o)})},t.prototype.keys=function(){var n=this.data.keys();return isNativeMapSupported?Array.from(n):n},t.prototype.removeKey=function(n){this.data.delete(n)},t}();function createHashMap(t){return new HashMap(t)}function concatArray(t,n){for(var a=new t.constructor(t.length+n.length),r=0;r<t.length;r++)a[r]=t[r];for(var o=t.length,r=0;r<n.length;r++)a[r+o]=n[r];return a}function createObject(t,n){var a;if(Object.create)a=Object.create(t);else{var r=function(){};r.prototype=t,a=new r}return n&&extend(a,n),a}function disableUserSelect(t){var n=t.style;n.webkitUserSelect="none",n.userSelect="none",n.webkitTapHighlightColor="rgba(0,0,0,0)",n["-webkit-touch-callout"]="none"}function hasOwn(t,n){return t.hasOwnProperty(n)}function noop(){}var RADIAN_TO_DEGREE=180/Math.PI;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(t,n){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(a[o]=r[o])},extendStatics(t,n)};function __extends(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");extendStatics(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}function create$1(t,n){return t==null&&(t=0),n==null&&(n=0),[t,n]}function copy$1(t,n){return t[0]=n[0],t[1]=n[1],t}function clone$2(t){return[t[0],t[1]]}function add(t,n,a){return t[0]=n[0]+a[0],t[1]=n[1]+a[1],t}function sub(t,n,a){return t[0]=n[0]-a[0],t[1]=n[1]-a[1],t}function len(t){return Math.sqrt(lenSquare(t))}function lenSquare(t){return t[0]*t[0]+t[1]*t[1]}function scale$2(t,n,a){return t[0]=n[0]*a,t[1]=n[1]*a,t}function normalize$1(t,n){var a=len(n);return a===0?(t[0]=0,t[1]=0):(t[0]=n[0]/a,t[1]=n[1]/a),t}function distance(t,n){return Math.sqrt((t[0]-n[0])*(t[0]-n[0])+(t[1]-n[1])*(t[1]-n[1]))}var dist$1=distance;function distanceSquare(t,n){return(t[0]-n[0])*(t[0]-n[0])+(t[1]-n[1])*(t[1]-n[1])}var distSquare=distanceSquare;function applyTransform$1(t,n,a){var r=n[0],o=n[1];return t[0]=a[0]*r+a[2]*o+a[4],t[1]=a[1]*r+a[3]*o+a[5],t}function min$1(t,n,a){return t[0]=Math.min(n[0],a[0]),t[1]=Math.min(n[1],a[1]),t}function max$1(t,n,a){return t[0]=Math.max(n[0],a[0]),t[1]=Math.max(n[1],a[1]),t}var Param=function(){function t(n,a){this.target=n,this.topTarget=a&&a.topTarget}return t}(),Draggable=function(){function t(n){this.handler=n,n.on("mousedown",this._dragStart,this),n.on("mousemove",this._drag,this),n.on("mouseup",this._dragEnd,this)}return t.prototype._dragStart=function(n){for(var a=n.target;a&&!a.draggable;)a=a.parent||a.__hostTarget;a&&(this._draggingTarget=a,a.dragging=!0,this._x=n.offsetX,this._y=n.offsetY,this.handler.dispatchToElement(new Param(a,n),"dragstart",n.event))},t.prototype._drag=function(n){var a=this._draggingTarget;if(a){var r=n.offsetX,o=n.offsetY,s=r-this._x,l=o-this._y;this._x=r,this._y=o,a.drift(s,l,n),this.handler.dispatchToElement(new Param(a,n),"drag",n.event);var c=this.handler.findHover(r,o,a).target,u=this._dropTarget;this._dropTarget=c,a!==c&&(u&&c!==u&&this.handler.dispatchToElement(new Param(u,n),"dragleave",n.event),c&&c!==u&&this.handler.dispatchToElement(new Param(c,n),"dragenter",n.event))}},t.prototype._dragEnd=function(n){var a=this._draggingTarget;a&&(a.dragging=!1),this.handler.dispatchToElement(new Param(a,n),"dragend",n.event),this._dropTarget&&this.handler.dispatchToElement(new Param(this._dropTarget,n),"drop",n.event),this._draggingTarget=null,this._dropTarget=null},t}(),Eventful=function(){function t(n){n&&(this._$eventProcessor=n)}return t.prototype.on=function(n,a,r,o){this._$handlers||(this._$handlers={});var s=this._$handlers;if(typeof a=="function"&&(o=r,r=a,a=null),!r||!n)return this;var l=this._$eventProcessor;a!=null&&l&&l.normalizeQuery&&(a=l.normalizeQuery(a)),s[n]||(s[n]=[]);for(var c=0;c<s[n].length;c++)if(s[n][c].h===r)return this;var u={h:r,query:a,ctx:o||this,callAtLast:r.zrEventfulCallAtLast},d=s[n].length-1,f=s[n][d];return f&&f.callAtLast?s[n].splice(d,0,u):s[n].push(u),this},t.prototype.isSilent=function(n){var a=this._$handlers;return!a||!a[n]||!a[n].length},t.prototype.off=function(n,a){var r=this._$handlers;if(!r)return this;if(!n)return this._$handlers={},this;if(a){if(r[n]){for(var o=[],s=0,l=r[n].length;s<l;s++)r[n][s].h!==a&&o.push(r[n][s]);r[n]=o}r[n]&&r[n].length===0&&delete r[n]}else delete r[n];return this},t.prototype.trigger=function(n){for(var a=[],r=1;r<arguments.length;r++)a[r-1]=arguments[r];if(!this._$handlers)return this;var o=this._$handlers[n],s=this._$eventProcessor;if(o)for(var l=a.length,c=o.length,u=0;u<c;u++){var d=o[u];if(!(s&&s.filter&&d.query!=null&&!s.filter(n,d.query)))switch(l){case 0:d.h.call(d.ctx);break;case 1:d.h.call(d.ctx,a[0]);break;case 2:d.h.call(d.ctx,a[0],a[1]);break;default:d.h.apply(d.ctx,a);break}}return s&&s.afterTrigger&&s.afterTrigger(n),this},t.prototype.triggerWithContext=function(n){for(var a=[],r=1;r<arguments.length;r++)a[r-1]=arguments[r];if(!this._$handlers)return this;var o=this._$handlers[n],s=this._$eventProcessor;if(o)for(var l=a.length,c=a[l-1],u=o.length,d=0;d<u;d++){var f=o[d];if(!(s&&s.filter&&f.query!=null&&!s.filter(n,f.query)))switch(l){case 0:f.h.call(c);break;case 1:f.h.call(c,a[0]);break;case 2:f.h.call(c,a[0],a[1]);break;default:f.h.apply(c,a.slice(1,l-1));break}}return s&&s.afterTrigger&&s.afterTrigger(n),this},t}(),LN2=Math.log(2);function determinant(t,n,a,r,o,s){var l=r+"-"+o,c=t.length;if(s.hasOwnProperty(l))return s[l];if(n===1){var u=Math.round(Math.log((1<<c)-1&~o)/LN2);return t[a][u]}for(var d=r|1<<a,f=a+1;r&1<<f;)f++;for(var v=0,_=0,g=0;_<c;_++){var y=1<<_;y&o||(v+=(g%2?-1:1)*t[a][_]*determinant(t,n-1,f,d,o|y,s),g++)}return s[l]=v,v}function buildTransformer(t,n){var a=[[t[0],t[1],1,0,0,0,-n[0]*t[0],-n[0]*t[1]],[0,0,0,t[0],t[1],1,-n[1]*t[0],-n[1]*t[1]],[t[2],t[3],1,0,0,0,-n[2]*t[2],-n[2]*t[3]],[0,0,0,t[2],t[3],1,-n[3]*t[2],-n[3]*t[3]],[t[4],t[5],1,0,0,0,-n[4]*t[4],-n[4]*t[5]],[0,0,0,t[4],t[5],1,-n[5]*t[4],-n[5]*t[5]],[t[6],t[7],1,0,0,0,-n[6]*t[6],-n[6]*t[7]],[0,0,0,t[6],t[7],1,-n[7]*t[6],-n[7]*t[7]]],r={},o=determinant(a,8,0,0,0,r);if(o!==0){for(var s=[],l=0;l<8;l++)for(var c=0;c<8;c++)s[c]==null&&(s[c]=0),s[c]+=((l+c)%2?-1:1)*determinant(a,7,l===0?1:0,1<<l,1<<c,r)/o*n[l];return function(u,d,f){var v=d*s[6]+f*s[7]+1;u[0]=(d*s[0]+f*s[1]+s[2])/v,u[1]=(d*s[3]+f*s[4]+s[5])/v}}}var EVENT_SAVED_PROP="___zrEVENTSAVED",_calcOut$1=[];function transformLocalCoord(t,n,a,r,o){return transformCoordWithViewport(_calcOut$1,n,r,o,!0)&&transformCoordWithViewport(t,a,_calcOut$1[0],_calcOut$1[1])}function transformLocalCoordClear(t,n){t&&a(t),n&&a(n);function a(r){var o=r[EVENT_SAVED_PROP];o&&(o.clearMarkers&&o.clearMarkers(),delete r[EVENT_SAVED_PROP])}}function transformCoordWithViewport(t,n,a,r,o){if(n.getBoundingClientRect&&env.domSupported&&!isCanvasEl(n)){var s=n[EVENT_SAVED_PROP]||(n[EVENT_SAVED_PROP]={}),l=prepareCoordMarkers(n,s),c=preparePointerTransformer(l,s,o);if(c)return c(t,a,r),!0}return!1}function prepareCoordMarkers(t,n){var a=n.markers;if(a)return a;a=n.markers=[];for(var r=["left","right"],o=["top","bottom"],s=0;s<4;s++){var l=document.createElement("div"),c=l.style,u=s%2,d=(s>>1)%2;c.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",r[u]+":0",o[d]+":0",r[1-u]+":auto",o[1-d]+":auto",""].join("!important;"),t.appendChild(l),a.push(l)}return n.clearMarkers=function(){each$8(a,function(f){f.parentNode&&f.parentNode.removeChild(f)})},a}function preparePointerTransformer(t,n,a){for(var r=a?"invTrans":"trans",o=n[r],s=n.srcCoords,l=[],c=[],u=!0,d=0;d<4;d++){var f=t[d].getBoundingClientRect(),v=2*d,_=f.left,g=f.top;l.push(_,g),u=u&&s&&_===s[v]&&g===s[v+1],c.push(t[d].offsetLeft,t[d].offsetTop)}return u&&o?o:(n.srcCoords=l,n[r]=a?buildTransformer(c,l):buildTransformer(l,c))}function isCanvasEl(t){return t.nodeName.toUpperCase()==="CANVAS"}var replaceReg=/([&<>"'])/g,replaceMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function encodeHTML(t){return t==null?"":(t+"").replace(replaceReg,function(n,a){return replaceMap[a]})}var MOUSE_EVENT_REG=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,_calcOut=[],firefoxNotSupportOffsetXY=env.browser.firefox&&+env.browser.version.split(".")[0]<39;function clientToLocal(t,n,a,r){return a=a||{},r?calculateZrXY(t,n,a):firefoxNotSupportOffsetXY&&n.layerX!=null&&n.layerX!==n.offsetX?(a.zrX=n.layerX,a.zrY=n.layerY):n.offsetX!=null?(a.zrX=n.offsetX,a.zrY=n.offsetY):calculateZrXY(t,n,a),a}function calculateZrXY(t,n,a){if(env.domSupported&&t.getBoundingClientRect){var r=n.clientX,o=n.clientY;if(isCanvasEl(t)){var s=t.getBoundingClientRect();a.zrX=r-s.left,a.zrY=o-s.top;return}else if(transformCoordWithViewport(_calcOut,t,r,o)){a.zrX=_calcOut[0],a.zrY=_calcOut[1];return}}a.zrX=a.zrY=0}function getNativeEvent(t){return t||window.event}function normalizeEvent(t,n,a){if(n=getNativeEvent(n),n.zrX!=null)return n;var r=n.type,o=r&&r.indexOf("touch")>=0;if(o){var l=r!=="touchend"?n.targetTouches[0]:n.changedTouches[0];l&&clientToLocal(t,l,n,a)}else{clientToLocal(t,n,n,a);var s=getWheelDeltaMayPolyfill(n);n.zrDelta=s?s/120:-(n.detail||0)/3}var c=n.button;return n.which==null&&c!==void 0&&MOUSE_EVENT_REG.test(n.type)&&(n.which=c&1?1:c&2?3:c&4?2:0),n}function getWheelDeltaMayPolyfill(t){var n=t.wheelDelta;if(n)return n;var a=t.deltaX,r=t.deltaY;if(a==null||r==null)return n;var o=Math.abs(r!==0?r:a),s=r>0?-1:r<0?1:a>0?-1:1;return 3*o*s}function addEventListener(t,n,a,r){t.addEventListener(n,a,r)}function removeEventListener(t,n,a,r){t.removeEventListener(n,a,r)}var stop=function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0};function isMiddleOrRightButtonOnMouseUpDown(t){return t.which===2||t.which===3}var GestureMgr=function(){function t(){this._track=[]}return t.prototype.recognize=function(n,a,r){return this._doTrack(n,a,r),this._recognize(n)},t.prototype.clear=function(){return this._track.length=0,this},t.prototype._doTrack=function(n,a,r){var o=n.touches;if(o){for(var s={points:[],touches:[],target:a,event:n},l=0,c=o.length;l<c;l++){var u=o[l],d=clientToLocal(r,u,{});s.points.push([d.zrX,d.zrY]),s.touches.push(u)}this._track.push(s)}},t.prototype._recognize=function(n){for(var a in recognizers)if(recognizers.hasOwnProperty(a)){var r=recognizers[a](this._track,n);if(r)return r}},t}();function dist(t){var n=t[1][0]-t[0][0],a=t[1][1]-t[0][1];return Math.sqrt(n*n+a*a)}function center(t){return[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]}var recognizers={pinch:function(t,n){var a=t.length;if(a){var r=(t[a-1]||{}).points,o=(t[a-2]||{}).points||r;if(o&&o.length>1&&r&&r.length>1){var s=dist(r)/dist(o);!isFinite(s)&&(s=1),n.pinchScale=s;var l=center(r);return n.pinchX=l[0],n.pinchY=l[1],{type:"pinch",target:t[0].target,event:n}}}}};function create(){return[1,0,0,1,0,0]}function identity(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function copy(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t}function mul(t,n,a){var r=n[0]*a[0]+n[2]*a[1],o=n[1]*a[0]+n[3]*a[1],s=n[0]*a[2]+n[2]*a[3],l=n[1]*a[2]+n[3]*a[3],c=n[0]*a[4]+n[2]*a[5]+n[4],u=n[1]*a[4]+n[3]*a[5]+n[5];return t[0]=r,t[1]=o,t[2]=s,t[3]=l,t[4]=c,t[5]=u,t}function translate(t,n,a){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4]+a[0],t[5]=n[5]+a[1],t}function rotate(t,n,a,r){r===void 0&&(r=[0,0]);var o=n[0],s=n[2],l=n[4],c=n[1],u=n[3],d=n[5],f=Math.sin(a),v=Math.cos(a);return t[0]=o*v+c*f,t[1]=-o*f+c*v,t[2]=s*v+u*f,t[3]=-s*f+v*u,t[4]=v*(l-r[0])+f*(d-r[1])+r[0],t[5]=v*(d-r[1])-f*(l-r[0])+r[1],t}function scale$1(t,n,a){var r=a[0],o=a[1];return t[0]=n[0]*r,t[1]=n[1]*o,t[2]=n[2]*r,t[3]=n[3]*o,t[4]=n[4]*r,t[5]=n[5]*o,t}function invert(t,n){var a=n[0],r=n[2],o=n[4],s=n[1],l=n[3],c=n[5],u=a*l-s*r;return u?(u=1/u,t[0]=l*u,t[1]=-s*u,t[2]=-r*u,t[3]=a*u,t[4]=(r*c-l*o)*u,t[5]=(s*o-a*c)*u,t):null}function clone$1(t){var n=create();return copy(n,t),n}var Point=function(){function t(n,a){this.x=n||0,this.y=a||0}return t.prototype.copy=function(n){return this.x=n.x,this.y=n.y,this},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.set=function(n,a){return this.x=n,this.y=a,this},t.prototype.equal=function(n){return n.x===this.x&&n.y===this.y},t.prototype.add=function(n){return this.x+=n.x,this.y+=n.y,this},t.prototype.scale=function(n){this.x*=n,this.y*=n},t.prototype.scaleAndAdd=function(n,a){this.x+=n.x*a,this.y+=n.y*a},t.prototype.sub=function(n){return this.x-=n.x,this.y-=n.y,this},t.prototype.dot=function(n){return this.x*n.x+this.y*n.y},t.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},t.prototype.normalize=function(){var n=this.len();return this.x/=n,this.y/=n,this},t.prototype.distance=function(n){var a=this.x-n.x,r=this.y-n.y;return Math.sqrt(a*a+r*r)},t.prototype.distanceSquare=function(n){var a=this.x-n.x,r=this.y-n.y;return a*a+r*r},t.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.transform=function(n){if(n){var a=this.x,r=this.y;return this.x=n[0]*a+n[2]*r+n[4],this.y=n[1]*a+n[3]*r+n[5],this}},t.prototype.toArray=function(n){return n[0]=this.x,n[1]=this.y,n},t.prototype.fromArray=function(n){this.x=n[0],this.y=n[1]},t.set=function(n,a,r){n.x=a,n.y=r},t.copy=function(n,a){n.x=a.x,n.y=a.y},t.len=function(n){return Math.sqrt(n.x*n.x+n.y*n.y)},t.lenSquare=function(n){return n.x*n.x+n.y*n.y},t.dot=function(n,a){return n.x*a.x+n.y*a.y},t.add=function(n,a,r){n.x=a.x+r.x,n.y=a.y+r.y},t.sub=function(n,a,r){n.x=a.x-r.x,n.y=a.y-r.y},t.scale=function(n,a,r){n.x=a.x*r,n.y=a.y*r},t.scaleAndAdd=function(n,a,r,o){n.x=a.x+r.x*o,n.y=a.y+r.y*o},t.lerp=function(n,a,r,o){var s=1-o;n.x=s*a.x+o*r.x,n.y=s*a.y+o*r.y},t}(),mathMin$6=Math.min,mathMax$6=Math.max,mathAbs$4=Math.abs,XY$1=["x","y"],WH$1=["width","height"],lt=new Point,rb=new Point,lb=new Point,rt=new Point,_intersectCtx$1=createIntersectContext(),_minTv$1=_intersectCtx$1.minTv,_maxTv$1=_intersectCtx$1.maxTv,_lenMinMax=[0,0],BoundingRect=function(){function t(n,a,r,o){t.set(this,n,a,r,o)}return t.set=function(n,a,r,o,s){return o<0&&(a=a+o,o=-o),s<0&&(r=r+s,s=-s),n.x=a,n.y=r,n.width=o,n.height=s,n},t.prototype.union=function(n){var a=mathMin$6(n.x,this.x),r=mathMin$6(n.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=mathMax$6(n.x+n.width,this.x+this.width)-a:this.width=n.width,isFinite(this.y)&&isFinite(this.height)?this.height=mathMax$6(n.y+n.height,this.y+this.height)-r:this.height=n.height,this.x=a,this.y=r},t.prototype.applyTransform=function(n){t.applyTransform(this,this,n)},t.prototype.calculateTransform=function(n){var a=this,r=n.width/a.width,o=n.height/a.height,s=create();return translate(s,s,[-a.x,-a.y]),scale$1(s,s,[r,o]),translate(s,s,[n.x,n.y]),s},t.prototype.intersect=function(n,a,r){return t.intersect(this,n,a,r)},t.intersect=function(n,a,r,o){r&&Point.set(r,0,0);var s=o&&o.outIntersectRect||null,l=o&&o.clamp;if(s&&(s.x=s.y=s.width=s.height=NaN),!n||!a)return!1;n instanceof t||(n=t.set(_tmpIntersectA,n.x,n.y,n.width,n.height)),a instanceof t||(a=t.set(_tmpIntersectB,a.x,a.y,a.width,a.height));var c=!!r;_intersectCtx$1.reset(o,c);var u=_intersectCtx$1.touchThreshold,d=n.x+u,f=n.x+n.width-u,v=n.y+u,_=n.y+n.height-u,g=a.x+u,y=a.x+a.width-u,b=a.y+u,T=a.y+a.height-u;if(d>f||v>_||g>y||b>T)return!1;var S=!(f<g||y<d||_<b||T<v);return(c||s)&&(_lenMinMax[0]=1/0,_lenMinMax[1]=0,intersectOneDim(d,f,g,y,0,c,s,l),intersectOneDim(v,_,b,T,1,c,s,l),c&&Point.copy(r,S?_intersectCtx$1.useDir?_intersectCtx$1.dirMinTv:_minTv$1:_maxTv$1)),S},t.contain=function(n,a,r){return a>=n.x&&a<=n.x+n.width&&r>=n.y&&r<=n.y+n.height},t.prototype.contain=function(n,a){return t.contain(this,n,a)},t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(n){t.copy(this,n)},t.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},t.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},t.prototype.isZero=function(){return this.width===0||this.height===0},t.create=function(n){return new t(n.x,n.y,n.width,n.height)},t.copy=function(n,a){return n.x=a.x,n.y=a.y,n.width=a.width,n.height=a.height,n},t.applyTransform=function(n,a,r){if(!r){n!==a&&t.copy(n,a);return}if(r[1]<1e-5&&r[1]>-1e-5&&r[2]<1e-5&&r[2]>-1e-5){var o=r[0],s=r[3],l=r[4],c=r[5];n.x=a.x*o+l,n.y=a.y*s+c,n.width=a.width*o,n.height=a.height*s,n.width<0&&(n.x+=n.width,n.width=-n.width),n.height<0&&(n.y+=n.height,n.height=-n.height);return}lt.x=lb.x=a.x,lt.y=rt.y=a.y,rb.x=rt.x=a.x+a.width,rb.y=lb.y=a.y+a.height,lt.transform(r),rt.transform(r),rb.transform(r),lb.transform(r),n.x=mathMin$6(lt.x,rb.x,lb.x,rt.x),n.y=mathMin$6(lt.y,rb.y,lb.y,rt.y);var u=mathMax$6(lt.x,rb.x,lb.x,rt.x),d=mathMax$6(lt.y,rb.y,lb.y,rt.y);n.width=u-n.x,n.height=d-n.y},t}(),_tmpIntersectA=new BoundingRect(0,0,0,0),_tmpIntersectB=new BoundingRect(0,0,0,0);function intersectOneDim(t,n,a,r,o,s,l,c){var u=mathAbs$4(n-a),d=mathAbs$4(r-t),f=mathMin$6(u,d),v=XY$1[o],_=XY$1[1-o],g=WH$1[o];n<a||r<t?u<d?(s&&(_maxTv$1[v]=-u),c&&(l[v]=n,l[g]=0)):(s&&(_maxTv$1[v]=d),c&&(l[v]=t,l[g]=0)):(l&&(l[v]=mathMax$6(t,a),l[g]=mathMin$6(n,r)-l[v]),s&&(f<_lenMinMax[0]||_intersectCtx$1.useDir)&&(_lenMinMax[0]=mathMin$6(f,_lenMinMax[0]),(u<d||!_intersectCtx$1.bidirectional)&&(_minTv$1[v]=u,_minTv$1[_]=0,_intersectCtx$1.useDir&&_intersectCtx$1.calcDirMTV()),(u>=d||!_intersectCtx$1.bidirectional)&&(_minTv$1[v]=-d,_minTv$1[_]=0,_intersectCtx$1.useDir&&_intersectCtx$1.calcDirMTV())))}function createIntersectContext(){var t=0,n=new Point,a=new Point,r={minTv:new Point,maxTv:new Point,useDir:!1,dirMinTv:new Point,touchThreshold:0,bidirectional:!0,negativeSize:!1,reset:function(s,l){r.touchThreshold=0,s&&s.touchThreshold!=null&&(r.touchThreshold=mathMax$6(0,s.touchThreshold)),r.negativeSize=!1,l&&(r.minTv.set(1/0,1/0),r.maxTv.set(0,0),r.useDir=!1,s&&s.direction!=null&&(r.useDir=!0,r.dirMinTv.copy(r.minTv),a.copy(r.minTv),t=s.direction,r.bidirectional=s.bidirectional==null||!!s.bidirectional,r.bidirectional||n.set(Math.cos(t),Math.sin(t))))},calcDirMTV:function(){var s=r.minTv,l=r.dirMinTv,c=s.y*s.y+s.x*s.x,u=Math.sin(t),d=Math.cos(t),f=u*s.y+d*s.x;if(o(f)){o(s.x)&&o(s.y)&&l.set(0,0);return}if(a.x=c*d/f,a.y=c*u/f,o(a.x)&&o(a.y)){l.set(0,0);return}(r.bidirectional||n.dot(a)>0)&&a.len()<l.len()&&l.copy(a)}};function o(s){return mathAbs$4(s)<1e-10}return r}var SILENT="silent";function makeEventPacket(t,n,a){return{type:t,event:a,target:n.target,topTarget:n.topTarget,cancelBubble:!1,offsetX:a.zrX,offsetY:a.zrY,gestureEvent:a.gestureEvent,pinchX:a.pinchX,pinchY:a.pinchY,pinchScale:a.pinchScale,wheelDelta:a.zrDelta,zrByTouch:a.zrByTouch,which:a.which,stop:stopEvent}}function stopEvent(){stop(this.event)}var EmptyProxy=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.handler=null,a}return n.prototype.dispose=function(){},n.prototype.setCursor=function(){},n}(Eventful),HoveredResult=function(){function t(n,a){this.x=n,this.y=a}return t}(),handlerNames=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],tmpRect$1=new BoundingRect(0,0,0,0),Handler=function(t){__extends(n,t);function n(a,r,o,s,l){var c=t.call(this)||this;return c._hovered=new HoveredResult(0,0),c.storage=a,c.painter=r,c.painterRoot=s,c._pointerSize=l,o=o||new EmptyProxy,c.proxy=null,c.setHandlerProxy(o),c._draggingMgr=new Draggable(c),c}return n.prototype.setHandlerProxy=function(a){this.proxy&&this.proxy.dispose(),a&&(each$8(handlerNames,function(r){a.on&&a.on(r,this[r],this)},this),a.handler=this),this.proxy=a},n.prototype.mousemove=function(a){var r=a.zrX,o=a.zrY,s=isOutsideBoundary(this,r,o),l=this._hovered,c=l.target;c&&!c.__zr&&(l=this.findHover(l.x,l.y),c=l.target);var u=this._hovered=s?new HoveredResult(r,o):this.findHover(r,o),d=u.target,f=this.proxy;f.setCursor&&f.setCursor(d?d.cursor:"default"),c&&d!==c&&this.dispatchToElement(l,"mouseout",a),this.dispatchToElement(u,"mousemove",a),d&&d!==c&&this.dispatchToElement(u,"mouseover",a)},n.prototype.mouseout=function(a){var r=a.zrEventControl;r!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",a),r!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:a})},n.prototype.resize=function(){this._hovered=new HoveredResult(0,0)},n.prototype.dispatch=function(a,r){var o=this[a];o&&o.call(this,r)},n.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},n.prototype.setCursorStyle=function(a){var r=this.proxy;r.setCursor&&r.setCursor(a)},n.prototype.dispatchToElement=function(a,r,o){a=a||{};var s=a.target;if(!(s&&s.silent)){for(var l="on"+r,c=makeEventPacket(r,a,o);s&&(s[l]&&(c.cancelBubble=!!s[l].call(s,c)),s.trigger(r,c),s=s.__hostTarget?s.__hostTarget:s.parent,!c.cancelBubble););c.cancelBubble||(this.trigger(r,c),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(u){typeof u[l]=="function"&&u[l].call(u,c),u.trigger&&u.trigger(r,c)}))}},n.prototype.findHover=function(a,r,o){var s=this.storage.getDisplayList(),l=new HoveredResult(a,r);if(setHoverTarget(s,l,a,r,o),this._pointerSize&&!l.target){for(var c=[],u=this._pointerSize,d=u/2,f=new BoundingRect(a-d,r-d,u,u),v=s.length-1;v>=0;v--){var _=s[v];_!==o&&!_.ignore&&!_.ignoreCoarsePointer&&(!_.parent||!_.parent.ignoreCoarsePointer)&&(tmpRect$1.copy(_.getBoundingRect()),_.transform&&tmpRect$1.applyTransform(_.transform),tmpRect$1.intersect(f)&&c.push(_))}if(c.length)for(var g=4,y=Math.PI/12,b=Math.PI*2,T=0;T<d;T+=g)for(var S=0;S<b;S+=y){var C=a+T*Math.cos(S),E=r+T*Math.sin(S);if(setHoverTarget(c,l,C,E,o),l.target)return l}}return l},n.prototype.processGesture=function(a,r){this._gestureMgr||(this._gestureMgr=new GestureMgr);var o=this._gestureMgr;r==="start"&&o.clear();var s=o.recognize(a,this.findHover(a.zrX,a.zrY,null).target,this.proxy.dom);if(r==="end"&&o.clear(),s){var l=s.type;a.gestureEvent=l;var c=new HoveredResult;c.target=s.target,this.dispatchToElement(c,l,s.event)}},n}(Eventful);each$8(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(t){Handler.prototype[t]=function(n){var a=n.zrX,r=n.zrY,o=isOutsideBoundary(this,a,r),s,l;if((t!=="mouseup"||!o)&&(s=this.findHover(a,r),l=s.target),t==="mousedown")this._downEl=l,this._downPoint=[n.zrX,n.zrY],this._upEl=l;else if(t==="mouseup")this._upEl=l;else if(t==="click"){if(this._downEl!==this._upEl||!this._downPoint||dist$1(this._downPoint,[n.zrX,n.zrY])>4)return;this._downPoint=null}this.dispatchToElement(s,t,n)}});function isHover(t,n,a){if(t[t.rectHover?"rectContain":"contain"](n,a)){for(var r=t,o=void 0,s=!1;r;){if(r.ignoreClip&&(s=!0),!s){var l=r.getClipPath();if(l&&!l.contain(n,a))return!1}r.silent&&(o=!0);var c=r.__hostTarget;r=c?r.ignoreHostSilent?null:c:r.parent}return o?SILENT:!0}return!1}function setHoverTarget(t,n,a,r,o){for(var s=t.length-1;s>=0;s--){var l=t[s],c=void 0;if(l!==o&&!l.ignore&&(c=isHover(l,a,r))&&(!n.topTarget&&(n.topTarget=l),c!==SILENT)){n.target=l;break}}}function isOutsideBoundary(t,n,a){var r=t.painter;return n<0||n>r.getWidth()||a<0||a>r.getHeight()}var DEFAULT_MIN_MERGE=32,DEFAULT_MIN_GALLOPING=7;function minRunLength(t){for(var n=0;t>=DEFAULT_MIN_MERGE;)n|=t&1,t>>=1;return t+n}function makeAscendingRun(t,n,a,r){var o=n+1;if(o===a)return 1;if(r(t[o++],t[n])<0){for(;o<a&&r(t[o],t[o-1])<0;)o++;reverseRun(t,n,o)}else for(;o<a&&r(t[o],t[o-1])>=0;)o++;return o-n}function reverseRun(t,n,a){for(a--;n<a;){var r=t[n];t[n++]=t[a],t[a--]=r}}function binaryInsertionSort(t,n,a,r,o){for(r===n&&r++;r<a;r++){for(var s=t[r],l=n,c=r,u;l<c;)u=l+c>>>1,o(s,t[u])<0?c=u:l=u+1;var d=r-l;switch(d){case 3:t[l+3]=t[l+2];case 2:t[l+2]=t[l+1];case 1:t[l+1]=t[l];break;default:for(;d>0;)t[l+d]=t[l+d-1],d--}t[l]=s}}function gallopLeft(t,n,a,r,o,s){var l=0,c=0,u=1;if(s(t,n[a+o])>0){for(c=r-o;u<c&&s(t,n[a+o+u])>0;)l=u,u=(u<<1)+1,u<=0&&(u=c);u>c&&(u=c),l+=o,u+=o}else{for(c=o+1;u<c&&s(t,n[a+o-u])<=0;)l=u,u=(u<<1)+1,u<=0&&(u=c);u>c&&(u=c);var d=l;l=o-u,u=o-d}for(l++;l<u;){var f=l+(u-l>>>1);s(t,n[a+f])>0?l=f+1:u=f}return u}function gallopRight(t,n,a,r,o,s){var l=0,c=0,u=1;if(s(t,n[a+o])<0){for(c=o+1;u<c&&s(t,n[a+o-u])<0;)l=u,u=(u<<1)+1,u<=0&&(u=c);u>c&&(u=c);var d=l;l=o-u,u=o-d}else{for(c=r-o;u<c&&s(t,n[a+o+u])>=0;)l=u,u=(u<<1)+1,u<=0&&(u=c);u>c&&(u=c),l+=o,u+=o}for(l++;l<u;){var f=l+(u-l>>>1);s(t,n[a+f])<0?u=f:l=f+1}return u}function TimSort(t,n){var a=DEFAULT_MIN_GALLOPING,r,o,s=0,l=[];r=[],o=[];function c(g,y){r[s]=g,o[s]=y,s+=1}function u(){for(;s>1;){var g=s-2;if(g>=1&&o[g-1]<=o[g]+o[g+1]||g>=2&&o[g-2]<=o[g]+o[g-1])o[g-1]<o[g+1]&&g--;else if(o[g]>o[g+1])break;f(g)}}function d(){for(;s>1;){var g=s-2;g>0&&o[g-1]<o[g+1]&&g--,f(g)}}function f(g){var y=r[g],b=o[g],T=r[g+1],S=o[g+1];o[g]=b+S,g===s-3&&(r[g+1]=r[g+2],o[g+1]=o[g+2]),s--;var C=gallopRight(t[T],t,y,b,0,n);y+=C,b-=C,b!==0&&(S=gallopLeft(t[y+b-1],t,T,S,S-1,n),S!==0&&(b<=S?v(y,b,T,S):_(y,b,T,S)))}function v(g,y,b,T){var S=0;for(S=0;S<y;S++)l[S]=t[g+S];var C=0,E=b,x=g;if(t[x++]=t[E++],--T===0){for(S=0;S<y;S++)t[x+S]=l[C+S];return}if(y===1){for(S=0;S<T;S++)t[x+S]=t[E+S];t[x+T]=l[C];return}for(var A=a,N,M,R;;){N=0,M=0,R=!1;do if(n(t[E],l[C])<0){if(t[x++]=t[E++],M++,N=0,--T===0){R=!0;break}}else if(t[x++]=l[C++],N++,M=0,--y===1){R=!0;break}while((N|M)<A);if(R)break;do{if(N=gallopRight(t[E],l,C,y,0,n),N!==0){for(S=0;S<N;S++)t[x+S]=l[C+S];if(x+=N,C+=N,y-=N,y<=1){R=!0;break}}if(t[x++]=t[E++],--T===0){R=!0;break}if(M=gallopLeft(l[C],t,E,T,0,n),M!==0){for(S=0;S<M;S++)t[x+S]=t[E+S];if(x+=M,E+=M,T-=M,T===0){R=!0;break}}if(t[x++]=l[C++],--y===1){R=!0;break}A--}while(N>=DEFAULT_MIN_GALLOPING||M>=DEFAULT_MIN_GALLOPING);if(R)break;A<0&&(A=0),A+=2}if(a=A,a<1&&(a=1),y===1){for(S=0;S<T;S++)t[x+S]=t[E+S];t[x+T]=l[C]}else{if(y===0)throw new Error;for(S=0;S<y;S++)t[x+S]=l[C+S]}}function _(g,y,b,T){var S=0;for(S=0;S<T;S++)l[S]=t[b+S];var C=g+y-1,E=T-1,x=b+T-1,A=0,N=0;if(t[x--]=t[C--],--y===0){for(A=x-(T-1),S=0;S<T;S++)t[A+S]=l[S];return}if(T===1){for(x-=y,C-=y,N=x+1,A=C+1,S=y-1;S>=0;S--)t[N+S]=t[A+S];t[x]=l[E];return}for(var M=a;;){var R=0,D=0,L=!1;do if(n(l[E],t[C])<0){if(t[x--]=t[C--],R++,D=0,--y===0){L=!0;break}}else if(t[x--]=l[E--],D++,R=0,--T===1){L=!0;break}while((R|D)<M);if(L)break;do{if(R=y-gallopRight(l[E],t,g,y,y-1,n),R!==0){for(x-=R,C-=R,y-=R,N=x+1,A=C+1,S=R-1;S>=0;S--)t[N+S]=t[A+S];if(y===0){L=!0;break}}if(t[x--]=l[E--],--T===1){L=!0;break}if(D=T-gallopLeft(t[C],l,0,T,T-1,n),D!==0){for(x-=D,E-=D,T-=D,N=x+1,A=E+1,S=0;S<D;S++)t[N+S]=l[A+S];if(T<=1){L=!0;break}}if(t[x--]=t[C--],--y===0){L=!0;break}M--}while(R>=DEFAULT_MIN_GALLOPING||D>=DEFAULT_MIN_GALLOPING);if(L)break;M<0&&(M=0),M+=2}if(a=M,a<1&&(a=1),T===1){for(x-=y,C-=y,N=x+1,A=C+1,S=y-1;S>=0;S--)t[N+S]=t[A+S];t[x]=l[E]}else{if(T===0)throw new Error;for(A=x-(T-1),S=0;S<T;S++)t[A+S]=l[S]}}return{mergeRuns:u,forceMergeRuns:d,pushRun:c}}function sort(t,n,a,r){a||(a=0),r||(r=t.length);var o=r-a;if(!(o<2)){var s=0;if(o<DEFAULT_MIN_MERGE){s=makeAscendingRun(t,a,r,n),binaryInsertionSort(t,a,r,a+s,n);return}var l=TimSort(t,n),c=minRunLength(o);do{if(s=makeAscendingRun(t,a,r,n),s<c){var u=o;u>c&&(u=c),binaryInsertionSort(t,a,a+u,a+s,n),s=u}l.pushRun(a,s),l.mergeRuns(),o-=s,a+=s}while(o!==0);l.forceMergeRuns()}}var REDRAW_BIT=1,STYLE_CHANGED_BIT=2,SHAPE_CHANGED_BIT=4,invalidZErrorLogged=!1;function logInvalidZError(){invalidZErrorLogged||(invalidZErrorLogged=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function shapeCompareFunc(t,n){return t.zlevel===n.zlevel?t.z===n.z?t.z2-n.z2:t.z-n.z:t.zlevel-n.zlevel}var Storage=function(){function t(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=shapeCompareFunc}return t.prototype.traverse=function(n,a){for(var r=0;r<this._roots.length;r++)this._roots[r].traverse(n,a)},t.prototype.getDisplayList=function(n,a){a=a||!1;var r=this._displayList;return(n||!r.length)&&this.updateDisplayList(a),r},t.prototype.updateDisplayList=function(n){this._displayListLen=0;for(var a=this._roots,r=this._displayList,o=0,s=a.length;o<s;o++)this._updateAndAddDisplayable(a[o],null,n);r.length=this._displayListLen,sort(r,shapeCompareFunc)},t.prototype._updateAndAddDisplayable=function(n,a,r){if(!(n.ignore&&!r)){n.beforeUpdate(),n.update(),n.afterUpdate();var o=n.getClipPath(),s=a&&a.length,l=0,c=n.__clipPaths;if(!n.ignoreClip&&(s||o)){if(c||(c=n.__clipPaths=[]),s)for(var u=0;u<a.length;u++)c[l++]=a[u];for(var d=o,f=n;d;)d.parent=f,d.updateTransform(),c[l++]=d,f=d,d=d.getClipPath()}if(c&&(c.length=l),n.childrenRef){for(var v=n.childrenRef(),_=0;_<v.length;_++){var g=v[_];n.__dirty&&(g.__dirty|=REDRAW_BIT),this._updateAndAddDisplayable(g,c,r)}n.__dirty=0}else{var y=n;isNaN(y.z)&&(logInvalidZError(),y.z=0),isNaN(y.z2)&&(logInvalidZError(),y.z2=0),isNaN(y.zlevel)&&(logInvalidZError(),y.zlevel=0),this._displayList[this._displayListLen++]=y}var b=n.getDecalElement&&n.getDecalElement();b&&this._updateAndAddDisplayable(b,c,r);var T=n.getTextGuideLine();T&&this._updateAndAddDisplayable(T,c,r);var S=n.getTextContent();S&&this._updateAndAddDisplayable(S,c,r)}},t.prototype.addRoot=function(n){n.__zr&&n.__zr.storage===this||this._roots.push(n)},t.prototype.delRoot=function(n){if(n instanceof Array){for(var a=0,r=n.length;a<r;a++)this.delRoot(n[a]);return}var o=indexOf(this._roots,n);o>=0&&this._roots.splice(o,1)},t.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},t.prototype.getRoots=function(){return this._roots},t.prototype.dispose=function(){this._displayList=null,this._roots=null},t}(),requestAnimationFrame$1;requestAnimationFrame$1=env.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(t){return setTimeout(t,16)};var easingFuncs={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return .5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return t===0?0:Math.pow(1024,t-1)},exponentialOut:function(t){return t===1?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return t===0?0:t===1?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var n,a=.1,r=.4;return t===0?0:t===1?1:(!a||a<1?(a=1,n=r/4):n=r*Math.asin(1/a)/(2*Math.PI),-(a*Math.pow(2,10*(t-=1))*Math.sin((t-n)*(2*Math.PI)/r)))},elasticOut:function(t){var n,a=.1,r=.4;return t===0?0:t===1?1:(!a||a<1?(a=1,n=r/4):n=r*Math.asin(1/a)/(2*Math.PI),a*Math.pow(2,-10*t)*Math.sin((t-n)*(2*Math.PI)/r)+1)},elasticInOut:function(t){var n,a=.1,r=.4;return t===0?0:t===1?1:(!a||a<1?(a=1,n=r/4):n=r*Math.asin(1/a)/(2*Math.PI),(t*=2)<1?-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t-n)*(2*Math.PI)/r)):a*Math.pow(2,-10*(t-=1))*Math.sin((t-n)*(2*Math.PI)/r)*.5+1)},backIn:function(t){var n=1.70158;return t*t*((n+1)*t-n)},backOut:function(t){var n=1.70158;return--t*t*((n+1)*t+n)+1},backInOut:function(t){var n=2.5949095;return(t*=2)<1?.5*(t*t*((n+1)*t-n)):.5*((t-=2)*t*((n+1)*t+n)+2)},bounceIn:function(t){return 1-easingFuncs.bounceOut(1-t)},bounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return t<.5?easingFuncs.bounceIn(t*2)*.5:easingFuncs.bounceOut(t*2-1)*.5+.5}},mathPow$1=Math.pow,mathSqrt$3=Math.sqrt,EPSILON$3=1e-8,EPSILON_NUMERIC=1e-4,THREE_SQRT=mathSqrt$3(3),ONE_THIRD=1/3,_v0=create$1(),_v1=create$1(),_v2=create$1();function isAroundZero(t){return t>-EPSILON$3&&t<EPSILON$3}function isNotAroundZero$1(t){return t>EPSILON$3||t<-EPSILON$3}function cubicAt(t,n,a,r,o){var s=1-o;return s*s*(s*t+3*o*n)+o*o*(o*r+3*s*a)}function cubicDerivativeAt(t,n,a,r,o){var s=1-o;return 3*(((n-t)*s+2*(a-n)*o)*s+(r-a)*o*o)}function cubicRootAt(t,n,a,r,o,s){var l=r+3*(n-a)-t,c=3*(a-n*2+t),u=3*(n-t),d=t-o,f=c*c-3*l*u,v=c*u-9*l*d,_=u*u-3*c*d,g=0;if(isAroundZero(f)&&isAroundZero(v))if(isAroundZero(c))s[0]=0;else{var y=-u/c;y>=0&&y<=1&&(s[g++]=y)}else{var b=v*v-4*f*_;if(isAroundZero(b)){var T=v/f,y=-c/l+T,S=-T/2;y>=0&&y<=1&&(s[g++]=y),S>=0&&S<=1&&(s[g++]=S)}else if(b>0){var C=mathSqrt$3(b),E=f*c+1.5*l*(-v+C),x=f*c+1.5*l*(-v-C);E<0?E=-mathPow$1(-E,ONE_THIRD):E=mathPow$1(E,ONE_THIRD),x<0?x=-mathPow$1(-x,ONE_THIRD):x=mathPow$1(x,ONE_THIRD);var y=(-c-(E+x))/(3*l);y>=0&&y<=1&&(s[g++]=y)}else{var A=(2*f*c-3*l*v)/(2*mathSqrt$3(f*f*f)),N=Math.acos(A)/3,M=mathSqrt$3(f),R=Math.cos(N),y=(-c-2*M*R)/(3*l),S=(-c+M*(R+THREE_SQRT*Math.sin(N)))/(3*l),D=(-c+M*(R-THREE_SQRT*Math.sin(N)))/(3*l);y>=0&&y<=1&&(s[g++]=y),S>=0&&S<=1&&(s[g++]=S),D>=0&&D<=1&&(s[g++]=D)}}return g}function cubicExtrema(t,n,a,r,o){var s=6*a-12*n+6*t,l=9*n+3*r-3*t-9*a,c=3*n-3*t,u=0;if(isAroundZero(l)){if(isNotAroundZero$1(s)){var d=-c/s;d>=0&&d<=1&&(o[u++]=d)}}else{var f=s*s-4*l*c;if(isAroundZero(f))o[0]=-s/(2*l);else if(f>0){var v=mathSqrt$3(f),d=(-s+v)/(2*l),_=(-s-v)/(2*l);d>=0&&d<=1&&(o[u++]=d),_>=0&&_<=1&&(o[u++]=_)}}return u}function cubicSubdivide(t,n,a,r,o,s){var l=(n-t)*o+t,c=(a-n)*o+n,u=(r-a)*o+a,d=(c-l)*o+l,f=(u-c)*o+c,v=(f-d)*o+d;s[0]=t,s[1]=l,s[2]=d,s[3]=v,s[4]=v,s[5]=f,s[6]=u,s[7]=r}function cubicProjectPoint(t,n,a,r,o,s,l,c,u,d,f){var v,_=.005,g=1/0,y,b,T,S;_v0[0]=u,_v0[1]=d;for(var C=0;C<1;C+=.05)_v1[0]=cubicAt(t,a,o,l,C),_v1[1]=cubicAt(n,r,s,c,C),T=distSquare(_v0,_v1),T<g&&(v=C,g=T);g=1/0;for(var E=0;E<32&&!(_<EPSILON_NUMERIC);E++)y=v-_,b=v+_,_v1[0]=cubicAt(t,a,o,l,y),_v1[1]=cubicAt(n,r,s,c,y),T=distSquare(_v1,_v0),y>=0&&T<g?(v=y,g=T):(_v2[0]=cubicAt(t,a,o,l,b),_v2[1]=cubicAt(n,r,s,c,b),S=distSquare(_v2,_v0),b<=1&&S<g?(v=b,g=S):_*=.5);return mathSqrt$3(g)}function cubicLength(t,n,a,r,o,s,l,c,u){for(var d=t,f=n,v=0,_=1/u,g=1;g<=u;g++){var y=g*_,b=cubicAt(t,a,o,l,y),T=cubicAt(n,r,s,c,y),S=b-d,C=T-f;v+=Math.sqrt(S*S+C*C),d=b,f=T}return v}function quadraticAt(t,n,a,r){var o=1-r;return o*(o*t+2*r*n)+r*r*a}function quadraticDerivativeAt(t,n,a,r){return 2*((1-r)*(n-t)+r*(a-n))}function quadraticRootAt(t,n,a,r,o){var s=t-2*n+a,l=2*(n-t),c=t-r,u=0;if(isAroundZero(s)){if(isNotAroundZero$1(l)){var d=-c/l;d>=0&&d<=1&&(o[u++]=d)}}else{var f=l*l-4*s*c;if(isAroundZero(f)){var d=-l/(2*s);d>=0&&d<=1&&(o[u++]=d)}else if(f>0){var v=mathSqrt$3(f),d=(-l+v)/(2*s),_=(-l-v)/(2*s);d>=0&&d<=1&&(o[u++]=d),_>=0&&_<=1&&(o[u++]=_)}}return u}function quadraticExtremum(t,n,a){var r=t+a-2*n;return r===0?.5:(t-n)/r}function quadraticSubdivide(t,n,a,r,o){var s=(n-t)*r+t,l=(a-n)*r+n,c=(l-s)*r+s;o[0]=t,o[1]=s,o[2]=c,o[3]=c,o[4]=l,o[5]=a}function quadraticProjectPoint(t,n,a,r,o,s,l,c,u){var d,f=.005,v=1/0;_v0[0]=l,_v0[1]=c;for(var _=0;_<1;_+=.05){_v1[0]=quadraticAt(t,a,o,_),_v1[1]=quadraticAt(n,r,s,_);var g=distSquare(_v0,_v1);g<v&&(d=_,v=g)}v=1/0;for(var y=0;y<32&&!(f<EPSILON_NUMERIC);y++){var b=d-f,T=d+f;_v1[0]=quadraticAt(t,a,o,b),_v1[1]=quadraticAt(n,r,s,b);var g=distSquare(_v1,_v0);if(b>=0&&g<v)d=b,v=g;else{_v2[0]=quadraticAt(t,a,o,T),_v2[1]=quadraticAt(n,r,s,T);var S=distSquare(_v2,_v0);T<=1&&S<v?(d=T,v=S):f*=.5}}return mathSqrt$3(v)}function quadraticLength(t,n,a,r,o,s,l){for(var c=t,u=n,d=0,f=1/l,v=1;v<=l;v++){var _=v*f,g=quadraticAt(t,a,o,_),y=quadraticAt(n,r,s,_),b=g-c,T=y-u;d+=Math.sqrt(b*b+T*T),c=g,u=y}return d}var regexp=/cubic-bezier\(([0-9,\.e ]+)\)/;function createCubicEasingFunc(t){var n=t&&regexp.exec(t);if(n){var a=n[1].split(","),r=+trim(a[0]),o=+trim(a[1]),s=+trim(a[2]),l=+trim(a[3]);if(isNaN(r+o+s+l))return;var c=[];return function(u){return u<=0?0:u>=1?1:cubicRootAt(0,r,s,1,u,c)&&cubicAt(0,o,l,1,c[0])}}}var Clip=function(){function t(n){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=n.life||1e3,this._delay=n.delay||0,this.loop=n.loop||!1,this.onframe=n.onframe||noop,this.ondestroy=n.ondestroy||noop,this.onrestart=n.onrestart||noop,n.easing&&this.setEasing(n.easing)}return t.prototype.step=function(n,a){if(this._inited||(this._startTime=n+this._delay,this._inited=!0),this._paused){this._pausedTime+=a;return}var r=this._life,o=n-this._startTime-this._pausedTime,s=o/r;s<0&&(s=0),s=Math.min(s,1);var l=this.easingFunc,c=l?l(s):s;if(this.onframe(c),s===1)if(this.loop){var u=o%r;this._startTime=n-u,this._pausedTime=0,this.onrestart()}else return!0;return!1},t.prototype.pause=function(){this._paused=!0},t.prototype.resume=function(){this._paused=!1},t.prototype.setEasing=function(n){this.easing=n,this.easingFunc=isFunction(n)?n:easingFuncs[n]||createCubicEasingFunc(n)},t}(),Entry=function(){function t(n){this.value=n}return t}(),LinkedList=function(){function t(){this._len=0}return t.prototype.insert=function(n){var a=new Entry(n);return this.insertEntry(a),a},t.prototype.insertEntry=function(n){this.head?(this.tail.next=n,n.prev=this.tail,n.next=null,this.tail=n):this.head=this.tail=n,this._len++},t.prototype.remove=function(n){var a=n.prev,r=n.next;a?a.next=r:this.head=r,r?r.prev=a:this.tail=a,n.next=n.prev=null,this._len--},t.prototype.len=function(){return this._len},t.prototype.clear=function(){this.head=this.tail=null,this._len=0},t}(),LRU=function(){function t(n){this._list=new LinkedList,this._maxSize=10,this._map={},this._maxSize=n}return t.prototype.put=function(n,a){var r=this._list,o=this._map,s=null;if(o[n]==null){var l=r.len(),c=this._lastRemovedEntry;if(l>=this._maxSize&&l>0){var u=r.head;r.remove(u),delete o[u.key],s=u.value,this._lastRemovedEntry=u}c?c.value=a:c=new Entry(a),c.key=n,r.insertEntry(c),o[n]=c}return s},t.prototype.get=function(n){var a=this._map[n],r=this._list;if(a!=null)return a!==r.tail&&(r.remove(a),r.insertEntry(a)),a.value},t.prototype.clear=function(){this._list.clear(),this._map={}},t.prototype.len=function(){return this._list.len()},t}(),kCSSColorTable={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function clampCssByte(t){return t=Math.round(t),t<0?0:t>255?255:t}function clampCssAngle(t){return t=Math.round(t),t<0?0:t>360?360:t}function clampCssFloat(t){return t<0?0:t>1?1:t}function parseCssInt(t){var n=t;return n.length&&n.charAt(n.length-1)==="%"?clampCssByte(parseFloat(n)/100*255):clampCssByte(parseInt(n,10))}function parseCssFloat(t){var n=t;return n.length&&n.charAt(n.length-1)==="%"?clampCssFloat(parseFloat(n)/100):clampCssFloat(parseFloat(n))}function cssHueToRgb(t,n,a){return a<0?a+=1:a>1&&(a-=1),a*6<1?t+(n-t)*a*6:a*2<1?n:a*3<2?t+(n-t)*(2/3-a)*6:t}function lerpNumber(t,n,a){return t+(n-t)*a}function setRgba(t,n,a,r,o){return t[0]=n,t[1]=a,t[2]=r,t[3]=o,t}function copyRgba(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}var colorCache=new LRU(20),lastRemovedArr=null;function putToCache(t,n){lastRemovedArr&&copyRgba(lastRemovedArr,n),lastRemovedArr=colorCache.put(t,lastRemovedArr||n.slice())}function parse(t,n){if(t){n=n||[];var a=colorCache.get(t);if(a)return copyRgba(n,a);t=t+"";var r=t.replace(/ /g,"").toLowerCase();if(r in kCSSColorTable)return copyRgba(n,kCSSColorTable[r]),putToCache(t,n),n;var o=r.length;if(r.charAt(0)==="#"){if(o===4||o===5){var s=parseInt(r.slice(1,4),16);if(!(s>=0&&s<=4095)){setRgba(n,0,0,0,1);return}return setRgba(n,(s&3840)>>4|(s&3840)>>8,s&240|(s&240)>>4,s&15|(s&15)<<4,o===5?parseInt(r.slice(4),16)/15:1),putToCache(t,n),n}else if(o===7||o===9){var s=parseInt(r.slice(1,7),16);if(!(s>=0&&s<=16777215)){setRgba(n,0,0,0,1);return}return setRgba(n,(s&16711680)>>16,(s&65280)>>8,s&255,o===9?parseInt(r.slice(7),16)/255:1),putToCache(t,n),n}return}var l=r.indexOf("("),c=r.indexOf(")");if(l!==-1&&c+1===o){var u=r.substr(0,l),d=r.substr(l+1,c-(l+1)).split(","),f=1;switch(u){case"rgba":if(d.length!==4)return d.length===3?setRgba(n,+d[0],+d[1],+d[2],1):setRgba(n,0,0,0,1);f=parseCssFloat(d.pop());case"rgb":if(d.length>=3)return setRgba(n,parseCssInt(d[0]),parseCssInt(d[1]),parseCssInt(d[2]),d.length===3?f:parseCssFloat(d[3])),putToCache(t,n),n;setRgba(n,0,0,0,1);return;case"hsla":if(d.length!==4){setRgba(n,0,0,0,1);return}return d[3]=parseCssFloat(d[3]),hsla2rgba(d,n),putToCache(t,n),n;case"hsl":if(d.length!==3){setRgba(n,0,0,0,1);return}return hsla2rgba(d,n),putToCache(t,n),n;default:return}}setRgba(n,0,0,0,1)}}function hsla2rgba(t,n){var a=(parseFloat(t[0])%360+360)%360/360,r=parseCssFloat(t[1]),o=parseCssFloat(t[2]),s=o<=.5?o*(r+1):o+r-o*r,l=o*2-s;return n=n||[],setRgba(n,clampCssByte(cssHueToRgb(l,s,a+1/3)*255),clampCssByte(cssHueToRgb(l,s,a)*255),clampCssByte(cssHueToRgb(l,s,a-1/3)*255),1),t.length===4&&(n[3]=t[3]),n}function rgba2hsla(t){if(t){var n=t[0]/255,a=t[1]/255,r=t[2]/255,o=Math.min(n,a,r),s=Math.max(n,a,r),l=s-o,c=(s+o)/2,u,d;if(l===0)u=0,d=0;else{c<.5?d=l/(s+o):d=l/(2-s-o);var f=((s-n)/6+l/2)/l,v=((s-a)/6+l/2)/l,_=((s-r)/6+l/2)/l;n===s?u=_-v:a===s?u=1/3+f-_:r===s&&(u=2/3+v-f),u<0&&(u+=1),u>1&&(u-=1)}var g=[u*360,d,c];return t[3]!=null&&g.push(t[3]),g}}function lift(t,n){var a=parse(t);if(a){for(var r=0;r<3;r++)a[r]=a[r]*(1-n)|0,a[r]>255?a[r]=255:a[r]<0&&(a[r]=0);return stringify(a,a.length===4?"rgba":"rgb")}}function fastLerp(t,n,a){if(!(!(n&&n.length)||!(t>=0&&t<=1))){a=a||[];var r=t*(n.length-1),o=Math.floor(r),s=Math.ceil(r),l=n[o],c=n[s],u=r-o;return a[0]=clampCssByte(lerpNumber(l[0],c[0],u)),a[1]=clampCssByte(lerpNumber(l[1],c[1],u)),a[2]=clampCssByte(lerpNumber(l[2],c[2],u)),a[3]=clampCssFloat(lerpNumber(l[3],c[3],u)),a}}function modifyHSL(t,n,a,r){var o=parse(t);if(t)return o=rgba2hsla(o),n!=null&&(o[0]=clampCssAngle(isFunction(n)?n(o[0]):n)),a!=null&&(o[1]=parseCssFloat(isFunction(a)?a(o[1]):a)),r!=null&&(o[2]=parseCssFloat(isFunction(r)?r(o[2]):r)),stringify(hsla2rgba(o),"rgba")}function modifyAlpha(t,n){var a=parse(t);if(a&&n!=null)return a[3]=clampCssFloat(n),stringify(a,"rgba")}function stringify(t,n){if(!(!t||!t.length)){var a=t[0]+","+t[1]+","+t[2];return(n==="rgba"||n==="hsva"||n==="hsla")&&(a+=","+t[3]),n+"("+a+")"}}function lum(t,n){var a=parse(t);return a?(.299*a[0]+.587*a[1]+.114*a[2])*a[3]/255+(1-a[3])*n:0}var liftedColorCache=new LRU(100);function liftColor(t){if(isString(t)){var n=liftedColorCache.get(t);return n||(n=lift(t,-.1),liftedColorCache.put(t,n)),n}else if(isGradientObject(t)){var a=extend({},t);return a.colorStops=map$1(t.colorStops,function(r){return{offset:r.offset,color:lift(r.color,-.1)}}),a}return t}function isLinearGradient(t){return t.type==="linear"}function isRadialGradient(t){return t.type==="radial"}(function(){return env.hasGlobalWindow&&isFunction(window.btoa)?function(t){return window.btoa(unescape(encodeURIComponent(t)))}:typeof Buffer<"u"?function(t){return Buffer.from(t).toString("base64")}:function(t){return null}})();var arraySlice=Array.prototype.slice;function interpolateNumber(t,n,a){return(n-t)*a+t}function interpolate1DArray(t,n,a,r){for(var o=n.length,s=0;s<o;s++)t[s]=interpolateNumber(n[s],a[s],r);return t}function interpolate2DArray(t,n,a,r){for(var o=n.length,s=o&&n[0].length,l=0;l<o;l++){t[l]||(t[l]=[]);for(var c=0;c<s;c++)t[l][c]=interpolateNumber(n[l][c],a[l][c],r)}return t}function add1DArray(t,n,a,r){for(var o=n.length,s=0;s<o;s++)t[s]=n[s]+a[s]*r;return t}function add2DArray(t,n,a,r){for(var o=n.length,s=o&&n[0].length,l=0;l<o;l++){t[l]||(t[l]=[]);for(var c=0;c<s;c++)t[l][c]=n[l][c]+a[l][c]*r}return t}function fillColorStops(t,n){for(var a=t.length,r=n.length,o=a>r?n:t,s=Math.min(a,r),l=o[s-1]||{color:[0,0,0,0],offset:0},c=s;c<Math.max(a,r);c++)o.push({offset:l.offset,color:l.color.slice()})}function fillArray(t,n,a){var r=t,o=n;if(!(!r.push||!o.push)){var s=r.length,l=o.length;if(s!==l){var c=s>l;if(c)r.length=l;else for(var u=s;u<l;u++)r.push(a===1?o[u]:arraySlice.call(o[u]))}for(var d=r[0]&&r[0].length,u=0;u<r.length;u++)if(a===1)isNaN(r[u])&&(r[u]=o[u]);else for(var f=0;f<d;f++)isNaN(r[u][f])&&(r[u][f]=o[u][f])}}function cloneValue(t){if(isArrayLike(t)){var n=t.length;if(isArrayLike(t[0])){for(var a=[],r=0;r<n;r++)a.push(arraySlice.call(t[r]));return a}return arraySlice.call(t)}return t}function rgba2String(t){return t[0]=Math.floor(t[0])||0,t[1]=Math.floor(t[1])||0,t[2]=Math.floor(t[2])||0,t[3]=t[3]==null?1:t[3],"rgba("+t.join(",")+")"}function guessArrayDim(t){return isArrayLike(t&&t[0])?2:1}var VALUE_TYPE_NUMBER=0,VALUE_TYPE_1D_ARRAY=1,VALUE_TYPE_2D_ARRAY=2,VALUE_TYPE_COLOR=3,VALUE_TYPE_LINEAR_GRADIENT=4,VALUE_TYPE_RADIAL_GRADIENT=5,VALUE_TYPE_UNKOWN=6;function isGradientValueType(t){return t===VALUE_TYPE_LINEAR_GRADIENT||t===VALUE_TYPE_RADIAL_GRADIENT}function isArrayValueType(t){return t===VALUE_TYPE_1D_ARRAY||t===VALUE_TYPE_2D_ARRAY}var tmpRgba=[0,0,0,0],Track=function(){function t(n){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=n}return t.prototype.isFinished=function(){return this._finished},t.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},t.prototype.needsAnimate=function(){return this.keyframes.length>=1},t.prototype.getAdditiveTrack=function(){return this._additiveTrack},t.prototype.addKeyframe=function(n,a,r){this._needsSort=!0;var o=this.keyframes,s=o.length,l=!1,c=VALUE_TYPE_UNKOWN,u=a;if(isArrayLike(a)){var d=guessArrayDim(a);c=d,(d===1&&!isNumber(a[0])||d===2&&!isNumber(a[0][0]))&&(l=!0)}else if(isNumber(a)&&!eqNaN(a))c=VALUE_TYPE_NUMBER;else if(isString(a))if(!isNaN(+a))c=VALUE_TYPE_NUMBER;else{var f=parse(a);f&&(u=f,c=VALUE_TYPE_COLOR)}else if(isGradientObject(a)){var v=extend({},u);v.colorStops=map$1(a.colorStops,function(g){return{offset:g.offset,color:parse(g.color)}}),isLinearGradient(a)?c=VALUE_TYPE_LINEAR_GRADIENT:isRadialGradient(a)&&(c=VALUE_TYPE_RADIAL_GRADIENT),u=v}s===0?this.valType=c:(c!==this.valType||c===VALUE_TYPE_UNKOWN)&&(l=!0),this.discrete=this.discrete||l;var _={time:n,value:u,rawValue:a,percent:0};return r&&(_.easing=r,_.easingFunc=isFunction(r)?r:easingFuncs[r]||createCubicEasingFunc(r)),o.push(_),_},t.prototype.prepare=function(n,a){var r=this.keyframes;this._needsSort&&r.sort(function(b,T){return b.time-T.time});for(var o=this.valType,s=r.length,l=r[s-1],c=this.discrete,u=isArrayValueType(o),d=isGradientValueType(o),f=0;f<s;f++){var v=r[f],_=v.value,g=l.value;v.percent=v.time/n,c||(u&&f!==s-1?fillArray(_,g,o):d&&fillColorStops(_.colorStops,g.colorStops))}if(!c&&o!==VALUE_TYPE_RADIAL_GRADIENT&&a&&this.needsAnimate()&&a.needsAnimate()&&o===a.valType&&!a._finished){this._additiveTrack=a;for(var y=r[0].value,f=0;f<s;f++)o===VALUE_TYPE_NUMBER?r[f].additiveValue=r[f].value-y:o===VALUE_TYPE_COLOR?r[f].additiveValue=add1DArray([],r[f].value,y,-1):isArrayValueType(o)&&(r[f].additiveValue=o===VALUE_TYPE_1D_ARRAY?add1DArray([],r[f].value,y,-1):add2DArray([],r[f].value,y,-1))}},t.prototype.step=function(n,a){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var r=this._additiveTrack!=null,o=r?"additiveValue":"value",s=this.valType,l=this.keyframes,c=l.length,u=this.propName,d=s===VALUE_TYPE_COLOR,f,v=this._lastFr,_=Math.min,g,y;if(c===1)g=y=l[0];else{if(a<0)f=0;else if(a<this._lastFrP){var b=_(v+1,c-1);for(f=b;f>=0&&!(l[f].percent<=a);f--);f=_(f,c-2)}else{for(f=v;f<c&&!(l[f].percent>a);f++);f=_(f-1,c-2)}y=l[f+1],g=l[f]}if(g&&y){this._lastFr=f,this._lastFrP=a;var T=y.percent-g.percent,S=T===0?1:_((a-g.percent)/T,1);y.easingFunc&&(S=y.easingFunc(S));var C=r?this._additiveValue:d?tmpRgba:n[u];if((isArrayValueType(s)||d)&&!C&&(C=this._additiveValue=[]),this.discrete)n[u]=S<1?g.rawValue:y.rawValue;else if(isArrayValueType(s))s===VALUE_TYPE_1D_ARRAY?interpolate1DArray(C,g[o],y[o],S):interpolate2DArray(C,g[o],y[o],S);else if(isGradientValueType(s)){var E=g[o],x=y[o],A=s===VALUE_TYPE_LINEAR_GRADIENT;n[u]={type:A?"linear":"radial",x:interpolateNumber(E.x,x.x,S),y:interpolateNumber(E.y,x.y,S),colorStops:map$1(E.colorStops,function(M,R){var D=x.colorStops[R];return{offset:interpolateNumber(M.offset,D.offset,S),color:rgba2String(interpolate1DArray([],M.color,D.color,S))}}),global:x.global},A?(n[u].x2=interpolateNumber(E.x2,x.x2,S),n[u].y2=interpolateNumber(E.y2,x.y2,S)):n[u].r=interpolateNumber(E.r,x.r,S)}else if(d)interpolate1DArray(C,g[o],y[o],S),r||(n[u]=rgba2String(C));else{var N=interpolateNumber(g[o],y[o],S);r?this._additiveValue=N:n[u]=N}r&&this._addToTarget(n)}}},t.prototype._addToTarget=function(n){var a=this.valType,r=this.propName,o=this._additiveValue;a===VALUE_TYPE_NUMBER?n[r]=n[r]+o:a===VALUE_TYPE_COLOR?(parse(n[r],tmpRgba),add1DArray(tmpRgba,tmpRgba,o,1),n[r]=rgba2String(tmpRgba)):a===VALUE_TYPE_1D_ARRAY?add1DArray(n[r],n[r],o,1):a===VALUE_TYPE_2D_ARRAY&&add2DArray(n[r],n[r],o,1)},t}(),Animator=function(){function t(n,a,r,o){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=n,this._loop=a,a&&o){logError("Can' use additive animation on looped animation.");return}this._additiveAnimators=o,this._allowDiscrete=r}return t.prototype.getMaxTime=function(){return this._maxTime},t.prototype.getDelay=function(){return this._delay},t.prototype.getLoop=function(){return this._loop},t.prototype.getTarget=function(){return this._target},t.prototype.changeTarget=function(n){this._target=n},t.prototype.when=function(n,a,r){return this.whenWithKeys(n,a,keys(a),r)},t.prototype.whenWithKeys=function(n,a,r,o){for(var s=this._tracks,l=0;l<r.length;l++){var c=r[l],u=s[c];if(!u){u=s[c]=new Track(c);var d=void 0,f=this._getAdditiveTrack(c);if(f){var v=f.keyframes,_=v[v.length-1];d=_&&_.value,f.valType===VALUE_TYPE_COLOR&&d&&(d=rgba2String(d))}else d=this._target[c];if(d==null)continue;n>0&&u.addKeyframe(0,cloneValue(d),o),this._trackKeys.push(c)}u.addKeyframe(n,cloneValue(a[c]),o)}return this._maxTime=Math.max(this._maxTime,n),this},t.prototype.pause=function(){this._clip.pause(),this._paused=!0},t.prototype.resume=function(){this._clip.resume(),this._paused=!1},t.prototype.isPaused=function(){return!!this._paused},t.prototype.duration=function(n){return this._maxTime=n,this._force=!0,this},t.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var n=this._doneCbs;if(n)for(var a=n.length,r=0;r<a;r++)n[r].call(this)},t.prototype._abortedCallback=function(){this._setTracksFinished();var n=this.animation,a=this._abortedCbs;if(n&&n.removeClip(this._clip),this._clip=null,a)for(var r=0;r<a.length;r++)a[r].call(this)},t.prototype._setTracksFinished=function(){for(var n=this._tracks,a=this._trackKeys,r=0;r<a.length;r++)n[a[r]].setFinished()},t.prototype._getAdditiveTrack=function(n){var a,r=this._additiveAnimators;if(r)for(var o=0;o<r.length;o++){var s=r[o].getTrack(n);s&&(a=s)}return a},t.prototype.start=function(n){if(!(this._started>0)){this._started=1;for(var a=this,r=[],o=this._maxTime||0,s=0;s<this._trackKeys.length;s++){var l=this._trackKeys[s],c=this._tracks[l],u=this._getAdditiveTrack(l),d=c.keyframes,f=d.length;if(c.prepare(o,u),c.needsAnimate())if(!this._allowDiscrete&&c.discrete){var v=d[f-1];v&&(a._target[c.propName]=v.rawValue),c.setFinished()}else r.push(c)}if(r.length||this._force){var _=new Clip({life:o,loop:this._loop,delay:this._delay||0,onframe:function(g){a._started=2;var y=a._additiveAnimators;if(y){for(var b=!1,T=0;T<y.length;T++)if(y[T]._clip){b=!0;break}b||(a._additiveAnimators=null)}for(var T=0;T<r.length;T++)r[T].step(a._target,g);var S=a._onframeCbs;if(S)for(var T=0;T<S.length;T++)S[T](a._target,g)},ondestroy:function(){a._doneCallback()}});this._clip=_,this.animation&&this.animation.addClip(_),n&&_.setEasing(n)}else this._doneCallback();return this}},t.prototype.stop=function(n){if(this._clip){var a=this._clip;n&&a.onframe(1),this._abortedCallback()}},t.prototype.delay=function(n){return this._delay=n,this},t.prototype.during=function(n){return n&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(n)),this},t.prototype.done=function(n){return n&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(n)),this},t.prototype.aborted=function(n){return n&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(n)),this},t.prototype.getClip=function(){return this._clip},t.prototype.getTrack=function(n){return this._tracks[n]},t.prototype.getTracks=function(){var n=this;return map$1(this._trackKeys,function(a){return n._tracks[a]})},t.prototype.stopTracks=function(n,a){if(!n.length||!this._clip)return!0;for(var r=this._tracks,o=this._trackKeys,s=0;s<n.length;s++){var l=r[n[s]];l&&!l.isFinished()&&(a?l.step(this._target,1):this._started===1&&l.step(this._target,0),l.setFinished())}for(var c=!0,s=0;s<o.length;s++)if(!r[o[s]].isFinished()){c=!1;break}return c&&this._abortedCallback(),c},t.prototype.saveTo=function(n,a,r){if(n){a=a||this._trackKeys;for(var o=0;o<a.length;o++){var s=a[o],l=this._tracks[s];if(!(!l||l.isFinished())){var c=l.keyframes,u=c[r?0:c.length-1];u&&(n[s]=cloneValue(u.rawValue))}}}},t.prototype.__changeFinalValue=function(n,a){a=a||keys(n);for(var r=0;r<a.length;r++){var o=a[r],s=this._tracks[o];if(s){var l=s.keyframes;if(l.length>1){var c=l.pop();s.addKeyframe(c.time,n[o]),s.prepare(this._maxTime,s.getAdditiveTrack())}}}},t}();function getTime(){return new Date().getTime()}var Animation=function(t){__extends(n,t);function n(a){var r=t.call(this)||this;return r._running=!1,r._time=0,r._pausedTime=0,r._pauseStart=0,r._paused=!1,a=a||{},r.stage=a.stage||{},r}return n.prototype.addClip=function(a){a.animation&&this.removeClip(a),this._head?(this._tail.next=a,a.prev=this._tail,a.next=null,this._tail=a):this._head=this._tail=a,a.animation=this},n.prototype.addAnimator=function(a){a.animation=this;var r=a.getClip();r&&this.addClip(r)},n.prototype.removeClip=function(a){if(a.animation){var r=a.prev,o=a.next;r?r.next=o:this._head=o,o?o.prev=r:this._tail=r,a.next=a.prev=a.animation=null}},n.prototype.removeAnimator=function(a){var r=a.getClip();r&&this.removeClip(r),a.animation=null},n.prototype.update=function(a){for(var r=getTime()-this._pausedTime,o=r-this._time,s=this._head;s;){var l=s.next,c=s.step(r,o);c&&(s.ondestroy(),this.removeClip(s)),s=l}this._time=r,a||(this.trigger("frame",o),this.stage.update&&this.stage.update())},n.prototype._startLoop=function(){var a=this;this._running=!0;function r(){a._running&&(requestAnimationFrame$1(r),!a._paused&&a.update())}requestAnimationFrame$1(r)},n.prototype.start=function(){this._running||(this._time=getTime(),this._pausedTime=0,this._startLoop())},n.prototype.stop=function(){this._running=!1},n.prototype.pause=function(){this._paused||(this._pauseStart=getTime(),this._paused=!0)},n.prototype.resume=function(){this._paused&&(this._pausedTime+=getTime()-this._pauseStart,this._paused=!1)},n.prototype.clear=function(){for(var a=this._head;a;){var r=a.next;a.prev=a.next=a.animation=null,a=r}this._head=this._tail=null},n.prototype.isFinished=function(){return this._head==null},n.prototype.animate=function(a,r){r=r||{},this.start();var o=new Animator(a,r.loop);return this.addAnimator(o),o},n}(Eventful),TOUCH_CLICK_DELAY=300,globalEventSupported=env.domSupported,localNativeListenerNames=function(){var t=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],n=["touchstart","touchend","touchmove"],a={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},r=map$1(t,function(o){var s=o.replace("mouse","pointer");return a.hasOwnProperty(s)?s:o});return{mouse:t,touch:n,pointer:r}}(),globalNativeListenerNames={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},wheelEventSupported=!1;function isPointerFromTouch(t){var n=t.pointerType;return n==="pen"||n==="touch"}function setTouchTimer(t){t.touching=!0,t.touchTimer!=null&&(clearTimeout(t.touchTimer),t.touchTimer=null),t.touchTimer=setTimeout(function(){t.touching=!1,t.touchTimer=null},700)}function markTouch(t){t&&(t.zrByTouch=!0)}function normalizeGlobalEvent(t,n){return normalizeEvent(t.dom,new FakeGlobalEvent(t,n),!0)}function isLocalEl(t,n){for(var a=n,r=!1;a&&a.nodeType!==9&&!(r=a.domBelongToZr||a!==n&&a===t.painterRoot);)a=a.parentNode;return r}var FakeGlobalEvent=function(){function t(n,a){this.stopPropagation=noop,this.stopImmediatePropagation=noop,this.preventDefault=noop,this.type=a.type,this.target=this.currentTarget=n.dom,this.pointerType=a.pointerType,this.clientX=a.clientX,this.clientY=a.clientY}return t}(),localDOMHandlers={mousedown:function(t){t=normalizeEvent(this.dom,t),this.__mayPointerCapture=[t.zrX,t.zrY],this.trigger("mousedown",t)},mousemove:function(t){t=normalizeEvent(this.dom,t);var n=this.__mayPointerCapture;n&&(t.zrX!==n[0]||t.zrY!==n[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",t)},mouseup:function(t){t=normalizeEvent(this.dom,t),this.__togglePointerCapture(!1),this.trigger("mouseup",t)},mouseout:function(t){t=normalizeEvent(this.dom,t);var n=t.toElement||t.relatedTarget;isLocalEl(this,n)||(this.__pointerCapturing&&(t.zrEventControl="no_globalout"),this.trigger("mouseout",t))},wheel:function(t){wheelEventSupported=!0,t=normalizeEvent(this.dom,t),this.trigger("mousewheel",t)},mousewheel:function(t){wheelEventSupported||(t=normalizeEvent(this.dom,t),this.trigger("mousewheel",t))},touchstart:function(t){t=normalizeEvent(this.dom,t),markTouch(t),this.__lastTouchMoment=new Date,this.handler.processGesture(t,"start"),localDOMHandlers.mousemove.call(this,t),localDOMHandlers.mousedown.call(this,t)},touchmove:function(t){t=normalizeEvent(this.dom,t),markTouch(t),this.handler.processGesture(t,"change"),localDOMHandlers.mousemove.call(this,t)},touchend:function(t){t=normalizeEvent(this.dom,t),markTouch(t),this.handler.processGesture(t,"end"),localDOMHandlers.mouseup.call(this,t),+new Date-+this.__lastTouchMoment<TOUCH_CLICK_DELAY&&localDOMHandlers.click.call(this,t)},pointerdown:function(t){localDOMHandlers.mousedown.call(this,t)},pointermove:function(t){isPointerFromTouch(t)||localDOMHandlers.mousemove.call(this,t)},pointerup:function(t){localDOMHandlers.mouseup.call(this,t)},pointerout:function(t){isPointerFromTouch(t)||localDOMHandlers.mouseout.call(this,t)}};each$8(["click","dblclick","contextmenu"],function(t){localDOMHandlers[t]=function(n){n=normalizeEvent(this.dom,n),this.trigger(t,n)}});var globalDOMHandlers={pointermove:function(t){isPointerFromTouch(t)||globalDOMHandlers.mousemove.call(this,t)},pointerup:function(t){globalDOMHandlers.mouseup.call(this,t)},mousemove:function(t){this.trigger("mousemove",t)},mouseup:function(t){var n=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",t),n&&(t.zrEventControl="only_globalout",this.trigger("mouseout",t))}};function mountLocalDOMEventListeners(t,n){var a=n.domHandlers;env.pointerEventsSupported?each$8(localNativeListenerNames.pointer,function(r){mountSingleDOMEventListener(n,r,function(o){a[r].call(t,o)})}):(env.touchEventsSupported&&each$8(localNativeListenerNames.touch,function(r){mountSingleDOMEventListener(n,r,function(o){a[r].call(t,o),setTouchTimer(n)})}),each$8(localNativeListenerNames.mouse,function(r){mountSingleDOMEventListener(n,r,function(o){o=getNativeEvent(o),n.touching||a[r].call(t,o)})}))}function mountGlobalDOMEventListeners(t,n){env.pointerEventsSupported?each$8(globalNativeListenerNames.pointer,a):env.touchEventsSupported||each$8(globalNativeListenerNames.mouse,a);function a(r){function o(s){s=getNativeEvent(s),isLocalEl(t,s.target)||(s=normalizeGlobalEvent(t,s),n.domHandlers[r].call(t,s))}mountSingleDOMEventListener(n,r,o,{capture:!0})}}function mountSingleDOMEventListener(t,n,a,r){t.mounted[n]=a,t.listenerOpts[n]=r,addEventListener(t.domTarget,n,a,r)}function unmountDOMEventListeners(t){var n=t.mounted;for(var a in n)n.hasOwnProperty(a)&&removeEventListener(t.domTarget,a,n[a],t.listenerOpts[a]);t.mounted={}}var DOMHandlerScope=function(){function t(n,a){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=n,this.domHandlers=a}return t}(),HandlerDomProxy=function(t){__extends(n,t);function n(a,r){var o=t.call(this)||this;return o.__pointerCapturing=!1,o.dom=a,o.painterRoot=r,o._localHandlerScope=new DOMHandlerScope(a,localDOMHandlers),globalEventSupported&&(o._globalHandlerScope=new DOMHandlerScope(document,globalDOMHandlers)),mountLocalDOMEventListeners(o,o._localHandlerScope),o}return n.prototype.dispose=function(){unmountDOMEventListeners(this._localHandlerScope),globalEventSupported&&unmountDOMEventListeners(this._globalHandlerScope)},n.prototype.setCursor=function(a){this.dom.style&&(this.dom.style.cursor=a||"default")},n.prototype.__togglePointerCapture=function(a){if(this.__mayPointerCapture=null,globalEventSupported&&+this.__pointerCapturing^+a){this.__pointerCapturing=a;var r=this._globalHandlerScope;a?mountGlobalDOMEventListeners(this,r):unmountDOMEventListeners(r)}},n}(Eventful),dpr=1;env.hasGlobalWindow&&(dpr=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var devicePixelRatio=dpr,DARK_MODE_THRESHOLD=.4,DARK_LABEL_COLOR="#333",LIGHT_LABEL_COLOR="#ccc",LIGHTER_LABEL_COLOR="#eee",mIdentity=identity,EPSILON$2=5e-5;function isNotAroundZero(t){return t>EPSILON$2||t<-EPSILON$2}var scaleTmp=[],tmpTransform=[],originTransform=create(),abs=Math.abs,Transformable=function(){function t(){}return t.prototype.getLocalTransform=function(n){return t.getLocalTransform(this,n)},t.prototype.setPosition=function(n){this.x=n[0],this.y=n[1]},t.prototype.setScale=function(n){this.scaleX=n[0],this.scaleY=n[1]},t.prototype.setSkew=function(n){this.skewX=n[0],this.skewY=n[1]},t.prototype.setOrigin=function(n){this.originX=n[0],this.originY=n[1]},t.prototype.needLocalTransform=function(){return isNotAroundZero(this.rotation)||isNotAroundZero(this.x)||isNotAroundZero(this.y)||isNotAroundZero(this.scaleX-1)||isNotAroundZero(this.scaleY-1)||isNotAroundZero(this.skewX)||isNotAroundZero(this.skewY)},t.prototype.updateTransform=function(){var n=this.parent&&this.parent.transform,a=this.needLocalTransform(),r=this.transform;if(!(a||n)){r&&(mIdentity(r),this.invTransform=null);return}r=r||create(),a?this.getLocalTransform(r):mIdentity(r),n&&(a?mul(r,n,r):copy(r,n)),this.transform=r,this._resolveGlobalScaleRatio(r)},t.prototype._resolveGlobalScaleRatio=function(n){var a=this.globalScaleRatio;if(a!=null&&a!==1){this.getGlobalScale(scaleTmp);var r=scaleTmp[0]<0?-1:1,o=scaleTmp[1]<0?-1:1,s=((scaleTmp[0]-r)*a+r)/scaleTmp[0]||0,l=((scaleTmp[1]-o)*a+o)/scaleTmp[1]||0;n[0]*=s,n[1]*=s,n[2]*=l,n[3]*=l}this.invTransform=this.invTransform||create(),invert(this.invTransform,n)},t.prototype.getComputedTransform=function(){for(var n=this,a=[];n;)a.push(n),n=n.parent;for(;n=a.pop();)n.updateTransform();return this.transform},t.prototype.setLocalTransform=function(n){if(n){var a=n[0]*n[0]+n[1]*n[1],r=n[2]*n[2]+n[3]*n[3],o=Math.atan2(n[1],n[0]),s=Math.PI/2+o-Math.atan2(n[3],n[2]);r=Math.sqrt(r)*Math.cos(s),a=Math.sqrt(a),this.skewX=s,this.skewY=0,this.rotation=-o,this.x=+n[4],this.y=+n[5],this.scaleX=a,this.scaleY=r,this.originX=0,this.originY=0}},t.prototype.decomposeTransform=function(){if(this.transform){var n=this.parent,a=this.transform;n&&n.transform&&(n.invTransform=n.invTransform||create(),mul(tmpTransform,n.invTransform,a),a=tmpTransform);var r=this.originX,o=this.originY;(r||o)&&(originTransform[4]=r,originTransform[5]=o,mul(tmpTransform,a,originTransform),tmpTransform[4]-=r,tmpTransform[5]-=o,a=tmpTransform),this.setLocalTransform(a)}},t.prototype.getGlobalScale=function(n){var a=this.transform;return n=n||[],a?(n[0]=Math.sqrt(a[0]*a[0]+a[1]*a[1]),n[1]=Math.sqrt(a[2]*a[2]+a[3]*a[3]),a[0]<0&&(n[0]=-n[0]),a[3]<0&&(n[1]=-n[1]),n):(n[0]=1,n[1]=1,n)},t.prototype.transformCoordToLocal=function(n,a){var r=[n,a],o=this.invTransform;return o&&applyTransform$1(r,r,o),r},t.prototype.transformCoordToGlobal=function(n,a){var r=[n,a],o=this.transform;return o&&applyTransform$1(r,r,o),r},t.prototype.getLineScale=function(){var n=this.transform;return n&&abs(n[0]-1)>1e-10&&abs(n[3]-1)>1e-10?Math.sqrt(abs(n[0]*n[3]-n[2]*n[1])):1},t.prototype.copyTransform=function(n){copyTransform(this,n)},t.getLocalTransform=function(n,a){a=a||[];var r=n.originX||0,o=n.originY||0,s=n.scaleX,l=n.scaleY,c=n.anchorX,u=n.anchorY,d=n.rotation||0,f=n.x,v=n.y,_=n.skewX?Math.tan(n.skewX):0,g=n.skewY?Math.tan(-n.skewY):0;if(r||o||c||u){var y=r+c,b=o+u;a[4]=-y*s-_*b*l,a[5]=-b*l-g*y*s}else a[4]=a[5]=0;return a[0]=s,a[3]=l,a[1]=g*s,a[2]=_*l,d&&rotate(a,a,d),a[4]+=r+f,a[5]+=o+v,a},t.initDefaultProps=function(){var n=t.prototype;n.scaleX=n.scaleY=n.globalScaleRatio=1,n.x=n.y=n.originX=n.originY=n.skewX=n.skewY=n.rotation=n.anchorX=n.anchorY=0}(),t}(),TRANSFORMABLE_PROPS=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function copyTransform(t,n){for(var a=0;a<TRANSFORMABLE_PROPS.length;a++){var r=TRANSFORMABLE_PROPS[a];t[r]=n[r]}}function ensureFontMeasureInfo(t){_fontMeasureInfoCache||(_fontMeasureInfoCache=new LRU(100)),t=t||DEFAULT_FONT;var n=_fontMeasureInfoCache.get(t);return n||(n={font:t,strWidthCache:new LRU(500),asciiWidthMap:null,asciiWidthMapTried:!1,stWideCharWidth:platformApi.measureText("",t).width,asciiCharWidth:platformApi.measureText("a",t).width},_fontMeasureInfoCache.put(t,n)),n}var _fontMeasureInfoCache;function tryCreateASCIIWidthMap(t){if(!(_getASCIIWidthMapLongCount>=GET_ASCII_WIDTH_LONG_COUNT_MAX)){t=t||DEFAULT_FONT;for(var n=[],a=+new Date,r=0;r<=127;r++)n[r]=platformApi.measureText(String.fromCharCode(r),t).width;var o=+new Date-a;return o>16?_getASCIIWidthMapLongCount=GET_ASCII_WIDTH_LONG_COUNT_MAX:o>2&&_getASCIIWidthMapLongCount++,n}}var _getASCIIWidthMapLongCount=0,GET_ASCII_WIDTH_LONG_COUNT_MAX=5;function measureCharWidth(t,n){return t.asciiWidthMapTried||(t.asciiWidthMap=tryCreateASCIIWidthMap(t.font),t.asciiWidthMapTried=!0),0<=n&&n<=127?t.asciiWidthMap!=null?t.asciiWidthMap[n]:t.asciiCharWidth:t.stWideCharWidth}function measureWidth(t,n){var a=t.strWidthCache,r=a.get(n);return r==null&&(r=platformApi.measureText(n,t.font).width,a.put(n,r)),r}function innerGetBoundingRect(t,n,a,r){var o=measureWidth(ensureFontMeasureInfo(n),t),s=getLineHeight(n),l=adjustTextX(0,o,a),c=adjustTextY(0,s,r),u=new BoundingRect(l,c,o,s);return u}function getBoundingRect(t,n,a,r){var o=((t||"")+"").split(`
`),s=o.length;if(s===1)return innerGetBoundingRect(o[0],n,a,r);for(var l=new BoundingRect(0,0,0,0),c=0;c<o.length;c++){var u=innerGetBoundingRect(o[c],n,a,r);c===0?l.copy(u):l.union(u)}return l}function adjustTextX(t,n,a,r){return a==="right"?r?t+=n:t-=n:a==="center"&&(r?t+=n/2:t-=n/2),t}function adjustTextY(t,n,a,r){return a==="middle"?r?t+=n/2:t-=n/2:a==="bottom"&&(r?t+=n:t-=n),t}function getLineHeight(t){return ensureFontMeasureInfo(t).stWideCharWidth}function parsePercent$1(t,n){return typeof t=="string"?t.lastIndexOf("%")>=0?parseFloat(t)/100*n:parseFloat(t):t}function calculateTextPosition(t,n,a){var r=n.position||"inside",o=n.distance!=null?n.distance:5,s=a.height,l=a.width,c=s/2,u=a.x,d=a.y,f="left",v="top";if(r instanceof Array)u+=parsePercent$1(r[0],a.width),d+=parsePercent$1(r[1],a.height),f=null,v=null;else switch(r){case"left":u-=o,d+=c,f="right",v="middle";break;case"right":u+=o+l,d+=c,v="middle";break;case"top":u+=l/2,d-=o,f="center",v="bottom";break;case"bottom":u+=l/2,d+=s+o,f="center";break;case"inside":u+=l/2,d+=c,f="center",v="middle";break;case"insideLeft":u+=o,d+=c,v="middle";break;case"insideRight":u+=l-o,d+=c,f="right",v="middle";break;case"insideTop":u+=l/2,d+=o,f="center";break;case"insideBottom":u+=l/2,d+=s-o,f="center",v="bottom";break;case"insideTopLeft":u+=o,d+=o;break;case"insideTopRight":u+=l-o,d+=o,f="right";break;case"insideBottomLeft":u+=o,d+=s-o,v="bottom";break;case"insideBottomRight":u+=l-o,d+=s-o,f="right",v="bottom";break}return t=t||{},t.x=u,t.y=d,t.align=f,t.verticalAlign=v,t}var PRESERVED_NORMAL_STATE="__zr_normal__",PRIMARY_STATES_KEYS$1=TRANSFORMABLE_PROPS.concat(["ignore"]),DEFAULT_ANIMATABLE_MAP=reduce(TRANSFORMABLE_PROPS,function(t,n){return t[n]=!0,t},{ignore:!1}),tmpTextPosCalcRes={},tmpBoundingRect=new BoundingRect(0,0,0,0),tmpInnerTextTrans=[],Element$1=function(){function t(n){this.id=guid(),this.animators=[],this.currentStates=[],this.states={},this._init(n)}return t.prototype._init=function(n){this.attr(n)},t.prototype.drift=function(n,a,r){switch(this.draggable){case"horizontal":a=0;break;case"vertical":n=0;break}var o=this.transform;o||(o=this.transform=[1,0,0,1,0,0]),o[4]+=n,o[5]+=a,this.decomposeTransform(),this.markRedraw()},t.prototype.beforeUpdate=function(){},t.prototype.afterUpdate=function(){},t.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},t.prototype.updateInnerText=function(n){var a=this._textContent;if(a&&(!a.ignore||n)){this.textConfig||(this.textConfig={});var r=this.textConfig,o=r.local,s=a.innerTransformable,l=void 0,c=void 0,u=!1;s.parent=o?this:null;var d=!1;s.copyTransform(a);var f=r.position!=null,v=r.autoOverflowArea,_=void 0;if((v||f)&&(_=tmpBoundingRect,r.layoutRect?_.copy(r.layoutRect):_.copy(this.getBoundingRect()),o||_.applyTransform(this.transform)),f){this.calculateTextPosition?this.calculateTextPosition(tmpTextPosCalcRes,r,_):calculateTextPosition(tmpTextPosCalcRes,r,_),s.x=tmpTextPosCalcRes.x,s.y=tmpTextPosCalcRes.y,l=tmpTextPosCalcRes.align,c=tmpTextPosCalcRes.verticalAlign;var g=r.origin;if(g&&r.rotation!=null){var y=void 0,b=void 0;g==="center"?(y=_.width*.5,b=_.height*.5):(y=parsePercent$1(g[0],_.width),b=parsePercent$1(g[1],_.height)),d=!0,s.originX=-s.x+y+(o?0:_.x),s.originY=-s.y+b+(o?0:_.y)}}r.rotation!=null&&(s.rotation=r.rotation);var T=r.offset;T&&(s.x+=T[0],s.y+=T[1],d||(s.originX=-T[0],s.originY=-T[1]));var S=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={});if(v){var C=S.overflowRect=S.overflowRect||new BoundingRect(0,0,0,0);s.getLocalTransform(tmpInnerTextTrans),invert(tmpInnerTextTrans,tmpInnerTextTrans),BoundingRect.copy(C,_),C.applyTransform(tmpInnerTextTrans)}else S.overflowRect=null;var E=r.inside==null?typeof r.position=="string"&&r.position.indexOf("inside")>=0:r.inside,x=void 0,A=void 0,N=void 0;E&&this.canBeInsideText()?(x=r.insideFill,A=r.insideStroke,(x==null||x==="auto")&&(x=this.getInsideTextFill()),(A==null||A==="auto")&&(A=this.getInsideTextStroke(x),N=!0)):(x=r.outsideFill,A=r.outsideStroke,(x==null||x==="auto")&&(x=this.getOutsideFill()),(A==null||A==="auto")&&(A=this.getOutsideStroke(x),N=!0)),x=x||"#000",(x!==S.fill||A!==S.stroke||N!==S.autoStroke||l!==S.align||c!==S.verticalAlign)&&(u=!0,S.fill=x,S.stroke=A,S.autoStroke=N,S.align=l,S.verticalAlign=c,a.setDefaultTextStyle(S)),a.__dirty|=REDRAW_BIT,u&&a.dirtyStyle(!0)}},t.prototype.canBeInsideText=function(){return!0},t.prototype.getInsideTextFill=function(){return"#fff"},t.prototype.getInsideTextStroke=function(n){return"#000"},t.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?LIGHT_LABEL_COLOR:DARK_LABEL_COLOR},t.prototype.getOutsideStroke=function(n){var a=this.__zr&&this.__zr.getBackgroundColor(),r=typeof a=="string"&&parse(a);r||(r=[255,255,255,1]);for(var o=r[3],s=this.__zr.isDarkMode(),l=0;l<3;l++)r[l]=r[l]*o+(s?0:255)*(1-o);return r[3]=1,stringify(r,"rgba")},t.prototype.traverse=function(n,a){},t.prototype.attrKV=function(n,a){n==="textConfig"?this.setTextConfig(a):n==="textContent"?this.setTextContent(a):n==="clipPath"?this.setClipPath(a):n==="extra"?(this.extra=this.extra||{},extend(this.extra,a)):this[n]=a},t.prototype.hide=function(){this.ignore=!0,this.markRedraw()},t.prototype.show=function(){this.ignore=!1,this.markRedraw()},t.prototype.attr=function(n,a){if(typeof n=="string")this.attrKV(n,a);else if(isObject$3(n))for(var r=n,o=keys(r),s=0;s<o.length;s++){var l=o[s];this.attrKV(l,n[l])}return this.markRedraw(),this},t.prototype.saveCurrentToNormalState=function(n){this._innerSaveToNormal(n);for(var a=this._normalState,r=0;r<this.animators.length;r++){var o=this.animators[r],s=o.__fromStateTransition;if(!(o.getLoop()||s&&s!==PRESERVED_NORMAL_STATE)){var l=o.targetName,c=l?a[l]:a;o.saveTo(c)}}},t.prototype._innerSaveToNormal=function(n){var a=this._normalState;a||(a=this._normalState={}),n.textConfig&&!a.textConfig&&(a.textConfig=this.textConfig),this._savePrimaryToNormal(n,a,PRIMARY_STATES_KEYS$1)},t.prototype._savePrimaryToNormal=function(n,a,r){for(var o=0;o<r.length;o++){var s=r[o];n[s]!=null&&!(s in a)&&(a[s]=this[s])}},t.prototype.hasState=function(){return this.currentStates.length>0},t.prototype.getState=function(n){return this.states[n]},t.prototype.ensureState=function(n){var a=this.states;return a[n]||(a[n]={}),a[n]},t.prototype.clearStates=function(n){this.useState(PRESERVED_NORMAL_STATE,!1,n)},t.prototype.useState=function(n,a,r,o){var s=n===PRESERVED_NORMAL_STATE,l=this.hasState();if(!(!l&&s)){var c=this.currentStates,u=this.stateTransition;if(!(indexOf(c,n)>=0&&(a||c.length===1))){var d;if(this.stateProxy&&!s&&(d=this.stateProxy(n)),d||(d=this.states&&this.states[n]),!d&&!s){logError("State "+n+" not exists.");return}s||this.saveCurrentToNormalState(d);var f=!!(d&&d.hoverLayer||o);f&&this._toggleHoverLayerFlag(!0),this._applyStateObj(n,d,this._normalState,a,!r&&!this.__inHover&&u&&u.duration>0,u);var v=this._textContent,_=this._textGuide;return v&&v.useState(n,a,r,f),_&&_.useState(n,a,r,f),s?(this.currentStates=[],this._normalState={}):a?this.currentStates.push(n):this.currentStates=[n],this._updateAnimationTargets(),this.markRedraw(),!f&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~REDRAW_BIT),d}}},t.prototype.useStates=function(n,a,r){if(!n.length)this.clearStates();else{var o=[],s=this.currentStates,l=n.length,c=l===s.length;if(c){for(var u=0;u<l;u++)if(n[u]!==s[u]){c=!1;break}}if(c)return;for(var u=0;u<l;u++){var d=n[u],f=void 0;this.stateProxy&&(f=this.stateProxy(d,n)),f||(f=this.states[d]),f&&o.push(f)}var v=o[l-1],_=!!(v&&v.hoverLayer||r);_&&this._toggleHoverLayerFlag(!0);var g=this._mergeStates(o),y=this.stateTransition;this.saveCurrentToNormalState(g),this._applyStateObj(n.join(","),g,this._normalState,!1,!a&&!this.__inHover&&y&&y.duration>0,y);var b=this._textContent,T=this._textGuide;b&&b.useStates(n,a,_),T&&T.useStates(n,a,_),this._updateAnimationTargets(),this.currentStates=n.slice(),this.markRedraw(),!_&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~REDRAW_BIT)}},t.prototype.isSilent=function(){for(var n=this;n;){if(n.silent)return!0;var a=n.__hostTarget;n=a?n.ignoreHostSilent?null:a:n.parent}return!1},t.prototype._updateAnimationTargets=function(){for(var n=0;n<this.animators.length;n++){var a=this.animators[n];a.targetName&&a.changeTarget(this[a.targetName])}},t.prototype.removeState=function(n){var a=indexOf(this.currentStates,n);if(a>=0){var r=this.currentStates.slice();r.splice(a,1),this.useStates(r)}},t.prototype.replaceState=function(n,a,r){var o=this.currentStates.slice(),s=indexOf(o,n),l=indexOf(o,a)>=0;s>=0?l?o.splice(s,1):o[s]=a:r&&!l&&o.push(a),this.useStates(o)},t.prototype.toggleState=function(n,a){a?this.useState(n,!0):this.removeState(n)},t.prototype._mergeStates=function(n){for(var a={},r,o=0;o<n.length;o++){var s=n[o];extend(a,s),s.textConfig&&(r=r||{},extend(r,s.textConfig))}return r&&(a.textConfig=r),a},t.prototype._applyStateObj=function(n,a,r,o,s,l){var c=!(a&&o);a&&a.textConfig?(this.textConfig=extend({},o?this.textConfig:r.textConfig),extend(this.textConfig,a.textConfig)):c&&r.textConfig&&(this.textConfig=r.textConfig);for(var u={},d=!1,f=0;f<PRIMARY_STATES_KEYS$1.length;f++){var v=PRIMARY_STATES_KEYS$1[f],_=s&&DEFAULT_ANIMATABLE_MAP[v];a&&a[v]!=null?_?(d=!0,u[v]=a[v]):this[v]=a[v]:c&&r[v]!=null&&(_?(d=!0,u[v]=r[v]):this[v]=r[v])}if(!s)for(var f=0;f<this.animators.length;f++){var g=this.animators[f],y=g.targetName;g.getLoop()||g.__changeFinalValue(y?(a||r)[y]:a||r)}d&&this._transitionState(n,u,l)},t.prototype._attachComponent=function(n){if(!(n.__zr&&!n.__hostTarget)&&n!==this){var a=this.__zr;a&&n.addSelfToZr(a),n.__zr=a,n.__hostTarget=this}},t.prototype._detachComponent=function(n){n.__zr&&n.removeSelfFromZr(n.__zr),n.__zr=null,n.__hostTarget=null},t.prototype.getClipPath=function(){return this._clipPath},t.prototype.setClipPath=function(n){this._clipPath&&this._clipPath!==n&&this.removeClipPath(),this._attachComponent(n),this._clipPath=n,this.markRedraw()},t.prototype.removeClipPath=function(){var n=this._clipPath;n&&(this._detachComponent(n),this._clipPath=null,this.markRedraw())},t.prototype.getTextContent=function(){return this._textContent},t.prototype.setTextContent=function(n){var a=this._textContent;a!==n&&(a&&a!==n&&this.removeTextContent(),n.innerTransformable=new Transformable,this._attachComponent(n),this._textContent=n,this.markRedraw())},t.prototype.setTextConfig=function(n){this.textConfig||(this.textConfig={}),extend(this.textConfig,n),this.markRedraw()},t.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},t.prototype.removeTextContent=function(){var n=this._textContent;n&&(n.innerTransformable=null,this._detachComponent(n),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},t.prototype.getTextGuideLine=function(){return this._textGuide},t.prototype.setTextGuideLine=function(n){this._textGuide&&this._textGuide!==n&&this.removeTextGuideLine(),this._attachComponent(n),this._textGuide=n,this.markRedraw()},t.prototype.removeTextGuideLine=function(){var n=this._textGuide;n&&(this._detachComponent(n),this._textGuide=null,this.markRedraw())},t.prototype.markRedraw=function(){this.__dirty|=REDRAW_BIT;var n=this.__zr;n&&(this.__inHover?n.refreshHover():n.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},t.prototype.dirty=function(){this.markRedraw()},t.prototype._toggleHoverLayerFlag=function(n){this.__inHover=n;var a=this._textContent,r=this._textGuide;a&&(a.__inHover=n),r&&(r.__inHover=n)},t.prototype.addSelfToZr=function(n){if(this.__zr!==n){this.__zr=n;var a=this.animators;if(a)for(var r=0;r<a.length;r++)n.animation.addAnimator(a[r]);this._clipPath&&this._clipPath.addSelfToZr(n),this._textContent&&this._textContent.addSelfToZr(n),this._textGuide&&this._textGuide.addSelfToZr(n)}},t.prototype.removeSelfFromZr=function(n){if(this.__zr){this.__zr=null;var a=this.animators;if(a)for(var r=0;r<a.length;r++)n.animation.removeAnimator(a[r]);this._clipPath&&this._clipPath.removeSelfFromZr(n),this._textContent&&this._textContent.removeSelfFromZr(n),this._textGuide&&this._textGuide.removeSelfFromZr(n)}},t.prototype.animate=function(n,a,r){var o=n?this[n]:this,s=new Animator(o,a,r);return n&&(s.targetName=n),this.addAnimator(s,n),s},t.prototype.addAnimator=function(n,a){var r=this.__zr,o=this;n.during(function(){o.updateDuringAnimation(a)}).done(function(){var s=o.animators,l=indexOf(s,n);l>=0&&s.splice(l,1)}),this.animators.push(n),r&&r.animation.addAnimator(n),r&&r.wakeUp()},t.prototype.updateDuringAnimation=function(n){this.markRedraw()},t.prototype.stopAnimation=function(n,a){for(var r=this.animators,o=r.length,s=[],l=0;l<o;l++){var c=r[l];!n||n===c.scope?c.stop(a):s.push(c)}return this.animators=s,this},t.prototype.animateTo=function(n,a,r){animateTo(this,n,a,r)},t.prototype.animateFrom=function(n,a,r){animateTo(this,n,a,r,!0)},t.prototype._transitionState=function(n,a,r,o){for(var s=animateTo(this,a,r,o),l=0;l<s.length;l++)s[l].__fromStateTransition=n},t.prototype.getBoundingRect=function(){return null},t.prototype.getPaintRect=function(){return null},t.initDefaultProps=function(){var n=t.prototype;n.type="element",n.name="",n.ignore=n.silent=n.ignoreHostSilent=n.isGroup=n.draggable=n.dragging=n.ignoreClip=n.__inHover=!1,n.__dirty=REDRAW_BIT;function a(r,o,s,l){Object.defineProperty(n,r,{get:function(){if(!this[o]){var u=this[o]=[];c(this,u)}return this[o]},set:function(u){this[s]=u[0],this[l]=u[1],this[o]=u,c(this,u)}});function c(u,d){Object.defineProperty(d,0,{get:function(){return u[s]},set:function(f){u[s]=f}}),Object.defineProperty(d,1,{get:function(){return u[l]},set:function(f){u[l]=f}})}}Object.defineProperty&&(a("position","_legacyPos","x","y"),a("scale","_legacyScale","scaleX","scaleY"),a("origin","_legacyOrigin","originX","originY"))}(),t}();mixin(Element$1,Eventful);mixin(Element$1,Transformable);function animateTo(t,n,a,r,o){a=a||{};var s=[];animateToShallow(t,"",t,n,a,r,s,o);var l=s.length,c=!1,u=a.done,d=a.aborted,f=function(){c=!0,l--,l<=0&&(c?u&&u():d&&d())},v=function(){l--,l<=0&&(c?u&&u():d&&d())};l||u&&u(),s.length>0&&a.during&&s[0].during(function(y,b){a.during(b)});for(var _=0;_<s.length;_++){var g=s[_];f&&g.done(f),v&&g.aborted(v),a.force&&g.duration(a.duration),g.start(a.easing)}return s}function copyArrShallow(t,n,a){for(var r=0;r<a;r++)t[r]=n[r]}function is2DArray(t){return isArrayLike(t[0])}function copyValue(t,n,a){if(isArrayLike(n[a]))if(isArrayLike(t[a])||(t[a]=[]),isTypedArray(n[a])){var r=n[a].length;t[a].length!==r&&(t[a]=new n[a].constructor(r),copyArrShallow(t[a],n[a],r))}else{var o=n[a],s=t[a],l=o.length;if(is2DArray(o))for(var c=o[0].length,u=0;u<l;u++)s[u]?copyArrShallow(s[u],o[u],c):s[u]=Array.prototype.slice.call(o[u]);else copyArrShallow(s,o,l);s.length=o.length}else t[a]=n[a]}function isValueSame(t,n){return t===n||isArrayLike(t)&&isArrayLike(n)&&is1DArraySame(t,n)}function is1DArraySame(t,n){var a=t.length;if(a!==n.length)return!1;for(var r=0;r<a;r++)if(t[r]!==n[r])return!1;return!0}function animateToShallow(t,n,a,r,o,s,l,c){for(var u=keys(r),d=o.duration,f=o.delay,v=o.additive,_=o.setToFinal,g=!isObject$3(s),y=t.animators,b=[],T=0;T<u.length;T++){var S=u[T],C=r[S];if(C!=null&&a[S]!=null&&(g||s[S]))if(isObject$3(C)&&!isArrayLike(C)&&!isGradientObject(C)){if(n){c||(a[S]=C,t.updateDuringAnimation(n));continue}animateToShallow(t,S,a[S],C,o,s&&s[S],l,c)}else b.push(S);else c||(a[S]=C,t.updateDuringAnimation(n),b.push(S))}var E=b.length;if(!v&&E)for(var x=0;x<y.length;x++){var A=y[x];if(A.targetName===n){var N=A.stopTracks(b);if(N){var M=indexOf(y,A);y.splice(M,1)}}}if(o.force||(b=filter(b,function(I){return!isValueSame(r[I],a[I])}),E=b.length),E>0||o.force&&!l.length){var R=void 0,D=void 0,L=void 0;if(c){D={},_&&(R={});for(var x=0;x<E;x++){var S=b[x];D[S]=a[S],_?R[S]=r[S]:a[S]=r[S]}}else if(_){L={};for(var x=0;x<E;x++){var S=b[x];L[S]=cloneValue(a[S]),copyValue(a,r,S)}}var A=new Animator(a,!1,!1,v?filter(y,function($){return $.targetName===n}):null);A.targetName=n,o.scope&&(A.scope=o.scope),_&&R&&A.whenWithKeys(0,R,b),L&&A.whenWithKeys(0,L,b),A.whenWithKeys(d??500,c?D:r,b).delay(f||0),t.addAnimator(A,n),l.push(A)}}var Group=function(t){__extends(n,t);function n(a){var r=t.call(this)||this;return r.isGroup=!0,r._children=[],r.attr(a),r}return n.prototype.childrenRef=function(){return this._children},n.prototype.children=function(){return this._children.slice()},n.prototype.childAt=function(a){return this._children[a]},n.prototype.childOfName=function(a){for(var r=this._children,o=0;o<r.length;o++)if(r[o].name===a)return r[o]},n.prototype.childCount=function(){return this._children.length},n.prototype.add=function(a){return a&&a!==this&&a.parent!==this&&(this._children.push(a),this._doAdd(a)),this},n.prototype.addBefore=function(a,r){if(a&&a!==this&&a.parent!==this&&r&&r.parent===this){var o=this._children,s=o.indexOf(r);s>=0&&(o.splice(s,0,a),this._doAdd(a))}return this},n.prototype.replace=function(a,r){var o=indexOf(this._children,a);return o>=0&&this.replaceAt(r,o),this},n.prototype.replaceAt=function(a,r){var o=this._children,s=o[r];if(a&&a!==this&&a.parent!==this&&a!==s){o[r]=a,s.parent=null;var l=this.__zr;l&&s.removeSelfFromZr(l),this._doAdd(a)}return this},n.prototype._doAdd=function(a){a.parent&&a.parent.remove(a),a.parent=this;var r=this.__zr;r&&r!==a.__zr&&a.addSelfToZr(r),r&&r.refresh()},n.prototype.remove=function(a){var r=this.__zr,o=this._children,s=indexOf(o,a);return s<0?this:(o.splice(s,1),a.parent=null,r&&a.removeSelfFromZr(r),r&&r.refresh(),this)},n.prototype.removeAll=function(){for(var a=this._children,r=this.__zr,o=0;o<a.length;o++){var s=a[o];r&&s.removeSelfFromZr(r),s.parent=null}return a.length=0,this},n.prototype.eachChild=function(a,r){for(var o=this._children,s=0;s<o.length;s++){var l=o[s];a.call(r,l,s)}return this},n.prototype.traverse=function(a,r){for(var o=0;o<this._children.length;o++){var s=this._children[o],l=a.call(r,s);s.isGroup&&!l&&s.traverse(a,r)}return this},n.prototype.addSelfToZr=function(a){t.prototype.addSelfToZr.call(this,a);for(var r=0;r<this._children.length;r++){var o=this._children[r];o.addSelfToZr(a)}},n.prototype.removeSelfFromZr=function(a){t.prototype.removeSelfFromZr.call(this,a);for(var r=0;r<this._children.length;r++){var o=this._children[r];o.removeSelfFromZr(a)}},n.prototype.getBoundingRect=function(a){for(var r=new BoundingRect(0,0,0,0),o=a||this._children,s=[],l=null,c=0;c<o.length;c++){var u=o[c];if(!(u.ignore||u.invisible)){var d=u.getBoundingRect(),f=u.getLocalTransform(s);f?(BoundingRect.applyTransform(r,d,f),l=l||r.clone(),l.union(r)):(l=l||d.clone(),l.union(d))}}return l||r},n}(Element$1);Group.prototype.type="group";/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var painterCtors={},instances$1={};function delInstance(t){delete instances$1[t]}function isDarkMode(t){if(!t)return!1;if(typeof t=="string")return lum(t,1)<DARK_MODE_THRESHOLD;if(t.colorStops){for(var n=t.colorStops,a=0,r=n.length,o=0;o<r;o++)a+=lum(n[o].color,1);return a/=r,a<DARK_MODE_THRESHOLD}return!1}var ZRender=function(){function t(n,a,r){var o=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,r=r||{},this.dom=a,this.id=n;var s=new Storage,l=r.renderer||"canvas";painterCtors[l]||(l=keys(painterCtors)[0]),r.useDirtyRect=r.useDirtyRect==null?!1:r.useDirtyRect;var c=new painterCtors[l](a,s,r,n),u=r.ssr||c.ssrOnly;this.storage=s,this.painter=c;var d=!env.node&&!env.worker&&!u?new HandlerDomProxy(c.getViewportRoot(),c.root):null,f=r.useCoarsePointer,v=f==null||f==="auto"?env.touchEventsSupported:!!f,_=44,g;v&&(g=retrieve2(r.pointerSize,_)),this.handler=new Handler(s,c,d,c.root,g),this.animation=new Animation({stage:{update:u?null:function(){return o._flush(!0)}}}),u||this.animation.start()}return t.prototype.add=function(n){this._disposed||!n||(this.storage.addRoot(n),n.addSelfToZr(this),this.refresh())},t.prototype.remove=function(n){this._disposed||!n||(this.storage.delRoot(n),n.removeSelfFromZr(this),this.refresh())},t.prototype.configLayer=function(n,a){this._disposed||(this.painter.configLayer&&this.painter.configLayer(n,a),this.refresh())},t.prototype.setBackgroundColor=function(n){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(n),this.refresh(),this._backgroundColor=n,this._darkMode=isDarkMode(n))},t.prototype.getBackgroundColor=function(){return this._backgroundColor},t.prototype.setDarkMode=function(n){this._darkMode=n},t.prototype.isDarkMode=function(){return this._darkMode},t.prototype.refreshImmediately=function(n){this._disposed||(n||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},t.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},t.prototype.flush=function(){this._disposed||this._flush(!1)},t.prototype._flush=function(n){var a,r=getTime();this._needsRefresh&&(a=!0,this.refreshImmediately(n)),this._needsRefreshHover&&(a=!0,this.refreshHoverImmediately());var o=getTime();a?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:o-r})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},t.prototype.setSleepAfterStill=function(n){this._sleepAfterStill=n},t.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},t.prototype.refreshHover=function(){this._needsRefreshHover=!0},t.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover())},t.prototype.resize=function(n){this._disposed||(n=n||{},this.painter.resize(n.width,n.height),this.handler.resize())},t.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},t.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},t.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},t.prototype.setCursorStyle=function(n){this._disposed||this.handler.setCursorStyle(n)},t.prototype.findHover=function(n,a){if(!this._disposed)return this.handler.findHover(n,a)},t.prototype.on=function(n,a,r){return this._disposed||this.handler.on(n,a,r),this},t.prototype.off=function(n,a){this._disposed||this.handler.off(n,a)},t.prototype.trigger=function(n,a){this._disposed||this.handler.trigger(n,a)},t.prototype.clear=function(){if(!this._disposed){for(var n=this.storage.getRoots(),a=0;a<n.length;a++)n[a]instanceof Group&&n[a].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},t.prototype.dispose=function(){this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,delInstance(this.id))},t}();function init$1(t,n){var a=new ZRender(guid(),t,n);return instances$1[a.id]=a,a}function registerPainter(t,n){painterCtors[t]=n}var RADIAN_EPSILON=1e-4,ROUND_SUPPORTED_PRECISION_MAX=20;function _trim(t){return t.replace(/^\s+|\s+$/g,"")}var mathMin$5=Math.min,mathMax$5=Math.max,mathAbs$3=Math.abs;function linearMap$2(t,n,a,r){var o=n[0],s=n[1],l=a[0],c=a[1],u=s-o,d=c-l;if(u===0)return d===0?l:(l+c)/2;if(r)if(u>0){if(t<=o)return l;if(t>=s)return c}else{if(t>=o)return l;if(t<=s)return c}else{if(t===o)return l;if(t===s)return c}return(t-o)/u*d+l}var parsePercent=parsePositionOption;function parsePositionOption(t,n,a){switch(t){case"center":case"middle":t="50%";break;case"left":case"top":t="0%";break;case"right":case"bottom":t="100%";break}return parsePositionSizeOption(t,n,a)}function parsePositionSizeOption(t,n,a){return isString(t)?_trim(t).match(/%$/)?parseFloat(t)/100*n+(a||0):parseFloat(t):t==null?NaN:+t}function round$1(t,n,a){return n==null&&(n=10),n=Math.min(Math.max(0,n),ROUND_SUPPORTED_PRECISION_MAX),t=(+t).toFixed(n),a?t:+t}function asc$1(t){return t.sort(function(n,a){return n-a}),t}function getPrecision(t){if(t=+t,isNaN(t))return 0;if(t>1e-14){for(var n=1,a=0;a<15;a++,n*=10)if(Math.round(t*n)/n===t)return a}return getPrecisionSafe(t)}function getPrecisionSafe(t){var n=t.toString().toLowerCase(),a=n.indexOf("e"),r=a>0?+n.slice(a+1):0,o=a>0?a:n.length,s=n.indexOf("."),l=s<0?0:o-1-s;return Math.max(0,l-r)}function getPixelPrecision(t,n){var a=Math.log,r=Math.LN10,o=Math.floor(a(t[1]-t[0])/r),s=Math.round(a(mathAbs$3(n[1]-n[0]))/r),l=Math.min(Math.max(-o+s,0),20);return isFinite(l)?l:20}function addSafe(t,n){var a=Math.max(getPrecision(t),getPrecision(n)),r=t+n;return a>ROUND_SUPPORTED_PRECISION_MAX?r:round$1(r,a)}function remRadian(t){var n=Math.PI*2;return(t%n+n)%n}function isRadianAroundZero(t){return t>-RADIAN_EPSILON&&t<RADIAN_EPSILON}var TIME_REG=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function parseDate(t){if(t instanceof Date)return t;if(isString(t)){var n=TIME_REG.exec(t);if(!n)return new Date(NaN);if(n[8]){var a=+n[4]||0;return n[8].toUpperCase()!=="Z"&&(a-=+n[8].slice(0,3)),new Date(Date.UTC(+n[1],+(n[2]||1)-1,+n[3]||1,a,+(n[5]||0),+n[6]||0,n[7]?+n[7].substring(0,3):0))}else return new Date(+n[1],+(n[2]||1)-1,+n[3]||1,+n[4]||0,+(n[5]||0),+n[6]||0,n[7]?+n[7].substring(0,3):0)}else if(t==null)return new Date(NaN);return new Date(Math.round(t))}function quantity(t){return Math.pow(10,quantityExponent(t))}function quantityExponent(t){if(t===0)return 0;var n=Math.floor(Math.log(t)/Math.LN10);return t/Math.pow(10,n)>=10&&n++,n}function nice(t,n){var a=quantityExponent(t),r=Math.pow(10,a),o=t/r,s;return o<1.5?s=1:o<2.5?s=2:o<4?s=3:o<7?s=5:s=10,t=s*r,a>=-20?+t.toFixed(a<0?-a:0):t}function reformIntervals(t){t.sort(function(u,d){return c(u,d,0)?-1:1});for(var n=-1/0,a=1,r=0;r<t.length;){for(var o=t[r].interval,s=t[r].close,l=0;l<2;l++)o[l]<=n&&(o[l]=n,s[l]=l?1:1-a),n=o[l],a=s[l];o[0]===o[1]&&s[0]*s[1]!==1?t.splice(r,1):r++}return t;function c(u,d,f){return u.interval[f]<d.interval[f]||u.interval[f]===d.interval[f]&&(u.close[f]-d.close[f]===(f?-1:1)||!f&&c(u,d,1))}}function numericToNumber(t){var n=parseFloat(t);return n==t&&(n!==0||!isString(t)||t.indexOf("x")<=0)?n:NaN}function isNumeric(t){return!isNaN(numericToNumber(t))}function getRandomIdBase(){return Math.round(Math.random()*9)}function getGreatestCommonDividor(t,n){return n===0?t:getGreatestCommonDividor(n,t%n)}function getLeastCommonMultiple(t,n){return t==null?n:n==null?t:t*n/getGreatestCommonDividor(t,n)}var ECHARTS_PREFIX="[ECharts] ",hasConsole=typeof console<"u"&&console.warn&&console.log;function outputLog(t,n,a){hasConsole&&console[t](ECHARTS_PREFIX+n)}function error(t,n){outputLog("error",t)}function throwError(t){throw new Error(t)}var DUMMY_COMPONENT_NAME_PREFIX="series\0",INTERNAL_COMPONENT_ID_PREFIX="\0_ec_\0";function normalizeToArray(t){return t instanceof Array?t:t==null?[]:[t]}function defaultEmphasis(t,n,a){if(t){t[n]=t[n]||{},t.emphasis=t.emphasis||{},t.emphasis[n]=t.emphasis[n]||{};for(var r=0,o=a.length;r<o;r++){var s=a[r];!t.emphasis[n].hasOwnProperty(s)&&t[n].hasOwnProperty(s)&&(t.emphasis[n][s]=t[n][s])}}}var TEXT_STYLE_OPTIONS=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function getDataItemValue(t){return isObject$3(t)&&!isArray$1(t)&&!(t instanceof Date)?t.value:t}function isDataItemOption(t){return isObject$3(t)&&!(t instanceof Array)}function mappingToExists(t,n,a){var r=a==="normalMerge",o=a==="replaceMerge",s=a==="replaceAll";t=t||[],n=(n||[]).slice();var l=createHashMap();each$8(n,function(u,d){if(!isObject$3(u)){n[d]=null;return}});var c=prepareResult(t,l,a);return(r||o)&&mappingById(c,t,l,n),r&&mappingByName(c,n),r||o?mappingByIndex(c,n,o):s&&mappingInReplaceAllMode(c,n),makeIdAndName(c),c}function prepareResult(t,n,a){var r=[];if(a==="replaceAll")return r;for(var o=0;o<t.length;o++){var s=t[o];s&&s.id!=null&&n.set(s.id,o),r.push({existing:a==="replaceMerge"||isComponentIdInternal(s)?null:s,newOption:null,keyInfo:null,brandNew:null})}return r}function mappingById(t,n,a,r){each$8(r,function(o,s){if(!(!o||o.id==null)){var l=makeComparableKey(o.id),c=a.get(l);if(c!=null){var u=t[c];assert(!u.newOption,'Duplicated option on id "'+l+'".'),u.newOption=o,u.existing=n[c],r[s]=null}}})}function mappingByName(t,n){each$8(n,function(a,r){if(!(!a||a.name==null))for(var o=0;o<t.length;o++){var s=t[o].existing;if(!t[o].newOption&&s&&(s.id==null||a.id==null)&&!isComponentIdInternal(a)&&!isComponentIdInternal(s)&&keyExistAndEqual("name",s,a)){t[o].newOption=a,n[r]=null;return}}})}function mappingByIndex(t,n,a){each$8(n,function(r){if(r){for(var o,s=0;(o=t[s])&&(o.newOption||isComponentIdInternal(o.existing)||o.existing&&r.id!=null&&!keyExistAndEqual("id",r,o.existing));)s++;o?(o.newOption=r,o.brandNew=a):t.push({newOption:r,brandNew:a,existing:null,keyInfo:null}),s++}})}function mappingInReplaceAllMode(t,n){each$8(n,function(a){t.push({newOption:a,brandNew:!0,existing:null,keyInfo:null})})}function makeIdAndName(t){var n=createHashMap();each$8(t,function(a){var r=a.existing;r&&n.set(r.id,a)}),each$8(t,function(a){var r=a.newOption;assert(!r||r.id==null||!n.get(r.id)||n.get(r.id)===a,"id duplicates: "+(r&&r.id)),r&&r.id!=null&&n.set(r.id,a),!a.keyInfo&&(a.keyInfo={})}),each$8(t,function(a,r){var o=a.existing,s=a.newOption,l=a.keyInfo;if(isObject$3(s)){if(l.name=s.name!=null?makeComparableKey(s.name):o?o.name:DUMMY_COMPONENT_NAME_PREFIX+r,o)l.id=makeComparableKey(o.id);else if(s.id!=null)l.id=makeComparableKey(s.id);else{var c=0;do l.id="\0"+l.name+"\0"+c++;while(n.get(l.id))}n.set(l.id,a)}})}function keyExistAndEqual(t,n,a){var r=convertOptionIdName(n[t],null),o=convertOptionIdName(a[t],null);return r!=null&&o!=null&&r===o}function makeComparableKey(t){return convertOptionIdName(t,"")}function convertOptionIdName(t,n){return t==null?n:isString(t)?t:isNumber(t)||isStringSafe(t)?t+"":n}function isNameSpecified(t){var n=t.name;return!!(n&&n.indexOf(DUMMY_COMPONENT_NAME_PREFIX))}function isComponentIdInternal(t){return t&&t.id!=null&&makeComparableKey(t.id).indexOf(INTERNAL_COMPONENT_ID_PREFIX)===0}function setComponentTypeToKeyInfo(t,n,a){each$8(t,function(r){var o=r.newOption;isObject$3(o)&&(r.keyInfo.mainType=n,r.keyInfo.subType=determineSubType(n,o,r.existing,a))})}function determineSubType(t,n,a,r){var o=n.type?n.type:a?a.subType:r.determineSubType(t,n);return o}function compressBatches(t,n){var a={},r={};return o(t||[],a),o(n||[],r,a),[s(a),s(r)];function o(l,c,u){for(var d=0,f=l.length;d<f;d++){var v=convertOptionIdName(l[d].seriesId,null);if(v==null)return;for(var _=normalizeToArray(l[d].dataIndex),g=u&&u[v],y=0,b=_.length;y<b;y++){var T=_[y];g&&g[T]?g[T]=null:(c[v]||(c[v]={}))[T]=1}}}function s(l,c){var u=[];for(var d in l)if(l.hasOwnProperty(d)&&l[d]!=null)if(c)u.push(+d);else{var f=s(l[d],!0);f.length&&u.push({seriesId:d,dataIndex:f})}return u}}function queryDataIndex(t,n){if(n.dataIndexInside!=null)return n.dataIndexInside;if(n.dataIndex!=null)return isArray$1(n.dataIndex)?map$1(n.dataIndex,function(a){return t.indexOfRawIndex(a)}):t.indexOfRawIndex(n.dataIndex);if(n.name!=null)return isArray$1(n.name)?map$1(n.name,function(a){return t.indexOfName(a)}):t.indexOfName(n.name)}function makeInner(){var t="__ec_inner_"+innerUniqueIndex++;return function(n){return n[t]||(n[t]={})}}var innerUniqueIndex=getRandomIdBase();function parseFinder(t,n,a){var r=preParseFinder(n,a),o=r.mainTypeSpecified,s=r.queryOptionMap,l=r.others,c=l,u=a?a.defaultMainType:null;return!o&&u&&s.set(u,{}),s.each(function(d,f){var v=queryReferringComponents(t,f,d,{useDefault:u===f,enableAll:a&&a.enableAll!=null?a.enableAll:!0,enableNone:a&&a.enableNone!=null?a.enableNone:!0});c[f+"Models"]=v.models,c[f+"Model"]=v.models[0]}),c}function preParseFinder(t,n){var a;if(isString(t)){var r={};r[t+"Index"]=0,a=r}else a=t;var o=createHashMap(),s={},l=!1;return each$8(a,function(c,u){if(u==="dataIndex"||u==="dataIndexInside"){s[u]=c;return}var d=u.match(/^(\w+)(Index|Id|Name)$/)||[],f=d[1],v=(d[2]||"").toLowerCase();if(!(!f||!v||n&&n.includeMainTypes&&indexOf(n.includeMainTypes,f)<0)){l=l||!!f;var _=o.get(f)||o.set(f,{});_[v]=c}}),{mainTypeSpecified:l,queryOptionMap:o,others:s}}var SINGLE_REFERRING={useDefault:!0,enableAll:!1,enableNone:!1};function queryReferringComponents(t,n,a,r){r=r||SINGLE_REFERRING;var o=a.index,s=a.id,l=a.name,c={models:null,specified:o!=null||s!=null||l!=null};if(!c.specified){var u=void 0;return c.models=r.useDefault&&(u=t.getComponent(n))?[u]:[],c}if(o==="none"||o===!1){if(r.enableNone)return c.models=[],c;o=-1}return o==="all"&&(r.enableAll?o=s=l=null:o=-1),c.models=t.queryComponents({mainType:n,index:o,id:s,name:l}),c}function setAttribute(t,n,a){t.setAttribute?t.setAttribute(n,a):t[n]=a}function getAttribute(t,n){return t.getAttribute?t.getAttribute(n):t[n]}function getTooltipRenderMode(t){return t==="auto"?env.domSupported?"html":"richText":t||"html"}var TYPE_DELIMITER=".",IS_CONTAINER="___EC__COMPONENT__CONTAINER___",IS_EXTENDED_CLASS="___EC__EXTENDED_CLASS___";function parseClassType(t){var n={main:"",sub:""};if(t){var a=t.split(TYPE_DELIMITER);n.main=a[0]||"",n.sub=a[1]||""}return n}function checkClassType(t){assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(t),'componentType "'+t+'" illegal')}function isExtendedClass(t){return!!(t&&t[IS_EXTENDED_CLASS])}function enableClassExtend(t,n){t.$constructor=t,t.extend=function(a){var r=this,o;return isESClass(r)?o=function(s){__extends$1(l,s);function l(){return s.apply(this,arguments)||this}return l}(r):(o=function(){(a.$constructor||r).apply(this,arguments)},inherits(o,this)),extend(o.prototype,a),o[IS_EXTENDED_CLASS]=!0,o.extend=this.extend,o.superCall=superCall,o.superApply=superApply,o.superClass=r,o}}function isESClass(t){return isFunction(t)&&/^class\s/.test(Function.prototype.toString.call(t))}function mountExtend(t,n){t.extend=n.extend}var classBase=Math.round(Math.random()*10);function enableClassCheck(t){var n=["__\0is_clz",classBase++].join("_");t.prototype[n]=!0,t.isInstance=function(a){return!!(a&&a[n])}}function superCall(t,n){for(var a=[],r=2;r<arguments.length;r++)a[r-2]=arguments[r];return this.superClass.prototype[n].apply(t,a)}function superApply(t,n,a){return this.superClass.prototype[n].apply(t,a)}function enableClassManagement(t){var n={};t.registerClass=function(r){var o=r.type||r.prototype.type;if(o){checkClassType(o),r.prototype.type=o;var s=parseClassType(o);if(!s.sub)n[s.main]=r;else if(s.sub!==IS_CONTAINER){var l=a(s);l[s.sub]=r}}return r},t.getClass=function(r,o,s){var l=n[r];if(l&&l[IS_CONTAINER]&&(l=o?l[o]:null),s&&!l)throw new Error(o?"Component "+r+"."+(o||"")+" is used but not imported.":r+".type should be specified.");return l},t.getClassesByMainType=function(r){var o=parseClassType(r),s=[],l=n[o.main];return l&&l[IS_CONTAINER]?each$8(l,function(c,u){u!==IS_CONTAINER&&s.push(c)}):s.push(l),s},t.hasClass=function(r){var o=parseClassType(r);return!!n[o.main]},t.getAllClassMainTypes=function(){var r=[];return each$8(n,function(o,s){r.push(s)}),r},t.hasSubTypes=function(r){var o=parseClassType(r),s=n[o.main];return s&&s[IS_CONTAINER]};function a(r){var o=n[r.main];return(!o||!o[IS_CONTAINER])&&(o=n[r.main]={},o[IS_CONTAINER]=!0),o}}function makeStyleMapper(t,n){for(var a=0;a<t.length;a++)t[a][1]||(t[a][1]=t[a][0]);return n=n||!1,function(r,o,s){for(var l={},c=0;c<t.length;c++){var u=t[c][1];if(!(o&&indexOf(o,u)>=0||s&&indexOf(s,u)<0)){var d=r.getShallow(u,n);d!=null&&(l[t[c][0]]=d)}}return l}}var AREA_STYLE_KEY_MAP=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],getAreaStyle=makeStyleMapper(AREA_STYLE_KEY_MAP),AreaStyleMixin=function(){function t(){}return t.prototype.getAreaStyle=function(n,a){return getAreaStyle(this,n,a)},t}(),globalImageCache=new LRU(50);function findExistImage(t){if(typeof t=="string"){var n=globalImageCache.get(t);return n&&n.image}else return t}function createOrUpdateImage(t,n,a,r,o){if(t)if(typeof t=="string"){if(n&&n.__zrImageSrc===t||!a)return n;var s=globalImageCache.get(t),l={hostEl:a,cb:r,cbPayload:o};return s?(n=s.image,!isImageReady(n)&&s.pending.push(l)):(n=platformApi.loadImage(t,imageOnLoad,imageOnLoad),n.__zrImageSrc=t,globalImageCache.put(t,n.__cachedImgObj={image:n,pending:[l]})),n}else return t;else return n}function imageOnLoad(){var t=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var n=0;n<t.pending.length;n++){var a=t.pending[n],r=a.cb;r&&r(this,a.cbPayload),a.hostEl.dirty()}t.pending.length=0}function isImageReady(t){return t&&t.width&&t.height}var STYLE_REG=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function truncateText2(t,n,a,r,o,s){if(!a){t.text="",t.isTruncated=!1;return}var l=(n+"").split(`
`);s=prepareTruncateOptions(a,r,o,s);for(var c=!1,u={},d=0,f=l.length;d<f;d++)truncateSingleLine(u,l[d],s),l[d]=u.textLine,c=c||u.isTruncated;t.text=l.join(`
`),t.isTruncated=c}function prepareTruncateOptions(t,n,a,r){r=r||{};var o=extend({},r);a=retrieve2(a,"..."),o.maxIterations=retrieve2(r.maxIterations,2);var s=o.minChar=retrieve2(r.minChar,0),l=o.fontMeasureInfo=ensureFontMeasureInfo(n),c=l.asciiCharWidth;o.placeholder=retrieve2(r.placeholder,"");for(var u=t=Math.max(0,t-1),d=0;d<s&&u>=c;d++)u-=c;var f=measureWidth(l,a);return f>u&&(a="",f=0),u=t-f,o.ellipsis=a,o.ellipsisWidth=f,o.contentWidth=u,o.containerWidth=t,o}function truncateSingleLine(t,n,a){var r=a.containerWidth,o=a.contentWidth,s=a.fontMeasureInfo;if(!r){t.textLine="",t.isTruncated=!1;return}var l=measureWidth(s,n);if(l<=r){t.textLine=n,t.isTruncated=!1;return}for(var c=0;;c++){if(l<=o||c>=a.maxIterations){n+=a.ellipsis;break}var u=c===0?estimateLength(n,o,s):l>0?Math.floor(n.length*o/l):0;n=n.substr(0,u),l=measureWidth(s,n)}n===""&&(n=a.placeholder),t.textLine=n,t.isTruncated=!0}function estimateLength(t,n,a){for(var r=0,o=0,s=t.length;o<s&&r<n;o++)r+=measureCharWidth(a,t.charCodeAt(o));return o}function parsePlainText(t,n,a,r){var o=formatText(t),s=n.overflow,l=n.padding,c=l?l[1]+l[3]:0,u=l?l[0]+l[2]:0,d=n.font,f=s==="truncate",v=getLineHeight(d),_=retrieve2(n.lineHeight,v),g=n.lineOverflow==="truncate",y=!1,b=n.width;b==null&&a!=null&&(b=a-c);var T=n.height;T==null&&r!=null&&(T=r-u);var S;b!=null&&(s==="break"||s==="breakAll")?S=o?wrapText(o,n.font,b,s==="breakAll",0).lines:[]:S=o?o.split(`
`):[];var C=S.length*_;if(T==null&&(T=C),C>T&&g){var E=Math.floor(T/_);y=y||S.length>E,S=S.slice(0,E),C=S.length*_}if(o&&f&&b!=null)for(var x=prepareTruncateOptions(b,d,n.ellipsis,{minChar:n.truncateMinChar,placeholder:n.placeholder}),A={},N=0;N<S.length;N++)truncateSingleLine(A,S[N],x),S[N]=A.textLine,y=y||A.isTruncated;for(var M=T,R=0,D=ensureFontMeasureInfo(d),N=0;N<S.length;N++)R=Math.max(measureWidth(D,S[N]),R);b==null&&(b=R);var L=b;return M+=u,L+=c,{lines:S,height:T,outerWidth:L,outerHeight:M,lineHeight:_,calculatedLineHeight:v,contentWidth:R,contentHeight:C,width:b,isTruncated:y}}var RichTextToken=function(){function t(){}return t}(),RichTextLine=function(){function t(n){this.tokens=[],n&&(this.tokens=n)}return t}(),RichTextContentBlock=function(){function t(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[],this.isTruncated=!1}return t}();function parseRichText(t,n,a,r,o){var s=new RichTextContentBlock,l=formatText(t);if(!l)return s;var c=n.padding,u=c?c[1]+c[3]:0,d=c?c[0]+c[2]:0,f=n.width;f==null&&a!=null&&(f=a-u);var v=n.height;v==null&&r!=null&&(v=r-d);for(var _=n.overflow,g=(_==="break"||_==="breakAll")&&f!=null?{width:f,accumWidth:0,breakAll:_==="breakAll"}:null,y=STYLE_REG.lastIndex=0,b;(b=STYLE_REG.exec(l))!=null;){var T=b.index;T>y&&pushTokens(s,l.substring(y,T),n,g),pushTokens(s,b[2],n,g,b[1]),y=STYLE_REG.lastIndex}y<l.length&&pushTokens(s,l.substring(y,l.length),n,g);var S=[],C=0,E=0,x=_==="truncate",A=n.lineOverflow==="truncate",N={};function M(ve,le,pe){ve.width=le,ve.lineHeight=pe,C+=pe,E=Math.max(E,le)}e:for(var R=0;R<s.lines.length;R++){for(var D=s.lines[R],L=0,I=0,$=0;$<D.tokens.length;$++){var V=D.tokens[$],H=V.styleName&&n.rich[V.styleName]||{},X=V.textPadding=H.padding,q=X?X[1]+X[3]:0,z=V.font=H.font||n.font;V.contentHeight=getLineHeight(z);var G=retrieve2(H.height,V.contentHeight);if(V.innerHeight=G,X&&(G+=X[0]+X[2]),V.height=G,V.lineHeight=retrieve3(H.lineHeight,n.lineHeight,G),V.align=H&&H.align||o,V.verticalAlign=H&&H.verticalAlign||"middle",A&&v!=null&&C+V.lineHeight>v){var oe=s.lines.length;$>0?(D.tokens=D.tokens.slice(0,$),M(D,I,L),s.lines=s.lines.slice(0,R+1)):s.lines=s.lines.slice(0,R),s.isTruncated=s.isTruncated||s.lines.length<oe;break e}var ne=H.width,ue=ne==null||ne==="auto";if(typeof ne=="string"&&ne.charAt(ne.length-1)==="%")V.percentWidth=ne,S.push(V),V.contentWidth=measureWidth(ensureFontMeasureInfo(z),V.text);else{if(ue){var se=H.backgroundColor,fe=se&&se.image;fe&&(fe=findExistImage(fe),isImageReady(fe)&&(V.width=Math.max(V.width,fe.width*G/fe.height)))}var ae=x&&f!=null?f-I:null;ae!=null&&ae<V.width?!ue||ae<q?(V.text="",V.width=V.contentWidth=0):(truncateText2(N,V.text,ae-q,z,n.ellipsis,{minChar:n.truncateMinChar}),V.text=N.text,s.isTruncated=s.isTruncated||N.isTruncated,V.width=V.contentWidth=measureWidth(ensureFontMeasureInfo(z),V.text)):V.contentWidth=measureWidth(ensureFontMeasureInfo(z),V.text)}V.width+=q,I+=V.width,H&&(L=Math.max(L,V.lineHeight))}M(D,I,L)}s.outerWidth=s.width=retrieve2(f,E),s.outerHeight=s.height=retrieve2(v,C),s.contentHeight=C,s.contentWidth=E,s.outerWidth+=u,s.outerHeight+=d;for(var R=0;R<S.length;R++){var V=S[R],ie=V.percentWidth;V.width=parseInt(ie,10)/100*s.width}return s}function pushTokens(t,n,a,r,o){var s=n==="",l=o&&a.rich[o]||{},c=t.lines,u=l.font||a.font,d=!1,f,v;if(r){var _=l.padding,g=_?_[1]+_[3]:0;if(l.width!=null&&l.width!=="auto"){var y=parsePercent$1(l.width,r.width)+g;c.length>0&&y+r.accumWidth>r.width&&(f=n.split(`
`),d=!0),r.accumWidth=y}else{var b=wrapText(n,u,r.width,r.breakAll,r.accumWidth);r.accumWidth=b.accumWidth+g,v=b.linesWidths,f=b.lines}}f||(f=n.split(`
`));for(var T=ensureFontMeasureInfo(u),S=0;S<f.length;S++){var C=f[S],E=new RichTextToken;if(E.styleName=o,E.text=C,E.isLineHolder=!C&&!s,typeof l.width=="number"?E.width=l.width:E.width=v?v[S]:measureWidth(T,C),!S&&!d){var x=(c[c.length-1]||(c[0]=new RichTextLine)).tokens,A=x.length;A===1&&x[0].isLineHolder?x[0]=E:(C||!A||s)&&x.push(E)}else c.push(new RichTextLine([E]))}}function isAlphabeticLetter(t){var n=t.charCodeAt(0);return n>=32&&n<=591||n>=880&&n<=4351||n>=4608&&n<=5119||n>=7680&&n<=8303}var breakCharMap=reduce(",&?/;] ".split(""),function(t,n){return t[n]=!0,t},{});function isWordBreakChar(t){return isAlphabeticLetter(t)?!!breakCharMap[t]:!0}function wrapText(t,n,a,r,o){for(var s=[],l=[],c="",u="",d=0,f=0,v=ensureFontMeasureInfo(n),_=0;_<t.length;_++){var g=t.charAt(_);if(g===`
`){u&&(c+=u,f+=d),s.push(c),l.push(f),c="",u="",d=0,f=0;continue}var y=measureCharWidth(v,g.charCodeAt(0)),b=r?!1:!isWordBreakChar(g);if(s.length?f+y>a:o+f+y>a){f?(c||u)&&(b?(c||(c=u,u="",d=0,f=d),s.push(c),l.push(f-d),u+=g,d+=y,c="",f=d):(u&&(c+=u,u="",d=0),s.push(c),l.push(f),c=g,f=y)):b?(s.push(u),l.push(d),u=g,d=y):(s.push(g),l.push(y));continue}f+=y,b?(u+=g,d+=y):(u&&(c+=u,u="",d=0),c+=g)}return u&&(c+=u),c&&(s.push(c),l.push(f)),s.length===1&&(f+=o),{accumWidth:f,lines:s,linesWidths:l}}function calcInnerTextOverflowArea(t,n,a,r,o,s){if(t.baseX=a,t.baseY=r,t.outerWidth=t.outerHeight=null,!!n){var l=n.width*2,c=n.height*2;BoundingRect.set(tmpCITCTextRect,adjustTextX(a,l,o),adjustTextY(r,c,s),l,c),BoundingRect.intersect(n,tmpCITCTextRect,null,tmpCITCIntersectRectOpt);var u=tmpCITCIntersectRectOpt.outIntersectRect;t.outerWidth=u.width,t.outerHeight=u.height,t.baseX=adjustTextX(u.x,u.width,o,!0),t.baseY=adjustTextY(u.y,u.height,s,!0)}}var tmpCITCTextRect=new BoundingRect(0,0,0,0),tmpCITCIntersectRectOpt={outIntersectRect:{},clamp:!0};function formatText(t){return t!=null?t+="":t=""}function tSpanCreateBoundingRect(t){var n=formatText(t.text),a=t.font,r=measureWidth(ensureFontMeasureInfo(a),n),o=getLineHeight(a);return tSpanCreateBoundingRect2(t,r,o,null)}function tSpanCreateBoundingRect2(t,n,a,r){var o=new BoundingRect(adjustTextX(t.x||0,n,t.textAlign),adjustTextY(t.y||0,a,t.textBaseline),n,a),s=r??(tSpanHasStroke(t)?t.lineWidth:0);return s>0&&(o.x-=s/2,o.y-=s/2,o.width+=s,o.height+=s),o}function tSpanHasStroke(t){var n=t.stroke;return n!=null&&n!=="none"&&t.lineWidth>0}var STYLE_MAGIC_KEY="__zr_style_"+Math.round(Math.random()*10),DEFAULT_COMMON_STYLE={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},DEFAULT_COMMON_ANIMATION_PROPS={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};DEFAULT_COMMON_STYLE[STYLE_MAGIC_KEY]=!0;var PRIMARY_STATES_KEYS=["z","z2","invisible"],PRIMARY_STATES_KEYS_IN_HOVER_LAYER=["invisible"],Displayable=function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype._init=function(a){for(var r=keys(a),o=0;o<r.length;o++){var s=r[o];s==="style"?this.useStyle(a[s]):t.prototype.attrKV.call(this,s,a[s])}this.style||this.useStyle({})},n.prototype.beforeBrush=function(){},n.prototype.afterBrush=function(){},n.prototype.innerBeforeBrush=function(){},n.prototype.innerAfterBrush=function(){},n.prototype.shouldBePainted=function(a,r,o,s){var l=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&isDisplayableCulled(this,a,r)||l&&!l[0]&&!l[3])return!1;if(o&&this.__clipPaths&&this.__clipPaths.length){for(var c=0;c<this.__clipPaths.length;++c)if(this.__clipPaths[c].isZeroArea())return!1}if(s&&this.parent)for(var u=this.parent;u;){if(u.ignore)return!1;u=u.parent}return!0},n.prototype.contain=function(a,r){return this.rectContain(a,r)},n.prototype.traverse=function(a,r){a.call(r,this)},n.prototype.rectContain=function(a,r){var o=this.transformCoordToLocal(a,r),s=this.getBoundingRect();return s.contain(o[0],o[1])},n.prototype.getPaintRect=function(){var a=this._paintRect;if(!this._paintRect||this.__dirty){var r=this.transform,o=this.getBoundingRect(),s=this.style,l=s.shadowBlur||0,c=s.shadowOffsetX||0,u=s.shadowOffsetY||0;a=this._paintRect||(this._paintRect=new BoundingRect(0,0,0,0)),r?BoundingRect.applyTransform(a,o,r):a.copy(o),(l||c||u)&&(a.width+=l*2+Math.abs(c),a.height+=l*2+Math.abs(u),a.x=Math.min(a.x,a.x+c-l),a.y=Math.min(a.y,a.y+u-l));var d=this.dirtyRectTolerance;a.isZero()||(a.x=Math.floor(a.x-d),a.y=Math.floor(a.y-d),a.width=Math.ceil(a.width+1+d*2),a.height=Math.ceil(a.height+1+d*2))}return a},n.prototype.setPrevPaintRect=function(a){a?(this._prevPaintRect=this._prevPaintRect||new BoundingRect(0,0,0,0),this._prevPaintRect.copy(a)):this._prevPaintRect=null},n.prototype.getPrevPaintRect=function(){return this._prevPaintRect},n.prototype.animateStyle=function(a){return this.animate("style",a)},n.prototype.updateDuringAnimation=function(a){a==="style"?this.dirtyStyle():this.markRedraw()},n.prototype.attrKV=function(a,r){a!=="style"?t.prototype.attrKV.call(this,a,r):this.style?this.setStyle(r):this.useStyle(r)},n.prototype.setStyle=function(a,r){return typeof a=="string"?this.style[a]=r:extend(this.style,a),this.dirtyStyle(),this},n.prototype.dirtyStyle=function(a){a||this.markRedraw(),this.__dirty|=STYLE_CHANGED_BIT,this._rect&&(this._rect=null)},n.prototype.dirty=function(){this.dirtyStyle()},n.prototype.styleChanged=function(){return!!(this.__dirty&STYLE_CHANGED_BIT)},n.prototype.styleUpdated=function(){this.__dirty&=~STYLE_CHANGED_BIT},n.prototype.createStyle=function(a){return createObject(DEFAULT_COMMON_STYLE,a)},n.prototype.useStyle=function(a){a[STYLE_MAGIC_KEY]||(a=this.createStyle(a)),this.__inHover?this.__hoverStyle=a:this.style=a,this.dirtyStyle()},n.prototype.isStyleObject=function(a){return a[STYLE_MAGIC_KEY]},n.prototype._innerSaveToNormal=function(a){t.prototype._innerSaveToNormal.call(this,a);var r=this._normalState;a.style&&!r.style&&(r.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(a,r,PRIMARY_STATES_KEYS)},n.prototype._applyStateObj=function(a,r,o,s,l,c){t.prototype._applyStateObj.call(this,a,r,o,s,l,c);var u=!(r&&s),d;if(r&&r.style?l?s?d=r.style:(d=this._mergeStyle(this.createStyle(),o.style),this._mergeStyle(d,r.style)):(d=this._mergeStyle(this.createStyle(),s?this.style:o.style),this._mergeStyle(d,r.style)):u&&(d=o.style),d)if(l){var f=this.style;if(this.style=this.createStyle(u?{}:f),u)for(var v=keys(f),_=0;_<v.length;_++){var g=v[_];g in d&&(d[g]=d[g],this.style[g]=f[g])}for(var y=keys(d),_=0;_<y.length;_++){var g=y[_];this.style[g]=this.style[g]}this._transitionState(a,{style:d},c,this.getAnimationStyleProps())}else this.useStyle(d);for(var b=this.__inHover?PRIMARY_STATES_KEYS_IN_HOVER_LAYER:PRIMARY_STATES_KEYS,_=0;_<b.length;_++){var g=b[_];r&&r[g]!=null?this[g]=r[g]:u&&o[g]!=null&&(this[g]=o[g])}},n.prototype._mergeStates=function(a){for(var r=t.prototype._mergeStates.call(this,a),o,s=0;s<a.length;s++){var l=a[s];l.style&&(o=o||{},this._mergeStyle(o,l.style))}return o&&(r.style=o),r},n.prototype._mergeStyle=function(a,r){return extend(a,r),a},n.prototype.getAnimationStyleProps=function(){return DEFAULT_COMMON_ANIMATION_PROPS},n.initDefaultProps=function(){var a=n.prototype;a.type="displayable",a.invisible=!1,a.z=0,a.z2=0,a.zlevel=0,a.culling=!1,a.cursor="pointer",a.rectHover=!1,a.incremental=!1,a._rect=null,a.dirtyRectTolerance=0,a.__dirty=REDRAW_BIT|STYLE_CHANGED_BIT}(),n}(Element$1),tmpRect=new BoundingRect(0,0,0,0),viewRect=new BoundingRect(0,0,0,0);function isDisplayableCulled(t,n,a){return tmpRect.copy(t.getBoundingRect()),t.transform&&tmpRect.applyTransform(t.transform),viewRect.width=n,viewRect.height=a,!tmpRect.intersect(viewRect)}var mathMin$4=Math.min,mathMax$4=Math.max,mathSin$3=Math.sin,mathCos$3=Math.cos,PI2$5=Math.PI*2,start=create$1(),end=create$1(),extremity=create$1();function fromLine(t,n,a,r,o,s){o[0]=mathMin$4(t,a),o[1]=mathMin$4(n,r),s[0]=mathMax$4(t,a),s[1]=mathMax$4(n,r)}var xDim=[],yDim=[];function fromCubic(t,n,a,r,o,s,l,c,u,d){var f=cubicExtrema,v=cubicAt,_=f(t,a,o,l,xDim);u[0]=1/0,u[1]=1/0,d[0]=-1/0,d[1]=-1/0;for(var g=0;g<_;g++){var y=v(t,a,o,l,xDim[g]);u[0]=mathMin$4(y,u[0]),d[0]=mathMax$4(y,d[0])}_=f(n,r,s,c,yDim);for(var g=0;g<_;g++){var b=v(n,r,s,c,yDim[g]);u[1]=mathMin$4(b,u[1]),d[1]=mathMax$4(b,d[1])}u[0]=mathMin$4(t,u[0]),d[0]=mathMax$4(t,d[0]),u[0]=mathMin$4(l,u[0]),d[0]=mathMax$4(l,d[0]),u[1]=mathMin$4(n,u[1]),d[1]=mathMax$4(n,d[1]),u[1]=mathMin$4(c,u[1]),d[1]=mathMax$4(c,d[1])}function fromQuadratic(t,n,a,r,o,s,l,c){var u=quadraticExtremum,d=quadraticAt,f=mathMax$4(mathMin$4(u(t,a,o),1),0),v=mathMax$4(mathMin$4(u(n,r,s),1),0),_=d(t,a,o,f),g=d(n,r,s,v);l[0]=mathMin$4(t,o,_),l[1]=mathMin$4(n,s,g),c[0]=mathMax$4(t,o,_),c[1]=mathMax$4(n,s,g)}function fromArc(t,n,a,r,o,s,l,c,u){var d=min$1,f=max$1,v=Math.abs(o-s);if(v%PI2$5<1e-4&&v>1e-4){c[0]=t-a,c[1]=n-r,u[0]=t+a,u[1]=n+r;return}if(start[0]=mathCos$3(o)*a+t,start[1]=mathSin$3(o)*r+n,end[0]=mathCos$3(s)*a+t,end[1]=mathSin$3(s)*r+n,d(c,start,end),f(u,start,end),o=o%PI2$5,o<0&&(o=o+PI2$5),s=s%PI2$5,s<0&&(s=s+PI2$5),o>s&&!l?s+=PI2$5:o<s&&l&&(o+=PI2$5),l){var _=s;s=o,o=_}for(var g=0;g<s;g+=Math.PI/2)g>o&&(extremity[0]=mathCos$3(g)*a+t,extremity[1]=mathSin$3(g)*r+n,d(c,extremity,c),f(u,extremity,u))}var CMD$2={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},tmpOutX=[],tmpOutY=[],min=[],max=[],min2=[],max2=[],mathMin$3=Math.min,mathMax$3=Math.max,mathCos$2=Math.cos,mathSin$2=Math.sin,mathAbs$2=Math.abs,PI$4=Math.PI,PI2$4=PI$4*2,hasTypedArray=typeof Float32Array<"u",tmpAngles=[];function modPI2(t){var n=Math.round(t/PI$4*1e8)/1e8;return n%2*PI$4}function normalizeArcAngles(t,n){var a=modPI2(t[0]);a<0&&(a+=PI2$4);var r=a-t[0],o=t[1];o+=r,!n&&o-a>=PI2$4?o=a+PI2$4:n&&a-o>=PI2$4?o=a-PI2$4:!n&&a>o?o=a+(PI2$4-modPI2(a-o)):n&&a<o&&(o=a-(PI2$4-modPI2(o-a))),t[0]=a,t[1]=o}var PathProxy=function(){function t(n){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,n&&(this._saveData=!1),this._saveData&&(this.data=[])}return t.prototype.increaseVersion=function(){this._version++},t.prototype.getVersion=function(){return this._version},t.prototype.setScale=function(n,a,r){r=r||0,r>0&&(this._ux=mathAbs$2(r/devicePixelRatio/n)||0,this._uy=mathAbs$2(r/devicePixelRatio/a)||0)},t.prototype.setDPR=function(n){this.dpr=n},t.prototype.setContext=function(n){this._ctx=n},t.prototype.getContext=function(){return this._ctx},t.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},t.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},t.prototype.moveTo=function(n,a){return this._drawPendingPt(),this.addData(CMD$2.M,n,a),this._ctx&&this._ctx.moveTo(n,a),this._x0=n,this._y0=a,this._xi=n,this._yi=a,this},t.prototype.lineTo=function(n,a){var r=mathAbs$2(n-this._xi),o=mathAbs$2(a-this._yi),s=r>this._ux||o>this._uy;if(this.addData(CMD$2.L,n,a),this._ctx&&s&&this._ctx.lineTo(n,a),s)this._xi=n,this._yi=a,this._pendingPtDist=0;else{var l=r*r+o*o;l>this._pendingPtDist&&(this._pendingPtX=n,this._pendingPtY=a,this._pendingPtDist=l)}return this},t.prototype.bezierCurveTo=function(n,a,r,o,s,l){return this._drawPendingPt(),this.addData(CMD$2.C,n,a,r,o,s,l),this._ctx&&this._ctx.bezierCurveTo(n,a,r,o,s,l),this._xi=s,this._yi=l,this},t.prototype.quadraticCurveTo=function(n,a,r,o){return this._drawPendingPt(),this.addData(CMD$2.Q,n,a,r,o),this._ctx&&this._ctx.quadraticCurveTo(n,a,r,o),this._xi=r,this._yi=o,this},t.prototype.arc=function(n,a,r,o,s,l){this._drawPendingPt(),tmpAngles[0]=o,tmpAngles[1]=s,normalizeArcAngles(tmpAngles,l),o=tmpAngles[0],s=tmpAngles[1];var c=s-o;return this.addData(CMD$2.A,n,a,r,r,o,c,0,l?0:1),this._ctx&&this._ctx.arc(n,a,r,o,s,l),this._xi=mathCos$2(s)*r+n,this._yi=mathSin$2(s)*r+a,this},t.prototype.arcTo=function(n,a,r,o,s){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(n,a,r,o,s),this},t.prototype.rect=function(n,a,r,o){return this._drawPendingPt(),this._ctx&&this._ctx.rect(n,a,r,o),this.addData(CMD$2.R,n,a,r,o),this},t.prototype.closePath=function(){this._drawPendingPt(),this.addData(CMD$2.Z);var n=this._ctx,a=this._x0,r=this._y0;return n&&n.closePath(),this._xi=a,this._yi=r,this},t.prototype.fill=function(n){n&&n.fill(),this.toStatic()},t.prototype.stroke=function(n){n&&n.stroke(),this.toStatic()},t.prototype.len=function(){return this._len},t.prototype.setData=function(n){if(this._saveData){var a=n.length;!(this.data&&this.data.length===a)&&hasTypedArray&&(this.data=new Float32Array(a));for(var r=0;r<a;r++)this.data[r]=n[r];this._len=a}},t.prototype.appendPath=function(n){if(this._saveData){n instanceof Array||(n=[n]);for(var a=n.length,r=0,o=this._len,s=0;s<a;s++)r+=n[s].len();var l=this.data;if(hasTypedArray&&(l instanceof Float32Array||!l)&&(this.data=new Float32Array(o+r),o>0&&l))for(var c=0;c<o;c++)this.data[c]=l[c];for(var s=0;s<a;s++)for(var u=n[s].data,c=0;c<u.length;c++)this.data[o++]=u[c];this._len=o}},t.prototype.addData=function(n,a,r,o,s,l,c,u,d){if(this._saveData){var f=this.data;this._len+arguments.length>f.length&&(this._expandData(),f=this.data);for(var v=0;v<arguments.length;v++)f[this._len++]=arguments[v]}},t.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},t.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var n=[],a=0;a<this._len;a++)n[a]=this.data[a];this.data=n}},t.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var n=this.data;n instanceof Array&&(n.length=this._len,hasTypedArray&&this._len>11&&(this.data=new Float32Array(n)))}},t.prototype.getBoundingRect=function(){min[0]=min[1]=min2[0]=min2[1]=Number.MAX_VALUE,max[0]=max[1]=max2[0]=max2[1]=-Number.MAX_VALUE;var n=this.data,a=0,r=0,o=0,s=0,l;for(l=0;l<this._len;){var c=n[l++],u=l===1;switch(u&&(a=n[l],r=n[l+1],o=a,s=r),c){case CMD$2.M:a=o=n[l++],r=s=n[l++],min2[0]=o,min2[1]=s,max2[0]=o,max2[1]=s;break;case CMD$2.L:fromLine(a,r,n[l],n[l+1],min2,max2),a=n[l++],r=n[l++];break;case CMD$2.C:fromCubic(a,r,n[l++],n[l++],n[l++],n[l++],n[l],n[l+1],min2,max2),a=n[l++],r=n[l++];break;case CMD$2.Q:fromQuadratic(a,r,n[l++],n[l++],n[l],n[l+1],min2,max2),a=n[l++],r=n[l++];break;case CMD$2.A:var d=n[l++],f=n[l++],v=n[l++],_=n[l++],g=n[l++],y=n[l++]+g;l+=1;var b=!n[l++];u&&(o=mathCos$2(g)*v+d,s=mathSin$2(g)*_+f),fromArc(d,f,v,_,g,y,b,min2,max2),a=mathCos$2(y)*v+d,r=mathSin$2(y)*_+f;break;case CMD$2.R:o=a=n[l++],s=r=n[l++];var T=n[l++],S=n[l++];fromLine(o,s,o+T,s+S,min2,max2);break;case CMD$2.Z:a=o,r=s;break}min$1(min,min,min2),max$1(max,max,max2)}return l===0&&(min[0]=min[1]=max[0]=max[1]=0),new BoundingRect(min[0],min[1],max[0]-min[0],max[1]-min[1])},t.prototype._calculateLength=function(){var n=this.data,a=this._len,r=this._ux,o=this._uy,s=0,l=0,c=0,u=0;this._pathSegLen||(this._pathSegLen=[]);for(var d=this._pathSegLen,f=0,v=0,_=0;_<a;){var g=n[_++],y=_===1;y&&(s=n[_],l=n[_+1],c=s,u=l);var b=-1;switch(g){case CMD$2.M:s=c=n[_++],l=u=n[_++];break;case CMD$2.L:{var T=n[_++],S=n[_++],C=T-s,E=S-l;(mathAbs$2(C)>r||mathAbs$2(E)>o||_===a-1)&&(b=Math.sqrt(C*C+E*E),s=T,l=S);break}case CMD$2.C:{var x=n[_++],A=n[_++],T=n[_++],S=n[_++],N=n[_++],M=n[_++];b=cubicLength(s,l,x,A,T,S,N,M,10),s=N,l=M;break}case CMD$2.Q:{var x=n[_++],A=n[_++],T=n[_++],S=n[_++];b=quadraticLength(s,l,x,A,T,S,10),s=T,l=S;break}case CMD$2.A:var R=n[_++],D=n[_++],L=n[_++],I=n[_++],$=n[_++],V=n[_++],H=V+$;_+=1,y&&(c=mathCos$2($)*L+R,u=mathSin$2($)*I+D),b=mathMax$3(L,I)*mathMin$3(PI2$4,Math.abs(V)),s=mathCos$2(H)*L+R,l=mathSin$2(H)*I+D;break;case CMD$2.R:{c=s=n[_++],u=l=n[_++];var X=n[_++],q=n[_++];b=X*2+q*2;break}case CMD$2.Z:{var C=c-s,E=u-l;b=Math.sqrt(C*C+E*E),s=c,l=u;break}}b>=0&&(d[v++]=b,f+=b)}return this._pathLen=f,f},t.prototype.rebuildPath=function(n,a){var r=this.data,o=this._ux,s=this._uy,l=this._len,c,u,d,f,v,_,g=a<1,y,b,T=0,S=0,C,E=0,x,A;if(!(g&&(this._pathSegLen||this._calculateLength(),y=this._pathSegLen,b=this._pathLen,C=a*b,!C)))e:for(var N=0;N<l;){var M=r[N++],R=N===1;switch(R&&(d=r[N],f=r[N+1],c=d,u=f),M!==CMD$2.L&&E>0&&(n.lineTo(x,A),E=0),M){case CMD$2.M:c=d=r[N++],u=f=r[N++],n.moveTo(d,f);break;case CMD$2.L:{v=r[N++],_=r[N++];var D=mathAbs$2(v-d),L=mathAbs$2(_-f);if(D>o||L>s){if(g){var I=y[S++];if(T+I>C){var $=(C-T)/I;n.lineTo(d*(1-$)+v*$,f*(1-$)+_*$);break e}T+=I}n.lineTo(v,_),d=v,f=_,E=0}else{var V=D*D+L*L;V>E&&(x=v,A=_,E=V)}break}case CMD$2.C:{var H=r[N++],X=r[N++],q=r[N++],z=r[N++],G=r[N++],oe=r[N++];if(g){var I=y[S++];if(T+I>C){var $=(C-T)/I;cubicSubdivide(d,H,q,G,$,tmpOutX),cubicSubdivide(f,X,z,oe,$,tmpOutY),n.bezierCurveTo(tmpOutX[1],tmpOutY[1],tmpOutX[2],tmpOutY[2],tmpOutX[3],tmpOutY[3]);break e}T+=I}n.bezierCurveTo(H,X,q,z,G,oe),d=G,f=oe;break}case CMD$2.Q:{var H=r[N++],X=r[N++],q=r[N++],z=r[N++];if(g){var I=y[S++];if(T+I>C){var $=(C-T)/I;quadraticSubdivide(d,H,q,$,tmpOutX),quadraticSubdivide(f,X,z,$,tmpOutY),n.quadraticCurveTo(tmpOutX[1],tmpOutY[1],tmpOutX[2],tmpOutY[2]);break e}T+=I}n.quadraticCurveTo(H,X,q,z),d=q,f=z;break}case CMD$2.A:var ne=r[N++],ue=r[N++],se=r[N++],fe=r[N++],ae=r[N++],ie=r[N++],ve=r[N++],le=!r[N++],pe=se>fe?se:fe,Te=mathAbs$2(se-fe)>.001,U=ae+ie,W=!1;if(g){var I=y[S++];T+I>C&&(U=ae+ie*(C-T)/I,W=!0),T+=I}if(Te&&n.ellipse?n.ellipse(ne,ue,se,fe,ve,ae,U,le):n.arc(ne,ue,pe,ae,U,le),W)break e;R&&(c=mathCos$2(ae)*se+ne,u=mathSin$2(ae)*fe+ue),d=mathCos$2(U)*se+ne,f=mathSin$2(U)*fe+ue;break;case CMD$2.R:c=d=r[N],u=f=r[N+1],v=r[N++],_=r[N++];var w=r[N++],P=r[N++];if(g){var I=y[S++];if(T+I>C){var F=C-T;n.moveTo(v,_),n.lineTo(v+mathMin$3(F,w),_),F-=w,F>0&&n.lineTo(v+w,_+mathMin$3(F,P)),F-=P,F>0&&n.lineTo(v+mathMax$3(w-F,0),_+P),F-=w,F>0&&n.lineTo(v,_+mathMax$3(P-F,0));break e}T+=I}n.rect(v,_,w,P);break;case CMD$2.Z:if(g){var I=y[S++];if(T+I>C){var $=(C-T)/I;n.lineTo(d*(1-$)+c*$,f*(1-$)+u*$);break e}T+=I}n.closePath(),d=c,f=u}}},t.prototype.clone=function(){var n=new t,a=this.data;return n.data=a.slice?a.slice():Array.prototype.slice.call(a),n._len=this._len,n},t.prototype.canSave=function(){return!!this._saveData},t.CMD=CMD$2,t.initDefaultProps=function(){var n=t.prototype;n._saveData=!0,n._ux=0,n._uy=0,n._pendingPtDist=0,n._version=0}(),t}();function containStroke$4(t,n,a,r,o,s,l){if(o===0)return!1;var c=o,u=0,d=t;if(l>n+c&&l>r+c||l<n-c&&l<r-c||s>t+c&&s>a+c||s<t-c&&s<a-c)return!1;if(t!==a)u=(n-r)/(t-a),d=(t*r-a*n)/(t-a);else return Math.abs(s-t)<=c/2;var f=u*s-l+d,v=f*f/(u*u+1);return v<=c/2*c/2}function containStroke$3(t,n,a,r,o,s,l,c,u,d,f){if(u===0)return!1;var v=u;if(f>n+v&&f>r+v&&f>s+v&&f>c+v||f<n-v&&f<r-v&&f<s-v&&f<c-v||d>t+v&&d>a+v&&d>o+v&&d>l+v||d<t-v&&d<a-v&&d<o-v&&d<l-v)return!1;var _=cubicProjectPoint(t,n,a,r,o,s,l,c,d,f);return _<=v/2}function containStroke$2(t,n,a,r,o,s,l,c,u){if(l===0)return!1;var d=l;if(u>n+d&&u>r+d&&u>s+d||u<n-d&&u<r-d&&u<s-d||c>t+d&&c>a+d&&c>o+d||c<t-d&&c<a-d&&c<o-d)return!1;var f=quadraticProjectPoint(t,n,a,r,o,s,c,u);return f<=d/2}var PI2$3=Math.PI*2;function normalizeRadian(t){return t%=PI2$3,t<0&&(t+=PI2$3),t}var PI2$2=Math.PI*2;function containStroke$1(t,n,a,r,o,s,l,c,u){if(l===0)return!1;var d=l;c-=t,u-=n;var f=Math.sqrt(c*c+u*u);if(f-d>a||f+d<a)return!1;if(Math.abs(r-o)%PI2$2<1e-4)return!0;if(s){var v=r;r=normalizeRadian(o),o=normalizeRadian(v)}else r=normalizeRadian(r),o=normalizeRadian(o);r>o&&(o+=PI2$2);var _=Math.atan2(u,c);return _<0&&(_+=PI2$2),_>=r&&_<=o||_+PI2$2>=r&&_+PI2$2<=o}function windingLine(t,n,a,r,o,s){if(s>n&&s>r||s<n&&s<r||r===n)return 0;var l=(s-n)/(r-n),c=r<n?1:-1;(l===1||l===0)&&(c=r<n?.5:-.5);var u=l*(a-t)+t;return u===o?1/0:u>o?c:0}var CMD$1=PathProxy.CMD,PI2$1=Math.PI*2,EPSILON$1=1e-4;function isAroundEqual$1(t,n){return Math.abs(t-n)<EPSILON$1}var roots=[-1,-1,-1],extrema=[-1,-1];function swapExtrema(){var t=extrema[0];extrema[0]=extrema[1],extrema[1]=t}function windingCubic(t,n,a,r,o,s,l,c,u,d){if(d>n&&d>r&&d>s&&d>c||d<n&&d<r&&d<s&&d<c)return 0;var f=cubicRootAt(n,r,s,c,d,roots);if(f===0)return 0;for(var v=0,_=-1,g=void 0,y=void 0,b=0;b<f;b++){var T=roots[b],S=T===0||T===1?.5:1,C=cubicAt(t,a,o,l,T);C<u||(_<0&&(_=cubicExtrema(n,r,s,c,extrema),extrema[1]<extrema[0]&&_>1&&swapExtrema(),g=cubicAt(n,r,s,c,extrema[0]),_>1&&(y=cubicAt(n,r,s,c,extrema[1]))),_===2?T<extrema[0]?v+=g<n?S:-S:T<extrema[1]?v+=y<g?S:-S:v+=c<y?S:-S:T<extrema[0]?v+=g<n?S:-S:v+=c<g?S:-S)}return v}function windingQuadratic(t,n,a,r,o,s,l,c){if(c>n&&c>r&&c>s||c<n&&c<r&&c<s)return 0;var u=quadraticRootAt(n,r,s,c,roots);if(u===0)return 0;var d=quadraticExtremum(n,r,s);if(d>=0&&d<=1){for(var f=0,v=quadraticAt(n,r,s,d),_=0;_<u;_++){var g=roots[_]===0||roots[_]===1?.5:1,y=quadraticAt(t,a,o,roots[_]);y<l||(roots[_]<d?f+=v<n?g:-g:f+=s<v?g:-g)}return f}else{var g=roots[0]===0||roots[0]===1?.5:1,y=quadraticAt(t,a,o,roots[0]);return y<l?0:s<n?g:-g}}function windingArc(t,n,a,r,o,s,l,c){if(c-=n,c>a||c<-a)return 0;var u=Math.sqrt(a*a-c*c);roots[0]=-u,roots[1]=u;var d=Math.abs(r-o);if(d<1e-4)return 0;if(d>=PI2$1-1e-4){r=0,o=PI2$1;var f=s?1:-1;return l>=roots[0]+t&&l<=roots[1]+t?f:0}if(r>o){var v=r;r=o,o=v}r<0&&(r+=PI2$1,o+=PI2$1);for(var _=0,g=0;g<2;g++){var y=roots[g];if(y+t>l){var b=Math.atan2(c,y),f=s?1:-1;b<0&&(b=PI2$1+b),(b>=r&&b<=o||b+PI2$1>=r&&b+PI2$1<=o)&&(b>Math.PI/2&&b<Math.PI*1.5&&(f=-f),_+=f)}}return _}function containPath(t,n,a,r,o){for(var s=t.data,l=t.len(),c=0,u=0,d=0,f=0,v=0,_,g,y=0;y<l;){var b=s[y++],T=y===1;switch(b===CMD$1.M&&y>1&&(a||(c+=windingLine(u,d,f,v,r,o))),T&&(u=s[y],d=s[y+1],f=u,v=d),b){case CMD$1.M:f=s[y++],v=s[y++],u=f,d=v;break;case CMD$1.L:if(a){if(containStroke$4(u,d,s[y],s[y+1],n,r,o))return!0}else c+=windingLine(u,d,s[y],s[y+1],r,o)||0;u=s[y++],d=s[y++];break;case CMD$1.C:if(a){if(containStroke$3(u,d,s[y++],s[y++],s[y++],s[y++],s[y],s[y+1],n,r,o))return!0}else c+=windingCubic(u,d,s[y++],s[y++],s[y++],s[y++],s[y],s[y+1],r,o)||0;u=s[y++],d=s[y++];break;case CMD$1.Q:if(a){if(containStroke$2(u,d,s[y++],s[y++],s[y],s[y+1],n,r,o))return!0}else c+=windingQuadratic(u,d,s[y++],s[y++],s[y],s[y+1],r,o)||0;u=s[y++],d=s[y++];break;case CMD$1.A:var S=s[y++],C=s[y++],E=s[y++],x=s[y++],A=s[y++],N=s[y++];y+=1;var M=!!(1-s[y++]);_=Math.cos(A)*E+S,g=Math.sin(A)*x+C,T?(f=_,v=g):c+=windingLine(u,d,_,g,r,o);var R=(r-S)*x/E+S;if(a){if(containStroke$1(S,C,x,A,A+N,M,n,R,o))return!0}else c+=windingArc(S,C,x,A,A+N,M,R,o);u=Math.cos(A+N)*E+S,d=Math.sin(A+N)*x+C;break;case CMD$1.R:f=u=s[y++],v=d=s[y++];var D=s[y++],L=s[y++];if(_=f+D,g=v+L,a){if(containStroke$4(f,v,_,v,n,r,o)||containStroke$4(_,v,_,g,n,r,o)||containStroke$4(_,g,f,g,n,r,o)||containStroke$4(f,g,f,v,n,r,o))return!0}else c+=windingLine(_,v,_,g,r,o),c+=windingLine(f,g,f,v,r,o);break;case CMD$1.Z:if(a){if(containStroke$4(u,d,f,v,n,r,o))return!0}else c+=windingLine(u,d,f,v,r,o);u=f,d=v;break}}return!a&&!isAroundEqual$1(d,v)&&(c+=windingLine(u,d,f,v,r,o)||0),c!==0}function contain$2(t,n,a){return containPath(t,0,!1,n,a)}function containStroke(t,n,a,r){return containPath(t,n,!0,a,r)}var DEFAULT_PATH_STYLE=defaults({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},DEFAULT_COMMON_STYLE),DEFAULT_PATH_ANIMATION_PROPS={style:defaults({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)},pathCopyParams=TRANSFORMABLE_PROPS.concat(["invisible","culling","z","z2","zlevel","parent"]),Path=function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.update=function(){var a=this;t.prototype.update.call(this);var r=this.style;if(r.decal){var o=this._decalEl=this._decalEl||new n;o.buildPath===n.prototype.buildPath&&(o.buildPath=function(u){a.buildPath(u,a.shape)}),o.silent=!0;var s=o.style;for(var l in r)s[l]!==r[l]&&(s[l]=r[l]);s.fill=r.fill?r.decal:null,s.decal=null,s.shadowColor=null,r.strokeFirst&&(s.stroke=null);for(var c=0;c<pathCopyParams.length;++c)o[pathCopyParams[c]]=this[pathCopyParams[c]];o.__dirty|=REDRAW_BIT}else this._decalEl&&(this._decalEl=null)},n.prototype.getDecalElement=function(){return this._decalEl},n.prototype._init=function(a){var r=keys(a);this.shape=this.getDefaultShape();var o=this.getDefaultStyle();o&&this.useStyle(o);for(var s=0;s<r.length;s++){var l=r[s],c=a[l];l==="style"?this.style?extend(this.style,c):this.useStyle(c):l==="shape"?extend(this.shape,c):t.prototype.attrKV.call(this,l,c)}this.style||this.useStyle({})},n.prototype.getDefaultStyle=function(){return null},n.prototype.getDefaultShape=function(){return{}},n.prototype.canBeInsideText=function(){return this.hasFill()},n.prototype.getInsideTextFill=function(){var a=this.style.fill;if(a!=="none"){if(isString(a)){var r=lum(a,0);return r>.5?DARK_LABEL_COLOR:r>.2?LIGHTER_LABEL_COLOR:LIGHT_LABEL_COLOR}else if(a)return LIGHT_LABEL_COLOR}return DARK_LABEL_COLOR},n.prototype.getInsideTextStroke=function(a){var r=this.style.fill;if(isString(r)){var o=this.__zr,s=!!(o&&o.isDarkMode()),l=lum(a,0)<DARK_MODE_THRESHOLD;if(s===l)return r}},n.prototype.buildPath=function(a,r,o){},n.prototype.pathUpdated=function(){this.__dirty&=~SHAPE_CHANGED_BIT},n.prototype.getUpdatedPathProxy=function(a){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,a),this.path},n.prototype.createPathProxy=function(){this.path=new PathProxy(!1)},n.prototype.hasStroke=function(){var a=this.style,r=a.stroke;return!(r==null||r==="none"||!(a.lineWidth>0))},n.prototype.hasFill=function(){var a=this.style,r=a.fill;return r!=null&&r!=="none"},n.prototype.getBoundingRect=function(){var a=this._rect,r=this.style,o=!a;if(o){var s=!1;this.path||(s=!0,this.createPathProxy());var l=this.path;(s||this.__dirty&SHAPE_CHANGED_BIT)&&(l.beginPath(),this.buildPath(l,this.shape,!1),this.pathUpdated()),a=l.getBoundingRect()}if(this._rect=a,this.hasStroke()&&this.path&&this.path.len()>0){var c=this._rectStroke||(this._rectStroke=a.clone());if(this.__dirty||o){c.copy(a);var u=r.strokeNoScale?this.getLineScale():1,d=r.lineWidth;if(!this.hasFill()){var f=this.strokeContainThreshold;d=Math.max(d,f??4)}u>1e-10&&(c.width+=d/u,c.height+=d/u,c.x-=d/u/2,c.y-=d/u/2)}return c}return a},n.prototype.contain=function(a,r){var o=this.transformCoordToLocal(a,r),s=this.getBoundingRect(),l=this.style;if(a=o[0],r=o[1],s.contain(a,r)){var c=this.path;if(this.hasStroke()){var u=l.lineWidth,d=l.strokeNoScale?this.getLineScale():1;if(d>1e-10&&(this.hasFill()||(u=Math.max(u,this.strokeContainThreshold)),containStroke(c,u/d,a,r)))return!0}if(this.hasFill())return contain$2(c,a,r)}return!1},n.prototype.dirtyShape=function(){this.__dirty|=SHAPE_CHANGED_BIT,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},n.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},n.prototype.animateShape=function(a){return this.animate("shape",a)},n.prototype.updateDuringAnimation=function(a){a==="style"?this.dirtyStyle():a==="shape"?this.dirtyShape():this.markRedraw()},n.prototype.attrKV=function(a,r){a==="shape"?this.setShape(r):t.prototype.attrKV.call(this,a,r)},n.prototype.setShape=function(a,r){var o=this.shape;return o||(o=this.shape={}),typeof a=="string"?o[a]=r:extend(o,a),this.dirtyShape(),this},n.prototype.shapeChanged=function(){return!!(this.__dirty&SHAPE_CHANGED_BIT)},n.prototype.createStyle=function(a){return createObject(DEFAULT_PATH_STYLE,a)},n.prototype._innerSaveToNormal=function(a){t.prototype._innerSaveToNormal.call(this,a);var r=this._normalState;a.shape&&!r.shape&&(r.shape=extend({},this.shape))},n.prototype._applyStateObj=function(a,r,o,s,l,c){t.prototype._applyStateObj.call(this,a,r,o,s,l,c);var u=!(r&&s),d;if(r&&r.shape?l?s?d=r.shape:(d=extend({},o.shape),extend(d,r.shape)):(d=extend({},s?this.shape:o.shape),extend(d,r.shape)):u&&(d=o.shape),d)if(l){this.shape=extend({},this.shape);for(var f={},v=keys(d),_=0;_<v.length;_++){var g=v[_];typeof d[g]=="object"?this.shape[g]=d[g]:f[g]=d[g]}this._transitionState(a,{shape:f},c)}else this.shape=d,this.dirtyShape()},n.prototype._mergeStates=function(a){for(var r=t.prototype._mergeStates.call(this,a),o,s=0;s<a.length;s++){var l=a[s];l.shape&&(o=o||{},this._mergeStyle(o,l.shape))}return o&&(r.shape=o),r},n.prototype.getAnimationStyleProps=function(){return DEFAULT_PATH_ANIMATION_PROPS},n.prototype.isZeroArea=function(){return!1},n.extend=function(a){var r=function(s){__extends(l,s);function l(c){var u=s.call(this,c)||this;return a.init&&a.init.call(u,c),u}return l.prototype.getDefaultStyle=function(){return clone$3(a.style)},l.prototype.getDefaultShape=function(){return clone$3(a.shape)},l}(n);for(var o in a)typeof a[o]=="function"&&(r.prototype[o]=a[o]);return r},n.initDefaultProps=function(){var a=n.prototype;a.type="path",a.strokeContainThreshold=5,a.segmentIgnoreThreshold=0,a.subPixelOptimize=!1,a.autoBatch=!1,a.__dirty=REDRAW_BIT|STYLE_CHANGED_BIT|SHAPE_CHANGED_BIT}(),n}(Displayable),DEFAULT_TSPAN_STYLE=defaults({strokeFirst:!0,font:DEFAULT_FONT,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},DEFAULT_PATH_STYLE),TSpan=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.hasStroke=function(){return tSpanHasStroke(this.style)},n.prototype.hasFill=function(){var a=this.style,r=a.fill;return r!=null&&r!=="none"},n.prototype.createStyle=function(a){return createObject(DEFAULT_TSPAN_STYLE,a)},n.prototype.setBoundingRect=function(a){this._rect=a},n.prototype.getBoundingRect=function(){return this._rect||(this._rect=tSpanCreateBoundingRect(this.style)),this._rect},n.initDefaultProps=function(){var a=n.prototype;a.dirtyRectTolerance=10}(),n}(Displayable);TSpan.prototype.type="tspan";var DEFAULT_IMAGE_STYLE=defaults({x:0,y:0},DEFAULT_COMMON_STYLE),DEFAULT_IMAGE_ANIMATION_PROPS={style:defaults({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)};function isImageLike(t){return!!(t&&typeof t!="string"&&t.width&&t.height)}var ZRImage=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.createStyle=function(a){return createObject(DEFAULT_IMAGE_STYLE,a)},n.prototype._getSize=function(a){var r=this.style,o=r[a];if(o!=null)return o;var s=isImageLike(r.image)?r.image:this.__image;if(!s)return 0;var l=a==="width"?"height":"width",c=r[l];return c==null?s[a]:s[a]/s[l]*c},n.prototype.getWidth=function(){return this._getSize("width")},n.prototype.getHeight=function(){return this._getSize("height")},n.prototype.getAnimationStyleProps=function(){return DEFAULT_IMAGE_ANIMATION_PROPS},n.prototype.getBoundingRect=function(){var a=this.style;return this._rect||(this._rect=new BoundingRect(a.x||0,a.y||0,this.getWidth(),this.getHeight())),this._rect},n}(Displayable);ZRImage.prototype.type="image";function buildPath$2(t,n){var a=n.x,r=n.y,o=n.width,s=n.height,l=n.r,c,u,d,f;o<0&&(a=a+o,o=-o),s<0&&(r=r+s,s=-s),typeof l=="number"?c=u=d=f=l:l instanceof Array?l.length===1?c=u=d=f=l[0]:l.length===2?(c=d=l[0],u=f=l[1]):l.length===3?(c=l[0],u=f=l[1],d=l[2]):(c=l[0],u=l[1],d=l[2],f=l[3]):c=u=d=f=0;var v;c+u>o&&(v=c+u,c*=o/v,u*=o/v),d+f>o&&(v=d+f,d*=o/v,f*=o/v),u+d>s&&(v=u+d,u*=s/v,d*=s/v),c+f>s&&(v=c+f,c*=s/v,f*=s/v),t.moveTo(a+c,r),t.lineTo(a+o-u,r),u!==0&&t.arc(a+o-u,r+u,u,-Math.PI/2,0),t.lineTo(a+o,r+s-d),d!==0&&t.arc(a+o-d,r+s-d,d,0,Math.PI/2),t.lineTo(a+f,r+s),f!==0&&t.arc(a+f,r+s-f,f,Math.PI/2,Math.PI),t.lineTo(a,r+c),c!==0&&t.arc(a+c,r+c,c,Math.PI,Math.PI*1.5)}var round=Math.round;function subPixelOptimizeLine$1(t,n,a){if(n){var r=n.x1,o=n.x2,s=n.y1,l=n.y2;t.x1=r,t.x2=o,t.y1=s,t.y2=l;var c=a&&a.lineWidth;return c&&(round(r*2)===round(o*2)&&(t.x1=t.x2=subPixelOptimize$1(r,c,!0)),round(s*2)===round(l*2)&&(t.y1=t.y2=subPixelOptimize$1(s,c,!0))),t}}function subPixelOptimizeRect$1(t,n,a){if(n){var r=n.x,o=n.y,s=n.width,l=n.height;t.x=r,t.y=o,t.width=s,t.height=l;var c=a&&a.lineWidth;return c&&(t.x=subPixelOptimize$1(r,c,!0),t.y=subPixelOptimize$1(o,c,!0),t.width=Math.max(subPixelOptimize$1(r+s,c,!1)-t.x,s===0?0:1),t.height=Math.max(subPixelOptimize$1(o+l,c,!1)-t.y,l===0?0:1)),t}}function subPixelOptimize$1(t,n,a){if(!n)return t;var r=round(t*2);return(r+round(n))%2===0?r/2:(r+(a?1:-1))/2}var RectShape=function(){function t(){this.x=0,this.y=0,this.width=0,this.height=0}return t}(),subPixelOptimizeOutputShape$1={},Rect=function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultShape=function(){return new RectShape},n.prototype.buildPath=function(a,r){var o,s,l,c;if(this.subPixelOptimize){var u=subPixelOptimizeRect$1(subPixelOptimizeOutputShape$1,r,this.style);o=u.x,s=u.y,l=u.width,c=u.height,u.r=r.r,r=u}else o=r.x,s=r.y,l=r.width,c=r.height;r.r?buildPath$2(a,r):a.rect(o,s,l,c)},n.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},n}(Path);Rect.prototype.type="rect";var DEFAULT_RICH_TEXT_COLOR={fill:"#000"},DEFAULT_STROKE_LINE_WIDTH=2,tmpCITOverflowAreaOut={},DEFAULT_TEXT_ANIMATION_PROPS={style:defaults({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)},ZRText=function(t){__extends(n,t);function n(a){var r=t.call(this)||this;return r.type="text",r._children=[],r._defaultStyle=DEFAULT_RICH_TEXT_COLOR,r.attr(a),r}return n.prototype.childrenRef=function(){return this._children},n.prototype.update=function(){t.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var a=0;a<this._children.length;a++){var r=this._children[a];r.zlevel=this.zlevel,r.z=this.z,r.z2=this.z2,r.culling=this.culling,r.cursor=this.cursor,r.invisible=this.invisible}},n.prototype.updateTransform=function(){var a=this.innerTransformable;a?(a.updateTransform(),a.transform&&(this.transform=a.transform)):t.prototype.updateTransform.call(this)},n.prototype.getLocalTransform=function(a){var r=this.innerTransformable;return r?r.getLocalTransform(a):t.prototype.getLocalTransform.call(this,a)},n.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),t.prototype.getComputedTransform.call(this)},n.prototype._updateSubTexts=function(){this._childCursor=0,normalizeTextStyle(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},n.prototype.addSelfToZr=function(a){t.prototype.addSelfToZr.call(this,a);for(var r=0;r<this._children.length;r++)this._children[r].__zr=a},n.prototype.removeSelfFromZr=function(a){t.prototype.removeSelfFromZr.call(this,a);for(var r=0;r<this._children.length;r++)this._children[r].__zr=null},n.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var a=new BoundingRect(0,0,0,0),r=this._children,o=[],s=null,l=0;l<r.length;l++){var c=r[l],u=c.getBoundingRect(),d=c.getLocalTransform(o);d?(a.copy(u),a.applyTransform(d),s=s||a.clone(),s.union(a)):(s=s||u.clone(),s.union(u))}this._rect=s||a}return this._rect},n.prototype.setDefaultTextStyle=function(a){this._defaultStyle=a||DEFAULT_RICH_TEXT_COLOR},n.prototype.setTextContent=function(a){},n.prototype._mergeStyle=function(a,r){if(!r)return a;var o=r.rich,s=a.rich||o&&{};return extend(a,r),o&&s?(this._mergeRich(s,o),a.rich=s):s&&(a.rich=s),a},n.prototype._mergeRich=function(a,r){for(var o=keys(r),s=0;s<o.length;s++){var l=o[s];a[l]=a[l]||{},extend(a[l],r[l])}},n.prototype.getAnimationStyleProps=function(){return DEFAULT_TEXT_ANIMATION_PROPS},n.prototype._getOrCreateChild=function(a){var r=this._children[this._childCursor];return(!r||!(r instanceof a))&&(r=new a),this._children[this._childCursor++]=r,r.__zr=this.__zr,r.parent=this,r},n.prototype._updatePlainTexts=function(){var a=this.style,r=a.font||DEFAULT_FONT,o=a.padding,s=this._defaultStyle,l=a.x||0,c=a.y||0,u=a.align||s.align||"left",d=a.verticalAlign||s.verticalAlign||"top";calcInnerTextOverflowArea(tmpCITOverflowAreaOut,s.overflowRect,l,c,u,d),l=tmpCITOverflowAreaOut.baseX,c=tmpCITOverflowAreaOut.baseY;var f=getStyleText(a),v=parsePlainText(f,a,tmpCITOverflowAreaOut.outerWidth,tmpCITOverflowAreaOut.outerHeight),_=needDrawBackground(a),g=!!a.backgroundColor,y=v.outerHeight,b=v.outerWidth,T=v.lines,S=v.lineHeight;this.isTruncated=!!v.isTruncated;var C=l,E=adjustTextY(c,v.contentHeight,d);if(_||o){var x=adjustTextX(l,b,u),A=adjustTextY(c,y,d);_&&this._renderBackground(a,a,x,A,b,y)}E+=S/2,o&&(C=getTextXForPadding(l,u,o),d==="top"?E+=o[0]:d==="bottom"&&(E-=o[2]));for(var N=0,M=!1,R=!1,D=getFill("fill"in a?a.fill:(R=!0,s.fill)),L=getStroke("stroke"in a?a.stroke:!g&&(!s.autoStroke||R)?(N=DEFAULT_STROKE_LINE_WIDTH,M=!0,s.stroke):null),I=a.textShadowBlur>0,$=0;$<T.length;$++){var V=this._getOrCreateChild(TSpan),H=V.createStyle();V.useStyle(H),H.text=T[$],H.x=C,H.y=E,H.textAlign=u,H.textBaseline="middle",H.opacity=a.opacity,H.strokeFirst=!0,I&&(H.shadowBlur=a.textShadowBlur||0,H.shadowColor=a.textShadowColor||"transparent",H.shadowOffsetX=a.textShadowOffsetX||0,H.shadowOffsetY=a.textShadowOffsetY||0),H.stroke=L,H.fill=D,L&&(H.lineWidth=a.lineWidth||N,H.lineDash=a.lineDash,H.lineDashOffset=a.lineDashOffset||0),H.font=r,setSeparateFont(H,a),E+=S,V.setBoundingRect(tSpanCreateBoundingRect2(H,v.contentWidth,v.calculatedLineHeight,M?0:null))}},n.prototype._updateRichTexts=function(){var a=this.style,r=this._defaultStyle,o=a.align||r.align,s=a.verticalAlign||r.verticalAlign,l=a.x||0,c=a.y||0;calcInnerTextOverflowArea(tmpCITOverflowAreaOut,r.overflowRect,l,c,o,s),l=tmpCITOverflowAreaOut.baseX,c=tmpCITOverflowAreaOut.baseY;var u=getStyleText(a),d=parseRichText(u,a,tmpCITOverflowAreaOut.outerWidth,tmpCITOverflowAreaOut.outerHeight,o),f=d.width,v=d.outerWidth,_=d.outerHeight,g=a.padding;this.isTruncated=!!d.isTruncated;var y=adjustTextX(l,v,o),b=adjustTextY(c,_,s),T=y,S=b;g&&(T+=g[3],S+=g[0]);var C=T+f;needDrawBackground(a)&&this._renderBackground(a,a,y,b,v,_);for(var E=!!a.backgroundColor,x=0;x<d.lines.length;x++){for(var A=d.lines[x],N=A.tokens,M=N.length,R=A.lineHeight,D=A.width,L=0,I=T,$=C,V=M-1,H=void 0;L<M&&(H=N[L],!H.align||H.align==="left");)this._placeToken(H,a,R,S,I,"left",E),D-=H.width,I+=H.width,L++;for(;V>=0&&(H=N[V],H.align==="right");)this._placeToken(H,a,R,S,$,"right",E),D-=H.width,$-=H.width,V--;for(I+=(f-(I-T)-(C-$)-D)/2;L<=V;)H=N[L],this._placeToken(H,a,R,S,I+H.width/2,"center",E),I+=H.width,L++;S+=R}},n.prototype._placeToken=function(a,r,o,s,l,c,u){var d=r.rich[a.styleName]||{};d.text=a.text;var f=a.verticalAlign,v=s+o/2;f==="top"?v=s+a.height/2:f==="bottom"&&(v=s+o-a.height/2);var _=!a.isLineHolder&&needDrawBackground(d);_&&this._renderBackground(d,r,c==="right"?l-a.width:c==="center"?l-a.width/2:l,v-a.height/2,a.width,a.height);var g=!!d.backgroundColor,y=a.textPadding;y&&(l=getTextXForPadding(l,c,y),v-=a.height/2-y[0]-a.innerHeight/2);var b=this._getOrCreateChild(TSpan),T=b.createStyle();b.useStyle(T);var S=this._defaultStyle,C=!1,E=0,x=!1,A=getFill("fill"in d?d.fill:"fill"in r?r.fill:(C=!0,S.fill)),N=getStroke("stroke"in d?d.stroke:"stroke"in r?r.stroke:!g&&!u&&(!S.autoStroke||C)?(E=DEFAULT_STROKE_LINE_WIDTH,x=!0,S.stroke):null),M=d.textShadowBlur>0||r.textShadowBlur>0;T.text=a.text,T.x=l,T.y=v,M&&(T.shadowBlur=d.textShadowBlur||r.textShadowBlur||0,T.shadowColor=d.textShadowColor||r.textShadowColor||"transparent",T.shadowOffsetX=d.textShadowOffsetX||r.textShadowOffsetX||0,T.shadowOffsetY=d.textShadowOffsetY||r.textShadowOffsetY||0),T.textAlign=c,T.textBaseline="middle",T.font=a.font||DEFAULT_FONT,T.opacity=retrieve3(d.opacity,r.opacity,1),setSeparateFont(T,d),N&&(T.lineWidth=retrieve3(d.lineWidth,r.lineWidth,E),T.lineDash=retrieve2(d.lineDash,r.lineDash),T.lineDashOffset=r.lineDashOffset||0,T.stroke=N),A&&(T.fill=A),b.setBoundingRect(tSpanCreateBoundingRect2(T,a.contentWidth,a.contentHeight,x?0:null))},n.prototype._renderBackground=function(a,r,o,s,l,c){var u=a.backgroundColor,d=a.borderWidth,f=a.borderColor,v=u&&u.image,_=u&&!v,g=a.borderRadius,y=this,b,T;if(_||a.lineHeight||d&&f){b=this._getOrCreateChild(Rect),b.useStyle(b.createStyle()),b.style.fill=null;var S=b.shape;S.x=o,S.y=s,S.width=l,S.height=c,S.r=g,b.dirtyShape()}if(_){var C=b.style;C.fill=u||null,C.fillOpacity=retrieve2(a.fillOpacity,1)}else if(v){T=this._getOrCreateChild(ZRImage),T.onload=function(){y.dirtyStyle()};var E=T.style;E.image=u.image,E.x=o,E.y=s,E.width=l,E.height=c}if(d&&f){var C=b.style;C.lineWidth=d,C.stroke=f,C.strokeOpacity=retrieve2(a.strokeOpacity,1),C.lineDash=a.borderDash,C.lineDashOffset=a.borderDashOffset||0,b.strokeContainThreshold=0,b.hasFill()&&b.hasStroke()&&(C.strokeFirst=!0,C.lineWidth*=2)}var x=(b||T).style;x.shadowBlur=a.shadowBlur||0,x.shadowColor=a.shadowColor||"transparent",x.shadowOffsetX=a.shadowOffsetX||0,x.shadowOffsetY=a.shadowOffsetY||0,x.opacity=retrieve3(a.opacity,r.opacity,1)},n.makeFont=function(a){var r="";return hasSeparateFont(a)&&(r=[a.fontStyle,a.fontWeight,parseFontSize(a.fontSize),a.fontFamily||"sans-serif"].join(" ")),r&&trim(r)||a.textFont||a.font},n}(Displayable),VALID_TEXT_ALIGN={left:!0,right:1,center:1},VALID_TEXT_VERTICAL_ALIGN={top:1,bottom:1,middle:1},FONT_PARTS=["fontStyle","fontWeight","fontSize","fontFamily"];function parseFontSize(t){return typeof t=="string"&&(t.indexOf("px")!==-1||t.indexOf("rem")!==-1||t.indexOf("em")!==-1)?t:isNaN(+t)?DEFAULT_FONT_SIZE+"px":t+"px"}function setSeparateFont(t,n){for(var a=0;a<FONT_PARTS.length;a++){var r=FONT_PARTS[a],o=n[r];o!=null&&(t[r]=o)}}function hasSeparateFont(t){return t.fontSize!=null||t.fontFamily||t.fontWeight}function normalizeTextStyle(t){return normalizeStyle(t),each$8(t.rich,normalizeStyle),t}function normalizeStyle(t){if(t){t.font=ZRText.makeFont(t);var n=t.align;n==="middle"&&(n="center"),t.align=n==null||VALID_TEXT_ALIGN[n]?n:"left";var a=t.verticalAlign;a==="center"&&(a="middle"),t.verticalAlign=a==null||VALID_TEXT_VERTICAL_ALIGN[a]?a:"top";var r=t.padding;r&&(t.padding=normalizeCssArray$1(t.padding))}}function getStroke(t,n){return t==null||n<=0||t==="transparent"||t==="none"?null:t.image||t.colorStops?"#000":t}function getFill(t){return t==null||t==="none"?null:t.image||t.colorStops?"#000":t}function getTextXForPadding(t,n,a){return n==="right"?t-a[1]:n==="center"?t+a[3]/2-a[1]/2:t+a[3]}function getStyleText(t){var n=t.text;return n!=null&&(n+=""),n}function needDrawBackground(t){return!!(t.backgroundColor||t.lineHeight||t.borderWidth&&t.borderColor)}var getECData=makeInner(),setCommonECData=function(t,n,a,r){if(r){var o=getECData(r);o.dataIndex=a,o.dataType=n,o.seriesIndex=t,o.ssrType="chart",r.type==="group"&&r.traverse(function(s){var l=getECData(s);l.seriesIndex=t,l.dataIndex=a,l.dataType=n,l.ssrType="chart"})}},_highlightNextDigit=1,_highlightKeyMap={},getSavedStates=makeInner(),getComponentStates=makeInner(),HOVER_STATE_NORMAL=0,HOVER_STATE_BLUR=1,HOVER_STATE_EMPHASIS=2,SPECIAL_STATES=["emphasis","blur","select"],DISPLAY_STATES=["normal","emphasis","blur","select"],Z2_EMPHASIS_LIFT=10,Z2_SELECT_LIFT=9,HIGHLIGHT_ACTION_TYPE="highlight",DOWNPLAY_ACTION_TYPE="downplay",SELECT_ACTION_TYPE="select",UNSELECT_ACTION_TYPE="unselect",TOGGLE_SELECT_ACTION_TYPE="toggleSelect",SELECT_CHANGED_EVENT_TYPE="selectchanged";function hasFillOrStroke(t){return t!=null&&t!=="none"}function doChangeHoverState(t,n,a){t.onHoverStateChange&&(t.hoverState||0)!==a&&t.onHoverStateChange(n),t.hoverState=a}function singleEnterEmphasis(t){doChangeHoverState(t,"emphasis",HOVER_STATE_EMPHASIS)}function singleLeaveEmphasis(t){t.hoverState===HOVER_STATE_EMPHASIS&&doChangeHoverState(t,"normal",HOVER_STATE_NORMAL)}function singleEnterBlur(t){doChangeHoverState(t,"blur",HOVER_STATE_BLUR)}function singleLeaveBlur(t){t.hoverState===HOVER_STATE_BLUR&&doChangeHoverState(t,"normal",HOVER_STATE_NORMAL)}function singleEnterSelect(t){t.selected=!0}function singleLeaveSelect(t){t.selected=!1}function updateElementState(t,n,a){n(t,a)}function traverseUpdateState(t,n,a){updateElementState(t,n,a),t.isGroup&&t.traverse(function(r){updateElementState(r,n,a)})}function setStatesFlag(t,n){switch(n){case"emphasis":t.hoverState=HOVER_STATE_EMPHASIS;break;case"normal":t.hoverState=HOVER_STATE_NORMAL;break;case"blur":t.hoverState=HOVER_STATE_BLUR;break;case"select":t.selected=!0}}function getFromStateStyle(t,n,a,r){for(var o=t.style,s={},l=0;l<n.length;l++){var c=n[l],u=o[c];s[c]=u??(r&&r[c])}for(var l=0;l<t.animators.length;l++){var d=t.animators[l];d.__fromStateTransition&&d.__fromStateTransition.indexOf(a)<0&&d.targetName==="style"&&d.saveTo(s,n)}return s}function createEmphasisDefaultState(t,n,a,r){var o=a&&indexOf(a,"select")>=0,s=!1;if(t instanceof Path){var l=getSavedStates(t),c=o&&l.selectFill||l.normalFill,u=o&&l.selectStroke||l.normalStroke;if(hasFillOrStroke(c)||hasFillOrStroke(u)){r=r||{};var d=r.style||{};d.fill==="inherit"?(s=!0,r=extend({},r),d=extend({},d),d.fill=c):!hasFillOrStroke(d.fill)&&hasFillOrStroke(c)?(s=!0,r=extend({},r),d=extend({},d),d.fill=liftColor(c)):!hasFillOrStroke(d.stroke)&&hasFillOrStroke(u)&&(s||(r=extend({},r),d=extend({},d)),d.stroke=liftColor(u)),r.style=d}}if(r&&r.z2==null){s||(r=extend({},r));var f=t.z2EmphasisLift;r.z2=t.z2+(f??Z2_EMPHASIS_LIFT)}return r}function createSelectDefaultState(t,n,a){if(a&&a.z2==null){a=extend({},a);var r=t.z2SelectLift;a.z2=t.z2+(r??Z2_SELECT_LIFT)}return a}function createBlurDefaultState(t,n,a){var r=indexOf(t.currentStates,n)>=0,o=t.style.opacity,s=r?null:getFromStateStyle(t,["opacity"],n,{opacity:1});a=a||{};var l=a.style||{};return l.opacity==null&&(a=extend({},a),l=extend({opacity:r?o:s.opacity*.1},l),a.style=l),a}function elementStateProxy(t,n){var a=this.states[t];if(this.style){if(t==="emphasis")return createEmphasisDefaultState(this,t,n,a);if(t==="blur")return createBlurDefaultState(this,t,a);if(t==="select")return createSelectDefaultState(this,t,a)}return a}function setDefaultStateProxy(t){t.stateProxy=elementStateProxy;var n=t.getTextContent(),a=t.getTextGuideLine();n&&(n.stateProxy=elementStateProxy),a&&(a.stateProxy=elementStateProxy)}function enterEmphasisWhenMouseOver(t,n){!shouldSilent(t,n)&&!t.__highByOuter&&traverseUpdateState(t,singleEnterEmphasis)}function leaveEmphasisWhenMouseOut(t,n){!shouldSilent(t,n)&&!t.__highByOuter&&traverseUpdateState(t,singleLeaveEmphasis)}function enterEmphasis(t,n){t.__highByOuter|=1<<(n||0),traverseUpdateState(t,singleEnterEmphasis)}function leaveEmphasis(t,n){!(t.__highByOuter&=~(1<<(n||0)))&&traverseUpdateState(t,singleLeaveEmphasis)}function enterBlur(t){traverseUpdateState(t,singleEnterBlur)}function leaveBlur(t){traverseUpdateState(t,singleLeaveBlur)}function enterSelect(t){traverseUpdateState(t,singleEnterSelect)}function leaveSelect(t){traverseUpdateState(t,singleLeaveSelect)}function shouldSilent(t,n){return t.__highDownSilentOnTouch&&n.zrByTouch}function allLeaveBlur(t){var n=t.getModel(),a=[],r=[];n.eachComponent(function(o,s){var l=getComponentStates(s),c=o==="series",u=c?t.getViewOfSeriesModel(s):t.getViewOfComponentModel(s);!c&&r.push(u),l.isBlured&&(u.group.traverse(function(d){singleLeaveBlur(d)}),c&&a.push(s)),l.isBlured=!1}),each$8(r,function(o){o&&o.toggleBlurSeries&&o.toggleBlurSeries(a,!1,n)})}function blurSeries(t,n,a,r){var o=r.getModel();a=a||"coordinateSystem";function s(d,f){for(var v=0;v<f.length;v++){var _=d.getItemGraphicEl(f[v]);_&&leaveBlur(_)}}if(t!=null&&!(!n||n==="none")){var l=o.getSeriesByIndex(t),c=l.coordinateSystem;c&&c.master&&(c=c.master);var u=[];o.eachSeries(function(d){var f=l===d,v=d.coordinateSystem;v&&v.master&&(v=v.master);var _=v&&c?v===c:f;if(!(a==="series"&&!f||a==="coordinateSystem"&&!_||n==="series"&&f)){var g=r.getViewOfSeriesModel(d);if(g.group.traverse(function(T){T.__highByOuter&&f&&n==="self"||singleEnterBlur(T)}),isArrayLike(n))s(d.getData(),n);else if(isObject$3(n))for(var y=keys(n),b=0;b<y.length;b++)s(d.getData(y[b]),n[y[b]]);u.push(d),getComponentStates(d).isBlured=!0}}),o.eachComponent(function(d,f){if(d!=="series"){var v=r.getViewOfComponentModel(f);v&&v.toggleBlurSeries&&v.toggleBlurSeries(u,!0,o)}})}}function blurComponent(t,n,a){if(!(t==null||n==null)){var r=a.getModel().getComponent(t,n);if(r){getComponentStates(r).isBlured=!0;var o=a.getViewOfComponentModel(r);!o||!o.focusBlurEnabled||o.group.traverse(function(s){singleEnterBlur(s)})}}}function blurSeriesFromHighlightPayload(t,n,a){var r=t.seriesIndex,o=t.getData(n.dataType);if(o){var s=queryDataIndex(o,n);s=(isArray$1(s)?s[0]:s)||0;var l=o.getItemGraphicEl(s);if(!l)for(var c=o.count(),u=0;!l&&u<c;)l=o.getItemGraphicEl(u++);if(l){var d=getECData(l);blurSeries(r,d.focus,d.blurScope,a)}else{var f=t.get(["emphasis","focus"]),v=t.get(["emphasis","blurScope"]);f!=null&&blurSeries(r,f,v,a)}}}function findComponentHighDownDispatchers(t,n,a,r){var o={focusSelf:!1,dispatchers:null};if(t==null||t==="series"||n==null||a==null)return o;var s=r.getModel().getComponent(t,n);if(!s)return o;var l=r.getViewOfComponentModel(s);if(!l||!l.findHighDownDispatchers)return o;for(var c=l.findHighDownDispatchers(a),u,d=0;d<c.length;d++)if(getECData(c[d]).focus==="self"){u=!0;break}return{focusSelf:u,dispatchers:c}}function handleGlobalMouseOverForHighDown(t,n,a){var r=getECData(t),o=findComponentHighDownDispatchers(r.componentMainType,r.componentIndex,r.componentHighDownName,a),s=o.dispatchers,l=o.focusSelf;s?(l&&blurComponent(r.componentMainType,r.componentIndex,a),each$8(s,function(c){return enterEmphasisWhenMouseOver(c,n)})):(blurSeries(r.seriesIndex,r.focus,r.blurScope,a),r.focus==="self"&&blurComponent(r.componentMainType,r.componentIndex,a),enterEmphasisWhenMouseOver(t,n))}function handleGlobalMouseOutForHighDown(t,n,a){allLeaveBlur(a);var r=getECData(t),o=findComponentHighDownDispatchers(r.componentMainType,r.componentIndex,r.componentHighDownName,a).dispatchers;o?each$8(o,function(s){return leaveEmphasisWhenMouseOut(s,n)}):leaveEmphasisWhenMouseOut(t,n)}function toggleSelectionFromPayload(t,n,a){if(isSelectChangePayload(n)){var r=n.dataType,o=t.getData(r),s=queryDataIndex(o,n);isArray$1(s)||(s=[s]),t[n.type===TOGGLE_SELECT_ACTION_TYPE?"toggleSelect":n.type===SELECT_ACTION_TYPE?"select":"unselect"](s,r)}}function updateSeriesElementSelection(t){var n=t.getAllData();each$8(n,function(a){var r=a.data,o=a.type;r.eachItemGraphicEl(function(s,l){t.isSelected(l,o)?enterSelect(s):leaveSelect(s)})})}function getAllSelectedIndices(t){var n=[];return t.eachSeries(function(a){var r=a.getAllData();each$8(r,function(o){o.data;var s=o.type,l=a.getSelectedDataIndices();if(l.length>0){var c={dataIndex:l,seriesIndex:a.seriesIndex};s!=null&&(c.dataType=s),n.push(c)}})}),n}function enableHoverEmphasis(t,n,a){setAsHighDownDispatcher(t,!0),traverseUpdateState(t,setDefaultStateProxy),enableHoverFocus(t,n,a)}function disableHoverEmphasis(t){setAsHighDownDispatcher(t,!1)}function toggleHoverEmphasis(t,n,a,r){r?disableHoverEmphasis(t):enableHoverEmphasis(t,n,a)}function enableHoverFocus(t,n,a){var r=getECData(t);n!=null?(r.focus=n,r.blurScope=a):r.focus&&(r.focus=null)}var OTHER_STATES=["emphasis","blur","select"],defaultStyleGetterMap={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function setStatesStylesFromModel(t,n,a,r){a=a||"itemStyle";for(var o=0;o<OTHER_STATES.length;o++){var s=OTHER_STATES[o],l=n.getModel([s,a]),c=t.ensureState(s);c.style=l[defaultStyleGetterMap[a]]()}}function setAsHighDownDispatcher(t,n){var a=n===!1,r=t;t.highDownSilentOnTouch&&(r.__highDownSilentOnTouch=t.highDownSilentOnTouch),(!a||r.__highDownDispatcher)&&(r.__highByOuter=r.__highByOuter||0,r.__highDownDispatcher=!a)}function isHighDownDispatcher(t){return!!(t&&t.__highDownDispatcher)}function enableComponentHighDownFeatures(t,n,a){var r=getECData(t);r.componentMainType=n.mainType,r.componentIndex=n.componentIndex,r.componentHighDownName=a}function getHighlightDigit(t){var n=_highlightKeyMap[t];return n==null&&_highlightNextDigit<=32&&(n=_highlightKeyMap[t]=_highlightNextDigit++),n}function isSelectChangePayload(t){var n=t.type;return n===SELECT_ACTION_TYPE||n===UNSELECT_ACTION_TYPE||n===TOGGLE_SELECT_ACTION_TYPE}function isHighDownPayload(t){var n=t.type;return n===HIGHLIGHT_ACTION_TYPE||n===DOWNPLAY_ACTION_TYPE}function savePathStates(t){var n=getSavedStates(t);n.normalFill=t.style.fill,n.normalStroke=t.style.stroke;var a=t.states.select||{};n.selectFill=a.style&&a.style.fill||null,n.selectStroke=a.style&&a.style.stroke||null}var CMD=PathProxy.CMD,points$2=[[],[],[]],mathSqrt$2=Math.sqrt,mathAtan2=Math.atan2;function transformPath(t,n){if(n){var a=t.data,r=t.len(),o,s,l,c,u,d,f=CMD.M,v=CMD.C,_=CMD.L,g=CMD.R,y=CMD.A,b=CMD.Q;for(l=0,c=0;l<r;){switch(o=a[l++],c=l,s=0,o){case f:s=1;break;case _:s=1;break;case v:s=3;break;case b:s=2;break;case y:var T=n[4],S=n[5],C=mathSqrt$2(n[0]*n[0]+n[1]*n[1]),E=mathSqrt$2(n[2]*n[2]+n[3]*n[3]),x=mathAtan2(-n[1]/E,n[0]/C);a[l]*=C,a[l++]+=T,a[l]*=E,a[l++]+=S,a[l++]*=C,a[l++]*=E,a[l++]+=x,a[l++]+=x,l+=2,c=l;break;case g:d[0]=a[l++],d[1]=a[l++],applyTransform$1(d,d,n),a[c++]=d[0],a[c++]=d[1],d[0]+=a[l++],d[1]+=a[l++],applyTransform$1(d,d,n),a[c++]=d[0],a[c++]=d[1]}for(u=0;u<s;u++){var A=points$2[u];A[0]=a[l++],A[1]=a[l++],applyTransform$1(A,A,n),a[c++]=A[0],a[c++]=A[1]}}t.increaseVersion()}}var mathSqrt$1=Math.sqrt,mathSin$1=Math.sin,mathCos$1=Math.cos,PI$3=Math.PI;function vMag(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function vRatio(t,n){return(t[0]*n[0]+t[1]*n[1])/(vMag(t)*vMag(n))}function vAngle(t,n){return(t[0]*n[1]<t[1]*n[0]?-1:1)*Math.acos(vRatio(t,n))}function processArc(t,n,a,r,o,s,l,c,u,d,f){var v=u*(PI$3/180),_=mathCos$1(v)*(t-a)/2+mathSin$1(v)*(n-r)/2,g=-1*mathSin$1(v)*(t-a)/2+mathCos$1(v)*(n-r)/2,y=_*_/(l*l)+g*g/(c*c);y>1&&(l*=mathSqrt$1(y),c*=mathSqrt$1(y));var b=(o===s?-1:1)*mathSqrt$1((l*l*(c*c)-l*l*(g*g)-c*c*(_*_))/(l*l*(g*g)+c*c*(_*_)))||0,T=b*l*g/c,S=b*-c*_/l,C=(t+a)/2+mathCos$1(v)*T-mathSin$1(v)*S,E=(n+r)/2+mathSin$1(v)*T+mathCos$1(v)*S,x=vAngle([1,0],[(_-T)/l,(g-S)/c]),A=[(_-T)/l,(g-S)/c],N=[(-1*_-T)/l,(-1*g-S)/c],M=vAngle(A,N);if(vRatio(A,N)<=-1&&(M=PI$3),vRatio(A,N)>=1&&(M=0),M<0){var R=Math.round(M/PI$3*1e6)/1e6;M=PI$3*2+R%2*PI$3}f.addData(d,C,E,l,c,x,M,v,s)}var commandReg=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,numberReg$1=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function createPathProxyFromString(t){var n=new PathProxy;if(!t)return n;var a=0,r=0,o=a,s=r,l,c=PathProxy.CMD,u=t.match(commandReg);if(!u)return n;for(var d=0;d<u.length;d++){for(var f=u[d],v=f.charAt(0),_=void 0,g=f.match(numberReg$1)||[],y=g.length,b=0;b<y;b++)g[b]=parseFloat(g[b]);for(var T=0;T<y;){var S=void 0,C=void 0,E=void 0,x=void 0,A=void 0,N=void 0,M=void 0,R=a,D=r,L=void 0,I=void 0;switch(v){case"l":a+=g[T++],r+=g[T++],_=c.L,n.addData(_,a,r);break;case"L":a=g[T++],r=g[T++],_=c.L,n.addData(_,a,r);break;case"m":a+=g[T++],r+=g[T++],_=c.M,n.addData(_,a,r),o=a,s=r,v="l";break;case"M":a=g[T++],r=g[T++],_=c.M,n.addData(_,a,r),o=a,s=r,v="L";break;case"h":a+=g[T++],_=c.L,n.addData(_,a,r);break;case"H":a=g[T++],_=c.L,n.addData(_,a,r);break;case"v":r+=g[T++],_=c.L,n.addData(_,a,r);break;case"V":r=g[T++],_=c.L,n.addData(_,a,r);break;case"C":_=c.C,n.addData(_,g[T++],g[T++],g[T++],g[T++],g[T++],g[T++]),a=g[T-2],r=g[T-1];break;case"c":_=c.C,n.addData(_,g[T++]+a,g[T++]+r,g[T++]+a,g[T++]+r,g[T++]+a,g[T++]+r),a+=g[T-2],r+=g[T-1];break;case"S":S=a,C=r,L=n.len(),I=n.data,l===c.C&&(S+=a-I[L-4],C+=r-I[L-3]),_=c.C,R=g[T++],D=g[T++],a=g[T++],r=g[T++],n.addData(_,S,C,R,D,a,r);break;case"s":S=a,C=r,L=n.len(),I=n.data,l===c.C&&(S+=a-I[L-4],C+=r-I[L-3]),_=c.C,R=a+g[T++],D=r+g[T++],a+=g[T++],r+=g[T++],n.addData(_,S,C,R,D,a,r);break;case"Q":R=g[T++],D=g[T++],a=g[T++],r=g[T++],_=c.Q,n.addData(_,R,D,a,r);break;case"q":R=g[T++]+a,D=g[T++]+r,a+=g[T++],r+=g[T++],_=c.Q,n.addData(_,R,D,a,r);break;case"T":S=a,C=r,L=n.len(),I=n.data,l===c.Q&&(S+=a-I[L-4],C+=r-I[L-3]),a=g[T++],r=g[T++],_=c.Q,n.addData(_,S,C,a,r);break;case"t":S=a,C=r,L=n.len(),I=n.data,l===c.Q&&(S+=a-I[L-4],C+=r-I[L-3]),a+=g[T++],r+=g[T++],_=c.Q,n.addData(_,S,C,a,r);break;case"A":E=g[T++],x=g[T++],A=g[T++],N=g[T++],M=g[T++],R=a,D=r,a=g[T++],r=g[T++],_=c.A,processArc(R,D,a,r,N,M,E,x,A,_,n);break;case"a":E=g[T++],x=g[T++],A=g[T++],N=g[T++],M=g[T++],R=a,D=r,a+=g[T++],r+=g[T++],_=c.A,processArc(R,D,a,r,N,M,E,x,A,_,n);break}}(v==="z"||v==="Z")&&(_=c.Z,n.addData(_),a=o,r=s),l=_}return n.toStatic(),n}var SVGPath=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.applyTransform=function(a){},n}(Path);function isPathProxy(t){return t.setData!=null}function createPathOptions(t,n){var a=createPathProxyFromString(t),r=extend({},n);return r.buildPath=function(o){var s=isPathProxy(o);if(s&&o.canSave()){o.appendPath(a);var l=o.getContext();l&&o.rebuildPath(l,1)}else{var l=s?o.getContext():o;l&&a.rebuildPath(l,1)}},r.applyTransform=function(o){transformPath(a,o),this.dirtyShape()},r}function createFromString(t,n){return new SVGPath(createPathOptions(t,n))}function extendFromString(t,n){var a=createPathOptions(t,n),r=function(o){__extends(s,o);function s(l){var c=o.call(this,l)||this;return c.applyTransform=a.applyTransform,c.buildPath=a.buildPath,c}return s}(SVGPath);return r}function mergePath$1(t,n){for(var a=[],r=t.length,o=0;o<r;o++){var s=t[o];a.push(s.getUpdatedPathProxy(!0))}var l=new Path(n);return l.createPathProxy(),l.buildPath=function(c){if(isPathProxy(c)){c.appendPath(a);var u=c.getContext();u&&c.rebuildPath(u,1)}},l}var CircleShape=function(){function t(){this.cx=0,this.cy=0,this.r=0}return t}(),Circle=function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultShape=function(){return new CircleShape},n.prototype.buildPath=function(a,r){a.moveTo(r.cx+r.r,r.cy),a.arc(r.cx,r.cy,r.r,0,Math.PI*2)},n}(Path);Circle.prototype.type="circle";var EllipseShape=function(){function t(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return t}(),Ellipse=function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultShape=function(){return new EllipseShape},n.prototype.buildPath=function(a,r){var o=.5522848,s=r.cx,l=r.cy,c=r.rx,u=r.ry,d=c*o,f=u*o;a.moveTo(s-c,l),a.bezierCurveTo(s-c,l-f,s-d,l-u,s,l-u),a.bezierCurveTo(s+d,l-u,s+c,l-f,s+c,l),a.bezierCurveTo(s+c,l+f,s+d,l+u,s,l+u),a.bezierCurveTo(s-d,l+u,s-c,l+f,s-c,l),a.closePath()},n}(Path);Ellipse.prototype.type="ellipse";var PI$2=Math.PI,PI2=PI$2*2,mathSin=Math.sin,mathCos=Math.cos,mathACos=Math.acos,mathATan2=Math.atan2,mathAbs$1=Math.abs,mathSqrt=Math.sqrt,mathMax$2=Math.max,mathMin$2=Math.min,e=1e-4;function intersect(t,n,a,r,o,s,l,c){var u=a-t,d=r-n,f=l-o,v=c-s,_=v*u-f*d;if(!(_*_<e))return _=(f*(n-s)-v*(t-o))/_,[t+_*u,n+_*d]}function computeCornerTangents(t,n,a,r,o,s,l){var c=t-a,u=n-r,d=(l?s:-s)/mathSqrt(c*c+u*u),f=d*u,v=-d*c,_=t+f,g=n+v,y=a+f,b=r+v,T=(_+y)/2,S=(g+b)/2,C=y-_,E=b-g,x=C*C+E*E,A=o-s,N=_*b-y*g,M=(E<0?-1:1)*mathSqrt(mathMax$2(0,A*A*x-N*N)),R=(N*E-C*M)/x,D=(-N*C-E*M)/x,L=(N*E+C*M)/x,I=(-N*C+E*M)/x,$=R-T,V=D-S,H=L-T,X=I-S;return $*$+V*V>H*H+X*X&&(R=L,D=I),{cx:R,cy:D,x0:-f,y0:-v,x1:R*(o/A-1),y1:D*(o/A-1)}}function normalizeCornerRadius(t){var n;if(isArray$1(t)){var a=t.length;if(!a)return t;a===1?n=[t[0],t[0],0,0]:a===2?n=[t[0],t[0],t[1],t[1]]:a===3?n=t.concat(t[2]):n=t}else n=[t,t,t,t];return n}function buildPath$1(t,n){var a,r=mathMax$2(n.r,0),o=mathMax$2(n.r0||0,0),s=r>0,l=o>0;if(!(!s&&!l)){if(s||(r=o,o=0),o>r){var c=r;r=o,o=c}var u=n.startAngle,d=n.endAngle;if(!(isNaN(u)||isNaN(d))){var f=n.cx,v=n.cy,_=!!n.clockwise,g=mathAbs$1(d-u),y=g>PI2&&g%PI2;if(y>e&&(g=y),!(r>e))t.moveTo(f,v);else if(g>PI2-e)t.moveTo(f+r*mathCos(u),v+r*mathSin(u)),t.arc(f,v,r,u,d,!_),o>e&&(t.moveTo(f+o*mathCos(d),v+o*mathSin(d)),t.arc(f,v,o,d,u,_));else{var b=void 0,T=void 0,S=void 0,C=void 0,E=void 0,x=void 0,A=void 0,N=void 0,M=void 0,R=void 0,D=void 0,L=void 0,I=void 0,$=void 0,V=void 0,H=void 0,X=r*mathCos(u),q=r*mathSin(u),z=o*mathCos(d),G=o*mathSin(d),oe=g>e;if(oe){var ne=n.cornerRadius;ne&&(a=normalizeCornerRadius(ne),b=a[0],T=a[1],S=a[2],C=a[3]);var ue=mathAbs$1(r-o)/2;if(E=mathMin$2(ue,S),x=mathMin$2(ue,C),A=mathMin$2(ue,b),N=mathMin$2(ue,T),D=M=mathMax$2(E,x),L=R=mathMax$2(A,N),(M>e||R>e)&&(I=r*mathCos(d),$=r*mathSin(d),V=o*mathCos(u),H=o*mathSin(u),g<PI$2)){var se=intersect(X,q,V,H,I,$,z,G);if(se){var fe=X-se[0],ae=q-se[1],ie=I-se[0],ve=$-se[1],le=1/mathSin(mathACos((fe*ie+ae*ve)/(mathSqrt(fe*fe+ae*ae)*mathSqrt(ie*ie+ve*ve)))/2),pe=mathSqrt(se[0]*se[0]+se[1]*se[1]);D=mathMin$2(M,(r-pe)/(le+1)),L=mathMin$2(R,(o-pe)/(le-1))}}}if(!oe)t.moveTo(f+X,v+q);else if(D>e){var Te=mathMin$2(S,D),U=mathMin$2(C,D),W=computeCornerTangents(V,H,X,q,r,Te,_),w=computeCornerTangents(I,$,z,G,r,U,_);t.moveTo(f+W.cx+W.x0,v+W.cy+W.y0),D<M&&Te===U?t.arc(f+W.cx,v+W.cy,D,mathATan2(W.y0,W.x0),mathATan2(w.y0,w.x0),!_):(Te>0&&t.arc(f+W.cx,v+W.cy,Te,mathATan2(W.y0,W.x0),mathATan2(W.y1,W.x1),!_),t.arc(f,v,r,mathATan2(W.cy+W.y1,W.cx+W.x1),mathATan2(w.cy+w.y1,w.cx+w.x1),!_),U>0&&t.arc(f+w.cx,v+w.cy,U,mathATan2(w.y1,w.x1),mathATan2(w.y0,w.x0),!_))}else t.moveTo(f+X,v+q),t.arc(f,v,r,u,d,!_);if(!(o>e)||!oe)t.lineTo(f+z,v+G);else if(L>e){var Te=mathMin$2(b,L),U=mathMin$2(T,L),W=computeCornerTangents(z,G,I,$,o,-U,_),w=computeCornerTangents(X,q,V,H,o,-Te,_);t.lineTo(f+W.cx+W.x0,v+W.cy+W.y0),L<R&&Te===U?t.arc(f+W.cx,v+W.cy,L,mathATan2(W.y0,W.x0),mathATan2(w.y0,w.x0),!_):(U>0&&t.arc(f+W.cx,v+W.cy,U,mathATan2(W.y0,W.x0),mathATan2(W.y1,W.x1),!_),t.arc(f,v,o,mathATan2(W.cy+W.y1,W.cx+W.x1),mathATan2(w.cy+w.y1,w.cx+w.x1),_),Te>0&&t.arc(f+w.cx,v+w.cy,Te,mathATan2(w.y1,w.x1),mathATan2(w.y0,w.x0),!_))}else t.lineTo(f+z,v+G),t.arc(f,v,o,d,u,_)}t.closePath()}}}var SectorShape=function(){function t(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return t}(),Sector=function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultShape=function(){return new SectorShape},n.prototype.buildPath=function(a,r){buildPath$1(a,r)},n.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},n}(Path);Sector.prototype.type="sector";var RingShape=function(){function t(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return t}(),Ring=function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultShape=function(){return new RingShape},n.prototype.buildPath=function(a,r){var o=r.cx,s=r.cy,l=Math.PI*2;a.moveTo(o+r.r,s),a.arc(o,s,r.r,0,l,!1),a.moveTo(o+r.r0,s),a.arc(o,s,r.r0,0,l,!0)},n}(Path);Ring.prototype.type="ring";function smoothBezier(t,n,a,r){var o=[],s=[],l=[],c=[],u,d,f,v;if(r){f=[1/0,1/0],v=[-1/0,-1/0];for(var _=0,g=t.length;_<g;_++)min$1(f,f,t[_]),max$1(v,v,t[_]);min$1(f,f,r[0]),max$1(v,v,r[1])}for(var _=0,g=t.length;_<g;_++){var y=t[_];if(a)u=t[_?_-1:g-1],d=t[(_+1)%g];else if(_===0||_===g-1){o.push(clone$2(t[_]));continue}else u=t[_-1],d=t[_+1];sub(s,d,u),scale$2(s,s,n);var b=distance(y,u),T=distance(y,d),S=b+T;S!==0&&(b/=S,T/=S),scale$2(l,s,-b),scale$2(c,s,T);var C=add([],y,l),E=add([],y,c);r&&(max$1(C,C,f),min$1(C,C,v),max$1(E,E,f),min$1(E,E,v)),o.push(C),o.push(E)}return a&&o.push(o.shift()),o}function buildPath(t,n,a){var r=n.smooth,o=n.points;if(o&&o.length>=2){if(r){var s=smoothBezier(o,r,a,n.smoothConstraint);t.moveTo(o[0][0],o[0][1]);for(var l=o.length,c=0;c<(a?l:l-1);c++){var u=s[c*2],d=s[c*2+1],f=o[(c+1)%l];t.bezierCurveTo(u[0],u[1],d[0],d[1],f[0],f[1])}}else{t.moveTo(o[0][0],o[0][1]);for(var c=1,v=o.length;c<v;c++)t.lineTo(o[c][0],o[c][1])}a&&t.closePath()}}var PolygonShape=function(){function t(){this.points=null,this.smooth=0,this.smoothConstraint=null}return t}(),Polygon=function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultShape=function(){return new PolygonShape},n.prototype.buildPath=function(a,r){buildPath(a,r,!0)},n}(Path);Polygon.prototype.type="polygon";var PolylineShape=function(){function t(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return t}(),Polyline=function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new PolylineShape},n.prototype.buildPath=function(a,r){buildPath(a,r,!1)},n}(Path);Polyline.prototype.type="polyline";var subPixelOptimizeOutputShape={},LineShape=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return t}(),Line=function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new LineShape},n.prototype.buildPath=function(a,r){var o,s,l,c;if(this.subPixelOptimize){var u=subPixelOptimizeLine$1(subPixelOptimizeOutputShape,r,this.style);o=u.x1,s=u.y1,l=u.x2,c=u.y2}else o=r.x1,s=r.y1,l=r.x2,c=r.y2;var d=r.percent;d!==0&&(a.moveTo(o,s),d<1&&(l=o*(1-d)+l*d,c=s*(1-d)+c*d),a.lineTo(l,c))},n.prototype.pointAt=function(a){var r=this.shape;return[r.x1*(1-a)+r.x2*a,r.y1*(1-a)+r.y2*a]},n}(Path);Line.prototype.type="line";var out=[],BezierCurveShape=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return t}();function someVectorAt(t,n,a){var r=t.cpx2,o=t.cpy2;return r!=null||o!=null?[(a?cubicDerivativeAt:cubicAt)(t.x1,t.cpx1,t.cpx2,t.x2,n),(a?cubicDerivativeAt:cubicAt)(t.y1,t.cpy1,t.cpy2,t.y2,n)]:[(a?quadraticDerivativeAt:quadraticAt)(t.x1,t.cpx1,t.x2,n),(a?quadraticDerivativeAt:quadraticAt)(t.y1,t.cpy1,t.y2,n)]}var BezierCurve=function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new BezierCurveShape},n.prototype.buildPath=function(a,r){var o=r.x1,s=r.y1,l=r.x2,c=r.y2,u=r.cpx1,d=r.cpy1,f=r.cpx2,v=r.cpy2,_=r.percent;_!==0&&(a.moveTo(o,s),f==null||v==null?(_<1&&(quadraticSubdivide(o,u,l,_,out),u=out[1],l=out[2],quadraticSubdivide(s,d,c,_,out),d=out[1],c=out[2]),a.quadraticCurveTo(u,d,l,c)):(_<1&&(cubicSubdivide(o,u,f,l,_,out),u=out[1],f=out[2],l=out[3],cubicSubdivide(s,d,v,c,_,out),d=out[1],v=out[2],c=out[3]),a.bezierCurveTo(u,d,f,v,l,c)))},n.prototype.pointAt=function(a){return someVectorAt(this.shape,a,!1)},n.prototype.tangentAt=function(a){var r=someVectorAt(this.shape,a,!0);return normalize$1(r,r)},n}(Path);BezierCurve.prototype.type="bezier-curve";var ArcShape=function(){function t(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return t}(),Arc=function(t){__extends(n,t);function n(a){return t.call(this,a)||this}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new ArcShape},n.prototype.buildPath=function(a,r){var o=r.cx,s=r.cy,l=Math.max(r.r,0),c=r.startAngle,u=r.endAngle,d=r.clockwise,f=Math.cos(c),v=Math.sin(c);a.moveTo(f*l+o,v*l+s),a.arc(o,s,l,c,u,!d)},n}(Path);Arc.prototype.type="arc";var CompoundPath=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type="compound",a}return n.prototype._updatePathDirty=function(){for(var a=this.shape.paths,r=this.shapeChanged(),o=0;o<a.length;o++)r=r||a[o].shapeChanged();r&&this.dirtyShape()},n.prototype.beforeBrush=function(){this._updatePathDirty();for(var a=this.shape.paths||[],r=this.getGlobalScale(),o=0;o<a.length;o++)a[o].path||a[o].createPathProxy(),a[o].path.setScale(r[0],r[1],a[o].segmentIgnoreThreshold)},n.prototype.buildPath=function(a,r){for(var o=r.paths||[],s=0;s<o.length;s++)o[s].buildPath(a,o[s].shape,!0)},n.prototype.afterBrush=function(){for(var a=this.shape.paths||[],r=0;r<a.length;r++)a[r].pathUpdated()},n.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Path.prototype.getBoundingRect.call(this)},n}(Path),Gradient=function(){function t(n){this.colorStops=n||[]}return t.prototype.addColorStop=function(n,a){this.colorStops.push({offset:n,color:a})},t}(),LinearGradient=function(t){__extends(n,t);function n(a,r,o,s,l,c){var u=t.call(this,l)||this;return u.x=a??0,u.y=r??0,u.x2=o??1,u.y2=s??0,u.type="linear",u.global=c||!1,u}return n}(Gradient),RadialGradient=function(t){__extends(n,t);function n(a,r,o,s,l){var c=t.call(this,s)||this;return c.x=a??.5,c.y=r??.5,c.r=o??.5,c.type="radial",c.global=l||!1,c}return n}(Gradient),mathMin$1=Math.min,mathMax$1=Math.max,mathAbs=Math.abs,_extent=[0,0],_extent2=[0,0],_intersectCtx=createIntersectContext(),_minTv=_intersectCtx.minTv,_maxTv=_intersectCtx.maxTv,OrientedBoundingRect=function(){function t(n,a){this._corners=[],this._axes=[],this._origin=[0,0];for(var r=0;r<4;r++)this._corners[r]=new Point;for(var r=0;r<2;r++)this._axes[r]=new Point;n&&this.fromBoundingRect(n,a)}return t.prototype.fromBoundingRect=function(n,a){var r=this._corners,o=this._axes,s=n.x,l=n.y,c=s+n.width,u=l+n.height;if(r[0].set(s,l),r[1].set(c,l),r[2].set(c,u),r[3].set(s,u),a)for(var d=0;d<4;d++)r[d].transform(a);Point.sub(o[0],r[1],r[0]),Point.sub(o[1],r[3],r[0]),o[0].normalize(),o[1].normalize();for(var d=0;d<2;d++)this._origin[d]=o[d].dot(r[0])},t.prototype.intersect=function(n,a,r){var o=!0,s=!a;return a&&Point.set(a,0,0),_intersectCtx.reset(r,!s),!this._intersectCheckOneSide(this,n,s,1)&&(o=!1,s)||!this._intersectCheckOneSide(n,this,s,-1)&&(o=!1,s)||!s&&!_intersectCtx.negativeSize&&Point.copy(a,o?_intersectCtx.useDir?_intersectCtx.dirMinTv:_minTv:_maxTv),o},t.prototype._intersectCheckOneSide=function(n,a,r,o){for(var s=!0,l=0;l<2;l++){var c=n._axes[l];if(n._getProjMinMaxOnAxis(l,n._corners,_extent),n._getProjMinMaxOnAxis(l,a._corners,_extent2),_intersectCtx.negativeSize||_extent[1]<_extent2[0]||_extent[0]>_extent2[1]){if(s=!1,_intersectCtx.negativeSize||r)return s;var u=mathAbs(_extent2[0]-_extent[1]),d=mathAbs(_extent[0]-_extent2[1]);mathMin$1(u,d)>_maxTv.len()&&(u<d?Point.scale(_maxTv,c,-u*o):Point.scale(_maxTv,c,d*o))}else if(!r){var u=mathAbs(_extent2[0]-_extent[1]),d=mathAbs(_extent[0]-_extent2[1]);(_intersectCtx.useDir||mathMin$1(u,d)<_minTv.len())&&((u<d||!_intersectCtx.bidirectional)&&(Point.scale(_minTv,c,u*o),_intersectCtx.useDir&&_intersectCtx.calcDirMTV()),(u>=d||!_intersectCtx.bidirectional)&&(Point.scale(_minTv,c,-d*o),_intersectCtx.useDir&&_intersectCtx.calcDirMTV()))}}return s},t.prototype._getProjMinMaxOnAxis=function(n,a,r){for(var o=this._axes[n],s=this._origin,l=a[0].dot(o)+s[n],c=l,u=l,d=1;d<a.length;d++){var f=a[d].dot(o)+s[n];c=mathMin$1(f,c),u=mathMax$1(f,u)}r[0]=c+_intersectCtx.touchThreshold,r[1]=u-_intersectCtx.touchThreshold,_intersectCtx.negativeSize=r[1]<r[0]},t}(),m=[],IncrementalDisplayable=function(t){__extends(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.notClear=!0,a.incremental=!0,a._displayables=[],a._temporaryDisplayables=[],a._cursor=0,a}return n.prototype.traverse=function(a,r){a.call(r,this)},n.prototype.useStyle=function(){this.style={}},n.prototype.getCursor=function(){return this._cursor},n.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},n.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},n.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},n.prototype.addDisplayable=function(a,r){r?this._temporaryDisplayables.push(a):this._displayables.push(a),this.markRedraw()},n.prototype.addDisplayables=function(a,r){r=r||!1;for(var o=0;o<a.length;o++)this.addDisplayable(a[o],r)},n.prototype.getDisplayables=function(){return this._displayables},n.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},n.prototype.eachPendingDisplayable=function(a){for(var r=this._cursor;r<this._displayables.length;r++)a&&a(this._displayables[r]);for(var r=0;r<this._temporaryDisplayables.length;r++)a&&a(this._temporaryDisplayables[r])},n.prototype.update=function(){this.updateTransform();for(var a=this._cursor;a<this._displayables.length;a++){var r=this._displayables[a];r.parent=this,r.update(),r.parent=null}for(var a=0;a<this._temporaryDisplayables.length;a++){var r=this._temporaryDisplayables[a];r.parent=this,r.update(),r.parent=null}},n.prototype.getBoundingRect=function(){if(!this._rect){for(var a=new BoundingRect(1/0,1/0,-1/0,-1/0),r=0;r<this._displayables.length;r++){var o=this._displayables[r],s=o.getBoundingRect().clone();o.needLocalTransform()&&s.applyTransform(o.getLocalTransform(m)),a.union(s)}this._rect=a}return this._rect},n.prototype.contain=function(a,r){var o=this.transformCoordToLocal(a,r),s=this.getBoundingRect();if(s.contain(o[0],o[1]))for(var l=0;l<this._displayables.length;l++){var c=this._displayables[l];if(c.contain(a,r))return!0}return!1},n}(Displayable),transitionStore=makeInner();function getAnimationConfig(t,n,a,r,o){var s;if(n&&n.ecModel){var l=n.ecModel.getUpdatePayload();s=l&&l.animation}var c=n&&n.isAnimationEnabled(),u=t==="update";if(c){var d=void 0,f=void 0,v=void 0;r?(d=retrieve2(r.duration,200),f=retrieve2(r.easing,"cubicOut"),v=0):(d=n.getShallow(u?"animationDurationUpdate":"animationDuration"),f=n.getShallow(u?"animationEasingUpdate":"animationEasing"),v=n.getShallow(u?"animationDelayUpdate":"animationDelay")),s&&(s.duration!=null&&(d=s.duration),s.easing!=null&&(f=s.easing),s.delay!=null&&(v=s.delay)),isFunction(v)&&(v=v(a,o)),isFunction(d)&&(d=d(a));var _={duration:d||0,delay:v,easing:f};return _}else return null}function animateOrSetProps(t,n,a,r,o,s,l){var c=!1,u;isFunction(o)?(l=s,s=o,o=null):isObject$3(o)&&(s=o.cb,l=o.during,c=o.isFrom,u=o.removeOpt,o=o.dataIndex);var d=t==="leave";d||n.stopAnimation("leave");var f=getAnimationConfig(t,r,o,d?u||{}:null,r&&r.getAnimationDelayParams?r.getAnimationDelayParams(n,o):null);if(f&&f.duration>0){var v=f.duration,_=f.delay,g=f.easing,y={duration:v,delay:_||0,easing:g,done:s,force:!!s||!!l,setToFinal:!d,scope:t,during:l};c?n.animateFrom(a,y):n.animateTo(a,y)}else n.stopAnimation(),!c&&n.attr(a),l&&l(1),s&&s()}function updateProps$1(t,n,a,r,o,s){animateOrSetProps("update",t,n,a,r,o,s)}function initProps(t,n,a,r,o,s){animateOrSetProps("enter",t,n,a,r,o,s)}function isElementRemoved(t){if(!t.__zr)return!0;for(var n=0;n<t.animators.length;n++){var a=t.animators[n];if(a.scope==="leave")return!0}return!1}function removeElement(t,n,a,r,o,s){isElementRemoved(t)||animateOrSetProps("leave",t,n,a,r,o,s)}function fadeOutDisplayable(t,n,a,r){t.removeTextContent(),t.removeTextGuideLine(),removeElement(t,{style:{opacity:0}},n,a,r)}function removeElementWithFadeOut(t,n,a){function r(){t.parent&&t.parent.remove(t)}t.isGroup?t.traverse(function(o){o.isGroup||fadeOutDisplayable(o,n,a,r)}):fadeOutDisplayable(t,n,a,r)}function saveOldStyle(t){transitionStore(t).oldStyle=t.style}var _customShapeMap={},XY=["x","y"],WH=["width","height"];function extendShape(t){return Path.extend(t)}var extendPathFromString=extendFromString;function extendPath(t,n){return extendPathFromString(t,n)}function registerShape(t,n){_customShapeMap[t]=n}function getShapeClass(t){if(_customShapeMap.hasOwnProperty(t))return _customShapeMap[t]}function makePath(t,n,a,r){var o=createFromString(t,n);return a&&(r==="center"&&(a=centerGraphic(a,o.getBoundingRect())),resizePath(o,a)),o}function makeImage(t,n,a){var r=new ZRImage({style:{image:t,x:n.x,y:n.y,width:n.width,height:n.height},onload:function(o){if(a==="center"){var s={width:o.width,height:o.height};r.setStyle(centerGraphic(n,s))}}});return r}function centerGraphic(t,n){var a=n.width/n.height,r=t.height*a,o;r<=t.width?o=t.height:(r=t.width,o=r/a);var s=t.x+t.width/2,l=t.y+t.height/2;return{x:s-r/2,y:l-o/2,width:r,height:o}}var mergePath=mergePath$1;function resizePath(t,n){if(t.applyTransform){var a=t.getBoundingRect(),r=a.calculateTransform(n);t.applyTransform(r)}}function subPixelOptimizeLine(t,n){return subPixelOptimizeLine$1(t,t,{lineWidth:n}),t}function subPixelOptimizeRect(t,n){return subPixelOptimizeRect$1(t,t,n),t}var subPixelOptimize=subPixelOptimize$1;function getTransform(t,n){for(var a=identity([]);t&&t!==n;)mul(a,t.getLocalTransform(),a),t=t.parent;return a}function applyTransform(t,n,a){return n&&!isArrayLike(n)&&(n=Transformable.getLocalTransform(n)),a&&(n=invert([],n)),applyTransform$1([],t,n)}function transformDirection(t,n,a){var r=n[4]===0||n[5]===0||n[0]===0?1:mathAbs$3(2*n[4]/n[0]),o=n[4]===0||n[5]===0||n[2]===0?1:mathAbs$3(2*n[4]/n[2]),s=[t==="left"?-r:t==="right"?r:0,t==="top"?-o:t==="bottom"?o:0];return s=applyTransform(s,n,a),mathAbs$3(s[0])>mathAbs$3(s[1])?s[0]>0?"right":"left":s[1]>0?"bottom":"top"}function isNotGroup(t){return!t.isGroup}function isPath(t){return t.shape!=null}function groupTransition(t,n,a){if(!t||!n)return;function r(l){var c={};return l.traverse(function(u){isNotGroup(u)&&u.anid&&(c[u.anid]=u)}),c}function o(l){var c={x:l.x,y:l.y,rotation:l.rotation};return isPath(l)&&(c.shape=clone$3(l.shape)),c}var s=r(t);n.traverse(function(l){if(isNotGroup(l)&&l.anid){var c=s[l.anid];if(c){var u=o(l);l.attr(o(c)),updateProps$1(l,u,a,getECData(l).dataIndex)}}})}function clipPointsByRect(t,n){return map$1(t,function(a){var r=a[0];r=mathMax$5(r,n.x),r=mathMin$5(r,n.x+n.width);var o=a[1];return o=mathMax$5(o,n.y),o=mathMin$5(o,n.y+n.height),[r,o]})}function clipRectByRect(t,n){var a=mathMax$5(t.x,n.x),r=mathMin$5(t.x+t.width,n.x+n.width),o=mathMax$5(t.y,n.y),s=mathMin$5(t.y+t.height,n.y+n.height);if(r>=a&&s>=o)return{x:a,y:o,width:r-a,height:s-o}}function createIcon(t,n,a){var r=extend({rectHover:!0},n),o=r.style={strokeNoScale:!0};if(a=a||{x:-1,y:-1,width:2,height:2},t)return t.indexOf("image://")===0?(o.image=t.slice(8),defaults(o,a),new ZRImage(r)):makePath(t.replace("path://",""),r,a,"center")}function linePolygonIntersect(t,n,a,r,o){for(var s=0,l=o[o.length-1];s<o.length;s++){var c=o[s];if(lineLineIntersect(t,n,a,r,c[0],c[1],l[0],l[1]))return!0;l=c}}function lineLineIntersect(t,n,a,r,o,s,l,c){var u=a-t,d=r-n,f=l-o,v=c-s,_=crossProduct2d(f,v,u,d);if(nearZero(_))return!1;var g=t-o,y=n-s,b=crossProduct2d(g,y,u,d)/_;if(b<0||b>1)return!1;var T=crossProduct2d(g,y,f,v)/_;return!(T<0||T>1)}function crossProduct2d(t,n,a,r){return t*r-a*n}function nearZero(t){return t<=1e-6&&t>=-1e-6}function expandOrShrinkRect(t,n,a,r,o){return n==null||(isNumber(n)?_tmpExpandRectDelta[0]=_tmpExpandRectDelta[1]=_tmpExpandRectDelta[2]=_tmpExpandRectDelta[3]=n:(_tmpExpandRectDelta[0]=n[0],_tmpExpandRectDelta[1]=n[1],_tmpExpandRectDelta[2]=n[2],_tmpExpandRectDelta[3]=n[3]),r&&(_tmpExpandRectDelta[0]=mathMax$5(0,_tmpExpandRectDelta[0]),_tmpExpandRectDelta[1]=mathMax$5(0,_tmpExpandRectDelta[1]),_tmpExpandRectDelta[2]=mathMax$5(0,_tmpExpandRectDelta[2]),_tmpExpandRectDelta[3]=mathMax$5(0,_tmpExpandRectDelta[3])),a&&(_tmpExpandRectDelta[0]=-_tmpExpandRectDelta[0],_tmpExpandRectDelta[1]=-_tmpExpandRectDelta[1],_tmpExpandRectDelta[2]=-_tmpExpandRectDelta[2],_tmpExpandRectDelta[3]=-_tmpExpandRectDelta[3]),expandRectOnOneDimension(t,_tmpExpandRectDelta,"x","width",3,1,o&&o[0]||0),expandRectOnOneDimension(t,_tmpExpandRectDelta,"y","height",0,2,o&&o[1]||0)),t}var _tmpExpandRectDelta=[0,0,0,0];function expandRectOnOneDimension(t,n,a,r,o,s,l){var c=n[s]+n[o],u=t[r];t[r]+=c,l=mathMax$5(0,mathMin$5(l,u)),t[r]<l?(t[r]=l,t[a]+=n[o]>=0?-n[o]:n[s]>=0?u+n[s]:mathAbs$3(c)>1e-8?(u-l)*n[o]/c:0):t[a]-=n[o]}function setTooltipConfig(t){var n=t.itemTooltipOption,a=t.componentModel,r=t.itemName,o=isString(n)?{formatter:n}:n,s=a.mainType,l=a.componentIndex,c={componentType:s,name:r,$vars:["name"]};c[s+"Index"]=l;var u=t.formatterParamsExtra;u&&each$8(keys(u),function(f){hasOwn(c,f)||(c[f]=u[f],c.$vars.push(f))});var d=getECData(t.el);d.componentMainType=s,d.componentIndex=l,d.tooltipConfig={name:r,option:defaults({content:r,encodeHTMLContent:!0,formatterParams:c},o)}}function traverseElement(t,n){var a;t.isGroup&&(a=n(t)),a||t.traverse(n)}function traverseElements(t,n){if(t)if(isArray$1(t))for(var a=0;a<t.length;a++)traverseElement(t[a],n);else traverseElement(t,n)}function isBoundingRectAxisAligned(t){return!t||mathAbs$3(t[1])<AXIS_ALIGN_EPSILON&&mathAbs$3(t[2])<AXIS_ALIGN_EPSILON||mathAbs$3(t[0])<AXIS_ALIGN_EPSILON&&mathAbs$3(t[3])<AXIS_ALIGN_EPSILON}var AXIS_ALIGN_EPSILON=1e-5;function ensureCopyRect(t,n){return t?BoundingRect.copy(t,n):n.clone()}function ensureCopyTransform(t,n){return n?copy(t||create(),n):void 0}function retrieveZInfo(t){return{z:t.get("z")||0,zlevel:t.get("zlevel")||0}}function calcZ2Range(t){var n=-1/0,a=1/0;traverseElement(t,function(s){r(s),r(s.getTextContent()),r(s.getTextGuideLine())});function r(s){if(!(!s||s.isGroup)){var l=s.currentStates;if(l.length)for(var c=0;c<l.length;c++)o(s.states[l[c]]);o(s)}}function o(s){if(s){var l=s.z2;l>n&&(n=l),l<a&&(a=l)}}return a>n&&(a=n=0),{min:a,max:n}}function traverseUpdateZ(t,n,a){doUpdateZ(t,n,a,-1/0)}function doUpdateZ(t,n,a,r){if(t.ignoreModelZ)return r;var o=t.getTextContent(),s=t.getTextGuideLine(),l=t.isGroup;if(l)for(var c=t.childrenRef(),u=0;u<c.length;u++)r=mathMax$5(doUpdateZ(c[u],n,a,r),r);else t.z=n,t.zlevel=a,r=mathMax$5(t.z2||0,r);if(o&&(o.z=n,o.zlevel=a,isFinite(r)&&(o.z2=r+2)),s){var d=t.textGuideLineConfig;s.z=n,s.zlevel=a,isFinite(r)&&(s.z2=r+(d&&d.showAbove?1:-1))}return r}registerShape("circle",Circle);registerShape("ellipse",Ellipse);registerShape("sector",Sector);registerShape("ring",Ring);registerShape("polygon",Polygon);registerShape("polyline",Polyline);registerShape("rect",Rect);registerShape("line",Line);registerShape("bezierCurve",BezierCurve);registerShape("arc",Arc);const graphic=Object.freeze(Object.defineProperty({__proto__:null,Arc,BezierCurve,BoundingRect,Circle,CompoundPath,Ellipse,Group,Image:ZRImage,IncrementalDisplayable,Line,LinearGradient,OrientedBoundingRect,Path,Point,Polygon,Polyline,RadialGradient,Rect,Ring,Sector,Text:ZRText,WH,XY,applyTransform,calcZ2Range,clipPointsByRect,clipRectByRect,createIcon,ensureCopyRect,ensureCopyTransform,expandOrShrinkRect,extendPath,extendShape,getShapeClass,getTransform,groupTransition,initProps,isBoundingRectAxisAligned,isElementRemoved,lineLineIntersect,linePolygonIntersect,makeImage,makePath,mergePath,registerShape,removeElement,removeElementWithFadeOut,resizePath,retrieveZInfo,setTooltipConfig,subPixelOptimize,subPixelOptimizeLine,subPixelOptimizeRect,transformDirection,traverseElements,traverseUpdateZ,updateProps:updateProps$1},Symbol.toStringTag,{value:"Module"}));var EMPTY_OBJ={};function setLabelText(t,n){for(var a=0;a<SPECIAL_STATES.length;a++){var r=SPECIAL_STATES[a],o=n[r],s=t.ensureState(r);s.style=s.style||{},s.style.text=o}var l=t.currentStates.slice();t.clearStates(!0),t.setStyle({text:n.normal}),t.useStates(l,!0)}function getLabelText(t,n,a){var r=t.labelFetcher,o=t.labelDataIndex,s=t.labelDimIndex,l=n.normal,c;r&&(c=r.getFormattedLabel(o,"normal",null,s,l&&l.get("formatter"),a!=null?{interpolatedValue:a}:null)),c==null&&(c=isFunction(t.defaultText)?t.defaultText(o,t,a):t.defaultText);for(var u={normal:c},d=0;d<SPECIAL_STATES.length;d++){var f=SPECIAL_STATES[d],v=n[f];u[f]=retrieve2(r?r.getFormattedLabel(o,f,null,s,v&&v.get("formatter")):null,c)}return u}function setLabelStyle(t,n,a,r){a=a||EMPTY_OBJ;for(var o=t instanceof ZRText,s=!1,l=0;l<DISPLAY_STATES.length;l++){var c=n[DISPLAY_STATES[l]];if(c&&c.getShallow("show")){s=!0;break}}var u=o?t:t.getTextContent();if(s){o||(u||(u=new ZRText,t.setTextContent(u)),t.stateProxy&&(u.stateProxy=t.stateProxy));var d=getLabelText(a,n),f=n.normal,v=!!f.getShallow("show"),_=createTextStyle(f,r&&r.normal,a,!1,!o);_.text=d.normal,o||t.setTextConfig(createTextConfig(f,a,!1));for(var l=0;l<SPECIAL_STATES.length;l++){var g=SPECIAL_STATES[l],c=n[g];if(c){var y=u.ensureState(g),b=!!retrieve2(c.getShallow("show"),v);if(b!==v&&(y.ignore=!b),y.style=createTextStyle(c,r&&r[g],a,!0,!o),y.style.text=d[g],!o){var T=t.ensureState(g);T.textConfig=createTextConfig(c,a,!0)}}}u.silent=!!f.getShallow("silent"),u.style.x!=null&&(_.x=u.style.x),u.style.y!=null&&(_.y=u.style.y),u.ignore=!v,u.useStyle(_),u.dirty(),a.enableTextSetter&&(labelInner(u).setLabelText=function(S){var C=getLabelText(a,n,S);setLabelText(u,C)})}else u&&(u.ignore=!0);t.dirty()}function getLabelStatesModels(t,n){n=n||"label";for(var a={normal:t.getModel(n)},r=0;r<SPECIAL_STATES.length;r++){var o=SPECIAL_STATES[r];a[o]=t.getModel([o,n])}return a}function createTextStyle(t,n,a,r,o){var s={};return setTextStyleCommon(s,t,a,r,o),n&&extend(s,n),s}function createTextConfig(t,n,a){n=n||{};var r={},o,s=t.getShallow("rotate"),l=retrieve2(t.getShallow("distance"),a?null:5),c=t.getShallow("offset");return o=t.getShallow("position")||(a?null:"inside"),o==="outside"&&(o=n.defaultOutsidePosition||"top"),o!=null&&(r.position=o),c!=null&&(r.offset=c),s!=null&&(s*=Math.PI/180,r.rotation=s),l!=null&&(r.distance=l),r.outsideFill=t.get("color")==="inherit"?n.inheritColor||null:"auto",n.autoOverflowArea!=null&&(r.autoOverflowArea=n.autoOverflowArea),n.layoutRect!=null&&(r.layoutRect=n.layoutRect),r}function setTextStyleCommon(t,n,a,r,o){a=a||EMPTY_OBJ;var s=n.ecModel,l=s&&s.option.textStyle,c=getRichItemNames(n),u;if(c){u={};var d="richInheritPlainLabel",f=retrieve2(n.get(d),s?s.get(d):void 0);for(var v in c)if(c.hasOwnProperty(v)){var _=n.getModel(["rich",v]);setTokenTextStyle(u[v]={},_,l,n,f,a,r,o,!1,!0)}}u&&(t.rich=u);var g=n.get("overflow");g&&(t.overflow=g);var y=n.get("lineOverflow");y&&(t.lineOverflow=y);var b=t,T=n.get("minMargin");if(T!=null)T=isNumber(T)?T/2:0,b.margin=[T,T,T,T],b.__marginType=LabelMarginType.minMargin;else{var S=n.get("textMargin");S!=null&&(b.margin=normalizeCssArray$1(S),b.__marginType=LabelMarginType.textMargin)}setTokenTextStyle(t,n,l,null,null,a,r,o,!0,!1)}function getRichItemNames(t){for(var n;t&&t!==t.ecModel;){var a=(t.option||EMPTY_OBJ).rich;if(a){n=n||{};for(var r=keys(a),o=0;o<r.length;o++){var s=r[o];n[s]=1}}t=t.parentModel}return n}var TEXT_PROPS_WITH_GLOBAL=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],TEXT_PROPS_SELF=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],TEXT_PROPS_BOX=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function setTokenTextStyle(t,n,a,r,o,s,l,c,u,d){a=!l&&a||EMPTY_OBJ;var f=s&&s.inheritColor,v=n.getShallow("color"),_=n.getShallow("textBorderColor"),g=retrieve2(n.getShallow("opacity"),a.opacity);(v==="inherit"||v==="auto")&&(f?v=f:v=null),(_==="inherit"||_==="auto")&&(f?_=f:_=null),c||(v=v||a.color,_=_||a.textBorderColor),v!=null&&(t.fill=v),_!=null&&(t.stroke=_);var y=retrieve2(n.getShallow("textBorderWidth"),a.textBorderWidth);y!=null&&(t.lineWidth=y);var b=retrieve2(n.getShallow("textBorderType"),a.textBorderType);b!=null&&(t.lineDash=b);var T=retrieve2(n.getShallow("textBorderDashOffset"),a.textBorderDashOffset);T!=null&&(t.lineDashOffset=T),!l&&g==null&&!d&&(g=s&&s.defaultOpacity),g!=null&&(t.opacity=g),!l&&!c&&t.fill==null&&s.inheritColor&&(t.fill=s.inheritColor);for(var S=0;S<TEXT_PROPS_WITH_GLOBAL.length;S++){var C=TEXT_PROPS_WITH_GLOBAL[S],E=o!==!1&&r?retrieve3(n.getShallow(C),r.getShallow(C),a[C]):retrieve2(n.getShallow(C),a[C]);E!=null&&(t[C]=E)}for(var S=0;S<TEXT_PROPS_SELF.length;S++){var C=TEXT_PROPS_SELF[S],E=n.getShallow(C);E!=null&&(t[C]=E)}if(t.verticalAlign==null){var x=n.getShallow("baseline");x!=null&&(t.verticalAlign=x)}if(!u||!s.disableBox){for(var S=0;S<TEXT_PROPS_BOX.length;S++){var C=TEXT_PROPS_BOX[S],E=n.getShallow(C);E!=null&&(t[C]=E)}var A=n.getShallow("borderType");A!=null&&(t.borderDash=A),(t.backgroundColor==="auto"||t.backgroundColor==="inherit")&&f&&(t.backgroundColor=f),(t.borderColor==="auto"||t.borderColor==="inherit")&&f&&(t.borderColor=f)}}function getFont(t,n){var a=n&&n.getModel("textStyle");return trim([t.fontStyle||a&&a.getShallow("fontStyle")||"",t.fontWeight||a&&a.getShallow("fontWeight")||"",(t.fontSize||a&&a.getShallow("fontSize")||12)+"px",t.fontFamily||a&&a.getShallow("fontFamily")||"sans-serif"].join(" "))}var labelInner=makeInner(),LabelMarginType={minMargin:1,textMargin:2},PATH_COLOR=["textStyle","color"],textStyleParams=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],tmpText=new ZRText,TextStyleMixin=function(){function t(){}return t.prototype.getTextColor=function(n){var a=this.ecModel;return this.getShallow("color")||(!n&&a?a.get(PATH_COLOR):null)},t.prototype.getFont=function(){return getFont({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},t.prototype.getTextRect=function(n){for(var a={text:n,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},r=0;r<textStyleParams.length;r++)a[textStyleParams[r]]=this.getShallow(textStyleParams[r]);return tmpText.useStyle(a),tmpText.update(),tmpText.getBoundingRect()},t}(),LINE_STYLE_KEY_MAP=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],getLineStyle=makeStyleMapper(LINE_STYLE_KEY_MAP),LineStyleMixin=function(){function t(){}return t.prototype.getLineStyle=function(n){return getLineStyle(this,n)},t}(),ITEM_STYLE_KEY_MAP=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],getItemStyle=makeStyleMapper(ITEM_STYLE_KEY_MAP),ItemStyleMixin=function(){function t(){}return t.prototype.getItemStyle=function(n,a){return getItemStyle(this,n,a)},t}(),Model=function(){function t(n,a,r){this.parentModel=a,this.ecModel=r,this.option=n}return t.prototype.init=function(n,a,r){},t.prototype.mergeOption=function(n,a){merge(this.option,n,!0)},t.prototype.get=function(n,a){return n==null?this.option:this._doGet(this.parsePath(n),!a&&this.parentModel)},t.prototype.getShallow=function(n,a){var r=this.option,o=r==null?r:r[n];if(o==null&&!a){var s=this.parentModel;s&&(o=s.getShallow(n))}return o},t.prototype.getModel=function(n,a){var r=n!=null,o=r?this.parsePath(n):null,s=r?this._doGet(o):this.option;return a=a||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(o)),new t(s,a,this.ecModel)},t.prototype.isEmpty=function(){return this.option==null},t.prototype.restoreData=function(){},t.prototype.clone=function(){var n=this.constructor;return new n(clone$3(this.option))},t.prototype.parsePath=function(n){return typeof n=="string"?n.split("."):n},t.prototype.resolveParentPath=function(n){return n},t.prototype.isAnimationEnabled=function(){if(!env.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},t.prototype._doGet=function(n,a){var r=this.option;if(!n)return r;for(var o=0;o<n.length&&!(n[o]&&(r=r&&typeof r=="object"?r[n[o]]:null,r==null));o++);return r==null&&a&&(r=a._doGet(this.resolveParentPath(n),a.parentModel)),r},t}();enableClassExtend(Model);enableClassCheck(Model);mixin(Model,LineStyleMixin);mixin(Model,ItemStyleMixin);mixin(Model,AreaStyleMixin);mixin(Model,TextStyleMixin);var base=Math.round(Math.random()*10);function getUID(t){return[t||"",base++].join("_")}function enableSubTypeDefaulter(t){var n={};t.registerSubTypeDefaulter=function(a,r){var o=parseClassType(a);n[o.main]=r},t.determineSubType=function(a,r){var o=r.type;if(!o){var s=parseClassType(a).main;t.hasSubTypes(a)&&n[s]&&(o=n[s](r))}return o}}function enableTopologicalTravel(t,n){t.topologicalTravel=function(s,l,c,u){if(!s.length)return;var d=a(l),f=d.graph,v=d.noEntryList,_={};for(each$8(s,function(C){_[C]=!0});v.length;){var g=v.pop(),y=f[g],b=!!_[g];b&&(c.call(u,g,y.originalDeps.slice()),delete _[g]),each$8(y.successor,b?S:T)}each$8(_,function(){var C="";throw new Error(C)});function T(C){f[C].entryCount--,f[C].entryCount===0&&v.push(C)}function S(C){_[C]=!0,T(C)}};function a(s){var l={},c=[];return each$8(s,function(u){var d=r(l,u),f=d.originalDeps=n(u),v=o(f,s);d.entryCount=v.length,d.entryCount===0&&c.push(u),each$8(v,function(_){indexOf(d.predecessor,_)<0&&d.predecessor.push(_);var g=r(l,_);indexOf(g.successor,_)<0&&g.successor.push(u)})}),{graph:l,noEntryList:c}}function r(s,l){return s[l]||(s[l]={predecessor:[],successor:[]}),s[l]}function o(s,l){var c=[];return each$8(s,function(u){indexOf(l,u)>=0&&c.push(u)}),c}}function inheritDefaultOption(t,n){return merge(merge({},t,!0),n,!0)}const langEN={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},langZH={time:{month:["","","","","","","","","","","",""],monthAbbr:["1","2","3","4","5","6","7","8","9","10","11","12"],dayOfWeek:["","","","","","",""],dayOfWeekAbbr:["","","","","","",""]},legend:{selector:{all:"",inverse:""}},toolbox:{brush:{title:{rect:"",polygon:"",lineX:"",lineY:"",keep:"",clear:""}},dataView:{title:"",lang:["","",""]},dataZoom:{title:{zoom:"",back:""}},magicType:{title:{line:"",bar:"",stack:"",tiled:""}},restore:{title:""},saveAsImage:{title:"",lang:[""]}},series:{typeNames:{pie:"",bar:"",line:"",scatter:"",effectScatter:"",radar:"",tree:"",treemap:"",boxplot:"",candlestick:"K",k:"K",heatmap:"",map:"",parallel:"",lines:"",graph:"",sankey:"",funnel:"",gauge:"",pictorialBar:"",themeRiver:"",sunburst:"",custom:"",chart:""}},aria:{general:{withTitle:"{title}",withoutTitle:""},series:{single:{prefix:"",withName:"{seriesType}{seriesName}",withoutName:"{seriesType}"},multiple:{prefix:"{seriesCount}",withName:"{seriesId}{seriesName}{seriesType}",withoutName:"{seriesId}{seriesType}",separator:{middle:"",end:""}}},data:{allData:"",partialData:"{displayCnt}",withName:"{name}{value}",withoutName:"{value}",separator:{middle:"",end:""}}}};var LOCALE_ZH="ZH",LOCALE_EN="EN",DEFAULT_LOCALE=LOCALE_EN,localeStorage={},localeModels={},SYSTEM_LANG=env.domSupported?function(){var t=(document.documentElement.lang||navigator.language||navigator.browserLanguage||DEFAULT_LOCALE).toUpperCase();return t.indexOf(LOCALE_ZH)>-1?LOCALE_ZH:DEFAULT_LOCALE}():DEFAULT_LOCALE;function registerLocale(t,n){t=t.toUpperCase(),localeModels[t]=new Model(n),localeStorage[t]=n}function createLocaleObject(t){if(isString(t)){var n=localeStorage[t.toUpperCase()]||{};return t===LOCALE_ZH||t===LOCALE_EN?clone$3(n):merge(clone$3(n),clone$3(localeStorage[DEFAULT_LOCALE]),!1)}else return merge(clone$3(t),clone$3(localeStorage[DEFAULT_LOCALE]),!1)}function getLocaleModel(t){return localeModels[t]}function getDefaultLocaleModel(){return localeModels[DEFAULT_LOCALE]}registerLocale(LOCALE_EN,langEN);registerLocale(LOCALE_ZH,langZH);var _impl$1=null;function getScaleBreakHelper(){return _impl$1}var ONE_SECOND=1e3,ONE_MINUTE=ONE_SECOND*60,ONE_HOUR=ONE_MINUTE*60,ONE_DAY=ONE_HOUR*24,ONE_YEAR=ONE_DAY*365,primaryTimeUnitFormatterMatchers={year:/({yyyy}|{yy})/,month:/({MMMM}|{MMM}|{MM}|{M})/,day:/({dd}|{d})/,hour:/({HH}|{H}|{hh}|{h})/,minute:/({mm}|{m})/,second:/({ss}|{s})/,millisecond:/({SSS}|{S})/},defaultFormatterSeed={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}"},defaultFullFormatter="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}",fullDayFormatter="{yyyy}-{MM}-{dd}",fullLeveledFormatter={year:"{yyyy}",month:"{yyyy}-{MM}",day:fullDayFormatter,hour:fullDayFormatter+" "+defaultFormatterSeed.hour,minute:fullDayFormatter+" "+defaultFormatterSeed.minute,second:fullDayFormatter+" "+defaultFormatterSeed.second,millisecond:defaultFullFormatter},primaryTimeUnits=["year","month","day","hour","minute","second","millisecond"],timeUnits=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function parseTimeAxisLabelFormatter(t){return!isString(t)&&!isFunction(t)?parseTimeAxisLabelFormatterDictionary(t):t}function parseTimeAxisLabelFormatterDictionary(t){t=t||{};var n={},a=!0;return each$8(primaryTimeUnits,function(r){a&&(a=t[r]==null)}),each$8(primaryTimeUnits,function(r,o){var s=t[r];n[r]={};for(var l=null,c=o;c>=0;c--){var u=primaryTimeUnits[c],d=isObject$3(s)&&!isArray$1(s)?s[u]:s,f=void 0;isArray$1(d)?(f=d.slice(),l=f[0]||""):isString(d)?(l=d,f=[l]):(l==null?l=defaultFormatterSeed[r]:primaryTimeUnitFormatterMatchers[u].test(l)||(l=n[u][u][0]+" "+l),f=[l],a&&(f[1]="{primary|"+l+"}")),n[r][u]=f}}),n}function pad(t,n){return t+="","0000".substr(0,n-t.length)+t}function getPrimaryTimeUnit(t){switch(t){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return t}}function isPrimaryTimeUnit(t){return t===getPrimaryTimeUnit(t)}function getDefaultFormatPrecisionOfInterval(t){switch(t){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function format(t,n,a,r){var o=parseDate(t),s=o[fullYearGetterName(a)](),l=o[monthGetterName(a)]()+1,c=Math.floor((l-1)/3)+1,u=o[dateGetterName(a)](),d=o["get"+(a?"UTC":"")+"Day"](),f=o[hoursGetterName(a)](),v=(f-1)%12+1,_=o[minutesGetterName(a)](),g=o[secondsGetterName(a)](),y=o[millisecondsGetterName(a)](),b=f>=12?"pm":"am",T=b.toUpperCase(),S=r instanceof Model?r:getLocaleModel(r||SYSTEM_LANG)||getDefaultLocaleModel(),C=S.getModel("time"),E=C.get("month"),x=C.get("monthAbbr"),A=C.get("dayOfWeek"),N=C.get("dayOfWeekAbbr");return(n||"").replace(/{a}/g,b+"").replace(/{A}/g,T+"").replace(/{yyyy}/g,s+"").replace(/{yy}/g,pad(s%100+"",2)).replace(/{Q}/g,c+"").replace(/{MMMM}/g,E[l-1]).replace(/{MMM}/g,x[l-1]).replace(/{MM}/g,pad(l,2)).replace(/{M}/g,l+"").replace(/{dd}/g,pad(u,2)).replace(/{d}/g,u+"").replace(/{eeee}/g,A[d]).replace(/{ee}/g,N[d]).replace(/{e}/g,d+"").replace(/{HH}/g,pad(f,2)).replace(/{H}/g,f+"").replace(/{hh}/g,pad(v+"",2)).replace(/{h}/g,v+"").replace(/{mm}/g,pad(_,2)).replace(/{m}/g,_+"").replace(/{ss}/g,pad(g,2)).replace(/{s}/g,g+"").replace(/{SSS}/g,pad(y,3)).replace(/{S}/g,y+"")}function leveledFormat(t,n,a,r,o){var s=null;if(isString(a))s=a;else if(isFunction(a)){var l={time:t.time,level:t.time.level},c=getScaleBreakHelper();c&&c.makeAxisLabelFormatterParamBreak(l,t.break),s=a(t.value,n,l)}else{var u=t.time;if(u){var d=a[u.lowerTimeUnit][u.upperTimeUnit];s=d[Math.min(u.level,d.length-1)]||""}else{var f=getUnitFromValue(t.value,o);s=a[f][f][0]}}return format(new Date(t.value),s,o,r)}function getUnitFromValue(t,n){var a=parseDate(t),r=a[monthGetterName(n)]()+1,o=a[dateGetterName(n)](),s=a[hoursGetterName(n)](),l=a[minutesGetterName(n)](),c=a[secondsGetterName(n)](),u=a[millisecondsGetterName(n)](),d=u===0,f=d&&c===0,v=f&&l===0,_=v&&s===0,g=_&&o===1,y=g&&r===1;return y?"year":g?"month":_?"day":v?"hour":f?"minute":d?"second":"millisecond"}function roundTime(t,n,a){switch(n){case"year":t[monthSetterName(a)](0);case"month":t[dateSetterName(a)](1);case"day":t[hoursSetterName(a)](0);case"hour":t[minutesSetterName(a)](0);case"minute":t[secondsSetterName(a)](0);case"second":t[millisecondsSetterName(a)](0)}return t}function fullYearGetterName(t){return t?"getUTCFullYear":"getFullYear"}function monthGetterName(t){return t?"getUTCMonth":"getMonth"}function dateGetterName(t){return t?"getUTCDate":"getDate"}function hoursGetterName(t){return t?"getUTCHours":"getHours"}function minutesGetterName(t){return t?"getUTCMinutes":"getMinutes"}function secondsGetterName(t){return t?"getUTCSeconds":"getSeconds"}function millisecondsGetterName(t){return t?"getUTCMilliseconds":"getMilliseconds"}function fullYearSetterName(t){return t?"setUTCFullYear":"setFullYear"}function monthSetterName(t){return t?"setUTCMonth":"setMonth"}function dateSetterName(t){return t?"setUTCDate":"setDate"}function hoursSetterName(t){return t?"setUTCHours":"setHours"}function minutesSetterName(t){return t?"setUTCMinutes":"setMinutes"}function secondsSetterName(t){return t?"setUTCSeconds":"setSeconds"}function millisecondsSetterName(t){return t?"setUTCMilliseconds":"setMilliseconds"}function addCommas(t){if(!isNumeric(t))return isString(t)?t:"-";var n=(t+"").split(".");return n[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(n.length>1?"."+n[1]:"")}function toCamelCase(t,n){return t=(t||"").toLowerCase().replace(/-(.)/g,function(a,r){return r.toUpperCase()}),n&&t&&(t=t.charAt(0).toUpperCase()+t.slice(1)),t}var normalizeCssArray=normalizeCssArray$1;function makeValueReadable(t,n,a){var r="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function o(f){return f&&trim(f)?f:"-"}function s(f){return!!(f!=null&&!isNaN(f)&&isFinite(f))}var l=n==="time",c=t instanceof Date;if(l||c){var u=l?parseDate(t):t;if(isNaN(+u)){if(c)return"-"}else return format(u,r,a)}if(n==="ordinal")return isStringSafe(t)?o(t):isNumber(t)&&s(t)?t+"":"-";var d=numericToNumber(t);return s(d)?addCommas(d):isStringSafe(t)?o(t):typeof t=="boolean"?t+"":"-"}var TPL_VAR_ALIAS=["a","b","c","d","e","f","g"],wrapVar=function(t,n){return"{"+t+(n??"")+"}"};function formatTpl(t,n,a){isArray$1(n)||(n=[n]);var r=n.length;if(!r)return"";for(var o=n[0].$vars||[],s=0;s<o.length;s++){var l=TPL_VAR_ALIAS[s];t=t.replace(wrapVar(l),wrapVar(l,0))}for(var c=0;c<r;c++)for(var u=0;u<o.length;u++){var d=n[c][o[u]];t=t.replace(wrapVar(TPL_VAR_ALIAS[u],c),a?encodeHTML(d):d)}return t}function getTooltipMarker(t,n){var a=isString(t)?{color:t,extraCssText:n}:t||{},r=a.color,o=a.type;n=a.extraCssText;var s=a.renderMode||"html";if(!r)return"";if(s==="html")return o==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+encodeHTML(r)+";"+(n||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+encodeHTML(r)+";"+(n||"")+'"></span>';var l=a.markerId||"markerX";return{renderMode:s,content:"{"+l+"|}  ",style:o==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:r}:{width:10,height:10,borderRadius:5,backgroundColor:r}}}function convertToColorString(t,n){return n=n||"transparent",isString(t)?t:isObject$3(t)&&t.colorStops&&(t.colorStops[0]||{}).color||n}function windowOpen(t,n){if(n==="_blank"||n==="blank"){var a=window.open();a.opener=null,a.location.href=t}else window.open(t,n)}var nonSeriesBoxCoordSysCreators={},normalCoordSysCreators={},CoordinateSystemManager=function(){function t(){this._normalMasterList=[],this._nonSeriesBoxMasterList=[]}return t.prototype.create=function(n,a){this._nonSeriesBoxMasterList=r(nonSeriesBoxCoordSysCreators),this._normalMasterList=r(normalCoordSysCreators);function r(o,s){var l=[];return each$8(o,function(c,u){var d=c.create(n,a);l=l.concat(d||[])}),l}},t.prototype.update=function(n,a){each$8(this._normalMasterList,function(r){r.update&&r.update(n,a)})},t.prototype.getCoordinateSystems=function(){return this._normalMasterList.concat(this._nonSeriesBoxMasterList)},t.register=function(n,a){if(n==="matrix"||n==="calendar"){nonSeriesBoxCoordSysCreators[n]=a;return}normalCoordSysCreators[n]=a},t.get=function(n){return normalCoordSysCreators[n]||nonSeriesBoxCoordSysCreators[n]},t}();function canBeNonSeriesBoxCoordSys(t){return!!nonSeriesBoxCoordSysCreators[t]}var BoxCoordinateSystemCoordFrom={coord:1,coord2:2},coordSysUseMap=createHashMap();function getCoordForBoxCoordSys(t){var n=t.getShallow("coord",!0),a=BoxCoordinateSystemCoordFrom.coord;if(n==null){var r=coordSysUseMap.get(t.type);r&&r.getCoord2&&(a=BoxCoordinateSystemCoordFrom.coord2,n=r.getCoord2(t))}return{coord:n,from:a}}var CoordinateSystemUsageKind={none:0,dataCoordSys:1,boxCoordSys:2};function decideCoordSysUsageKind(t,n){var a=t.getShallow("coordinateSystem"),r=t.getShallow("coordinateSystemUsage",!0),o=CoordinateSystemUsageKind.none;if(a){var s=t.mainType==="series";r==null&&(r=s?"data":"box"),r==="data"?(o=CoordinateSystemUsageKind.dataCoordSys,s||(o=CoordinateSystemUsageKind.none)):r==="box"&&(o=CoordinateSystemUsageKind.boxCoordSys,!s&&!canBeNonSeriesBoxCoordSys(a)&&(o=CoordinateSystemUsageKind.none))}return{coordSysType:a,kind:o}}function injectCoordSysByOption(t){var n=t.targetModel,a=t.coordSysType,r=t.coordSysProvider,o=t.isDefaultDataCoordSys;t.allowNotFound;var s=decideCoordSysUsageKind(n),l=s.kind,c=s.coordSysType;if(o&&l!==CoordinateSystemUsageKind.dataCoordSys&&(l=CoordinateSystemUsageKind.dataCoordSys,c=a),l===CoordinateSystemUsageKind.none||c!==a)return!1;var u=r(a,n);return u?(l===CoordinateSystemUsageKind.dataCoordSys?n.coordinateSystem=u:n.boxCoordinateSystem=u,!0):!1}var each$7=each$8,LOCATION_PARAMS=["left","right","top","bottom","width","height"],HV_NAMES=[["width","left","right"],["height","top","bottom"]];function boxLayout(t,n,a,r,o){var s=0,l=0;r==null&&(r=1/0),o==null&&(o=1/0);var c=0;n.eachChild(function(u,d){var f=u.getBoundingRect(),v=n.childAt(d+1),_=v&&v.getBoundingRect(),g,y;if(t==="horizontal"){var b=f.width+(_?-_.x+f.x:0);g=s+b,g>r||u.newline?(s=0,g=b,l+=c+a,c=f.height):c=Math.max(c,f.height)}else{var T=f.height+(_?-_.y+f.y:0);y=l+T,y>o||u.newline?(s+=c+a,l=0,y=T,c=f.width):c=Math.max(c,f.width)}u.newline||(u.x=s,u.y=l,u.markRedraw(),t==="horizontal"?s=g+a:l=y+a)})}var box=boxLayout;curry(boxLayout,"vertical");curry(boxLayout,"horizontal");function getBoxLayoutParams(t,n){return{left:t.getShallow("left",n),top:t.getShallow("top",n),right:t.getShallow("right",n),bottom:t.getShallow("bottom",n),width:t.getShallow("width",n),height:t.getShallow("height",n)}}function getLayoutRect(t,n,a){a=normalizeCssArray(a||0);var r=n.width,o=n.height,s=parsePercent(t.left,r),l=parsePercent(t.top,o),c=parsePercent(t.right,r),u=parsePercent(t.bottom,o),d=parsePercent(t.width,r),f=parsePercent(t.height,o),v=a[2]+a[0],_=a[1]+a[3],g=t.aspect;switch(isNaN(d)&&(d=r-c-_-s),isNaN(f)&&(f=o-u-v-l),g!=null&&(isNaN(d)&&isNaN(f)&&(g>r/o?d=r*.8:f=o*.8),isNaN(d)&&(d=g*f),isNaN(f)&&(f=d/g)),isNaN(s)&&(s=r-c-d-_),isNaN(l)&&(l=o-u-f-v),t.left||t.right){case"center":s=r/2-d/2-a[3];break;case"right":s=r-d-_;break}switch(t.top||t.bottom){case"middle":case"center":l=o/2-f/2-a[0];break;case"bottom":l=o-f-v;break}s=s||0,l=l||0,isNaN(d)&&(d=r-_-s-(c||0)),isNaN(f)&&(f=o-v-l-(u||0));var y=new BoundingRect((n.x||0)+s+a[3],(n.y||0)+l+a[0],d,f);return y.margin=a,y}function applyPreserveAspect(t,n,a){var r=t.getShallow("preserveAspect",!0);if(!r)return n;var o=n.width/n.height;if(Math.abs(Math.atan(a)-Math.atan(o))<1e-9)return n;var s=t.getShallow("preserveAspectAlign",!0),l=t.getShallow("preserveAspectVerticalAlign",!0),c={width:n.width,height:n.height},u=r==="cover";return o>a&&!u||o<a&&u?(c.width=n.height*a,s==="left"?c.left=0:s==="right"?c.right=0:c.left="center"):(c.height=n.width/a,l==="top"?c.top=0:l==="bottom"?c.bottom=0:c.top="middle"),getLayoutRect(c,n)}var BoxLayoutReferenceType={rect:1};function createBoxLayoutReference(t,n,a){var r,o,s,l=t.boxCoordinateSystem,c;if(l){var u=getCoordForBoxCoordSys(t),d=u.coord,f=u.from;if(l.dataToLayout){s=BoxLayoutReferenceType.rect,c=f;var v=l.dataToLayout(d);r=v.contentRect||v.rect}}return s==null&&(s=BoxLayoutReferenceType.rect),s===BoxLayoutReferenceType.rect&&(r||(r={x:0,y:0,width:n.getWidth(),height:n.getHeight()}),o=[r.x+r.width/2,r.y+r.height/2]),{type:s,refContainer:r,refPoint:o,boxCoordFrom:c}}function positionElement(t,n,a,r,o,s){s=s||t,s.x=t.x,s.y=t.y;var l;if(l=t.getBoundingRect(),t.needLocalTransform()){var c=t.getLocalTransform();l=l.clone(),l.applyTransform(c)}var u=getLayoutRect(defaults({width:l.width,height:l.height},n),a,r),d=u.x-l.x,f=u.y-l.y;return s.x+=d,s.y+=f,s===t&&t.markRedraw(),!0}function fetchLayoutMode(t){var n=t.layoutMode||t.constructor.layoutMode;return isObject$3(n)?n:n?{type:n}:null}function mergeLayoutParam(t,n,a){var r=a&&a.ignoreSize;!isArray$1(r)&&(r=[r,r]);var o=l(HV_NAMES[0],0),s=l(HV_NAMES[1],1);u(HV_NAMES[0],t,o),u(HV_NAMES[1],t,s);function l(d,f){var v={},_=0,g={},y=0,b=2;if(each$7(d,function(C){g[C]=t[C]}),each$7(d,function(C){hasOwn(n,C)&&(v[C]=g[C]=n[C]),c(v,C)&&_++,c(g,C)&&y++}),r[f])return c(n,d[1])?g[d[2]]=null:c(n,d[2])&&(g[d[1]]=null),g;if(y===b||!_)return g;if(_>=b)return v;for(var T=0;T<d.length;T++){var S=d[T];if(!hasOwn(v,S)&&hasOwn(t,S)){v[S]=t[S];break}}return v}function c(d,f){return d[f]!=null&&d[f]!=="auto"}function u(d,f,v){each$7(d,function(_){f[_]=v[_]})}}function getLayoutParams(t){return copyLayoutParams({},t)}function copyLayoutParams(t,n){return n&&t&&each$7(LOCATION_PARAMS,function(a){hasOwn(n,a)&&(t[a]=n[a])}),t}var inner$9=makeInner(),ComponentModel=function(t){__extends$1(n,t);function n(a,r,o){var s=t.call(this,a,r,o)||this;return s.uid=getUID("ec_cpt_model"),s}return n.prototype.init=function(a,r,o){this.mergeDefaultAndTheme(a,o)},n.prototype.mergeDefaultAndTheme=function(a,r){var o=fetchLayoutMode(this),s=o?getLayoutParams(a):{},l=r.getTheme();merge(a,l.get(this.mainType)),merge(a,this.getDefaultOption()),o&&mergeLayoutParam(a,s,o)},n.prototype.mergeOption=function(a,r){merge(this.option,a,!0);var o=fetchLayoutMode(this);o&&mergeLayoutParam(this.option,a,o)},n.prototype.optionUpdated=function(a,r){},n.prototype.getDefaultOption=function(){var a=this.constructor;if(!isExtendedClass(a))return a.defaultOption;var r=inner$9(this);if(!r.defaultOption){for(var o=[],s=a;s;){var l=s.prototype.defaultOption;l&&o.push(l),s=s.superClass}for(var c={},u=o.length-1;u>=0;u--)c=merge(c,o[u],!0);r.defaultOption=c}return r.defaultOption},n.prototype.getReferringComponents=function(a,r){var o=a+"Index",s=a+"Id";return queryReferringComponents(this.ecModel,a,{index:this.get(o,!0),id:this.get(s,!0)},r)},n.prototype.getBoxLayoutParams=function(){return getBoxLayoutParams(this,!1)},n.prototype.getZLevelKey=function(){return""},n.prototype.setZLevel=function(a){this.option.zlevel=a},n.protoInitialize=function(){var a=n.prototype;a.type="component",a.id="",a.name="",a.mainType="",a.subType="",a.componentIndex=0}(),n}(Model);mountExtend(ComponentModel,Model);enableClassManagement(ComponentModel);enableSubTypeDefaulter(ComponentModel);enableTopologicalTravel(ComponentModel,getDependencies);function getDependencies(t){var n=[];return each$8(ComponentModel.getClassesByMainType(t),function(a){n=n.concat(a.dependencies||a.prototype.dependencies||[])}),n=map$1(n,function(a){return parseClassType(a).main}),t!=="dataset"&&indexOf(n,"dataset")<=0&&n.unshift("dataset"),n}var tokens={color:{},darkColor:{},size:{}},color$1=tokens.color={theme:["#5070dd","#b6d634","#505372","#ff994d","#0ca8df","#ffd10a","#fb628b","#785db0","#3fbe95"],neutral00:"#fff",neutral05:"#f4f7fd",neutral10:"#e8ebf0",neutral15:"#dbdee4",neutral20:"#cfd2d7",neutral25:"#c3c5cb",neutral30:"#b7b9be",neutral35:"#aaacb2",neutral40:"#9ea0a5",neutral45:"#929399",neutral50:"#86878c",neutral55:"#797b7f",neutral60:"#6d6e73",neutral65:"#616266",neutral70:"#54555a",neutral75:"#48494d",neutral80:"#3c3c41",neutral85:"#303034",neutral90:"#232328",neutral95:"#17171b",neutral99:"#000",accent05:"#eff1f9",accent10:"#e0e4f2",accent15:"#d0d6ec",accent20:"#c0c9e6",accent25:"#b1bbdf",accent30:"#a1aed9",accent35:"#91a0d3",accent40:"#8292cc",accent45:"#7285c6",accent50:"#6578ba",accent55:"#5c6da9",accent60:"#536298",accent65:"#4a5787",accent70:"#404c76",accent75:"#374165",accent80:"#2e3654",accent85:"#252b43",accent90:"#1b2032",accent95:"#121521",transparent:"rgba(0,0,0,0)",highlight:"rgba(255,231,130,0.8)"};extend(color$1,{primary:color$1.neutral80,secondary:color$1.neutral70,tertiary:color$1.neutral60,quaternary:color$1.neutral50,disabled:color$1.neutral20,border:color$1.neutral30,borderTint:color$1.neutral20,borderShade:color$1.neutral40,background:color$1.neutral05,backgroundTint:"rgba(234,237,245,0.5)",backgroundTransparent:"rgba(255,255,255,0)",backgroundShade:color$1.neutral10,shadow:"rgba(0,0,0,0.2)",shadowTint:"rgba(129,130,136,0.2)",axisLine:color$1.neutral70,axisLineTint:color$1.neutral40,axisTick:color$1.neutral70,axisTickMinor:color$1.neutral60,axisLabel:color$1.neutral70,axisSplitLine:color$1.neutral15,axisMinorSplitLine:color$1.neutral05});for(var key in color$1)if(color$1.hasOwnProperty(key)){var hex=color$1[key];key==="theme"?tokens.darkColor.theme=color$1.theme.slice():key==="highlight"?tokens.darkColor.highlight="rgba(255,231,130,0.4)":key.indexOf("accent")===0?tokens.darkColor[key]=modifyHSL(hex,null,function(t){return t*.5},function(t){return Math.min(1,1.3-t)}):tokens.darkColor[key]=modifyHSL(hex,null,function(t){return t*.9},function(t){return 1-Math.pow(t,1.5)})}tokens.size={xxs:2,xs:5,s:10,m:15,l:20,xl:30,xxl:40,xxxl:50};var platform="";typeof navigator<"u"&&(platform=navigator.platform||"");var decalColor="rgba(0, 0, 0, 0.2)",themeColor=tokens.color.theme[0],lightThemeColor=modifyHSL(themeColor,null,null,.9);const globalDefault={darkMode:"auto",colorBy:"series",color:tokens.color.theme,gradientColor:[lightThemeColor,themeColor],aria:{decal:{decals:[{color:decalColor,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:decalColor,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:decalColor,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:decalColor,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:decalColor,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:decalColor,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:platform.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var VISUAL_DIMENSIONS=createHashMap(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),SOURCE_FORMAT_ORIGINAL="original",SOURCE_FORMAT_ARRAY_ROWS="arrayRows",SOURCE_FORMAT_OBJECT_ROWS="objectRows",SOURCE_FORMAT_KEYED_COLUMNS="keyedColumns",SOURCE_FORMAT_TYPED_ARRAY="typedArray",SOURCE_FORMAT_UNKNOWN="unknown",SERIES_LAYOUT_BY_COLUMN="column",SERIES_LAYOUT_BY_ROW="row",BE_ORDINAL={Must:1,Might:2,Not:3},innerGlobalModel=makeInner();function resetSourceDefaulter(t){innerGlobalModel(t).datasetMap=createHashMap()}function makeSeriesEncodeForAxisCoordSys(t,n,a){var r={},o=querySeriesUpstreamDatasetModel(n);if(!o||!t)return r;var s=[],l=[],c=n.ecModel,u=innerGlobalModel(c).datasetMap,d=o.uid+"_"+a.seriesLayoutBy,f,v;t=t.slice(),each$8(t,function(b,T){var S=isObject$3(b)?b:t[T]={name:b};S.type==="ordinal"&&f==null&&(f=T,v=y(S)),r[S.name]=[]});var _=u.get(d)||u.set(d,{categoryWayDim:v,valueWayDim:0});each$8(t,function(b,T){var S=b.name,C=y(b);if(f==null){var E=_.valueWayDim;g(r[S],E,C),g(l,E,C),_.valueWayDim+=C}else if(f===T)g(r[S],0,C),g(s,0,C);else{var E=_.categoryWayDim;g(r[S],E,C),g(l,E,C),_.categoryWayDim+=C}});function g(b,T,S){for(var C=0;C<S;C++)b.push(T+C)}function y(b){var T=b.dimsDef;return T?T.length:1}return s.length&&(r.itemName=s),l.length&&(r.seriesName=l),r}function makeSeriesEncodeForNameBased(t,n,a){var r={},o=querySeriesUpstreamDatasetModel(t);if(!o)return r;var s=n.sourceFormat,l=n.dimensionsDefine,c;(s===SOURCE_FORMAT_OBJECT_ROWS||s===SOURCE_FORMAT_KEYED_COLUMNS)&&each$8(l,function(f,v){(isObject$3(f)?f.name:f)==="name"&&(c=v)});var u=function(){for(var f={},v={},_=[],g=0,y=Math.min(5,a);g<y;g++){var b=doGuessOrdinal(n.data,s,n.seriesLayoutBy,l,n.startIndex,g);_.push(b);var T=b===BE_ORDINAL.Not;if(T&&f.v==null&&g!==c&&(f.v=g),(f.n==null||f.n===f.v||!T&&_[f.n]===BE_ORDINAL.Not)&&(f.n=g),S(f)&&_[f.n]!==BE_ORDINAL.Not)return f;T||(b===BE_ORDINAL.Might&&v.v==null&&g!==c&&(v.v=g),(v.n==null||v.n===v.v)&&(v.n=g))}function S(C){return C.v!=null&&C.n!=null}return S(f)?f:S(v)?v:null}();if(u){r.value=[u.v];var d=c??u.n;r.itemName=[d],r.seriesName=[d]}return r}function querySeriesUpstreamDatasetModel(t){var n=t.get("data",!0);if(!n)return queryReferringComponents(t.ecModel,"dataset",{index:t.get("datasetIndex",!0),id:t.get("datasetId",!0)},SINGLE_REFERRING).models[0]}function queryDatasetUpstreamDatasetModels(t){return!t.get("transform",!0)&&!t.get("fromTransformResult",!0)?[]:queryReferringComponents(t.ecModel,"dataset",{index:t.get("fromDatasetIndex",!0),id:t.get("fromDatasetId",!0)},SINGLE_REFERRING).models}function guessOrdinal(t,n){return doGuessOrdinal(t.data,t.sourceFormat,t.seriesLayoutBy,t.dimensionsDefine,t.startIndex,n)}function doGuessOrdinal(t,n,a,r,o,s){var l,c=5;if(isTypedArray(t))return BE_ORDINAL.Not;var u,d;if(r){var f=r[s];isObject$3(f)?(u=f.name,d=f.type):isString(f)&&(u=f)}if(d!=null)return d==="ordinal"?BE_ORDINAL.Must:BE_ORDINAL.Not;if(n===SOURCE_FORMAT_ARRAY_ROWS){var v=t;if(a===SERIES_LAYOUT_BY_ROW){for(var _=v[s],g=0;g<(_||[]).length&&g<c;g++)if((l=x(_[o+g]))!=null)return l}else for(var g=0;g<v.length&&g<c;g++){var y=v[o+g];if(y&&(l=x(y[s]))!=null)return l}}else if(n===SOURCE_FORMAT_OBJECT_ROWS){var b=t;if(!u)return BE_ORDINAL.Not;for(var g=0;g<b.length&&g<c;g++){var T=b[g];if(T&&(l=x(T[u]))!=null)return l}}else if(n===SOURCE_FORMAT_KEYED_COLUMNS){var S=t;if(!u)return BE_ORDINAL.Not;var _=S[u];if(!_||isTypedArray(_))return BE_ORDINAL.Not;for(var g=0;g<_.length&&g<c;g++)if((l=x(_[g]))!=null)return l}else if(n===SOURCE_FORMAT_ORIGINAL)for(var C=t,g=0;g<C.length&&g<c;g++){var T=C[g],E=getDataItemValue(T);if(!isArray$1(E))return BE_ORDINAL.Not;if((l=x(E[s]))!=null)return l}function x(A){var N=isString(A);if(A!=null&&Number.isFinite(Number(A))&&A!=="")return N?BE_ORDINAL.Might:BE_ORDINAL.Not;if(N&&A!=="-")return BE_ORDINAL.Must}return BE_ORDINAL.Not}var internalOptionCreatorMap=createHashMap();function concatInternalOptions(t,n,a){var r=internalOptionCreatorMap.get(n);if(!r)return a;var o=r(t);return o?a.concat(o):a}var innerColor=makeInner();makeInner();var PaletteMixin=function(){function t(){}return t.prototype.getColorFromPalette=function(n,a,r){var o=normalizeToArray(this.get("color",!0)),s=this.get("colorLayer",!0);return getFromPalette(this,innerColor,o,s,n,a,r)},t.prototype.clearColorPalette=function(){clearPalette(this,innerColor)},t}();function getNearestPalette(t,n){for(var a=t.length,r=0;r<a;r++)if(t[r].length>n)return t[r];return t[a-1]}function getFromPalette(t,n,a,r,o,s,l){s=s||t;var c=n(s),u=c.paletteIdx||0,d=c.paletteNameMap=c.paletteNameMap||{};if(d.hasOwnProperty(o))return d[o];var f=l==null||!r?a:getNearestPalette(r,l);if(f=f||a,!(!f||!f.length)){var v=f[u];return o&&(d[o]=v),c.paletteIdx=(u+1)%f.length,v}}function clearPalette(t,n){n(t).paletteIdx=0,n(t).paletteNameMap={}}var reCreateSeriesIndices,assertSeriesInitialized,initBase,OPTION_INNER_KEY="\0_ec_inner",OPTION_INNER_VALUE=1,GlobalModel=function(t){__extends$1(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.init=function(a,r,o,s,l,c){s=s||{},this.option=null,this._theme=new Model(s),this._locale=new Model(l),this._optionManager=c},n.prototype.setOption=function(a,r,o){var s=normalizeSetOptionInput(r);this._optionManager.setOption(a,o,s),this._resetOption(null,s)},n.prototype.resetOption=function(a,r){return this._resetOption(a,normalizeSetOptionInput(r))},n.prototype._resetOption=function(a,r){var o=!1,s=this._optionManager;if(!a||a==="recreate"){var l=s.mountOption(a==="recreate");!this.option||a==="recreate"?initBase(this,l):(this.restoreData(),this._mergeOption(l,r)),o=!0}if((a==="timeline"||a==="media")&&this.restoreData(),!a||a==="recreate"||a==="timeline"){var c=s.getTimelineOption(this);c&&(o=!0,this._mergeOption(c,r))}if(!a||a==="recreate"||a==="media"){var u=s.getMediaOption(this);u.length&&each$8(u,function(d){o=!0,this._mergeOption(d,r)},this)}return o},n.prototype.mergeOption=function(a){this._mergeOption(a,null)},n.prototype._mergeOption=function(a,r){var o=this.option,s=this._componentsMap,l=this._componentsCount,c=[],u=createHashMap(),d=r&&r.replaceMergeMainTypeMap;resetSourceDefaulter(this),each$8(a,function(v,_){v!=null&&(ComponentModel.hasClass(_)?_&&(c.push(_),u.set(_,!0)):o[_]=o[_]==null?clone$3(v):merge(o[_],v,!0))}),d&&d.each(function(v,_){ComponentModel.hasClass(_)&&!u.get(_)&&(c.push(_),u.set(_,!0))}),ComponentModel.topologicalTravel(c,ComponentModel.getAllClassMainTypes(),f,this);function f(v){var _=concatInternalOptions(this,v,normalizeToArray(a[v])),g=s.get(v),y=g?d&&d.get(v)?"replaceMerge":"normalMerge":"replaceAll",b=mappingToExists(g,_,y);setComponentTypeToKeyInfo(b,v,ComponentModel),o[v]=null,s.set(v,null),l.set(v,0);var T=[],S=[],C=0,E;each$8(b,function(x,A){var N=x.existing,M=x.newOption;if(!M)N&&(N.mergeOption({},this),N.optionUpdated({},!1));else{var R=v==="series",D=ComponentModel.getClass(v,x.keyInfo.subType,!R);if(!D)return;if(v==="tooltip"){if(E)return;E=!0}if(N&&N.constructor===D)N.name=x.keyInfo.name,N.mergeOption(M,this),N.optionUpdated(M,!1);else{var L=extend({componentIndex:A},x.keyInfo);N=new D(M,this,this,L),extend(N,L),x.brandNew&&(N.__requireNewView=!0),N.init(M,this,this),N.optionUpdated(null,!0)}}N?(T.push(N.option),S.push(N),C++):(T.push(void 0),S.push(void 0))},this),o[v]=T,s.set(v,S),l.set(v,C),v==="series"&&reCreateSeriesIndices(this)}this._seriesIndices||reCreateSeriesIndices(this)},n.prototype.getOption=function(){var a=clone$3(this.option);return each$8(a,function(r,o){if(ComponentModel.hasClass(o)){for(var s=normalizeToArray(r),l=s.length,c=!1,u=l-1;u>=0;u--)s[u]&&!isComponentIdInternal(s[u])?c=!0:(s[u]=null,!c&&l--);s.length=l,a[o]=s}}),delete a[OPTION_INNER_KEY],a},n.prototype.setTheme=function(a){this._theme=new Model(a),this._resetOption("recreate",null)},n.prototype.getTheme=function(){return this._theme},n.prototype.getLocaleModel=function(){return this._locale},n.prototype.setUpdatePayload=function(a){this._payload=a},n.prototype.getUpdatePayload=function(){return this._payload},n.prototype.getComponent=function(a,r){var o=this._componentsMap.get(a);if(o){var s=o[r||0];if(s)return s;if(r==null){for(var l=0;l<o.length;l++)if(o[l])return o[l]}}},n.prototype.queryComponents=function(a){var r=a.mainType;if(!r)return[];var o=a.index,s=a.id,l=a.name,c=this._componentsMap.get(r);if(!c||!c.length)return[];var u;return o!=null?(u=[],each$8(normalizeToArray(o),function(d){c[d]&&u.push(c[d])})):s!=null?u=queryByIdOrName("id",s,c):l!=null?u=queryByIdOrName("name",l,c):u=filter(c,function(d){return!!d}),filterBySubType(u,a)},n.prototype.findComponents=function(a){var r=a.query,o=a.mainType,s=c(r),l=s?this.queryComponents(s):filter(this._componentsMap.get(o),function(d){return!!d});return u(filterBySubType(l,a));function c(d){var f=o+"Index",v=o+"Id",_=o+"Name";return d&&(d[f]!=null||d[v]!=null||d[_]!=null)?{mainType:o,index:d[f],id:d[v],name:d[_]}:null}function u(d){return a.filter?filter(d,a.filter):d}},n.prototype.eachComponent=function(a,r,o){var s=this._componentsMap;if(isFunction(a)){var l=r,c=a;s.each(function(v,_){for(var g=0;v&&g<v.length;g++){var y=v[g];y&&c.call(l,_,y,y.componentIndex)}})}else for(var u=isString(a)?s.get(a):isObject$3(a)?this.findComponents(a):null,d=0;u&&d<u.length;d++){var f=u[d];f&&r.call(o,f,f.componentIndex)}},n.prototype.getSeriesByName=function(a){var r=convertOptionIdName(a,null);return filter(this._componentsMap.get("series"),function(o){return!!o&&r!=null&&o.name===r})},n.prototype.getSeriesByIndex=function(a){return this._componentsMap.get("series")[a]},n.prototype.getSeriesByType=function(a){return filter(this._componentsMap.get("series"),function(r){return!!r&&r.subType===a})},n.prototype.getSeries=function(){return filter(this._componentsMap.get("series"),function(a){return!!a})},n.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},n.prototype.eachSeries=function(a,r){assertSeriesInitialized(this),each$8(this._seriesIndices,function(o){var s=this._componentsMap.get("series")[o];a.call(r,s,o)},this)},n.prototype.eachRawSeries=function(a,r){each$8(this._componentsMap.get("series"),function(o){o&&a.call(r,o,o.componentIndex)})},n.prototype.eachSeriesByType=function(a,r,o){assertSeriesInitialized(this),each$8(this._seriesIndices,function(s){var l=this._componentsMap.get("series")[s];l.subType===a&&r.call(o,l,s)},this)},n.prototype.eachRawSeriesByType=function(a,r,o){return each$8(this.getSeriesByType(a),r,o)},n.prototype.isSeriesFiltered=function(a){return assertSeriesInitialized(this),this._seriesIndicesMap.get(a.componentIndex)==null},n.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},n.prototype.filterSeries=function(a,r){assertSeriesInitialized(this);var o=[];each$8(this._seriesIndices,function(s){var l=this._componentsMap.get("series")[s];a.call(r,l,s)&&o.push(s)},this),this._seriesIndices=o,this._seriesIndicesMap=createHashMap(o)},n.prototype.restoreData=function(a){reCreateSeriesIndices(this);var r=this._componentsMap,o=[];r.each(function(s,l){ComponentModel.hasClass(l)&&o.push(l)}),ComponentModel.topologicalTravel(o,ComponentModel.getAllClassMainTypes(),function(s){each$8(r.get(s),function(l){l&&(s!=="series"||!isNotTargetSeries(l,a))&&l.restoreData()})})},n.internalField=function(){reCreateSeriesIndices=function(a){var r=a._seriesIndices=[];each$8(a._componentsMap.get("series"),function(o){o&&r.push(o.componentIndex)}),a._seriesIndicesMap=createHashMap(r)},assertSeriesInitialized=function(a){},initBase=function(a,r){a.option={},a.option[OPTION_INNER_KEY]=OPTION_INNER_VALUE,a._componentsMap=createHashMap({series:[]}),a._componentsCount=createHashMap();var o=r.aria;isObject$3(o)&&o.enabled==null&&(o.enabled=!0),mergeTheme(r,a._theme.option),merge(r,globalDefault,!1),a._mergeOption(r,null)}}(),n}(Model);function isNotTargetSeries(t,n){if(n){var a=n.seriesIndex,r=n.seriesId,o=n.seriesName;return a!=null&&t.componentIndex!==a||r!=null&&t.id!==r||o!=null&&t.name!==o}}function mergeTheme(t,n){var a=t.color&&!t.colorLayer;each$8(n,function(r,o){o==="colorLayer"&&a||o==="color"&&t.color||ComponentModel.hasClass(o)||(typeof r=="object"?t[o]=t[o]?merge(t[o],r,!1):clone$3(r):t[o]==null&&(t[o]=r))})}function queryByIdOrName(t,n,a){if(isArray$1(n)){var r=createHashMap();return each$8(n,function(s){if(s!=null){var l=convertOptionIdName(s,null);l!=null&&r.set(s,!0)}}),filter(a,function(s){return s&&r.get(s[t])})}else{var o=convertOptionIdName(n,null);return filter(a,function(s){return s&&o!=null&&s[t]===o})}}function filterBySubType(t,n){return n.hasOwnProperty("subType")?filter(t,function(a){return a&&a.subType===n.subType}):t}function normalizeSetOptionInput(t){var n=createHashMap();return t&&each$8(normalizeToArray(t.replaceMerge),function(a){n.set(a,!0)}),{replaceMergeMainTypeMap:n}}mixin(GlobalModel,PaletteMixin);var availableMethods=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],ExtensionAPI=function(){function t(n){each$8(availableMethods,function(a){this[a]=bind$1(n[a],n)},this)}return t}(),QUERY_REG=/^(min|max)?(.+)$/,OptionManager=function(){function t(n){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=n}return t.prototype.setOption=function(n,a,r){n&&(each$8(normalizeToArray(n.series),function(l){l&&l.data&&isTypedArray(l.data)&&setAsPrimitive(l.data)}),each$8(normalizeToArray(n.dataset),function(l){l&&l.source&&isTypedArray(l.source)&&setAsPrimitive(l.source)})),n=clone$3(n);var o=this._optionBackup,s=parseRawOption(n,a,!o);this._newBaseOption=s.baseOption,o?(s.timelineOptions.length&&(o.timelineOptions=s.timelineOptions),s.mediaList.length&&(o.mediaList=s.mediaList),s.mediaDefault&&(o.mediaDefault=s.mediaDefault)):this._optionBackup=s},t.prototype.mountOption=function(n){var a=this._optionBackup;return this._timelineOptions=a.timelineOptions,this._mediaList=a.mediaList,this._mediaDefault=a.mediaDefault,this._currentMediaIndices=[],clone$3(n?a.baseOption:this._newBaseOption)},t.prototype.getTimelineOption=function(n){var a,r=this._timelineOptions;if(r.length){var o=n.getComponent("timeline");o&&(a=clone$3(r[o.getCurrentIndex()]))}return a},t.prototype.getMediaOption=function(n){var a=this._api.getWidth(),r=this._api.getHeight(),o=this._mediaList,s=this._mediaDefault,l=[],c=[];if(!o.length&&!s)return c;for(var u=0,d=o.length;u<d;u++)applyMediaQuery(o[u].query,a,r)&&l.push(u);return!l.length&&s&&(l=[-1]),l.length&&!indicesEquals(l,this._currentMediaIndices)&&(c=map$1(l,function(f){return clone$3(f===-1?s.option:o[f].option)})),this._currentMediaIndices=l,c},t}();function parseRawOption(t,n,a){var r=[],o,s,l=t.baseOption,c=t.timeline,u=t.options,d=t.media,f=!!t.media,v=!!(u||c||l&&l.timeline);l?(s=l,s.timeline||(s.timeline=c)):((v||f)&&(t.options=t.media=null),s=t),f&&isArray$1(d)&&each$8(d,function(g){g&&g.option&&(g.query?r.push(g):o||(o=g))}),_(s),each$8(u,function(g){return _(g)}),each$8(r,function(g){return _(g.option)});function _(g){each$8(n,function(y){y(g,a)})}return{baseOption:s,timelineOptions:u||[],mediaDefault:o,mediaList:r}}function applyMediaQuery(t,n,a){var r={width:n,height:a,aspectratio:n/a},o=!0;return each$8(t,function(s,l){var c=l.match(QUERY_REG);if(!(!c||!c[1]||!c[2])){var u=c[1],d=c[2].toLowerCase();compare(r[d],s,u)||(o=!1)}}),o}function compare(t,n,a){return a==="min"?t>=n:a==="max"?t<=n:t===n}function indicesEquals(t,n){return t.join(",")===n.join(",")}var each$6=each$8,isObject$2=isObject$3,POSSIBLE_STYLES=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function compatEC2ItemStyle(t){var n=t&&t.itemStyle;if(n)for(var a=0,r=POSSIBLE_STYLES.length;a<r;a++){var o=POSSIBLE_STYLES[a],s=n.normal,l=n.emphasis;s&&s[o]&&(t[o]=t[o]||{},t[o].normal?merge(t[o].normal,s[o]):t[o].normal=s[o],s[o]=null),l&&l[o]&&(t[o]=t[o]||{},t[o].emphasis?merge(t[o].emphasis,l[o]):t[o].emphasis=l[o],l[o]=null)}}function convertNormalEmphasis(t,n,a){if(t&&t[n]&&(t[n].normal||t[n].emphasis)){var r=t[n].normal,o=t[n].emphasis;r&&(a?(t[n].normal=t[n].emphasis=null,defaults(t[n],r)):t[n]=r),o&&(t.emphasis=t.emphasis||{},t.emphasis[n]=o,o.focus&&(t.emphasis.focus=o.focus),o.blurScope&&(t.emphasis.blurScope=o.blurScope))}}function removeEC3NormalStatus(t){convertNormalEmphasis(t,"itemStyle"),convertNormalEmphasis(t,"lineStyle"),convertNormalEmphasis(t,"areaStyle"),convertNormalEmphasis(t,"label"),convertNormalEmphasis(t,"labelLine"),convertNormalEmphasis(t,"upperLabel"),convertNormalEmphasis(t,"edgeLabel")}function compatTextStyle(t,n){var a=isObject$2(t)&&t[n],r=isObject$2(a)&&a.textStyle;if(r)for(var o=0,s=TEXT_STYLE_OPTIONS.length;o<s;o++){var l=TEXT_STYLE_OPTIONS[o];r.hasOwnProperty(l)&&(a[l]=r[l])}}function compatEC3CommonStyles(t){t&&(removeEC3NormalStatus(t),compatTextStyle(t,"label"),t.emphasis&&compatTextStyle(t.emphasis,"label"))}function processSeries(t){if(isObject$2(t)){compatEC2ItemStyle(t),removeEC3NormalStatus(t),compatTextStyle(t,"label"),compatTextStyle(t,"upperLabel"),compatTextStyle(t,"edgeLabel"),t.emphasis&&(compatTextStyle(t.emphasis,"label"),compatTextStyle(t.emphasis,"upperLabel"),compatTextStyle(t.emphasis,"edgeLabel"));var n=t.markPoint;n&&(compatEC2ItemStyle(n),compatEC3CommonStyles(n));var a=t.markLine;a&&(compatEC2ItemStyle(a),compatEC3CommonStyles(a));var r=t.markArea;r&&compatEC3CommonStyles(r);var o=t.data;if(t.type==="graph"){o=o||t.nodes;var s=t.links||t.edges;if(s&&!isTypedArray(s))for(var l=0;l<s.length;l++)compatEC3CommonStyles(s[l]);each$8(t.categories,function(d){removeEC3NormalStatus(d)})}if(o&&!isTypedArray(o))for(var l=0;l<o.length;l++)compatEC3CommonStyles(o[l]);if(n=t.markPoint,n&&n.data)for(var c=n.data,l=0;l<c.length;l++)compatEC3CommonStyles(c[l]);if(a=t.markLine,a&&a.data)for(var u=a.data,l=0;l<u.length;l++)isArray$1(u[l])?(compatEC3CommonStyles(u[l][0]),compatEC3CommonStyles(u[l][1])):compatEC3CommonStyles(u[l]);t.type==="gauge"?(compatTextStyle(t,"axisLabel"),compatTextStyle(t,"title"),compatTextStyle(t,"detail")):t.type==="treemap"?(convertNormalEmphasis(t.breadcrumb,"itemStyle"),each$8(t.levels,function(d){removeEC3NormalStatus(d)})):t.type==="tree"&&removeEC3NormalStatus(t.leaves)}}function toArr(t){return isArray$1(t)?t:t?[t]:[]}function toObj(t){return(isArray$1(t)?t[0]:t)||{}}function globalCompatStyle(t,n){each$6(toArr(t.series),function(r){isObject$2(r)&&processSeries(r)});var a=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];n&&a.push("valueAxis","categoryAxis","logAxis","timeAxis"),each$6(a,function(r){each$6(toArr(t[r]),function(o){o&&(compatTextStyle(o,"axisLabel"),compatTextStyle(o.axisPointer,"label"))})}),each$6(toArr(t.parallel),function(r){var o=r&&r.parallelAxisDefault;compatTextStyle(o,"axisLabel"),compatTextStyle(o&&o.axisPointer,"label")}),each$6(toArr(t.calendar),function(r){convertNormalEmphasis(r,"itemStyle"),compatTextStyle(r,"dayLabel"),compatTextStyle(r,"monthLabel"),compatTextStyle(r,"yearLabel")}),each$6(toArr(t.radar),function(r){compatTextStyle(r,"name"),r.name&&r.axisName==null&&(r.axisName=r.name,delete r.name),r.nameGap!=null&&r.axisNameGap==null&&(r.axisNameGap=r.nameGap,delete r.nameGap)}),each$6(toArr(t.geo),function(r){isObject$2(r)&&(compatEC3CommonStyles(r),each$6(toArr(r.regions),function(o){compatEC3CommonStyles(o)}))}),each$6(toArr(t.timeline),function(r){compatEC3CommonStyles(r),convertNormalEmphasis(r,"label"),convertNormalEmphasis(r,"itemStyle"),convertNormalEmphasis(r,"controlStyle",!0);var o=r.data;isArray$1(o)&&each$8(o,function(s){isObject$3(s)&&(convertNormalEmphasis(s,"label"),convertNormalEmphasis(s,"itemStyle"))})}),each$6(toArr(t.toolbox),function(r){convertNormalEmphasis(r,"iconStyle"),each$6(r.feature,function(o){convertNormalEmphasis(o,"iconStyle")})}),compatTextStyle(toObj(t.axisPointer),"label"),compatTextStyle(toObj(t.tooltip).axisPointer,"label")}function get(t,n){for(var a=n.split(","),r=t,o=0;o<a.length&&(r=r&&r[a[o]],r!=null);o++);return r}function set(t,n,a,r){for(var o=n.split(","),s=t,l,c=0;c<o.length-1;c++)l=o[c],s[l]==null&&(s[l]={}),s=s[l];s[o[c]]==null&&(s[o[c]]=a)}function compatLayoutProperties(t){t&&each$8(LAYOUT_PROPERTIES,function(n){n[0]in t&&!(n[1]in t)&&(t[n[1]]=t[n[0]])})}var LAYOUT_PROPERTIES=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],COMPATITABLE_COMPONENTS=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],BAR_ITEM_STYLE_MAP=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function compatBarItemStyle(t){var n=t&&t.itemStyle;if(n)for(var a=0;a<BAR_ITEM_STYLE_MAP.length;a++){var r=BAR_ITEM_STYLE_MAP[a][1],o=BAR_ITEM_STYLE_MAP[a][0];n[r]!=null&&(n[o]=n[r])}}function compatPieLabel(t){t&&t.alignTo==="edge"&&t.margin!=null&&t.edgeDistance==null&&(t.edgeDistance=t.margin)}function compatSunburstState(t){t&&t.downplay&&!t.blur&&(t.blur=t.downplay)}function compatGraphFocus(t){t&&t.focusNodeAdjacency!=null&&(t.emphasis=t.emphasis||{},t.emphasis.focus==null&&(t.emphasis.focus="adjacency"))}function traverseTree(t,n){if(t)for(var a=0;a<t.length;a++)n(t[a]),t[a]&&traverseTree(t[a].children,n)}function globalBackwardCompat(t,n){globalCompatStyle(t,n),t.series=normalizeToArray(t.series),each$8(t.series,function(a){if(isObject$3(a)){var r=a.type;if(r==="line")a.clipOverflow!=null&&(a.clip=a.clipOverflow);else if(r==="pie"||r==="gauge"){a.clockWise!=null&&(a.clockwise=a.clockWise),compatPieLabel(a.label);var o=a.data;if(o&&!isTypedArray(o))for(var s=0;s<o.length;s++)compatPieLabel(o[s]);a.hoverOffset!=null&&(a.emphasis=a.emphasis||{},(a.emphasis.scaleSize=null)&&(a.emphasis.scaleSize=a.hoverOffset))}else if(r==="gauge"){var l=get(a,"pointer.color");l!=null&&set(a,"itemStyle.color",l)}else if(r==="bar"){compatBarItemStyle(a),compatBarItemStyle(a.backgroundStyle),compatBarItemStyle(a.emphasis);var o=a.data;if(o&&!isTypedArray(o))for(var s=0;s<o.length;s++)typeof o[s]=="object"&&(compatBarItemStyle(o[s]),compatBarItemStyle(o[s]&&o[s].emphasis))}else if(r==="sunburst"){var c=a.highlightPolicy;c&&(a.emphasis=a.emphasis||{},a.emphasis.focus||(a.emphasis.focus=c)),compatSunburstState(a),traverseTree(a.data,compatSunburstState)}else r==="graph"||r==="sankey"?compatGraphFocus(a):r==="map"&&(a.mapType&&!a.map&&(a.map=a.mapType),a.mapLocation&&defaults(a,a.mapLocation));a.hoverAnimation!=null&&(a.emphasis=a.emphasis||{},a.emphasis&&a.emphasis.scale==null&&(a.emphasis.scale=a.hoverAnimation)),compatLayoutProperties(a)}}),t.dataRange&&(t.visualMap=t.dataRange),each$8(COMPATITABLE_COMPONENTS,function(a){var r=t[a];r&&(isArray$1(r)||(r=[r]),each$8(r,function(o){compatLayoutProperties(o)}))})}function dataStack(t){var n=createHashMap();t.eachSeries(function(a){var r=a.get("stack");if(r){var o=n.get(r)||n.set(r,[]),s=a.getData(),l={stackResultDimension:s.getCalculationInfo("stackResultDimension"),stackedOverDimension:s.getCalculationInfo("stackedOverDimension"),stackedDimension:s.getCalculationInfo("stackedDimension"),stackedByDimension:s.getCalculationInfo("stackedByDimension"),isStackedByIndex:s.getCalculationInfo("isStackedByIndex"),data:s,seriesModel:a};if(!l.stackedDimension||!(l.isStackedByIndex||l.stackedByDimension))return;o.push(l)}}),n.each(function(a){if(a.length!==0){var r=a[0].seriesModel,o=r.get("stackOrder")||"seriesAsc";o==="seriesDesc"&&a.reverse(),each$8(a,function(s,l){s.data.setCalculationInfo("stackedOnSeries",l>0?a[l-1].seriesModel:null)}),calculateStack(a)}})}function calculateStack(t){each$8(t,function(n,a){var r=[],o=[NaN,NaN],s=[n.stackResultDimension,n.stackedOverDimension],l=n.data,c=n.isStackedByIndex,u=n.seriesModel.get("stackStrategy")||"samesign";l.modify(s,function(d,f,v){var _=l.get(n.stackedDimension,v);if(isNaN(_))return o;var g,y;c?y=l.getRawIndex(v):g=l.get(n.stackedByDimension,v);for(var b=NaN,T=a-1;T>=0;T--){var S=t[T];if(c||(y=S.data.rawIndexOf(S.stackedByDimension,g)),y>=0){var C=S.data.getByRawIndex(S.stackResultDimension,y);if(u==="all"||u==="positive"&&C>0||u==="negative"&&C<0||u==="samesign"&&_>=0&&C>0||u==="samesign"&&_<=0&&C<0){_=addSafe(_,C),b=C;break}}}return r[0]=_,r[1]=b,r})})}var SourceImpl=function(){function t(n){this.data=n.data||(n.sourceFormat===SOURCE_FORMAT_KEYED_COLUMNS?{}:[]),this.sourceFormat=n.sourceFormat||SOURCE_FORMAT_UNKNOWN,this.seriesLayoutBy=n.seriesLayoutBy||SERIES_LAYOUT_BY_COLUMN,this.startIndex=n.startIndex||0,this.dimensionsDetectedCount=n.dimensionsDetectedCount,this.metaRawOption=n.metaRawOption;var a=this.dimensionsDefine=n.dimensionsDefine;if(a)for(var r=0;r<a.length;r++){var o=a[r];o.type==null&&guessOrdinal(this,r)===BE_ORDINAL.Must&&(o.type="ordinal")}}return t}();function isSourceInstance(t){return t instanceof SourceImpl}function createSource(t,n,a){a=a||detectSourceFormat(t);var r=n.seriesLayoutBy,o=determineSourceDimensions(t,a,r,n.sourceHeader,n.dimensions),s=new SourceImpl({data:t,sourceFormat:a,seriesLayoutBy:r,dimensionsDefine:o.dimensionsDefine,startIndex:o.startIndex,dimensionsDetectedCount:o.dimensionsDetectedCount,metaRawOption:clone$3(n)});return s}function createSourceFromSeriesDataOption(t){return new SourceImpl({data:t,sourceFormat:isTypedArray(t)?SOURCE_FORMAT_TYPED_ARRAY:SOURCE_FORMAT_ORIGINAL})}function cloneSourceShallow(t){return new SourceImpl({data:t.data,sourceFormat:t.sourceFormat,seriesLayoutBy:t.seriesLayoutBy,dimensionsDefine:clone$3(t.dimensionsDefine),startIndex:t.startIndex,dimensionsDetectedCount:t.dimensionsDetectedCount})}function detectSourceFormat(t){var n=SOURCE_FORMAT_UNKNOWN;if(isTypedArray(t))n=SOURCE_FORMAT_TYPED_ARRAY;else if(isArray$1(t)){t.length===0&&(n=SOURCE_FORMAT_ARRAY_ROWS);for(var a=0,r=t.length;a<r;a++){var o=t[a];if(o!=null){if(isArray$1(o)||isTypedArray(o)){n=SOURCE_FORMAT_ARRAY_ROWS;break}else if(isObject$3(o)){n=SOURCE_FORMAT_OBJECT_ROWS;break}}}}else if(isObject$3(t)){for(var s in t)if(hasOwn(t,s)&&isArrayLike(t[s])){n=SOURCE_FORMAT_KEYED_COLUMNS;break}}return n}function determineSourceDimensions(t,n,a,r,o){var s,l;if(!t)return{dimensionsDefine:normalizeDimensionsOption(o),startIndex:l,dimensionsDetectedCount:s};if(n===SOURCE_FORMAT_ARRAY_ROWS){var c=t;r==="auto"||r==null?arrayRowsTravelFirst(function(d){d!=null&&d!=="-"&&(isString(d)?l==null&&(l=1):l=0)},a,c,10):l=isNumber(r)?r:r?1:0,!o&&l===1&&(o=[],arrayRowsTravelFirst(function(d,f){o[f]=d!=null?d+"":""},a,c,1/0)),s=o?o.length:a===SERIES_LAYOUT_BY_ROW?c.length:c[0]?c[0].length:null}else if(n===SOURCE_FORMAT_OBJECT_ROWS)o||(o=objectRowsCollectDimensions(t));else if(n===SOURCE_FORMAT_KEYED_COLUMNS)o||(o=[],each$8(t,function(d,f){o.push(f)}));else if(n===SOURCE_FORMAT_ORIGINAL){var u=getDataItemValue(t[0]);s=isArray$1(u)&&u.length||1}return{startIndex:l,dimensionsDefine:normalizeDimensionsOption(o),dimensionsDetectedCount:s}}function objectRowsCollectDimensions(t){for(var n=0,a;n<t.length&&!(a=t[n++]););if(a)return keys(a)}function normalizeDimensionsOption(t){if(t){var n=createHashMap();return map$1(t,function(a,r){a=isObject$3(a)?a:{name:a};var o={name:a.name,displayName:a.displayName,type:a.type};if(o.name==null)return o;o.name+="",o.displayName==null&&(o.displayName=o.name);var s=n.get(o.name);return s?o.name+="-"+s.count++:n.set(o.name,{count:1}),o})}}function arrayRowsTravelFirst(t,n,a,r){if(n===SERIES_LAYOUT_BY_ROW)for(var o=0;o<a.length&&o<r;o++)t(a[o]?a[o][0]:null,o);else for(var s=a[0]||[],o=0;o<s.length&&o<r;o++)t(s[o],o)}function shouldRetrieveDataByName(t){var n=t.sourceFormat;return n===SOURCE_FORMAT_OBJECT_ROWS||n===SOURCE_FORMAT_KEYED_COLUMNS}var _a,_b,_c,_d,providerMethods,mountMethods,DefaultDataProvider=function(){function t(n,a){var r=isSourceInstance(n)?n:createSourceFromSeriesDataOption(n);this._source=r;var o=this._data=r.data,s=r.sourceFormat;r.seriesLayoutBy,s===SOURCE_FORMAT_TYPED_ARRAY&&(this._offset=0,this._dimSize=a,this._data=o),mountMethods(this,o,r)}return t.prototype.getSource=function(){return this._source},t.prototype.count=function(){return 0},t.prototype.getItem=function(n,a){},t.prototype.appendData=function(n){},t.prototype.clean=function(){},t.protoInitialize=function(){var n=t.prototype;n.pure=!1,n.persistent=!0}(),t.internalField=function(){var n;mountMethods=function(l,c,u){var d=u.sourceFormat,f=u.seriesLayoutBy,v=u.startIndex,_=u.dimensionsDefine,g=providerMethods[getMethodMapKey(d,f)];if(extend(l,g),d===SOURCE_FORMAT_TYPED_ARRAY)l.getItem=a,l.count=o,l.fillStorage=r;else{var y=getRawSourceItemGetter(d,f);l.getItem=bind$1(y,null,c,v,_);var b=getRawSourceDataCounter(d,f);l.count=bind$1(b,null,c,v,_)}};var a=function(l,c){l=l-this._offset,c=c||[];for(var u=this._data,d=this._dimSize,f=d*l,v=0;v<d;v++)c[v]=u[f+v];return c},r=function(l,c,u,d){for(var f=this._data,v=this._dimSize,_=0;_<v;_++){for(var g=d[_],y=g[0]==null?1/0:g[0],b=g[1]==null?-1/0:g[1],T=c-l,S=u[_],C=0;C<T;C++){var E=f[C*v+_];S[l+C]=E,E<y&&(y=E),E>b&&(b=E)}g[0]=y,g[1]=b}},o=function(){return this._data?this._data.length/this._dimSize:0};providerMethods=(n={},n[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]={pure:!0,appendData:s},n[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},n[SOURCE_FORMAT_OBJECT_ROWS]={pure:!0,appendData:s},n[SOURCE_FORMAT_KEYED_COLUMNS]={pure:!0,appendData:function(l){var c=this._data;each$8(l,function(u,d){for(var f=c[d]||(c[d]=[]),v=0;v<(u||[]).length;v++)f.push(u[v])})}},n[SOURCE_FORMAT_ORIGINAL]={appendData:s},n[SOURCE_FORMAT_TYPED_ARRAY]={persistent:!1,pure:!0,appendData:function(l){this._data=l},clean:function(){this._offset+=this.count(),this._data=null}},n);function s(l){for(var c=0;c<l.length;c++)this._data.push(l[c])}}(),t}(),validateSimply=function(t){isArray$1(t)||error("series.data or dataset.source must be an array.")};_a={},_a[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]=validateSimply,_a[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]=validateSimply,_a[SOURCE_FORMAT_OBJECT_ROWS]=validateSimply,_a[SOURCE_FORMAT_KEYED_COLUMNS]=function(t,n){for(var a=0;a<n.length;a++){var r=n[a].name;r==null&&error("dimension name must not be null/undefined.")}},_a[SOURCE_FORMAT_ORIGINAL]=validateSimply;var getItemSimply=function(t,n,a,r){return t[r]},rawSourceItemGetterMap=(_b={},_b[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]=function(t,n,a,r){return t[r+n]},_b[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]=function(t,n,a,r,o){r+=n;for(var s=o||[],l=t,c=0;c<l.length;c++){var u=l[c];s[c]=u?u[r]:null}return s},_b[SOURCE_FORMAT_OBJECT_ROWS]=getItemSimply,_b[SOURCE_FORMAT_KEYED_COLUMNS]=function(t,n,a,r,o){for(var s=o||[],l=0;l<a.length;l++){var c=a[l].name,u=c!=null?t[c]:null;s[l]=u?u[r]:null}return s},_b[SOURCE_FORMAT_ORIGINAL]=getItemSimply,_b);function getRawSourceItemGetter(t,n){var a=rawSourceItemGetterMap[getMethodMapKey(t,n)];return a}var countSimply=function(t,n,a){return t.length},rawSourceDataCounterMap=(_c={},_c[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]=function(t,n,a){return Math.max(0,t.length-n)},_c[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]=function(t,n,a){var r=t[0];return r?Math.max(0,r.length-n):0},_c[SOURCE_FORMAT_OBJECT_ROWS]=countSimply,_c[SOURCE_FORMAT_KEYED_COLUMNS]=function(t,n,a){var r=a[0].name,o=r!=null?t[r]:null;return o?o.length:0},_c[SOURCE_FORMAT_ORIGINAL]=countSimply,_c);function getRawSourceDataCounter(t,n){var a=rawSourceDataCounterMap[getMethodMapKey(t,n)];return a}var getRawValueSimply=function(t,n,a){return t[n]},rawSourceValueGetterMap=(_d={},_d[SOURCE_FORMAT_ARRAY_ROWS]=getRawValueSimply,_d[SOURCE_FORMAT_OBJECT_ROWS]=function(t,n,a){return t[a]},_d[SOURCE_FORMAT_KEYED_COLUMNS]=getRawValueSimply,_d[SOURCE_FORMAT_ORIGINAL]=function(t,n,a){var r=getDataItemValue(t);return r instanceof Array?r[n]:r},_d[SOURCE_FORMAT_TYPED_ARRAY]=getRawValueSimply,_d);function getRawSourceValueGetter(t){var n=rawSourceValueGetterMap[t];return n}function getMethodMapKey(t,n){return t===SOURCE_FORMAT_ARRAY_ROWS?t+"_"+n:t}function retrieveRawValue(t,n,a){if(t){var r=t.getRawDataItem(n);if(r!=null){var o=t.getStore(),s=o.getSource().sourceFormat;if(a!=null){var l=t.getDimensionIndex(a),c=o.getDimensionProperty(l);return getRawSourceValueGetter(s)(r,l,c)}else{var u=r;return s===SOURCE_FORMAT_ORIGINAL&&(u=getDataItemValue(r)),u}}}}var DIMENSION_LABEL_REG=/\{@(.+?)\}/g,DataFormatMixin=function(){function t(){}return t.prototype.getDataParams=function(n,a){var r=this.getData(a),o=this.getRawValue(n,a),s=r.getRawIndex(n),l=r.getName(n),c=r.getRawDataItem(n),u=r.getItemVisual(n,"style"),d=u&&u[r.getItemVisual(n,"drawType")||"fill"],f=u&&u.stroke,v=this.mainType,_=v==="series",g=r.userOutput&&r.userOutput.get();return{componentType:v,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:_?this.subType:null,seriesIndex:this.seriesIndex,seriesId:_?this.id:null,seriesName:_?this.name:null,name:l,dataIndex:s,data:c,dataType:a,value:o,color:d,borderColor:f,dimensionNames:g?g.fullDimensions:null,encode:g?g.encode:null,$vars:["seriesName","name","value"]}},t.prototype.getFormattedLabel=function(n,a,r,o,s,l){a=a||"normal";var c=this.getData(r),u=this.getDataParams(n,r);if(l&&(u.value=l.interpolatedValue),o!=null&&isArray$1(u.value)&&(u.value=u.value[o]),!s){var d=c.getItemModel(n);s=d.get(a==="normal"?["label","formatter"]:[a,"label","formatter"])}if(isFunction(s))return u.status=a,u.dimensionIndex=o,s(u);if(isString(s)){var f=formatTpl(s,u);return f.replace(DIMENSION_LABEL_REG,function(v,_){var g=_.length,y=_;y.charAt(0)==="["&&y.charAt(g-1)==="]"&&(y=+y.slice(1,g-1));var b=retrieveRawValue(c,n,y);if(l&&isArray$1(l.interpolatedValue)){var T=c.getDimensionIndex(y);T>=0&&(b=l.interpolatedValue[T])}return b!=null?b+"":""})}},t.prototype.getRawValue=function(n,a){return retrieveRawValue(this.getData(a),n)},t.prototype.formatTooltip=function(n,a,r){},t}();function normalizeTooltipFormatResult(t){var n,a;return isObject$3(t)?t.type&&(a=t):n=t,{text:n,frag:a}}function createTask(t){return new Task(t)}var Task=function(){function t(n){n=n||{},this._reset=n.reset,this._plan=n.plan,this._count=n.count,this._onDirty=n.onDirty,this._dirty=!0}return t.prototype.perform=function(n){var a=this._upstream,r=n&&n.skip;if(this._dirty&&a){var o=this.context;o.data=o.outputData=a.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var s;this._plan&&!r&&(s=this._plan(this.context));var l=f(this._modBy),c=this._modDataCount||0,u=f(n&&n.modBy),d=n&&n.modDataCount||0;(l!==u||c!==d)&&(s="reset");function f(C){return!(C>=1)&&(C=1),C}var v;(this._dirty||s==="reset")&&(this._dirty=!1,v=this._doReset(r)),this._modBy=u,this._modDataCount=d;var _=n&&n.step;if(a?this._dueEnd=a._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var g=this._dueIndex,y=Math.min(_!=null?this._dueIndex+_:1/0,this._dueEnd);if(!r&&(v||g<y)){var b=this._progress;if(isArray$1(b))for(var T=0;T<b.length;T++)this._doProgress(b[T],g,y,u,d);else this._doProgress(b,g,y,u,d)}this._dueIndex=y;var S=this._settedOutputEnd!=null?this._settedOutputEnd:y;this._outputDueEnd=S}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},t.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},t.prototype._doProgress=function(n,a,r,o,s){iterator.reset(a,r,o,s),this._callingProgress=n,this._callingProgress({start:a,end:r,count:r-a,next:iterator.next},this.context)},t.prototype._doReset=function(n){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var a,r;!n&&this._reset&&(a=this._reset(this.context),a&&a.progress&&(r=a.forceFirstProgress,a=a.progress),isArray$1(a)&&!a.length&&(a=null)),this._progress=a,this._modBy=this._modDataCount=null;var o=this._downstream;return o&&o.dirty(),r},t.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},t.prototype.pipe=function(n){(this._downstream!==n||this._dirty)&&(this._downstream=n,n._upstream=this,n.dirty())},t.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},t.prototype.getUpstream=function(){return this._upstream},t.prototype.getDownstream=function(){return this._downstream},t.prototype.setOutputEnd=function(n){this._outputDueEnd=this._settedOutputEnd=n},t}(),iterator=function(){var t,n,a,r,o,s={reset:function(u,d,f,v){n=u,t=d,a=f,r=v,o=Math.ceil(r/a),s.next=a>1&&r>0?c:l}};return s;function l(){return n<t?n++:null}function c(){var u=n%o*a+Math.ceil(n/o),d=n>=t?null:u<r?u:n;return n++,d}}();function parseDataValue(t,n){var a=n&&n.type;return a==="ordinal"?t:(a==="time"&&!isNumber(t)&&t!=null&&t!=="-"&&(t=+parseDate(t)),t==null||t===""?NaN:Number(t))}createHashMap({number:function(t){return parseFloat(t)},time:function(t){return+parseDate(t)},trim:function(t){return isString(t)?trim(t):t}});var SortOrderComparator=function(){function t(n,a){var r=n==="desc";this._resultLT=r?1:-1,a==null&&(a=r?"min":"max"),this._incomparable=a==="min"?-1/0:1/0}return t.prototype.evaluate=function(n,a){var r=isNumber(n)?n:numericToNumber(n),o=isNumber(a)?a:numericToNumber(a),s=isNaN(r),l=isNaN(o);if(s&&(r=this._incomparable),l&&(o=this._incomparable),s&&l){var c=isString(n),u=isString(a);c&&(r=u?n:0),u&&(o=c?a:0)}return r<o?this._resultLT:r>o?-this._resultLT:0},t}(),ExternalSource=function(){function t(){}return t.prototype.getRawData=function(){throw new Error("not supported")},t.prototype.getRawDataItem=function(n){throw new Error("not supported")},t.prototype.cloneRawData=function(){},t.prototype.getDimensionInfo=function(n){},t.prototype.cloneAllDimensionInfo=function(){},t.prototype.count=function(){},t.prototype.retrieveValue=function(n,a){},t.prototype.retrieveValueFromItem=function(n,a){},t.prototype.convertValue=function(n,a){return parseDataValue(n,a)},t}();function createExternalSource(t,n){var a=new ExternalSource,r=t.data,o=a.sourceFormat=t.sourceFormat,s=t.startIndex,l="";t.seriesLayoutBy!==SERIES_LAYOUT_BY_COLUMN&&throwError(l);var c=[],u={},d=t.dimensionsDefine;if(d)each$8(d,function(b,T){var S=b.name,C={index:T,name:S,displayName:b.displayName};if(c.push(C),S!=null){var E="";hasOwn(u,S)&&throwError(E),u[S]=C}});else for(var f=0;f<t.dimensionsDetectedCount;f++)c.push({index:f});var v=getRawSourceItemGetter(o,SERIES_LAYOUT_BY_COLUMN);n.__isBuiltIn&&(a.getRawDataItem=function(b){return v(r,s,c,b)},a.getRawData=bind$1(getRawData,null,t)),a.cloneRawData=bind$1(cloneRawData,null,t);var _=getRawSourceDataCounter(o,SERIES_LAYOUT_BY_COLUMN);a.count=bind$1(_,null,r,s,c);var g=getRawSourceValueGetter(o);a.retrieveValue=function(b,T){var S=v(r,s,c,b);return y(S,T)};var y=a.retrieveValueFromItem=function(b,T){if(b!=null){var S=c[T];if(S)return g(b,T,S.name)}};return a.getDimensionInfo=bind$1(getDimensionInfo,null,c,u),a.cloneAllDimensionInfo=bind$1(cloneAllDimensionInfo,null,c),a}function getRawData(t){var n=t.sourceFormat;if(!isSupportedSourceFormat(n)){var a="";throwError(a)}return t.data}function cloneRawData(t){var n=t.sourceFormat,a=t.data;if(!isSupportedSourceFormat(n)){var r="";throwError(r)}if(n===SOURCE_FORMAT_ARRAY_ROWS){for(var o=[],s=0,l=a.length;s<l;s++)o.push(a[s].slice());return o}else if(n===SOURCE_FORMAT_OBJECT_ROWS){for(var o=[],s=0,l=a.length;s<l;s++)o.push(extend({},a[s]));return o}}function getDimensionInfo(t,n,a){if(a!=null){if(isNumber(a)||!isNaN(a)&&!hasOwn(n,a))return t[a];if(hasOwn(n,a))return n[a]}}function cloneAllDimensionInfo(t){return clone$3(t)}var externalTransformMap=createHashMap();function registerExternalTransform(t){t=clone$3(t);var n=t.type,a="";n||throwError(a);var r=n.split(":");r.length!==2&&throwError(a);var o=!1;r[0]==="echarts"&&(n=r[1],o=!0),t.__isBuiltIn=o,externalTransformMap.set(n,t)}function applyDataTransform(t,n,a){var r=normalizeToArray(t),o=r.length,s="";o||throwError(s);for(var l=0,c=o;l<c;l++){var u=r[l];n=applySingleDataTransform(u,n),l!==c-1&&(n.length=Math.max(n.length,1))}return n}function applySingleDataTransform(t,n,a,r){var o="";n.length||throwError(o),isObject$3(t)||throwError(o);var s=t.type,l=externalTransformMap.get(s);l||throwError(o);var c=map$1(n,function(d){return createExternalSource(d,l)}),u=normalizeToArray(l.transform({upstream:c[0],upstreamList:c,config:clone$3(t.config)}));return map$1(u,function(d,f){var v="";isObject$3(d)||throwError(v),d.data||throwError(v);var _=detectSourceFormat(d.data);isSupportedSourceFormat(_)||throwError(v);var g,y=n[0];if(y&&f===0&&!d.dimensions){var b=y.startIndex;b&&(d.data=y.data.slice(0,b).concat(d.data)),g={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN,sourceHeader:b,dimensions:y.metaRawOption.dimensions}}else g={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN,sourceHeader:0,dimensions:d.dimensions};return createSource(d.data,g,null)})}function isSupportedSourceFormat(t){return t===SOURCE_FORMAT_ARRAY_ROWS||t===SOURCE_FORMAT_OBJECT_ROWS}var UNDEFINED="undefined",CtorUint32Array=typeof Uint32Array===UNDEFINED?Array:Uint32Array,CtorUint16Array=typeof Uint16Array===UNDEFINED?Array:Uint16Array,CtorInt32Array$1=typeof Int32Array===UNDEFINED?Array:Int32Array,CtorFloat64Array=typeof Float64Array===UNDEFINED?Array:Float64Array,dataCtors={float:CtorFloat64Array,int:CtorInt32Array$1,ordinal:Array,number:Array,time:CtorFloat64Array},defaultDimValueGetters;function getIndicesCtor(t){return t>65535?CtorUint32Array:CtorUint16Array}function getInitialExtent(){return[1/0,-1/0]}function cloneChunk(t){var n=t.constructor;return n===Array?t.slice():new n(t)}function prepareStore(t,n,a,r,o){var s=dataCtors[a||"float"];if(o){var l=t[n],c=l&&l.length;if(c!==r){for(var u=new s(r),d=0;d<c;d++)u[d]=l[d];t[n]=u}}else t[n]=new s(r)}var DataStore=function(){function t(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=createHashMap()}return t.prototype.initData=function(n,a,r){this._provider=n,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var o=n.getSource(),s=this.defaultDimValueGetter=defaultDimValueGetters[o.sourceFormat];this._dimValueGetter=r||s,this._rawExtent=[],shouldRetrieveDataByName(o),this._dimensions=map$1(a,function(l){return{type:l.type,property:l.property}}),this._initDataFromProvider(0,n.count())},t.prototype.getProvider=function(){return this._provider},t.prototype.getSource=function(){return this._provider.getSource()},t.prototype.ensureCalculationDimension=function(n,a){var r=this._calcDimNameToIdx,o=this._dimensions,s=r.get(n);if(s!=null){if(o[s].type===a)return s}else s=o.length;return o[s]={type:a},r.set(n,s),this._chunks[s]=new dataCtors[a||"float"](this._rawCount),this._rawExtent[s]=getInitialExtent(),s},t.prototype.collectOrdinalMeta=function(n,a){var r=this._chunks[n],o=this._dimensions[n],s=this._rawExtent,l=o.ordinalOffset||0,c=r.length;l===0&&(s[n]=getInitialExtent());for(var u=s[n],d=l;d<c;d++){var f=r[d]=a.parseAndCollect(r[d]);isNaN(f)||(u[0]=Math.min(f,u[0]),u[1]=Math.max(f,u[1]))}o.ordinalMeta=a,o.ordinalOffset=c,o.type="ordinal"},t.prototype.getOrdinalMeta=function(n){var a=this._dimensions[n],r=a.ordinalMeta;return r},t.prototype.getDimensionProperty=function(n){var a=this._dimensions[n];return a&&a.property},t.prototype.appendData=function(n){var a=this._provider,r=this.count();a.appendData(n);var o=a.count();return a.persistent||(o+=r),r<o&&this._initDataFromProvider(r,o,!0),[r,o]},t.prototype.appendValues=function(n,a){for(var r=this._chunks,o=this._dimensions,s=o.length,l=this._rawExtent,c=this.count(),u=c+Math.max(n.length,a||0),d=0;d<s;d++){var f=o[d];prepareStore(r,d,f.type,u,!0)}for(var v=[],_=c;_<u;_++)for(var g=_-c,y=0;y<s;y++){var f=o[y],b=defaultDimValueGetters.arrayRows.call(this,n[g]||v,f.property,g,y);r[y][_]=b;var T=l[y];b<T[0]&&(T[0]=b),b>T[1]&&(T[1]=b)}return this._rawCount=this._count=u,{start:c,end:u}},t.prototype._initDataFromProvider=function(n,a,r){for(var o=this._provider,s=this._chunks,l=this._dimensions,c=l.length,u=this._rawExtent,d=map$1(l,function(C){return C.property}),f=0;f<c;f++){var v=l[f];u[f]||(u[f]=getInitialExtent()),prepareStore(s,f,v.type,a,r)}if(o.fillStorage)o.fillStorage(n,a,s,u);else for(var _=[],g=n;g<a;g++){_=o.getItem(g,_);for(var y=0;y<c;y++){var b=s[y],T=this._dimValueGetter(_,d[y],g,y);b[g]=T;var S=u[y];T<S[0]&&(S[0]=T),T>S[1]&&(S[1]=T)}}!o.persistent&&o.clean&&o.clean(),this._rawCount=this._count=a,this._extent=[]},t.prototype.count=function(){return this._count},t.prototype.get=function(n,a){if(!(a>=0&&a<this._count))return NaN;var r=this._chunks[n];return r?r[this.getRawIndex(a)]:NaN},t.prototype.getValues=function(n,a){var r=[],o=[];if(a==null){a=n,n=[];for(var s=0;s<this._dimensions.length;s++)o.push(s)}else o=n;for(var s=0,l=o.length;s<l;s++)r.push(this.get(o[s],a));return r},t.prototype.getByRawIndex=function(n,a){if(!(a>=0&&a<this._rawCount))return NaN;var r=this._chunks[n];return r?r[a]:NaN},t.prototype.getSum=function(n){var a=this._chunks[n],r=0;if(a)for(var o=0,s=this.count();o<s;o++){var l=this.get(n,o);isNaN(l)||(r+=l)}return r},t.prototype.getMedian=function(n){var a=[];this.each([n],function(s){isNaN(s)||a.push(s)});var r=a.sort(function(s,l){return s-l}),o=this.count();return o===0?0:o%2===1?r[(o-1)/2]:(r[o/2]+r[o/2-1])/2},t.prototype.indexOfRawIndex=function(n){if(n>=this._rawCount||n<0)return-1;if(!this._indices)return n;var a=this._indices,r=a[n];if(r!=null&&r<this._count&&r===n)return n;for(var o=0,s=this._count-1;o<=s;){var l=(o+s)/2|0;if(a[l]<n)o=l+1;else if(a[l]>n)s=l-1;else return l}return-1},t.prototype.getIndices=function(){var n,a=this._indices;if(a){var r=a.constructor,o=this._count;if(r===Array){n=new r(o);for(var s=0;s<o;s++)n[s]=a[s]}else n=new r(a.buffer,0,o)}else{var r=getIndicesCtor(this._rawCount);n=new r(this.count());for(var s=0;s<n.length;s++)n[s]=s}return n},t.prototype.filter=function(n,a){if(!this._count)return this;for(var r=this.clone(),o=r.count(),s=getIndicesCtor(r._rawCount),l=new s(o),c=[],u=n.length,d=0,f=n[0],v=r._chunks,_=0;_<o;_++){var g=void 0,y=r.getRawIndex(_);if(u===0)g=a(_);else if(u===1){var b=v[f][y];g=a(b,_)}else{for(var T=0;T<u;T++)c[T]=v[n[T]][y];c[T]=_,g=a.apply(null,c)}g&&(l[d++]=y)}return d<o&&(r._indices=l),r._count=d,r._extent=[],r._updateGetRawIdx(),r},t.prototype.selectRange=function(n){var a=this.clone(),r=a._count;if(!r)return this;var o=keys(n),s=o.length;if(!s)return this;var l=a.count(),c=getIndicesCtor(a._rawCount),u=new c(l),d=0,f=o[0],v=n[f][0],_=n[f][1],g=a._chunks,y=!1;if(!a._indices){var b=0;if(s===1){for(var T=g[o[0]],S=0;S<r;S++){var C=T[S];(C>=v&&C<=_||isNaN(C))&&(u[d++]=b),b++}y=!0}else if(s===2){for(var T=g[o[0]],E=g[o[1]],x=n[o[1]][0],A=n[o[1]][1],S=0;S<r;S++){var C=T[S],N=E[S];(C>=v&&C<=_||isNaN(C))&&(N>=x&&N<=A||isNaN(N))&&(u[d++]=b),b++}y=!0}}if(!y)if(s===1)for(var S=0;S<l;S++){var M=a.getRawIndex(S),C=g[o[0]][M];(C>=v&&C<=_||isNaN(C))&&(u[d++]=M)}else for(var S=0;S<l;S++){for(var R=!0,M=a.getRawIndex(S),D=0;D<s;D++){var L=o[D],C=g[L][M];(C<n[L][0]||C>n[L][1])&&(R=!1)}R&&(u[d++]=a.getRawIndex(S))}return d<l&&(a._indices=u),a._count=d,a._extent=[],a._updateGetRawIdx(),a},t.prototype.map=function(n,a){var r=this.clone(n);return this._updateDims(r,n,a),r},t.prototype.modify=function(n,a){this._updateDims(this,n,a)},t.prototype._updateDims=function(n,a,r){for(var o=n._chunks,s=[],l=a.length,c=n.count(),u=[],d=n._rawExtent,f=0;f<a.length;f++)d[a[f]]=getInitialExtent();for(var v=0;v<c;v++){for(var _=n.getRawIndex(v),g=0;g<l;g++)u[g]=o[a[g]][_];u[l]=v;var y=r&&r.apply(null,u);if(y!=null){typeof y!="object"&&(s[0]=y,y=s);for(var f=0;f<y.length;f++){var b=a[f],T=y[f],S=d[b],C=o[b];C&&(C[_]=T),T<S[0]&&(S[0]=T),T>S[1]&&(S[1]=T)}}}},t.prototype.lttbDownSample=function(n,a){var r=this.clone([n],!0),o=r._chunks,s=o[n],l=this.count(),c=0,u=Math.floor(1/a),d=this.getRawIndex(0),f,v,_,g=new(getIndicesCtor(this._rawCount))(Math.min((Math.ceil(l/u)+2)*2,l));g[c++]=d;for(var y=1;y<l-1;y+=u){for(var b=Math.min(y+u,l-1),T=Math.min(y+u*2,l),S=(T+b)/2,C=0,E=b;E<T;E++){var x=this.getRawIndex(E),A=s[x];isNaN(A)||(C+=A)}C/=T-b;var N=y,M=Math.min(y+u,l),R=y-1,D=s[d];f=-1,_=N;for(var L=-1,I=0,E=N;E<M;E++){var x=this.getRawIndex(E),A=s[x];if(isNaN(A)){I++,L<0&&(L=x);continue}v=Math.abs((R-S)*(A-D)-(R-E)*(C-D)),v>f&&(f=v,_=x)}I>0&&I<M-N&&(g[c++]=Math.min(L,_),_=Math.max(L,_)),g[c++]=_,d=_}return g[c++]=this.getRawIndex(l-1),r._count=c,r._indices=g,r.getRawIndex=this._getRawIdx,r},t.prototype.minmaxDownSample=function(n,a){for(var r=this.clone([n],!0),o=r._chunks,s=Math.floor(1/a),l=o[n],c=this.count(),u=new(getIndicesCtor(this._rawCount))(Math.ceil(c/s)*2),d=0,f=0;f<c;f+=s){var v=f,_=l[this.getRawIndex(v)],g=f,y=l[this.getRawIndex(g)],b=s;f+s>c&&(b=c-f);for(var T=0;T<b;T++){var S=this.getRawIndex(f+T),C=l[S];C<_&&(_=C,v=f+T),C>y&&(y=C,g=f+T)}var E=this.getRawIndex(v),x=this.getRawIndex(g);v<g?(u[d++]=E,u[d++]=x):(u[d++]=x,u[d++]=E)}return r._count=d,r._indices=u,r._updateGetRawIdx(),r},t.prototype.downSample=function(n,a,r,o){for(var s=this.clone([n],!0),l=s._chunks,c=[],u=Math.floor(1/a),d=l[n],f=this.count(),v=s._rawExtent[n]=getInitialExtent(),_=new(getIndicesCtor(this._rawCount))(Math.ceil(f/u)),g=0,y=0;y<f;y+=u){u>f-y&&(u=f-y,c.length=u);for(var b=0;b<u;b++){var T=this.getRawIndex(y+b);c[b]=d[T]}var S=r(c),C=this.getRawIndex(Math.min(y+o(c,S)||0,f-1));d[C]=S,S<v[0]&&(v[0]=S),S>v[1]&&(v[1]=S),_[g++]=C}return s._count=g,s._indices=_,s._updateGetRawIdx(),s},t.prototype.each=function(n,a){if(this._count)for(var r=n.length,o=this._chunks,s=0,l=this.count();s<l;s++){var c=this.getRawIndex(s);switch(r){case 0:a(s);break;case 1:a(o[n[0]][c],s);break;case 2:a(o[n[0]][c],o[n[1]][c],s);break;default:for(var u=0,d=[];u<r;u++)d[u]=o[n[u]][c];d[u]=s,a.apply(null,d)}}},t.prototype.getDataExtent=function(n){var a=this._chunks[n],r=getInitialExtent();if(!a)return r;var o=this.count(),s=!this._indices,l;if(s)return this._rawExtent[n].slice();if(l=this._extent[n],l)return l.slice();l=r;for(var c=l[0],u=l[1],d=0;d<o;d++){var f=this.getRawIndex(d),v=a[f];v<c&&(c=v),v>u&&(u=v)}return l=[c,u],this._extent[n]=l,l},t.prototype.getRawDataItem=function(n){var a=this.getRawIndex(n);if(this._provider.persistent)return this._provider.getItem(a);for(var r=[],o=this._chunks,s=0;s<o.length;s++)r.push(o[s][a]);return r},t.prototype.clone=function(n,a){var r=new t,o=this._chunks,s=n&&reduce(n,function(c,u){return c[u]=!0,c},{});if(s)for(var l=0;l<o.length;l++)r._chunks[l]=s[l]?cloneChunk(o[l]):o[l];else r._chunks=o;return this._copyCommonProps(r),a||(r._indices=this._cloneIndices()),r._updateGetRawIdx(),r},t.prototype._copyCommonProps=function(n){n._count=this._count,n._rawCount=this._rawCount,n._provider=this._provider,n._dimensions=this._dimensions,n._extent=clone$3(this._extent),n._rawExtent=clone$3(this._rawExtent)},t.prototype._cloneIndices=function(){if(this._indices){var n=this._indices.constructor,a=void 0;if(n===Array){var r=this._indices.length;a=new n(r);for(var o=0;o<r;o++)a[o]=this._indices[o]}else a=new n(this._indices);return a}return null},t.prototype._getRawIdxIdentity=function(n){return n},t.prototype._getRawIdx=function(n){return n<this._count&&n>=0?this._indices[n]:-1},t.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},t.internalField=function(){function n(a,r,o,s){return parseDataValue(a[s],this._dimensions[s])}defaultDimValueGetters={arrayRows:n,objectRows:function(a,r,o,s){return parseDataValue(a[r],this._dimensions[s])},keyedColumns:n,original:function(a,r,o,s){var l=a&&(a.value==null?a:a.value);return parseDataValue(l instanceof Array?l[s]:l,this._dimensions[s])},typedArray:function(a,r,o,s){return a[s]}}}(),t}(),SourceManager=function(){function t(n){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=n}return t.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},t.prototype._setLocalSource=function(n,a){this._sourceList=n,this._upstreamSignList=a,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},t.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},t.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},t.prototype._createSource=function(){this._setLocalSource([],[]);var n=this._sourceHost,a=this._getUpstreamSourceManagers(),r=!!a.length,o,s;if(isSeries(n)){var l=n,c=void 0,u=void 0,d=void 0;if(r){var f=a[0];f.prepareSource(),d=f.getSource(),c=d.data,u=d.sourceFormat,s=[f._getVersionSign()]}else c=l.get("data",!0),u=isTypedArray(c)?SOURCE_FORMAT_TYPED_ARRAY:SOURCE_FORMAT_ORIGINAL,s=[];var v=this._getSourceMetaRawOption()||{},_=d&&d.metaRawOption||{},g=retrieve2(v.seriesLayoutBy,_.seriesLayoutBy)||null,y=retrieve2(v.sourceHeader,_.sourceHeader),b=retrieve2(v.dimensions,_.dimensions),T=g!==_.seriesLayoutBy||!!y!=!!_.sourceHeader||b;o=T?[createSource(c,{seriesLayoutBy:g,sourceHeader:y,dimensions:b},u)]:[]}else{var S=n;if(r){var C=this._applyTransform(a);o=C.sourceList,s=C.upstreamSignList}else{var E=S.get("source",!0);o=[createSource(E,this._getSourceMetaRawOption(),null)],s=[]}}this._setLocalSource(o,s)},t.prototype._applyTransform=function(n){var a=this._sourceHost,r=a.get("transform",!0),o=a.get("fromTransformResult",!0);if(o!=null){var s="";n.length!==1&&doThrow(s)}var l,c=[],u=[];return each$8(n,function(d){d.prepareSource();var f=d.getSource(o||0),v="";o!=null&&!f&&doThrow(v),c.push(f),u.push(d._getVersionSign())}),r?l=applyDataTransform(r,c,{datasetIndex:a.componentIndex}):o!=null&&(l=[cloneSourceShallow(c[0])]),{sourceList:l,upstreamSignList:u}},t.prototype._isDirty=function(){if(this._dirty)return!0;for(var n=this._getUpstreamSourceManagers(),a=0;a<n.length;a++){var r=n[a];if(r._isDirty()||this._upstreamSignList[a]!==r._getVersionSign())return!0}},t.prototype.getSource=function(n){n=n||0;var a=this._sourceList[n];if(!a){var r=this._getUpstreamSourceManagers();return r[0]&&r[0].getSource(n)}return a},t.prototype.getSharedDataStore=function(n){var a=n.makeStoreSchema();return this._innerGetDataStore(a.dimensions,n.source,a.hash)},t.prototype._innerGetDataStore=function(n,a,r){var o=0,s=this._storeList,l=s[o];l||(l=s[o]={});var c=l[r];if(!c){var u=this._getUpstreamSourceManagers()[0];isSeries(this._sourceHost)&&u?c=u._innerGetDataStore(n,a,r):(c=new DataStore,c.initData(new DefaultDataProvider(a,n.length),n)),l[r]=c}return c},t.prototype._getUpstreamSourceManagers=function(){var n=this._sourceHost;if(isSeries(n)){var a=querySeriesUpstreamDatasetModel(n);return a?[a.getSourceManager()]:[]}else return map$1(queryDatasetUpstreamDatasetModels(n),function(r){return r.getSourceManager()})},t.prototype._getSourceMetaRawOption=function(){var n=this._sourceHost,a,r,o;if(isSeries(n))a=n.get("seriesLayoutBy",!0),r=n.get("sourceHeader",!0),o=n.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var s=n;a=s.get("seriesLayoutBy",!0),r=s.get("sourceHeader",!0),o=s.get("dimensions",!0)}return{seriesLayoutBy:a,sourceHeader:r,dimensions:o}},t}();function isSeries(t){return t.mainType==="series"}function doThrow(t){throw new Error(t)}var TOOLTIP_LINE_HEIGHT_CSS="line-height:1";function getTooltipLineHeight(t){var n=t.lineHeight;return n==null?TOOLTIP_LINE_HEIGHT_CSS:"line-height:"+encodeHTML(n+"")+"px"}function getTooltipTextStyle(t,n){var a=t.color||tokens.color.tertiary,r=t.fontSize||12,o=t.fontWeight||"400",s=t.color||tokens.color.secondary,l=t.fontSize||14,c=t.fontWeight||"900";return n==="html"?{nameStyle:"font-size:"+encodeHTML(r+"")+"px;color:"+encodeHTML(a)+";font-weight:"+encodeHTML(o+""),valueStyle:"font-size:"+encodeHTML(l+"")+"px;color:"+encodeHTML(s)+";font-weight:"+encodeHTML(c+"")}:{nameStyle:{fontSize:r,fill:a,fontWeight:o},valueStyle:{fontSize:l,fill:s,fontWeight:c}}}var HTML_GAPS=[0,10,20,30],RICH_TEXT_GAPS=["",`
`,`

`,`


`];function createTooltipMarkup(t,n){return n.type=t,n}function isSectionFragment(t){return t.type==="section"}function getBuilder(t){return isSectionFragment(t)?buildSection:buildNameValue}function getBlockGapLevel(t){if(isSectionFragment(t)){var n=0,a=t.blocks.length,r=a>1||a>0&&!t.noHeader;return each$8(t.blocks,function(o){var s=getBlockGapLevel(o);s>=n&&(n=s+ +(r&&(!s||isSectionFragment(o)&&!o.noHeader)))}),n}return 0}function buildSection(t,n,a,r){var o=n.noHeader,s=getGap(getBlockGapLevel(n)),l=[],c=n.blocks||[];assert(!c||isArray$1(c)),c=c||[];var u=t.orderMode;if(n.sortBlocks&&u){c=c.slice();var d={valueAsc:"asc",valueDesc:"desc"};if(hasOwn(d,u)){var f=new SortOrderComparator(d[u],null);c.sort(function(b,T){return f.evaluate(b.sortParam,T.sortParam)})}else u==="seriesDesc"&&c.reverse()}each$8(c,function(b,T){var S=n.valueFormatter,C=getBuilder(b)(S?extend(extend({},t),{valueFormatter:S}):t,b,T>0?s.html:0,r);C!=null&&l.push(C)});var v=t.renderMode==="richText"?l.join(s.richText):wrapBlockHTML(r,l.join(""),o?a:s.html);if(o)return v;var _=makeValueReadable(n.header,"ordinal",t.useUTC),g=getTooltipTextStyle(r,t.renderMode).nameStyle,y=getTooltipLineHeight(r);return t.renderMode==="richText"?wrapInlineNameRichText(t,_,g)+s.richText+v:wrapBlockHTML(r,'<div style="'+g+";"+y+';">'+encodeHTML(_)+"</div>"+v,a)}function buildNameValue(t,n,a,r){var o=t.renderMode,s=n.noName,l=n.noValue,c=!n.markerType,u=n.name,d=t.useUTC,f=n.valueFormatter||t.valueFormatter||function(x){return x=isArray$1(x)?x:[x],map$1(x,function(A,N){return makeValueReadable(A,isArray$1(g)?g[N]:g,d)})};if(!(s&&l)){var v=c?"":t.markupStyleCreator.makeTooltipMarker(n.markerType,n.markerColor||tokens.color.secondary,o),_=s?"":makeValueReadable(u,"ordinal",d),g=n.valueType,y=l?[]:f(n.value,n.dataIndex),b=!c||!s,T=!c&&s,S=getTooltipTextStyle(r,o),C=S.nameStyle,E=S.valueStyle;return o==="richText"?(c?"":v)+(s?"":wrapInlineNameRichText(t,_,C))+(l?"":wrapInlineValueRichText(t,y,b,T,E)):wrapBlockHTML(r,(c?"":v)+(s?"":wrapInlineNameHTML(_,!c,C))+(l?"":wrapInlineValueHTML(y,b,T,E)),a)}}function buildTooltipMarkup(t,n,a,r,o,s){if(t){var l=getBuilder(t),c={useUTC:o,renderMode:a,orderMode:r,markupStyleCreator:n,valueFormatter:t.valueFormatter};return l(c,t,0,s)}}function getGap(t){return{html:HTML_GAPS[t],richText:RICH_TEXT_GAPS[t]}}function wrapBlockHTML(t,n,a){var r='<div style="clear:both"></div>',o="margin: "+a+"px 0 0",s=getTooltipLineHeight(t);return'<div style="'+o+";"+s+';">'+n+r+"</div>"}function wrapInlineNameHTML(t,n,a){var r=n?"margin-left:2px":"";return'<span style="'+a+";"+r+'">'+encodeHTML(t)+"</span>"}function wrapInlineValueHTML(t,n,a,r){var o=a?"10px":"20px",s=n?"float:right;margin-left:"+o:"";return t=isArray$1(t)?t:[t],'<span style="'+s+";"+r+'">'+map$1(t,function(l){return encodeHTML(l)}).join("&nbsp;&nbsp;")+"</span>"}function wrapInlineNameRichText(t,n,a){return t.markupStyleCreator.wrapRichTextStyle(n,a)}function wrapInlineValueRichText(t,n,a,r,o){var s=[o],l=r?10:20;return a&&s.push({padding:[0,0,0,l],align:"right"}),t.markupStyleCreator.wrapRichTextStyle(isArray$1(n)?n.join("  "):n,s)}function retrieveVisualColorForTooltipMarker(t,n){var a=t.getData().getItemVisual(n,"style"),r=a[t.visualDrawType];return convertToColorString(r)}function getPaddingFromTooltipModel(t,n){var a=t.get("padding");return a??(n==="richText"?[8,10]:10)}var TooltipMarkupStyleCreator=function(){function t(){this.richTextStyles={},this._nextStyleNameId=getRandomIdBase()}return t.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},t.prototype.makeTooltipMarker=function(n,a,r){var o=r==="richText"?this._generateStyleName():null,s=getTooltipMarker({color:a,type:n,renderMode:r,markerId:o});return isString(s)?s:(this.richTextStyles[o]=s.style,s.content)},t.prototype.wrapRichTextStyle=function(n,a){var r={};isArray$1(a)?each$8(a,function(s){return extend(r,s)}):extend(r,a);var o=this._generateStyleName();return this.richTextStyles[o]=r,"{"+o+"|"+n+"}"},t}();function defaultSeriesFormatTooltip(t){var n=t.series,a=t.dataIndex,r=t.multipleSeries,o=n.getData(),s=o.mapDimensionsAll("defaultedTooltip"),l=s.length,c=n.getRawValue(a),u=isArray$1(c),d=retrieveVisualColorForTooltipMarker(n,a),f,v,_,g;if(l>1||u&&!l){var y=formatTooltipArrayValue(c,n,a,s,d);f=y.inlineValues,v=y.inlineValueTypes,_=y.blocks,g=y.inlineValues[0]}else if(l){var b=o.getDimensionInfo(s[0]);g=f=retrieveRawValue(o,a,s[0]),v=b.type}else g=f=u?c[0]:c;var T=isNameSpecified(n),S=T&&n.name||"",C=o.getName(a),E=r?S:C;return createTooltipMarkup("section",{header:S,noHeader:r||!T,sortParam:g,blocks:[createTooltipMarkup("nameValue",{markerType:"item",markerColor:d,name:E,noName:!trim(E),value:f,valueType:v,dataIndex:a})].concat(_||[])})}function formatTooltipArrayValue(t,n,a,r,o){var s=n.getData(),l=reduce(t,function(v,_,g){var y=s.getDimensionInfo(g);return v=v||y&&y.tooltip!==!1&&y.displayName!=null},!1),c=[],u=[],d=[];r.length?each$8(r,function(v){f(retrieveRawValue(s,a,v),v)}):each$8(t,f);function f(v,_){var g=s.getDimensionInfo(_);!g||g.otherDims.tooltip===!1||(l?d.push(createTooltipMarkup("nameValue",{markerType:"subItem",markerColor:o,name:g.displayName,value:v,valueType:g.type})):(c.push(v),u.push(g.type)))}return{inlineValues:c,inlineValueTypes:u,blocks:d}}var inner$8=makeInner();function getSelectionKey(t,n){return t.getName(n)||t.getId(n)}var SERIES_UNIVERSAL_TRANSITION_PROP="__universalTransitionEnabled",SeriesModel=function(t){__extends$1(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a._selectedDataIndicesMap={},a}return n.prototype.init=function(a,r,o){this.seriesIndex=this.componentIndex,this.dataTask=createTask({count:dataTaskCount,reset:dataTaskReset}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(a,o);var s=inner$8(this).sourceManager=new SourceManager(this);s.prepareSource();var l=this.getInitialData(a,o);wrapData(l,this),this.dataTask.context.data=l,inner$8(this).dataBeforeProcessed=l,autoSeriesName(this),this._initSelectedMapFromData(l)},n.prototype.mergeDefaultAndTheme=function(a,r){var o=fetchLayoutMode(this),s=o?getLayoutParams(a):{},l=this.subType;ComponentModel.hasClass(l)&&(l+="Series"),merge(a,r.getTheme().get(this.subType)),merge(a,this.getDefaultOption()),defaultEmphasis(a,"label",["show"]),this.fillDataTextStyle(a.data),o&&mergeLayoutParam(a,s,o)},n.prototype.mergeOption=function(a,r){a=merge(this.option,a,!0),this.fillDataTextStyle(a.data);var o=fetchLayoutMode(this);o&&mergeLayoutParam(this.option,a,o);var s=inner$8(this).sourceManager;s.dirty(),s.prepareSource();var l=this.getInitialData(a,r);wrapData(l,this),this.dataTask.dirty(),this.dataTask.context.data=l,inner$8(this).dataBeforeProcessed=l,autoSeriesName(this),this._initSelectedMapFromData(l)},n.prototype.fillDataTextStyle=function(a){if(a&&!isTypedArray(a))for(var r=["show"],o=0;o<a.length;o++)a[o]&&a[o].label&&defaultEmphasis(a[o],"label",r)},n.prototype.getInitialData=function(a,r){},n.prototype.appendData=function(a){var r=this.getRawData();r.appendData(a.data)},n.prototype.getData=function(a){var r=getCurrentTask(this);if(r){var o=r.context.data;return a==null||!o.getLinkedData?o:o.getLinkedData(a)}else return inner$8(this).data},n.prototype.getAllData=function(){var a=this.getData();return a&&a.getLinkedDataAll?a.getLinkedDataAll():[{data:a}]},n.prototype.setData=function(a){var r=getCurrentTask(this);if(r){var o=r.context;o.outputData=a,r!==this.dataTask&&(o.data=a)}inner$8(this).data=a},n.prototype.getEncode=function(){var a=this.get("encode",!0);if(a)return createHashMap(a)},n.prototype.getSourceManager=function(){return inner$8(this).sourceManager},n.prototype.getSource=function(){return this.getSourceManager().getSource()},n.prototype.getRawData=function(){return inner$8(this).dataBeforeProcessed},n.prototype.getColorBy=function(){var a=this.get("colorBy");return a||"series"},n.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},n.prototype.getBaseAxis=function(){var a=this.coordinateSystem;return a&&a.getBaseAxis&&a.getBaseAxis()},n.prototype.indicesOfNearest=function(a,r,o,s){var l=this.getData(),c=this.coordinateSystem,u=c&&c.getAxis(a);if(!c||!u)return[];var d=u.dataToCoord(o);s==null&&(s=1/0);var f=[],v=1/0,_=-1,g=0;return l.each(r,function(y,b){var T=u.dataToCoord(y),S=d-T,C=Math.abs(S);C<=s&&((C<v||C===v&&S>=0&&_<0)&&(v=C,_=S,g=0),S===_&&(f[g++]=b))}),f.length=g,f},n.prototype.formatTooltip=function(a,r,o){return defaultSeriesFormatTooltip({series:this,dataIndex:a,multipleSeries:r})},n.prototype.isAnimationEnabled=function(){var a=this.ecModel;if(env.node&&!(a&&a.ssr))return!1;var r=this.getShallow("animation");return r&&this.getData().count()>this.getShallow("animationThreshold")&&(r=!1),!!r},n.prototype.restoreData=function(){this.dataTask.dirty()},n.prototype.getColorFromPalette=function(a,r,o){var s=this.ecModel,l=PaletteMixin.prototype.getColorFromPalette.call(this,a,r,o);return l||(l=s.getColorFromPalette(a,r,o)),l},n.prototype.coordDimToDataDim=function(a){return this.getRawData().mapDimensionsAll(a)},n.prototype.getProgressive=function(){return this.get("progressive")},n.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},n.prototype.select=function(a,r){this._innerSelect(this.getData(r),a)},n.prototype.unselect=function(a,r){var o=this.option.selectedMap;if(o){var s=this.option.selectedMode,l=this.getData(r);if(s==="series"||o==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var c=0;c<a.length;c++){var u=a[c],d=getSelectionKey(l,u);o[d]=!1,this._selectedDataIndicesMap[d]=-1}}},n.prototype.toggleSelect=function(a,r){for(var o=[],s=0;s<a.length;s++)o[0]=a[s],this.isSelected(a[s],r)?this.unselect(o,r):this.select(o,r)},n.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var a=this._selectedDataIndicesMap,r=keys(a),o=[],s=0;s<r.length;s++){var l=a[r[s]];l>=0&&o.push(l)}return o},n.prototype.isSelected=function(a,r){var o=this.option.selectedMap;if(!o)return!1;var s=this.getData(r);return(o==="all"||o[getSelectionKey(s,a)])&&!s.getItemModel(a).get(["select","disabled"])},n.prototype.isUniversalTransitionEnabled=function(){if(this[SERIES_UNIVERSAL_TRANSITION_PROP])return!0;var a=this.option.universalTransition;return a?a===!0?!0:a&&a.enabled:!1},n.prototype._innerSelect=function(a,r){var o,s,l=this.option,c=l.selectedMode,u=r.length;if(!(!c||!u)){if(c==="series")l.selectedMap="all";else if(c==="multiple"){isObject$3(l.selectedMap)||(l.selectedMap={});for(var d=l.selectedMap,f=0;f<u;f++){var v=r[f],_=getSelectionKey(a,v);d[_]=!0,this._selectedDataIndicesMap[_]=a.getRawIndex(v)}}else if(c==="single"||c===!0){var g=r[u-1],_=getSelectionKey(a,g);l.selectedMap=(o={},o[_]=!0,o),this._selectedDataIndicesMap=(s={},s[_]=a.getRawIndex(g),s)}}},n.prototype._initSelectedMapFromData=function(a){if(!this.option.selectedMap){var r=[];a.hasItemOption&&a.each(function(o){var s=a.getRawDataItem(o);s&&s.selected&&r.push(o)}),r.length>0&&this._innerSelect(a,r)}},n.registerClass=function(a){return ComponentModel.registerClass(a)},n.protoInitialize=function(){var a=n.prototype;a.type="series.__base__",a.seriesIndex=0,a.ignoreStyleOnData=!1,a.hasSymbolVisual=!1,a.defaultSymbol="circle",a.visualStyleAccessPath="itemStyle",a.visualDrawType="fill"}(),n}(ComponentModel);mixin(SeriesModel,DataFormatMixin);mixin(SeriesModel,PaletteMixin);mountExtend(SeriesModel,ComponentModel);function autoSeriesName(t){var n=t.name;isNameSpecified(t)||(t.name=getSeriesAutoName(t)||n)}function getSeriesAutoName(t){var n=t.getRawData(),a=n.mapDimensionsAll("seriesName"),r=[];return each$8(a,function(o){var s=n.getDimensionInfo(o);s.displayName&&r.push(s.displayName)}),r.join(" ")}function dataTaskCount(t){return t.model.getRawData().count()}function dataTaskReset(t){var n=t.model;return n.setData(n.getRawData().cloneShallow()),dataTaskProgress}function dataTaskProgress(t,n){n.outputData&&t.end>n.outputData.count()&&n.model.getRawData().cloneShallow(n.outputData)}function wrapData(t,n){each$8(concatArray(t.CHANGABLE_METHODS,t.DOWNSAMPLE_METHODS),function(a){t.wrapMethod(a,curry(onDataChange,n))})}function onDataChange(t,n){var a=getCurrentTask(t);return a&&a.setOutputEnd((n||this).count()),n}function getCurrentTask(t){var n=(t.ecModel||{}).scheduler,a=n&&n.getPipeline(t.uid);if(a){var r=a.currentTask;if(r){var o=r.agentStubMap;o&&(r=o.get(t.uid))}return r}}var ComponentView=function(){function t(){this.group=new Group,this.uid=getUID("viewComponent")}return t.prototype.init=function(n,a){},t.prototype.render=function(n,a,r,o){},t.prototype.dispose=function(n,a){},t.prototype.updateView=function(n,a,r,o){},t.prototype.updateLayout=function(n,a,r,o){},t.prototype.updateVisual=function(n,a,r,o){},t.prototype.toggleBlurSeries=function(n,a,r){},t.prototype.eachRendered=function(n){var a=this.group;a&&a.traverse(n)},t}();enableClassExtend(ComponentView);enableClassManagement(ComponentView);function createRenderPlanner(){var t=makeInner();return function(n){var a=t(n),r=n.pipelineContext,o=!!a.large,s=!!a.progressiveRender,l=a.large=!!(r&&r.large),c=a.progressiveRender=!!(r&&r.progressiveRender);return(o!==l||s!==c)&&"reset"}}var inner$7=makeInner(),renderPlanner=createRenderPlanner(),ChartView=function(){function t(){this.group=new Group,this.uid=getUID("viewChart"),this.renderTask=createTask({plan:renderTaskPlan,reset:renderTaskReset}),this.renderTask.context={view:this}}return t.prototype.init=function(n,a){},t.prototype.render=function(n,a,r,o){},t.prototype.highlight=function(n,a,r,o){var s=n.getData(o&&o.dataType);s&&toggleHighlight(s,o,"emphasis")},t.prototype.downplay=function(n,a,r,o){var s=n.getData(o&&o.dataType);s&&toggleHighlight(s,o,"normal")},t.prototype.remove=function(n,a){this.group.removeAll()},t.prototype.dispose=function(n,a){},t.prototype.updateView=function(n,a,r,o){this.render(n,a,r,o)},t.prototype.updateLayout=function(n,a,r,o){this.render(n,a,r,o)},t.prototype.updateVisual=function(n,a,r,o){this.render(n,a,r,o)},t.prototype.eachRendered=function(n){traverseElements(this.group,n)},t.markUpdateMethod=function(n,a){inner$7(n).updateMethod=a},t.protoInitialize=function(){var n=t.prototype;n.type="chart"}(),t}();function elSetState(t,n,a){t&&isHighDownDispatcher(t)&&(n==="emphasis"?enterEmphasis:leaveEmphasis)(t,a)}function toggleHighlight(t,n,a){var r=queryDataIndex(t,n),o=n&&n.highlightKey!=null?getHighlightDigit(n.highlightKey):null;r!=null?each$8(normalizeToArray(r),function(s){elSetState(t.getItemGraphicEl(s),a,o)}):t.eachItemGraphicEl(function(s){elSetState(s,a,o)})}enableClassExtend(ChartView);enableClassManagement(ChartView);function renderTaskPlan(t){return renderPlanner(t.model)}function renderTaskReset(t){var n=t.model,a=t.ecModel,r=t.api,o=t.payload,s=n.pipelineContext.progressiveRender,l=t.view,c=o&&inner$7(o).updateMethod,u=s?"incrementalPrepareRender":c&&l[c]?c:"render";return u!=="render"&&l[u](n,a,r,o),progressMethodMap[u]}var progressMethodMap={incrementalPrepareRender:{progress:function(t,n){n.view.incrementalRender(t,n.model,n.ecModel,n.api,n.payload)}},render:{forceFirstProgress:!0,progress:function(t,n){n.view.render(n.model,n.ecModel,n.api,n.payload)}}},ORIGIN_METHOD="\0__throttleOriginMethod",RATE="\0__throttleRate",THROTTLE_TYPE="\0__throttleType";function throttle(t,n,a){var r,o=0,s=0,l=null,c,u,d,f;n=n||0;function v(){s=new Date().getTime(),l=null,t.apply(u,d||[])}var _=function(){for(var g=[],y=0;y<arguments.length;y++)g[y]=arguments[y];r=new Date().getTime(),u=this,d=g;var b=f||n,T=f||a;f=null,c=r-(T?o:s)-b,clearTimeout(l),T?l=setTimeout(v,b):c>=0?v():l=setTimeout(v,-c),o=r};return _.clear=function(){l&&(clearTimeout(l),l=null)},_.debounceNextCall=function(g){f=g},_}function createOrUpdate(t,n,a,r){var o=t[n];if(o){var s=o[ORIGIN_METHOD]||o,l=o[THROTTLE_TYPE],c=o[RATE];if(c!==a||l!==r){if(a==null||!r)return t[n]=s;o=t[n]=throttle(s,a,r==="debounce"),o[ORIGIN_METHOD]=s,o[THROTTLE_TYPE]=r,o[RATE]=a}return o}}function clear(t,n){var a=t[n];a&&a[ORIGIN_METHOD]&&(a.clear&&a.clear(),t[n]=a[ORIGIN_METHOD])}var inner$6=makeInner(),defaultStyleMappers={itemStyle:makeStyleMapper(ITEM_STYLE_KEY_MAP,!0),lineStyle:makeStyleMapper(LINE_STYLE_KEY_MAP,!0)},defaultColorKey={lineStyle:"stroke",itemStyle:"fill"};function getStyleMapper(t,n){var a=t.visualStyleMapper||defaultStyleMappers[n];return a||(console.warn("Unknown style type '"+n+"'."),defaultStyleMappers.itemStyle)}function getDefaultColorKey(t,n){var a=t.visualDrawType||defaultColorKey[n];return a||(console.warn("Unknown style type '"+n+"'."),"fill")}var seriesStyleTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,n){var a=t.getData(),r=t.visualStyleAccessPath||"itemStyle",o=t.getModel(r),s=getStyleMapper(t,r),l=s(o),c=o.getShallow("decal");c&&(a.setVisual("decal",c),c.dirty=!0);var u=getDefaultColorKey(t,r),d=l[u],f=isFunction(d)?d:null,v=l.fill==="auto"||l.stroke==="auto";if(!l[u]||f||v){var _=t.getColorFromPalette(t.name,null,n.getSeriesCount());l[u]||(l[u]=_,a.setVisual("colorFromPalette",!0)),l.fill=l.fill==="auto"||isFunction(l.fill)?_:l.fill,l.stroke=l.stroke==="auto"||isFunction(l.stroke)?_:l.stroke}if(a.setVisual("style",l),a.setVisual("drawType",u),!n.isSeriesFiltered(t)&&f)return a.setVisual("colorFromPalette",!1),{dataEach:function(g,y){var b=t.getDataParams(y),T=extend({},l);T[u]=f(b),g.setItemVisual(y,"style",T)}}}},sharedModel=new Model,dataStyleTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,n){if(!(t.ignoreStyleOnData||n.isSeriesFiltered(t))){var a=t.getData(),r=t.visualStyleAccessPath||"itemStyle",o=getStyleMapper(t,r),s=a.getVisual("drawType");return{dataEach:a.hasItemOption?function(l,c){var u=l.getRawDataItem(c);if(u&&u[r]){sharedModel.option=u[r];var d=o(sharedModel),f=l.ensureUniqueItemVisual(c,"style");extend(f,d),sharedModel.option.decal&&(l.setItemVisual(c,"decal",sharedModel.option.decal),sharedModel.option.decal.dirty=!0),s in d&&l.setItemVisual(c,"colorFromPalette",!1)}}:null}}}},dataColorPaletteTask={performRawSeries:!0,overallReset:function(t){var n=createHashMap();t.eachSeries(function(a){var r=a.getColorBy();if(!a.isColorBySeries()){var o=a.type+"-"+r,s=n.get(o);s||(s={},n.set(o,s)),inner$6(a).scope=s}}),t.eachSeries(function(a){if(!(a.isColorBySeries()||t.isSeriesFiltered(a))){var r=a.getRawData(),o={},s=a.getData(),l=inner$6(a).scope,c=a.visualStyleAccessPath||"itemStyle",u=getDefaultColorKey(a,c);s.each(function(d){var f=s.getRawIndex(d);o[f]=d}),r.each(function(d){var f=o[d],v=s.getItemVisual(f,"colorFromPalette");if(v){var _=s.ensureUniqueItemVisual(f,"style"),g=r.getName(d)||d+"",y=r.count();_[u]=a.getColorFromPalette(g,l,y)}})}})}},PI$1=Math.PI;function defaultLoading(t,n){n=n||{},defaults(n,{text:"loading",textColor:tokens.color.primary,fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255,255,255,0.8)",showSpinner:!0,color:tokens.color.theme[0],spinnerRadius:10,lineWidth:5,zlevel:0});var a=new Group,r=new Rect({style:{fill:n.maskColor},zlevel:n.zlevel,z:1e4});a.add(r);var o=new ZRText({style:{text:n.text,fill:n.textColor,fontSize:n.fontSize,fontWeight:n.fontWeight,fontStyle:n.fontStyle,fontFamily:n.fontFamily},zlevel:n.zlevel,z:10001}),s=new Rect({style:{fill:"none"},textContent:o,textConfig:{position:"right",distance:10},zlevel:n.zlevel,z:10001});a.add(s);var l;return n.showSpinner&&(l=new Arc({shape:{startAngle:-PI$1/2,endAngle:-PI$1/2+.1,r:n.spinnerRadius},style:{stroke:n.color,lineCap:"round",lineWidth:n.lineWidth},zlevel:n.zlevel,z:10001}),l.animateShape(!0).when(1e3,{endAngle:PI$1*3/2}).start("circularInOut"),l.animateShape(!0).when(1e3,{startAngle:PI$1*3/2}).delay(300).start("circularInOut"),a.add(l)),a.resize=function(){var c=o.getBoundingRect().width,u=n.showSpinner?n.spinnerRadius:0,d=(t.getWidth()-u*2-(n.showSpinner&&c?10:0)-c)/2-(n.showSpinner&&c?0:5+c/2)+(n.showSpinner?0:c/2)+(c?0:u),f=t.getHeight()/2;n.showSpinner&&l.setShape({cx:d,cy:f}),s.setShape({x:d-u,y:f-u,width:u*2,height:u*2}),r.setShape({x:0,y:0,width:t.getWidth(),height:t.getHeight()})},a.resize(),a}var Scheduler=function(){function t(n,a,r,o){this._stageTaskMap=createHashMap(),this.ecInstance=n,this.api=a,r=this._dataProcessorHandlers=r.slice(),o=this._visualHandlers=o.slice(),this._allHandlers=r.concat(o)}return t.prototype.restoreData=function(n,a){n.restoreData(a),this._stageTaskMap.each(function(r){var o=r.overallTask;o&&o.dirty()})},t.prototype.getPerformArgs=function(n,a){if(n.__pipeline){var r=this._pipelineMap.get(n.__pipeline.id),o=r.context,s=!a&&r.progressiveEnabled&&(!o||o.progressiveRender)&&n.__idxInPipeline>r.blockIndex,l=s?r.step:null,c=o&&o.modDataCount,u=c!=null?Math.ceil(c/l):null;return{step:l,modBy:u,modDataCount:c}}},t.prototype.getPipeline=function(n){return this._pipelineMap.get(n)},t.prototype.updateStreamModes=function(n,a){var r=this._pipelineMap.get(n.uid),o=n.getData(),s=o.count(),l=r.progressiveEnabled&&a.incrementalPrepareRender&&s>=r.threshold,c=n.get("large")&&s>=n.get("largeThreshold"),u=n.get("progressiveChunkMode")==="mod"?s:null;n.pipelineContext=r.context={progressiveRender:l,modDataCount:u,large:c}},t.prototype.restorePipelines=function(n){var a=this,r=a._pipelineMap=createHashMap();n.eachSeries(function(o){var s=o.getProgressive(),l=o.uid;r.set(l,{id:l,head:null,tail:null,threshold:o.getProgressiveThreshold(),progressiveEnabled:s&&!(o.preventIncremental&&o.preventIncremental()),blockIndex:-1,step:Math.round(s||700),count:0}),a._pipe(o,o.dataTask)})},t.prototype.prepareStageTasks=function(){var n=this._stageTaskMap,a=this.api.getModel(),r=this.api;each$8(this._allHandlers,function(o){var s=n.get(o.uid)||n.set(o.uid,{}),l="";assert(!(o.reset&&o.overallReset),l),o.reset&&this._createSeriesStageTask(o,s,a,r),o.overallReset&&this._createOverallStageTask(o,s,a,r)},this)},t.prototype.prepareView=function(n,a,r,o){var s=n.renderTask,l=s.context;l.model=a,l.ecModel=r,l.api=o,s.__block=!n.incrementalPrepareRender,this._pipe(a,s)},t.prototype.performDataProcessorTasks=function(n,a){this._performStageTasks(this._dataProcessorHandlers,n,a,{block:!0})},t.prototype.performVisualTasks=function(n,a,r){this._performStageTasks(this._visualHandlers,n,a,r)},t.prototype._performStageTasks=function(n,a,r,o){o=o||{};var s=!1,l=this;each$8(n,function(u,d){if(!(o.visualType&&o.visualType!==u.visualType)){var f=l._stageTaskMap.get(u.uid),v=f.seriesTaskMap,_=f.overallTask;if(_){var g,y=_.agentStubMap;y.each(function(T){c(o,T)&&(T.dirty(),g=!0)}),g&&_.dirty(),l.updatePayload(_,r);var b=l.getPerformArgs(_,o.block);y.each(function(T){T.perform(b)}),_.perform(b)&&(s=!0)}else v&&v.each(function(T,S){c(o,T)&&T.dirty();var C=l.getPerformArgs(T,o.block);C.skip=!u.performRawSeries&&a.isSeriesFiltered(T.context.model),l.updatePayload(T,r),T.perform(C)&&(s=!0)})}});function c(u,d){return u.setDirty&&(!u.dirtyMap||u.dirtyMap.get(d.__pipeline.id))}this.unfinished=s||this.unfinished},t.prototype.performSeriesTasks=function(n){var a;n.eachSeries(function(r){a=r.dataTask.perform()||a}),this.unfinished=a||this.unfinished},t.prototype.plan=function(){this._pipelineMap.each(function(n){var a=n.tail;do{if(a.__block){n.blockIndex=a.__idxInPipeline;break}a=a.getUpstream()}while(a)})},t.prototype.updatePayload=function(n,a){a!=="remain"&&(n.context.payload=a)},t.prototype._createSeriesStageTask=function(n,a,r,o){var s=this,l=a.seriesTaskMap,c=a.seriesTaskMap=createHashMap(),u=n.seriesType,d=n.getTargetSeries;n.createOnAllSeries?r.eachRawSeries(f):u?r.eachRawSeriesByType(u,f):d&&d(r,o).each(f);function f(v){var _=v.uid,g=c.set(_,l&&l.get(_)||createTask({plan:seriesTaskPlan,reset:seriesTaskReset,count:seriesTaskCount}));g.context={model:v,ecModel:r,api:o,useClearVisual:n.isVisual&&!n.isLayout,plan:n.plan,reset:n.reset,scheduler:s},s._pipe(v,g)}},t.prototype._createOverallStageTask=function(n,a,r,o){var s=this,l=a.overallTask=a.overallTask||createTask({reset:overallTaskReset});l.context={ecModel:r,api:o,overallReset:n.overallReset,scheduler:s};var c=l.agentStubMap,u=l.agentStubMap=createHashMap(),d=n.seriesType,f=n.getTargetSeries,v=!0,_=!1,g="";assert(!n.createOnAllSeries,g),d?r.eachRawSeriesByType(d,y):f?f(r,o).each(y):(v=!1,each$8(r.getSeries(),y));function y(b){var T=b.uid,S=u.set(T,c&&c.get(T)||(_=!0,createTask({reset:stubReset,onDirty:stubOnDirty})));S.context={model:b,overallProgress:v},S.agent=l,S.__block=v,s._pipe(b,S)}_&&l.dirty()},t.prototype._pipe=function(n,a){var r=n.uid,o=this._pipelineMap.get(r);!o.head&&(o.head=a),o.tail&&o.tail.pipe(a),o.tail=a,a.__idxInPipeline=o.count++,a.__pipeline=o},t.wrapStageHandler=function(n,a){return isFunction(n)&&(n={overallReset:n,seriesType:detectSeriseType(n)}),n.uid=getUID("stageHandler"),a&&(n.visualType=a),n},t}();function overallTaskReset(t){t.overallReset(t.ecModel,t.api,t.payload)}function stubReset(t){return t.overallProgress&&stubProgress}function stubProgress(){this.agent.dirty(),this.getDownstream().dirty()}function stubOnDirty(){this.agent&&this.agent.dirty()}function seriesTaskPlan(t){return t.plan?t.plan(t.model,t.ecModel,t.api,t.payload):null}function seriesTaskReset(t){t.useClearVisual&&t.data.clearAllVisual();var n=t.resetDefines=normalizeToArray(t.reset(t.model,t.ecModel,t.api,t.payload));return n.length>1?map$1(n,function(a,r){return makeSeriesTaskProgress(r)}):singleSeriesTaskProgress}var singleSeriesTaskProgress=makeSeriesTaskProgress(0);function makeSeriesTaskProgress(t){return function(n,a){var r=a.data,o=a.resetDefines[t];if(o&&o.dataEach)for(var s=n.start;s<n.end;s++)o.dataEach(r,s);else o&&o.progress&&o.progress(n,r)}}function seriesTaskCount(t){return t.data.count()}function detectSeriseType(t){seriesType=null;try{t(ecModelMock,apiMock)}catch{}return seriesType}var ecModelMock={},apiMock={},seriesType;mockMethods(ecModelMock,GlobalModel);mockMethods(apiMock,ExtensionAPI);ecModelMock.eachSeriesByType=ecModelMock.eachRawSeriesByType=function(t){seriesType=t};ecModelMock.eachComponent=function(t){t.mainType==="series"&&t.subType&&(seriesType=t.subType)};function mockMethods(t,n){for(var a in n.prototype)t[a]=noop}var color=tokens.darkColor,backgroundColor=color.background,axisCommon=function(){return{axisLine:{lineStyle:{color:color.axisLine}},splitLine:{lineStyle:{color:color.axisSplitLine}},splitArea:{areaStyle:{color:[color.backgroundTint,color.backgroundTransparent]}},minorSplitLine:{lineStyle:{color:color.axisMinorSplitLine}},axisLabel:{color:color.axisLabel},axisName:{}}},matrixAxis={label:{color:color.secondary},itemStyle:{borderColor:color.borderTint},dividerLineStyle:{color:color.border}},theme={darkMode:!0,color:color.theme,backgroundColor,axisPointer:{lineStyle:{color:color.border},crossStyle:{color:color.borderShade},label:{color:color.tertiary}},legend:{textStyle:{color:color.secondary},pageTextStyle:{color:color.tertiary}},textStyle:{color:color.secondary},title:{textStyle:{color:color.primary},subtextStyle:{color:color.quaternary}},toolbox:{iconStyle:{borderColor:color.accent50}},tooltip:{backgroundColor:color.neutral20,defaultBorderColor:color.border,textStyle:{color:color.tertiary}},dataZoom:{borderColor:color.accent10,textStyle:{color:color.tertiary},brushStyle:{color:color.backgroundTint},handleStyle:{color:color.neutral00,borderColor:color.accent20},moveHandleStyle:{color:color.accent40},emphasis:{handleStyle:{borderColor:color.accent50}},dataBackground:{lineStyle:{color:color.accent30},areaStyle:{color:color.accent20}},selectedDataBackground:{lineStyle:{color:color.accent50},areaStyle:{color:color.accent30}}},visualMap:{textStyle:{color:color.secondary},handleStyle:{borderColor:color.neutral30}},timeline:{lineStyle:{color:color.accent10},label:{color:color.tertiary},controlStyle:{color:color.accent30,borderColor:color.accent30}},calendar:{itemStyle:{color:color.neutral00,borderColor:color.neutral20},dayLabel:{color:color.tertiary},monthLabel:{color:color.secondary},yearLabel:{color:color.secondary}},matrix:{x:matrixAxis,y:matrixAxis,backgroundColor:{borderColor:color.axisLine},body:{itemStyle:{borderColor:color.borderTint}}},timeAxis:axisCommon(),logAxis:axisCommon(),valueAxis:axisCommon(),categoryAxis:axisCommon(),line:{symbol:"circle"},graph:{color:color.theme},gauge:{title:{color:color.secondary},axisLine:{lineStyle:{color:[[1,color.neutral05]]}},axisLabel:{color:color.axisLabel},detail:{color:color.primary}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}},funnel:{itemStyle:{borderColor:color.background}},radar:function(){var t=axisCommon();return t.axisName={color:color.axisLabel},t.axisLine.lineStyle.color=color.neutral20,t}(),treemap:{breadcrumb:{itemStyle:{color:color.neutral20,textStyle:{color:color.secondary}},emphasis:{itemStyle:{color:color.neutral30}}}},sunburst:{itemStyle:{borderColor:color.background}},map:{itemStyle:{borderColor:color.border,areaColor:color.neutral10},label:{color:color.tertiary},emphasis:{label:{color:color.primary},itemStyle:{areaColor:color.highlight}},select:{label:{color:color.primary},itemStyle:{areaColor:color.highlight}}},geo:{itemStyle:{borderColor:color.border,areaColor:color.neutral10},emphasis:{label:{color:color.primary},itemStyle:{areaColor:color.highlight}},select:{label:{color:color.primary},itemStyle:{color:color.highlight}}}};theme.categoryAxis.splitLine.show=!1;var ECEventProcessor=function(){function t(){}return t.prototype.normalizeQuery=function(n){var a={},r={},o={};if(isString(n)){var s=parseClassType(n);a.mainType=s.main||null,a.subType=s.sub||null}else{var l=["Index","Name","Id"],c={name:1,dataIndex:1,dataType:1};each$8(n,function(u,d){for(var f=!1,v=0;v<l.length;v++){var _=l[v],g=d.lastIndexOf(_);if(g>0&&g===d.length-_.length){var y=d.slice(0,g);y!=="data"&&(a.mainType=y,a[_.toLowerCase()]=u,f=!0)}}c.hasOwnProperty(d)&&(r[d]=u,f=!0),f||(o[d]=u)})}return{cptQuery:a,dataQuery:r,otherQuery:o}},t.prototype.filter=function(n,a){var r=this.eventInfo;if(!r)return!0;var o=r.targetEl,s=r.packedEvent,l=r.model,c=r.view;if(!l||!c)return!0;var u=a.cptQuery,d=a.dataQuery;return f(u,l,"mainType")&&f(u,l,"subType")&&f(u,l,"index","componentIndex")&&f(u,l,"name")&&f(u,l,"id")&&f(d,s,"name")&&f(d,s,"dataIndex")&&f(d,s,"dataType")&&(!c.filterForExposedEvent||c.filterForExposedEvent(n,a.otherQuery,o,s));function f(v,_,g,y){return v[g]==null||_[y||g]===v[g]}},t.prototype.afterTrigger=function(){this.eventInfo=null},t}(),SYMBOL_PROPS_WITH_CB=["symbol","symbolSize","symbolRotate","symbolOffset"],SYMBOL_PROPS=SYMBOL_PROPS_WITH_CB.concat(["symbolKeepAspect"]),seriesSymbolTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,n){var a=t.getData();if(t.legendIcon&&a.setVisual("legendIcon",t.legendIcon),!t.hasSymbolVisual)return;for(var r={},o={},s=!1,l=0;l<SYMBOL_PROPS_WITH_CB.length;l++){var c=SYMBOL_PROPS_WITH_CB[l],u=t.get(c);isFunction(u)?(s=!0,o[c]=u):r[c]=u}if(r.symbol=r.symbol||t.defaultSymbol,a.setVisual(extend({legendIcon:t.legendIcon||r.symbol,symbolKeepAspect:t.get("symbolKeepAspect")},r)),n.isSeriesFiltered(t))return;var d=keys(o);function f(v,_){for(var g=t.getRawValue(_),y=t.getDataParams(_),b=0;b<d.length;b++){var T=d[b];v.setItemVisual(_,T,o[T](g,y))}}return{dataEach:s?f:null}}},dataSymbolTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,n){if(!t.hasSymbolVisual||n.isSeriesFiltered(t))return;var a=t.getData();function r(o,s){for(var l=o.getItemModel(s),c=0;c<SYMBOL_PROPS.length;c++){var u=SYMBOL_PROPS[c],d=l.getShallow(u,!0);d!=null&&o.setItemVisual(s,u,d)}}return{dataEach:a.hasItemOption?r:null}}};function getItemVisualFromData(t,n,a){switch(a){case"color":var r=t.getItemVisual(n,"style");return r[t.getVisual("drawType")];case"opacity":return t.getItemVisual(n,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return t.getItemVisual(n,a)}}function getVisualFromData(t,n){switch(n){case"color":var a=t.getVisual("style");return a[t.getVisual("drawType")];case"opacity":return t.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return t.getVisual(n)}}function setItemVisualFromData(t,n,a,r){switch(a){case"color":var o=t.ensureUniqueItemVisual(n,"style");o[t.getVisual("drawType")]=r,t.setItemVisual(n,"colorFromPalette",!1);break;case"opacity":t.ensureUniqueItemVisual(n,"style").opacity=r;break;case"symbol":case"symbolSize":case"liftZ":t.setItemVisual(n,a,r);break}}function createLegacyDataSelectAction(t,n){function a(r,o){var s=[];return r.eachComponent({mainType:"series",subType:t,query:o},function(l){s.push(l.seriesIndex)}),s}each$8([[t+"ToggleSelect","toggleSelect"],[t+"Select","select"],[t+"UnSelect","unselect"]],function(r){n(r[0],function(o,s,l){o=extend({},o),l.dispatchAction(extend(o,{type:r[1],seriesIndex:a(s,o)}))})})}function handleSeriesLegacySelectEvents(t,n,a,r,o){var s=t+n;a.isSilent(s)||r.eachComponent({mainType:"series",subType:"pie"},function(l){for(var c=l.seriesIndex,u=l.option.selectedMap,d=o.selected,f=0;f<d.length;f++)if(d[f].seriesIndex===c){var v=l.getData(),_=queryDataIndex(v,o.fromActionPayload);a.trigger(s,{type:s,seriesId:l.id,name:isArray$1(_)?v.getName(_[0]):v.getName(_),selected:isString(u)?u:extend({},u)})}})}function handleLegacySelectEvents(t,n,a){t.on("selectchanged",function(r){var o=a.getModel();r.isFromClick?(handleSeriesLegacySelectEvents("map","selectchanged",n,o,r),handleSeriesLegacySelectEvents("pie","selectchanged",n,o,r)):r.fromAction==="select"?(handleSeriesLegacySelectEvents("map","selected",n,o,r),handleSeriesLegacySelectEvents("pie","selected",n,o,r)):r.fromAction==="unselect"&&(handleSeriesLegacySelectEvents("map","unselected",n,o,r),handleSeriesLegacySelectEvents("pie","unselected",n,o,r))})}function findEventDispatcher(t,n,a){for(var r;t&&!(n(t)&&(r=t,a));)t=t.__hostTarget||t.parent;return r}var wmUniqueIndex=Math.round(Math.random()*9),supportDefineProperty=typeof Object.defineProperty=="function",WeakMap$1=function(){function t(){this._id="__ec_inner_"+wmUniqueIndex++}return t.prototype.get=function(n){return this._guard(n)[this._id]},t.prototype.set=function(n,a){var r=this._guard(n);return supportDefineProperty?Object.defineProperty(r,this._id,{value:a,enumerable:!1,configurable:!0}):r[this._id]=a,this},t.prototype.delete=function(n){return this.has(n)?(delete this._guard(n)[this._id],!0):!1},t.prototype.has=function(n){return!!this._guard(n)[this._id]},t.prototype._guard=function(n){if(n!==Object(n))throw TypeError("Value of WeakMap is not a non-null object.");return n},t}(),Triangle=Path.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,n){var a=n.cx,r=n.cy,o=n.width/2,s=n.height/2;t.moveTo(a,r-s),t.lineTo(a+o,r+s),t.lineTo(a-o,r+s),t.closePath()}}),Diamond=Path.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,n){var a=n.cx,r=n.cy,o=n.width/2,s=n.height/2;t.moveTo(a,r-s),t.lineTo(a+o,r),t.lineTo(a,r+s),t.lineTo(a-o,r),t.closePath()}}),Pin=Path.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,n){var a=n.x,r=n.y,o=n.width/5*3,s=Math.max(o,n.height),l=o/2,c=l*l/(s-l),u=r-s+l+c,d=Math.asin(c/l),f=Math.cos(d)*l,v=Math.sin(d),_=Math.cos(d),g=l*.6,y=l*.7;t.moveTo(a-f,u+c),t.arc(a,u,l,Math.PI-d,Math.PI*2+d),t.bezierCurveTo(a+f-v*g,u+c+_*g,a,r-y,a,r),t.bezierCurveTo(a,r-y,a-f+v*g,u+c+_*g,a-f,u+c),t.closePath()}}),Arrow=Path.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,n){var a=n.height,r=n.width,o=n.x,s=n.y,l=r/3*2;t.moveTo(o,s),t.lineTo(o+l,s+a),t.lineTo(o,s+a/4*3),t.lineTo(o-l,s+a),t.lineTo(o,s),t.closePath()}}),symbolCtors={line:Line,rect:Rect,roundRect:Rect,square:Rect,circle:Circle,diamond:Diamond,pin:Pin,arrow:Arrow,triangle:Triangle},symbolShapeMakers={line:function(t,n,a,r,o){o.x1=t,o.y1=n+r/2,o.x2=t+a,o.y2=n+r/2},rect:function(t,n,a,r,o){o.x=t,o.y=n,o.width=a,o.height=r},roundRect:function(t,n,a,r,o){o.x=t,o.y=n,o.width=a,o.height=r,o.r=Math.min(a,r)/4},square:function(t,n,a,r,o){var s=Math.min(a,r);o.x=t,o.y=n,o.width=s,o.height=s},circle:function(t,n,a,r,o){o.cx=t+a/2,o.cy=n+r/2,o.r=Math.min(a,r)/2},diamond:function(t,n,a,r,o){o.cx=t+a/2,o.cy=n+r/2,o.width=a,o.height=r},pin:function(t,n,a,r,o){o.x=t+a/2,o.y=n+r/2,o.width=a,o.height=r},arrow:function(t,n,a,r,o){o.x=t+a/2,o.y=n+r/2,o.width=a,o.height=r},triangle:function(t,n,a,r,o){o.cx=t+a/2,o.cy=n+r/2,o.width=a,o.height=r}},symbolBuildProxies={};each$8(symbolCtors,function(t,n){symbolBuildProxies[n]=new t});var SymbolClz=Path.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(t,n,a){var r=calculateTextPosition(t,n,a),o=this.shape;return o&&o.symbolType==="pin"&&n.position==="inside"&&(r.y=a.y+a.height*.4),r},buildPath:function(t,n,a){var r=n.symbolType;if(r!=="none"){var o=symbolBuildProxies[r];o||(r="rect",o=symbolBuildProxies[r]),symbolShapeMakers[r](n.x,n.y,n.width,n.height,o.shape),o.buildPath(t,o.shape,a)}}});function symbolPathSetColor(t,n){if(this.type!=="image"){var a=this.style;this.__isEmptyBrush?(a.stroke=t,a.fill=n||tokens.color.neutral00,a.lineWidth=2):this.shape.symbolType==="line"?a.stroke=t:a.fill=t,this.markRedraw()}}function createSymbol$1(t,n,a,r,o,s,l){var c=t.indexOf("empty")===0;c&&(t=t.substr(5,1).toLowerCase()+t.substr(6));var u;return t.indexOf("image://")===0?u=makeImage(t.slice(8),new BoundingRect(n,a,r,o),l?"center":"cover"):t.indexOf("path://")===0?u=makePath(t.slice(7),{},new BoundingRect(n,a,r,o),l?"center":"cover"):u=new SymbolClz({shape:{symbolType:t,x:n,y:a,width:r,height:o}}),u.__isEmptyBrush=c,u.setColor=symbolPathSetColor,s&&u.setColor(s),u}function normalizeSymbolSize(t){return isArray$1(t)||(t=[+t,+t]),[t[0]||0,t[1]||0]}function normalizeSymbolOffset(t,n){if(t!=null)return isArray$1(t)||(t=[t,t]),[parsePercent(t[0],n[0])||0,parsePercent(retrieve2(t[1],t[0]),n[1])||0]}function isSafeNum(t){return isFinite(t)}function createLinearGradient(t,n,a){var r=n.x==null?0:n.x,o=n.x2==null?1:n.x2,s=n.y==null?0:n.y,l=n.y2==null?0:n.y2;n.global||(r=r*a.width+a.x,o=o*a.width+a.x,s=s*a.height+a.y,l=l*a.height+a.y),r=isSafeNum(r)?r:0,o=isSafeNum(o)?o:1,s=isSafeNum(s)?s:0,l=isSafeNum(l)?l:0;var c=t.createLinearGradient(r,s,o,l);return c}function createRadialGradient(t,n,a){var r=a.width,o=a.height,s=Math.min(r,o),l=n.x==null?.5:n.x,c=n.y==null?.5:n.y,u=n.r==null?.5:n.r;n.global||(l=l*r+a.x,c=c*o+a.y,u=u*s),l=isSafeNum(l)?l:.5,c=isSafeNum(c)?c:.5,u=u>=0&&isSafeNum(u)?u:.5;var d=t.createRadialGradient(l,c,0,l,c,u);return d}function getCanvasGradient(t,n,a){for(var r=n.type==="radial"?createRadialGradient(t,n,a):createLinearGradient(t,n,a),o=n.colorStops,s=0;s<o.length;s++)r.addColorStop(o[s].offset,o[s].color);return r}function isClipPathChanged(t,n){if(t===n||!t&&!n)return!1;if(!t||!n||t.length!==n.length)return!0;for(var a=0;a<t.length;a++)if(t[a]!==n[a])return!0;return!1}function parseInt10(t){return parseInt(t,10)}function getSize(t,n,a){var r=["width","height"][n],o=["clientWidth","clientHeight"][n],s=["paddingLeft","paddingTop"][n],l=["paddingRight","paddingBottom"][n];if(a[r]!=null&&a[r]!=="auto")return parseFloat(a[r]);var c=document.defaultView.getComputedStyle(t);return(t[o]||parseInt10(c[r])||parseInt10(t.style[r]))-(parseInt10(c[s])||0)-(parseInt10(c[l])||0)|0}function normalizeLineDash(t,n){return!t||t==="solid"||!(n>0)?null:t==="dashed"?[4*n,2*n]:t==="dotted"?[n]:isNumber(t)?[t]:isArray$1(t)?t:null}function getLineDash(t){var n=t.style,a=n.lineDash&&n.lineWidth>0&&normalizeLineDash(n.lineDash,n.lineWidth),r=n.lineDashOffset;if(a){var o=n.strokeNoScale&&t.getLineScale?t.getLineScale():1;o&&o!==1&&(a=map$1(a,function(s){return s/o}),r/=o)}return[a,r]}var pathProxyForDraw=new PathProxy(!0);function styleHasStroke(t){var n=t.stroke;return!(n==null||n==="none"||!(t.lineWidth>0))}function isValidStrokeFillStyle(t){return typeof t=="string"&&t!=="none"}function styleHasFill(t){var n=t.fill;return n!=null&&n!=="none"}function doFillPath(t,n){if(n.fillOpacity!=null&&n.fillOpacity!==1){var a=t.globalAlpha;t.globalAlpha=n.fillOpacity*n.opacity,t.fill(),t.globalAlpha=a}else t.fill()}function doStrokePath(t,n){if(n.strokeOpacity!=null&&n.strokeOpacity!==1){var a=t.globalAlpha;t.globalAlpha=n.strokeOpacity*n.opacity,t.stroke(),t.globalAlpha=a}else t.stroke()}function createCanvasPattern(t,n,a){var r=createOrUpdateImage(n.image,n.__image,a);if(isImageReady(r)){var o=t.createPattern(r,n.repeat||"repeat");if(typeof DOMMatrix=="function"&&o&&o.setTransform){var s=new DOMMatrix;s.translateSelf(n.x||0,n.y||0),s.rotateSelf(0,0,(n.rotation||0)*RADIAN_TO_DEGREE),s.scaleSelf(n.scaleX||1,n.scaleY||1),o.setTransform(s)}return o}}function brushPath(t,n,a,r){var o,s=styleHasStroke(a),l=styleHasFill(a),c=a.strokePercent,u=c<1,d=!n.path;(!n.silent||u)&&d&&n.createPathProxy();var f=n.path||pathProxyForDraw,v=n.__dirty;if(!r){var _=a.fill,g=a.stroke,y=l&&!!_.colorStops,b=s&&!!g.colorStops,T=l&&!!_.image,S=s&&!!g.image,C=void 0,E=void 0,x=void 0,A=void 0,N=void 0;(y||b)&&(N=n.getBoundingRect()),y&&(C=v?getCanvasGradient(t,_,N):n.__canvasFillGradient,n.__canvasFillGradient=C),b&&(E=v?getCanvasGradient(t,g,N):n.__canvasStrokeGradient,n.__canvasStrokeGradient=E),T&&(x=v||!n.__canvasFillPattern?createCanvasPattern(t,_,n):n.__canvasFillPattern,n.__canvasFillPattern=x),S&&(A=v||!n.__canvasStrokePattern?createCanvasPattern(t,g,n):n.__canvasStrokePattern,n.__canvasStrokePattern=A),y?t.fillStyle=C:T&&(x?t.fillStyle=x:l=!1),b?t.strokeStyle=E:S&&(A?t.strokeStyle=A:s=!1)}var M=n.getGlobalScale();f.setScale(M[0],M[1],n.segmentIgnoreThreshold);var R,D;t.setLineDash&&a.lineDash&&(o=getLineDash(n),R=o[0],D=o[1]);var L=!0;(d||v&SHAPE_CHANGED_BIT)&&(f.setDPR(t.dpr),u?f.setContext(null):(f.setContext(t),L=!1),f.reset(),n.buildPath(f,n.shape,r),f.toStatic(),n.pathUpdated()),L&&f.rebuildPath(t,u?c:1),R&&(t.setLineDash(R),t.lineDashOffset=D),r||(a.strokeFirst?(s&&doStrokePath(t,a),l&&doFillPath(t,a)):(l&&doFillPath(t,a),s&&doStrokePath(t,a))),R&&t.setLineDash([])}function brushImage(t,n,a){var r=n.__image=createOrUpdateImage(a.image,n.__image,n,n.onload);if(!(!r||!isImageReady(r))){var o=a.x||0,s=a.y||0,l=n.getWidth(),c=n.getHeight(),u=r.width/r.height;if(l==null&&c!=null?l=c*u:c==null&&l!=null?c=l/u:l==null&&c==null&&(l=r.width,c=r.height),a.sWidth&&a.sHeight){var d=a.sx||0,f=a.sy||0;t.drawImage(r,d,f,a.sWidth,a.sHeight,o,s,l,c)}else if(a.sx&&a.sy){var d=a.sx,f=a.sy,v=l-d,_=c-f;t.drawImage(r,d,f,v,_,o,s,l,c)}else t.drawImage(r,o,s,l,c)}}function brushText(t,n,a){var r,o=a.text;if(o!=null&&(o+=""),o){t.font=a.font||DEFAULT_FONT,t.textAlign=a.textAlign,t.textBaseline=a.textBaseline;var s=void 0,l=void 0;t.setLineDash&&a.lineDash&&(r=getLineDash(n),s=r[0],l=r[1]),s&&(t.setLineDash(s),t.lineDashOffset=l),a.strokeFirst?(styleHasStroke(a)&&t.strokeText(o,a.x,a.y),styleHasFill(a)&&t.fillText(o,a.x,a.y)):(styleHasFill(a)&&t.fillText(o,a.x,a.y),styleHasStroke(a)&&t.strokeText(o,a.x,a.y)),s&&t.setLineDash([])}}var SHADOW_NUMBER_PROPS=["shadowBlur","shadowOffsetX","shadowOffsetY"],STROKE_PROPS=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function bindCommonProps(t,n,a,r,o){var s=!1;if(!r&&(a=a||{},n===a))return!1;if(r||n.opacity!==a.opacity){flushPathDrawn(t,o),s=!0;var l=Math.max(Math.min(n.opacity,1),0);t.globalAlpha=isNaN(l)?DEFAULT_COMMON_STYLE.opacity:l}(r||n.blend!==a.blend)&&(s||(flushPathDrawn(t,o),s=!0),t.globalCompositeOperation=n.blend||DEFAULT_COMMON_STYLE.blend);for(var c=0;c<SHADOW_NUMBER_PROPS.length;c++){var u=SHADOW_NUMBER_PROPS[c];(r||n[u]!==a[u])&&(s||(flushPathDrawn(t,o),s=!0),t[u]=t.dpr*(n[u]||0))}return(r||n.shadowColor!==a.shadowColor)&&(s||(flushPathDrawn(t,o),s=!0),t.shadowColor=n.shadowColor||DEFAULT_COMMON_STYLE.shadowColor),s}function bindPathAndTextCommonStyle(t,n,a,r,o){var s=getStyle(n,o.inHover),l=r?null:a&&getStyle(a,o.inHover)||{};if(s===l)return!1;var c=bindCommonProps(t,s,l,r,o);if((r||s.fill!==l.fill)&&(c||(flushPathDrawn(t,o),c=!0),isValidStrokeFillStyle(s.fill)&&(t.fillStyle=s.fill)),(r||s.stroke!==l.stroke)&&(c||(flushPathDrawn(t,o),c=!0),isValidStrokeFillStyle(s.stroke)&&(t.strokeStyle=s.stroke)),(r||s.opacity!==l.opacity)&&(c||(flushPathDrawn(t,o),c=!0),t.globalAlpha=s.opacity==null?1:s.opacity),n.hasStroke()){var u=s.lineWidth,d=u/(s.strokeNoScale&&n.getLineScale?n.getLineScale():1);t.lineWidth!==d&&(c||(flushPathDrawn(t,o),c=!0),t.lineWidth=d)}for(var f=0;f<STROKE_PROPS.length;f++){var v=STROKE_PROPS[f],_=v[0];(r||s[_]!==l[_])&&(c||(flushPathDrawn(t,o),c=!0),t[_]=s[_]||v[1])}return c}function bindImageStyle(t,n,a,r,o){return bindCommonProps(t,getStyle(n,o.inHover),a&&getStyle(a,o.inHover),r,o)}function setContextTransform(t,n){var a=n.transform,r=t.dpr||1;a?t.setTransform(r*a[0],r*a[1],r*a[2],r*a[3],r*a[4],r*a[5]):t.setTransform(r,0,0,r,0,0)}function updateClipStatus(t,n,a){for(var r=!1,o=0;o<t.length;o++){var s=t[o];r=r||s.isZeroArea(),setContextTransform(n,s),n.beginPath(),s.buildPath(n,s.shape),n.clip()}a.allClipped=r}function isTransformChanged(t,n){return t&&n?t[0]!==n[0]||t[1]!==n[1]||t[2]!==n[2]||t[3]!==n[3]||t[4]!==n[4]||t[5]!==n[5]:!(!t&&!n)}var DRAW_TYPE_PATH=1,DRAW_TYPE_IMAGE=2,DRAW_TYPE_TEXT=3,DRAW_TYPE_INCREMENTAL=4;function canPathBatch(t){var n=styleHasFill(t),a=styleHasStroke(t);return!(t.lineDash||!(+n^+a)||n&&typeof t.fill!="string"||a&&typeof t.stroke!="string"||t.strokePercent<1||t.strokeOpacity<1||t.fillOpacity<1)}function flushPathDrawn(t,n){n.batchFill&&t.fill(),n.batchStroke&&t.stroke(),n.batchFill="",n.batchStroke=""}function getStyle(t,n){return n&&t.__hoverStyle||t.style}function brushSingle(t,n){brush(t,n,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function brush(t,n,a,r){var o=n.transform;if(!n.shouldBePainted(a.viewWidth,a.viewHeight,!1,!1)){n.__dirty&=~REDRAW_BIT,n.__isRendered=!1;return}var s=n.__clipPaths,l=a.prevElClipPaths,c=!1,u=!1;if((!l||isClipPathChanged(s,l))&&(l&&l.length&&(flushPathDrawn(t,a),t.restore(),u=c=!0,a.prevElClipPaths=null,a.allClipped=!1,a.prevEl=null),s&&s.length&&(flushPathDrawn(t,a),t.save(),updateClipStatus(s,t,a),c=!0),a.prevElClipPaths=s),a.allClipped){n.__isRendered=!1;return}n.beforeBrush&&n.beforeBrush(),n.innerBeforeBrush();var d=a.prevEl;d||(u=c=!0);var f=n instanceof Path&&n.autoBatch&&canPathBatch(n.style);c||isTransformChanged(o,d.transform)?(flushPathDrawn(t,a),setContextTransform(t,n)):f||flushPathDrawn(t,a);var v=getStyle(n,a.inHover);n instanceof Path?(a.lastDrawType!==DRAW_TYPE_PATH&&(u=!0,a.lastDrawType=DRAW_TYPE_PATH),bindPathAndTextCommonStyle(t,n,d,u,a),(!f||!a.batchFill&&!a.batchStroke)&&t.beginPath(),brushPath(t,n,v,f),f&&(a.batchFill=v.fill||"",a.batchStroke=v.stroke||"")):n instanceof TSpan?(a.lastDrawType!==DRAW_TYPE_TEXT&&(u=!0,a.lastDrawType=DRAW_TYPE_TEXT),bindPathAndTextCommonStyle(t,n,d,u,a),brushText(t,n,v)):n instanceof ZRImage?(a.lastDrawType!==DRAW_TYPE_IMAGE&&(u=!0,a.lastDrawType=DRAW_TYPE_IMAGE),bindImageStyle(t,n,d,u,a),brushImage(t,n,v)):n.getTemporalDisplayables&&(a.lastDrawType!==DRAW_TYPE_INCREMENTAL&&(u=!0,a.lastDrawType=DRAW_TYPE_INCREMENTAL),brushIncremental(t,n,a)),f&&r&&flushPathDrawn(t,a),n.innerAfterBrush(),n.afterBrush&&n.afterBrush(),a.prevEl=n,n.__dirty=0,n.__isRendered=!0}function brushIncremental(t,n,a){var r=n.getDisplayables(),o=n.getTemporalDisplayables();t.save();var s={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:a.viewWidth,viewHeight:a.viewHeight,inHover:a.inHover},l,c;for(l=n.getCursor(),c=r.length;l<c;l++){var u=r[l];u.beforeBrush&&u.beforeBrush(),u.innerBeforeBrush(),brush(t,u,s,l===c-1),u.innerAfterBrush(),u.afterBrush&&u.afterBrush(),s.prevEl=u}for(var d=0,f=o.length;d<f;d++){var u=o[d];u.beforeBrush&&u.beforeBrush(),u.innerBeforeBrush(),brush(t,u,s,d===f-1),u.innerAfterBrush(),u.afterBrush&&u.afterBrush(),s.prevEl=u}n.clearTemporalDisplayables(),n.notClear=!0,t.restore()}var decalMap=new WeakMap$1,decalCache=new LRU(100),decalKeys=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function createOrUpdatePatternFromDecal(t,n){if(t==="none")return null;var a=n.getDevicePixelRatio(),r=n.getZr(),o=r.painter.type==="svg";t.dirty&&decalMap.delete(t);var s=decalMap.get(t);if(s)return s;var l=defaults(t,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});l.backgroundColor==="none"&&(l.backgroundColor=null);var c={repeat:"repeat"};return u(c),c.rotation=l.rotation,c.scaleX=c.scaleY=o?1:1/a,decalMap.set(t,c),t.dirty=!1,c;function u(d){for(var f=[a],v=!0,_=0;_<decalKeys.length;++_){var g=l[decalKeys[_]];if(g!=null&&!isArray$1(g)&&!isString(g)&&!isNumber(g)&&typeof g!="boolean"){v=!1;break}f.push(g)}var y;if(v){y=f.join(",")+(o?"-svg":"");var b=decalCache.get(y);b&&(o?d.svgElement=b:d.image=b)}var T=normalizeDashArrayX(l.dashArrayX),S=normalizeDashArrayY(l.dashArrayY),C=normalizeSymbolArray(l.symbol),E=getLineBlockLengthX(T),x=getLineBlockLengthY(S),A=!o&&platformApi.createCanvas(),N=o&&{tag:"g",attrs:{},key:"dcl",children:[]},M=D(),R;A&&(A.width=M.width*a,A.height=M.height*a,R=A.getContext("2d")),L(),v&&decalCache.put(y,A||N),d.image=A,d.svgElement=N,d.svgWidth=M.width,d.svgHeight=M.height;function D(){for(var I=1,$=0,V=E.length;$<V;++$)I=getLeastCommonMultiple(I,E[$]);for(var H=1,$=0,V=C.length;$<V;++$)H=getLeastCommonMultiple(H,C[$].length);I*=H;var X=x*E.length*C.length;return{width:Math.max(1,Math.min(I,l.maxTileWidth)),height:Math.max(1,Math.min(X,l.maxTileHeight))}}function L(){R&&(R.clearRect(0,0,A.width,A.height),l.backgroundColor&&(R.fillStyle=l.backgroundColor,R.fillRect(0,0,A.width,A.height)));for(var I=0,$=0;$<S.length;++$)I+=S[$];if(I<=0)return;for(var V=-x,H=0,X=0,q=0;V<M.height;){if(H%2===0){for(var z=X/2%C.length,G=0,oe=0,ne=0;G<M.width*2;){for(var ue=0,$=0;$<T[q].length;++$)ue+=T[q][$];if(ue<=0)break;if(oe%2===0){var se=(1-l.symbolSize)*.5,fe=G+T[q][oe]*se,ae=V+S[H]*se,ie=T[q][oe]*l.symbolSize,ve=S[H]*l.symbolSize,le=ne/2%C[z].length;pe(fe,ae,ie,ve,C[z][le])}G+=T[q][oe],++ne,++oe,oe===T[q].length&&(oe=0)}++q,q===T.length&&(q=0)}V+=S[H],++X,++H,H===S.length&&(H=0)}function pe(Te,U,W,w,P){var F=o?1:a,Y=createSymbol$1(P,Te*F,U*F,W*F,w*F,l.color,l.symbolKeepAspect);if(o){var K=r.painter.renderOneToVNode(Y);K&&N.children.push(K)}else brushSingle(R,Y)}}}}function normalizeSymbolArray(t){if(!t||t.length===0)return[["rect"]];if(isString(t))return[[t]];for(var n=!0,a=0;a<t.length;++a)if(!isString(t[a])){n=!1;break}if(n)return normalizeSymbolArray([t]);for(var r=[],a=0;a<t.length;++a)isString(t[a])?r.push([t[a]]):r.push(t[a]);return r}function normalizeDashArrayX(t){if(!t||t.length===0)return[[0,0]];if(isNumber(t)){var n=Math.ceil(t);return[[n,n]]}for(var a=!0,r=0;r<t.length;++r)if(!isNumber(t[r])){a=!1;break}if(a)return normalizeDashArrayX([t]);for(var o=[],r=0;r<t.length;++r)if(isNumber(t[r])){var n=Math.ceil(t[r]);o.push([n,n])}else{var n=map$1(t[r],function(c){return Math.ceil(c)});n.length%2===1?o.push(n.concat(n)):o.push(n)}return o}function normalizeDashArrayY(t){if(!t||typeof t=="object"&&t.length===0)return[0,0];if(isNumber(t)){var n=Math.ceil(t);return[n,n]}var a=map$1(t,function(r){return Math.ceil(r)});return t.length%2?a.concat(a):a}function getLineBlockLengthX(t){return map$1(t,function(n){return getLineBlockLengthY(n)})}function getLineBlockLengthY(t){for(var n=0,a=0;a<t.length;++a)n+=t[a];return t.length%2===1?n*2:n}function decalVisual(t,n){t.eachRawSeries(function(a){if(!t.isSeriesFiltered(a)){var r=a.getData();r.hasItemVisual()&&r.each(function(l){var c=r.getItemVisual(l,"decal");if(c){var u=r.ensureUniqueItemVisual(l,"style");u.decal=createOrUpdatePatternFromDecal(c,n)}});var o=r.getVisual("decal");if(o){var s=r.getVisual("style");s.decal=createOrUpdatePatternFromDecal(o,n)}}})}var lifecycle=new Eventful,implsStore={};function registerImpl(t,n){implsStore[t]=n}function getImpl(t){return implsStore[t]}var TEST_FRAME_REMAIN_TIME=1,PRIORITY_PROCESSOR_SERIES_FILTER=800,PRIORITY_PROCESSOR_DATASTACK=900,PRIORITY_PROCESSOR_FILTER=1e3,PRIORITY_PROCESSOR_DEFAULT=2e3,PRIORITY_PROCESSOR_STATISTIC=5e3,PRIORITY_VISUAL_LAYOUT=1e3,PRIORITY_VISUAL_PROGRESSIVE_LAYOUT=1100,PRIORITY_VISUAL_GLOBAL=2e3,PRIORITY_VISUAL_CHART=3e3,PRIORITY_VISUAL_COMPONENT=4e3,PRIORITY_VISUAL_CHART_DATA_CUSTOM=4500,PRIORITY_VISUAL_POST_CHART_LAYOUT=4600,PRIORITY_VISUAL_BRUSH=5e3,PRIORITY_VISUAL_ARIA=6e3,PRIORITY_VISUAL_DECAL=7e3,PRIORITY={PROCESSOR:{FILTER:PRIORITY_PROCESSOR_FILTER,SERIES_FILTER:PRIORITY_PROCESSOR_SERIES_FILTER,STATISTIC:PRIORITY_PROCESSOR_STATISTIC},VISUAL:{LAYOUT:PRIORITY_VISUAL_LAYOUT,PROGRESSIVE_LAYOUT:PRIORITY_VISUAL_PROGRESSIVE_LAYOUT,GLOBAL:PRIORITY_VISUAL_GLOBAL,CHART:PRIORITY_VISUAL_CHART,POST_CHART_LAYOUT:PRIORITY_VISUAL_POST_CHART_LAYOUT,COMPONENT:PRIORITY_VISUAL_COMPONENT,BRUSH:PRIORITY_VISUAL_BRUSH,CHART_ITEM:PRIORITY_VISUAL_CHART_DATA_CUSTOM,ARIA:PRIORITY_VISUAL_ARIA,DECAL:PRIORITY_VISUAL_DECAL}},IN_MAIN_PROCESS_KEY="__flagInMainProcess",MAIN_PROCESS_VERSION_KEY="__mainProcessVersion",PENDING_UPDATE="__pendingUpdate",STATUS_NEEDS_UPDATE_KEY="__needsUpdateStatus",ACTION_REG=/^[a-zA-Z0-9_]+$/,CONNECT_STATUS_KEY="__connectUpdateStatus",CONNECT_STATUS_PENDING=0,CONNECT_STATUS_UPDATING=1,CONNECT_STATUS_UPDATED=2;function createRegisterEventWithLowercaseECharts(t){return function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];if(this.isDisposed()){this.id;return}return toLowercaseNameAndCallEventful(this,t,n)}}function createRegisterEventWithLowercaseMessageCenter(t){return function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];return toLowercaseNameAndCallEventful(this,t,n)}}function toLowercaseNameAndCallEventful(t,n,a){return a[0]=a[0]&&a[0].toLowerCase(),Eventful.prototype[n].apply(t,a)}var MessageCenter=function(t){__extends$1(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n}(Eventful),messageCenterProto=MessageCenter.prototype;messageCenterProto.on=createRegisterEventWithLowercaseMessageCenter("on");messageCenterProto.off=createRegisterEventWithLowercaseMessageCenter("off");var prepare,prepareView,updateDirectly,updateMethods,doConvertPixel,updateStreamModes,doDispatchAction,flushPendingActions,triggerUpdatedEvent,bindRenderedEvent,bindMouseEvent,render,renderComponents,renderSeries,createExtensionAPI,enableConnect,markStatusToUpdate,applyChangedStates,updateMainProcessVersion,ECharts=function(t){__extends$1(n,t);function n(a,r,o){var s=t.call(this,new ECEventProcessor)||this;s._chartsViews=[],s._chartsMap={},s._componentsViews=[],s._componentsMap={},s._pendingActions=[],o=o||{},s._dom=a;var l="canvas",c="auto",u=!1;s[MAIN_PROCESS_VERSION_KEY]=1,o.ssr;var d=s._zr=init$1(a,{renderer:o.renderer||l,devicePixelRatio:o.devicePixelRatio,width:o.width,height:o.height,ssr:o.ssr,useDirtyRect:retrieve2(o.useDirtyRect,u),useCoarsePointer:retrieve2(o.useCoarsePointer,c),pointerSize:o.pointerSize});s._ssr=o.ssr,s._throttledZrFlush=throttle(bind$1(d.flush,d),17),s._updateTheme(r),s._locale=createLocaleObject(o.locale||SYSTEM_LANG),s._coordSysMgr=new CoordinateSystemManager;var f=s._api=createExtensionAPI(s);function v(_,g){return _.__prio-g.__prio}return sort(visualFuncs,v),sort(dataProcessorFuncs,v),s._scheduler=new Scheduler(s,f,dataProcessorFuncs,visualFuncs),s._messageCenter=new MessageCenter,s._initEvents(),s.resize=bind$1(s.resize,s),d.animation.on("frame",s._onframe,s),bindRenderedEvent(d,s),bindMouseEvent(d,s),setAsPrimitive(s),s}return n.prototype._onframe=function(){if(!this._disposed){applyChangedStates(this);var a=this._scheduler;if(this[PENDING_UPDATE]){var r=this[PENDING_UPDATE].silent;this[IN_MAIN_PROCESS_KEY]=!0,updateMainProcessVersion(this);try{prepare(this),updateMethods.update.call(this,null,this[PENDING_UPDATE].updateParams)}catch(u){throw this[IN_MAIN_PROCESS_KEY]=!1,this[PENDING_UPDATE]=null,u}this._zr.flush(),this[IN_MAIN_PROCESS_KEY]=!1,this[PENDING_UPDATE]=null,flushPendingActions.call(this,r),triggerUpdatedEvent.call(this,r)}else if(a.unfinished){var o=TEST_FRAME_REMAIN_TIME,s=this._model,l=this._api;a.unfinished=!1;do{var c=+new Date;a.performSeriesTasks(s),a.performDataProcessorTasks(s),updateStreamModes(this,s),a.performVisualTasks(s),renderSeries(this,this._model,l,"remain",{}),o-=+new Date-c}while(o>0&&a.unfinished);a.unfinished||this._zr.flush()}}},n.prototype.getDom=function(){return this._dom},n.prototype.getId=function(){return this.id},n.prototype.getZr=function(){return this._zr},n.prototype.isSSR=function(){return this._ssr},n.prototype.setOption=function(a,r,o){if(!this[IN_MAIN_PROCESS_KEY]){if(this._disposed){this.id;return}var s,l,c;if(isObject$3(r)&&(o=r.lazyUpdate,s=r.silent,l=r.replaceMerge,c=r.transition,r=r.notMerge),this[IN_MAIN_PROCESS_KEY]=!0,updateMainProcessVersion(this),!this._model||r){var u=new OptionManager(this._api),d=this._theme,f=this._model=new GlobalModel;f.scheduler=this._scheduler,f.ssr=this._ssr,f.init(null,null,null,d,this._locale,u)}this._model.setOption(a,{replaceMerge:l},optionPreprocessorFuncs);var v={seriesTransition:c,optionChanged:!0};if(o)this[PENDING_UPDATE]={silent:s,updateParams:v},this[IN_MAIN_PROCESS_KEY]=!1,this.getZr().wakeUp();else{try{prepare(this),updateMethods.update.call(this,null,v)}catch(_){throw this[PENDING_UPDATE]=null,this[IN_MAIN_PROCESS_KEY]=!1,_}this._ssr||this._zr.flush(),this[PENDING_UPDATE]=null,this[IN_MAIN_PROCESS_KEY]=!1,flushPendingActions.call(this,s),triggerUpdatedEvent.call(this,s)}}},n.prototype.setTheme=function(a,r){if(!this[IN_MAIN_PROCESS_KEY]){if(this._disposed){this.id;return}var o=this._model;if(o){var s=r&&r.silent,l=null;this[PENDING_UPDATE]&&(s==null&&(s=this[PENDING_UPDATE].silent),l=this[PENDING_UPDATE].updateParams,this[PENDING_UPDATE]=null),this[IN_MAIN_PROCESS_KEY]=!0,updateMainProcessVersion(this);try{this._updateTheme(a),o.setTheme(this._theme),prepare(this),updateMethods.update.call(this,{type:"setTheme"},l)}catch(c){throw this[IN_MAIN_PROCESS_KEY]=!1,c}this[IN_MAIN_PROCESS_KEY]=!1,flushPendingActions.call(this,s),triggerUpdatedEvent.call(this,s)}}},n.prototype._updateTheme=function(a){isString(a)&&(a=themeStorage[a]),a&&(a=clone$3(a),a&&globalBackwardCompat(a,!0),this._theme=a)},n.prototype.getModel=function(){return this._model},n.prototype.getOption=function(){return this._model&&this._model.getOption()},n.prototype.getWidth=function(){return this._zr.getWidth()},n.prototype.getHeight=function(){return this._zr.getHeight()},n.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||env.hasGlobalWindow&&window.devicePixelRatio||1},n.prototype.getRenderedCanvas=function(a){return this.renderToCanvas(a)},n.prototype.renderToCanvas=function(a){a=a||{};var r=this._zr.painter;return r.getRenderedCanvas({backgroundColor:a.backgroundColor||this._model.get("backgroundColor"),pixelRatio:a.pixelRatio||this.getDevicePixelRatio()})},n.prototype.renderToSVGString=function(a){a=a||{};var r=this._zr.painter;return r.renderToString({useViewBox:a.useViewBox})},n.prototype.getSvgDataURL=function(){var a=this._zr,r=a.storage.getDisplayList();return each$8(r,function(o){o.stopAnimation(null,!0)}),a.painter.toDataURL()},n.prototype.getDataURL=function(a){if(this._disposed){this.id;return}a=a||{};var r=a.excludeComponents,o=this._model,s=[],l=this;each$8(r,function(u){o.eachComponent({mainType:u},function(d){var f=l._componentsMap[d.__viewId];f.group.ignore||(s.push(f),f.group.ignore=!0)})});var c=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(a).toDataURL("image/"+(a&&a.type||"png"));return each$8(s,function(u){u.group.ignore=!1}),c},n.prototype.getConnectedDataURL=function(a){if(this._disposed){this.id;return}var r=a.type==="svg",o=this.group,s=Math.min,l=Math.max,c=1/0;if(connectedGroups[o]){var u=c,d=c,f=-c,v=-c,_=[],g=a&&a.pixelRatio||this.getDevicePixelRatio();each$8(instances,function(E,x){if(E.group===o){var A=r?E.getZr().painter.getSvgDom().innerHTML:E.renderToCanvas(clone$3(a)),N=E.getDom().getBoundingClientRect();u=s(N.left,u),d=s(N.top,d),f=l(N.right,f),v=l(N.bottom,v),_.push({dom:A,left:N.left,top:N.top})}}),u*=g,d*=g,f*=g,v*=g;var y=f-u,b=v-d,T=platformApi.createCanvas(),S=init$1(T,{renderer:r?"svg":"canvas"});if(S.resize({width:y,height:b}),r){var C="";return each$8(_,function(E){var x=E.left-u,A=E.top-d;C+='<g transform="translate('+x+","+A+')">'+E.dom+"</g>"}),S.painter.getSvgRoot().innerHTML=C,a.connectedBackgroundColor&&S.painter.setBackgroundColor(a.connectedBackgroundColor),S.refreshImmediately(),S.painter.toDataURL()}else return a.connectedBackgroundColor&&S.add(new Rect({shape:{x:0,y:0,width:y,height:b},style:{fill:a.connectedBackgroundColor}})),each$8(_,function(E){var x=new ZRImage({style:{x:E.left*g-u,y:E.top*g-d,image:E.dom}});S.add(x)}),S.refreshImmediately(),T.toDataURL("image/"+(a&&a.type||"png"))}else return this.getDataURL(a)},n.prototype.convertToPixel=function(a,r,o){return doConvertPixel(this,"convertToPixel",a,r,o)},n.prototype.convertToLayout=function(a,r,o){return doConvertPixel(this,"convertToLayout",a,r,o)},n.prototype.convertFromPixel=function(a,r,o){return doConvertPixel(this,"convertFromPixel",a,r,o)},n.prototype.containPixel=function(a,r){if(this._disposed){this.id;return}var o=this._model,s,l=parseFinder(o,a);return each$8(l,function(c,u){u.indexOf("Models")>=0&&each$8(c,function(d){var f=d.coordinateSystem;if(f&&f.containPoint)s=s||!!f.containPoint(r);else if(u==="seriesModels"){var v=this._chartsMap[d.__viewId];v&&v.containPoint&&(s=s||v.containPoint(r,d))}},this)},this),!!s},n.prototype.getVisual=function(a,r){var o=this._model,s=parseFinder(o,a,{defaultMainType:"series"}),l=s.seriesModel,c=l.getData(),u=s.hasOwnProperty("dataIndexInside")?s.dataIndexInside:s.hasOwnProperty("dataIndex")?c.indexOfRawIndex(s.dataIndex):null;return u!=null?getItemVisualFromData(c,u,r):getVisualFromData(c,r)},n.prototype.getViewOfComponentModel=function(a){return this._componentsMap[a.__viewId]},n.prototype.getViewOfSeriesModel=function(a){return this._chartsMap[a.__viewId]},n.prototype._initEvents=function(){var a=this;each$8(MOUSE_EVENT_NAMES,function(o){var s=function(l){var c=a.getModel(),u=l.target,d,f=o==="globalout";if(f?d={}:u&&findEventDispatcher(u,function(b){var T=getECData(b);if(T&&T.dataIndex!=null){var S=T.dataModel||c.getSeriesByIndex(T.seriesIndex);return d=S&&S.getDataParams(T.dataIndex,T.dataType,u)||{},!0}else if(T.eventData)return d=extend({},T.eventData),!0},!0),d){var v=d.componentType,_=d.componentIndex;(v==="markLine"||v==="markPoint"||v==="markArea")&&(v="series",_=d.seriesIndex);var g=v&&_!=null&&c.getComponent(v,_),y=g&&a[g.mainType==="series"?"_chartsMap":"_componentsMap"][g.__viewId];d.event=l,d.type=o,a._$eventProcessor.eventInfo={targetEl:u,packedEvent:d,model:g,view:y},a.trigger(o,d)}};s.zrEventfulCallAtLast=!0,a._zr.on(o,s,a)});var r=this._messageCenter;each$8(publicEventTypeMap,function(o,s){r.on(s,function(l){a.trigger(s,l)})}),handleLegacySelectEvents(r,this,this._api)},n.prototype.isDisposed=function(){return this._disposed},n.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},n.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var a=this.getDom();a&&setAttribute(this.getDom(),DOM_ATTRIBUTE_KEY,"");var r=this,o=r._api,s=r._model;each$8(r._componentsViews,function(l){l.dispose(s,o)}),each$8(r._chartsViews,function(l){l.dispose(s,o)}),r._zr.dispose(),r._dom=r._model=r._chartsMap=r._componentsMap=r._chartsViews=r._componentsViews=r._scheduler=r._api=r._zr=r._throttledZrFlush=r._theme=r._coordSysMgr=r._messageCenter=null,delete instances[r.id]},n.prototype.resize=function(a){if(!this[IN_MAIN_PROCESS_KEY]){if(this._disposed){this.id;return}this._zr.resize(a);var r=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!r){var o=r.resetOption("media"),s=a&&a.silent;this[PENDING_UPDATE]&&(s==null&&(s=this[PENDING_UPDATE].silent),o=!0,this[PENDING_UPDATE]=null),this[IN_MAIN_PROCESS_KEY]=!0,updateMainProcessVersion(this);try{o&&prepare(this),updateMethods.update.call(this,{type:"resize",animation:extend({duration:0},a&&a.animation)})}catch(l){throw this[IN_MAIN_PROCESS_KEY]=!1,l}this[IN_MAIN_PROCESS_KEY]=!1,flushPendingActions.call(this,s),triggerUpdatedEvent.call(this,s)}}},n.prototype.showLoading=function(a,r){if(this._disposed){this.id;return}if(isObject$3(a)&&(r=a,a=""),a=a||"default",this.hideLoading(),!!loadingEffects[a]){var o=loadingEffects[a](this._api,r),s=this._zr;this._loadingFX=o,s.add(o)}},n.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},n.prototype.makeActionFromEvent=function(a){var r=extend({},a);return r.type=connectionEventRevertMap[a.type],r},n.prototype.dispatchAction=function(a,r){if(this._disposed){this.id;return}if(isObject$3(r)||(r={silent:!!r}),!!actions$1[a.type]&&this._model){if(this[IN_MAIN_PROCESS_KEY]){this._pendingActions.push(a);return}var o=r.silent;doDispatchAction.call(this,a,o);var s=r.flush;s?this._zr.flush():s!==!1&&env.browser.weChat&&this._throttledZrFlush(),flushPendingActions.call(this,o),triggerUpdatedEvent.call(this,o)}},n.prototype.updateLabelLayout=function(){lifecycle.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},n.prototype.appendData=function(a){if(this._disposed){this.id;return}var r=a.seriesIndex,o=this.getModel(),s=o.getSeriesByIndex(r);s.appendData(a),this._scheduler.unfinished=!0,this.getZr().wakeUp()},n.internalField=function(){prepare=function(v){var _=v._scheduler;_.restorePipelines(v._model),_.prepareStageTasks(),prepareView(v,!0),prepareView(v,!1),_.plan()},prepareView=function(v,_){for(var g=v._model,y=v._scheduler,b=_?v._componentsViews:v._chartsViews,T=_?v._componentsMap:v._chartsMap,S=v._zr,C=v._api,E=0;E<b.length;E++)b[E].__alive=!1;_?g.eachComponent(function(N,M){N!=="series"&&x(M)}):g.eachSeries(x);function x(N){var M=N.__requireNewView;N.__requireNewView=!1;var R="_ec_"+N.id+"_"+N.type,D=!M&&T[R];if(!D){var L=parseClassType(N.type),I=_?ComponentView.getClass(L.main,L.sub):ChartView.getClass(L.sub);D=new I,D.init(g,C),T[R]=D,b.push(D),S.add(D.group)}N.__viewId=D.__id=R,D.__alive=!0,D.__model=N,D.group.__ecComponentInfo={mainType:N.mainType,index:N.componentIndex},!_&&y.prepareView(D,N,g,C)}for(var E=0;E<b.length;){var A=b[E];A.__alive?E++:(!_&&A.renderTask.dispose(),S.remove(A.group),A.dispose(g,C),b.splice(E,1),T[A.__id]===A&&delete T[A.__id],A.__id=A.group.__ecComponentInfo=null)}},updateDirectly=function(v,_,g,y,b){var T=v._model;if(T.setUpdatePayload(g),!y){each$8([].concat(v._componentsViews).concat(v._chartsViews),A);return}var S={};S[y+"Id"]=g[y+"Id"],S[y+"Index"]=g[y+"Index"],S[y+"Name"]=g[y+"Name"];var C={mainType:y,query:S};b&&(C.subType=b);var E=g.excludeSeriesId,x;E!=null&&(x=createHashMap(),each$8(normalizeToArray(E),function(N){var M=convertOptionIdName(N,null);M!=null&&x.set(M,!0)})),T&&T.eachComponent(C,function(N){var M=x&&x.get(N.id)!=null;if(!M)if(isHighDownPayload(g))if(N instanceof SeriesModel)g.type===HIGHLIGHT_ACTION_TYPE&&!g.notBlur&&!N.get(["emphasis","disabled"])&&blurSeriesFromHighlightPayload(N,g,v._api);else{var R=findComponentHighDownDispatchers(N.mainType,N.componentIndex,g.name,v._api),D=R.focusSelf,L=R.dispatchers;g.type===HIGHLIGHT_ACTION_TYPE&&D&&!g.notBlur&&blurComponent(N.mainType,N.componentIndex,v._api),L&&each$8(L,function(I){g.type===HIGHLIGHT_ACTION_TYPE?enterEmphasis(I):leaveEmphasis(I)})}else isSelectChangePayload(g)&&N instanceof SeriesModel&&(toggleSelectionFromPayload(N,g,v._api),updateSeriesElementSelection(N),markStatusToUpdate(v))},v),T&&T.eachComponent(C,function(N){var M=x&&x.get(N.id)!=null;M||A(v[y==="series"?"_chartsMap":"_componentsMap"][N.__viewId])},v);function A(N){N&&N.__alive&&N[_]&&N[_](N.__model,T,v._api,g)}},updateMethods={prepareAndUpdate:function(v){prepare(this),updateMethods.update.call(this,v,v&&{optionChanged:v.newOption!=null})},update:function(v,_){var g=this._model,y=this._api,b=this._zr,T=this._coordSysMgr,S=this._scheduler;if(g){g.setUpdatePayload(v),S.restoreData(g,v),S.performSeriesTasks(g),T.create(g,y),S.performDataProcessorTasks(g,v),updateStreamModes(this,g),T.update(g,y),r(g),S.performVisualTasks(g,v);var C=g.get("backgroundColor")||"transparent";b.setBackgroundColor(C);var E=g.get("darkMode");E!=null&&E!=="auto"&&b.setDarkMode(E),render(this,g,y,v,_),lifecycle.trigger("afterupdate",g,y)}},updateTransform:function(v){var _=this,g=this._model,y=this._api;if(g){g.setUpdatePayload(v);var b=[];g.eachComponent(function(S,C){if(S!=="series"){var E=_.getViewOfComponentModel(C);if(E&&E.__alive)if(E.updateTransform){var x=E.updateTransform(C,g,y,v);x&&x.update&&b.push(E)}else b.push(E)}});var T=createHashMap();g.eachSeries(function(S){var C=_._chartsMap[S.__viewId];if(C.updateTransform){var E=C.updateTransform(S,g,y,v);E&&E.update&&T.set(S.uid,1)}else T.set(S.uid,1)}),r(g),this._scheduler.performVisualTasks(g,v,{setDirty:!0,dirtyMap:T}),renderSeries(this,g,y,v,{},T),lifecycle.trigger("afterupdate",g,y)}},updateView:function(v){var _=this._model;_&&(_.setUpdatePayload(v),ChartView.markUpdateMethod(v,"updateView"),r(_),this._scheduler.performVisualTasks(_,v,{setDirty:!0}),render(this,_,this._api,v,{}),lifecycle.trigger("afterupdate",_,this._api))},updateVisual:function(v){var _=this,g=this._model;g&&(g.setUpdatePayload(v),g.eachSeries(function(y){y.getData().clearAllVisual()}),ChartView.markUpdateMethod(v,"updateVisual"),r(g),this._scheduler.performVisualTasks(g,v,{visualType:"visual",setDirty:!0}),g.eachComponent(function(y,b){if(y!=="series"){var T=_.getViewOfComponentModel(b);T&&T.__alive&&T.updateVisual(b,g,_._api,v)}}),g.eachSeries(function(y){var b=_._chartsMap[y.__viewId];b.updateVisual(y,g,_._api,v)}),lifecycle.trigger("afterupdate",g,this._api))},updateLayout:function(v){updateMethods.update.call(this,v)}};function a(v,_,g,y,b){if(v._disposed){v.id;return}for(var T=v._model,S=v._coordSysMgr.getCoordinateSystems(),C,E=parseFinder(T,g),x=0;x<S.length;x++){var A=S[x];if(A[_]&&(C=A[_](T,E,y,b))!=null)return C}}doConvertPixel=a,updateStreamModes=function(v,_){var g=v._chartsMap,y=v._scheduler;_.eachSeries(function(b){y.updateStreamModes(b,g[b.__viewId])})},doDispatchAction=function(v,_){var g=this,y=this.getModel(),b=v.type,T=v.escapeConnect,S=actions$1[b],C=(S.update||"update").split(":"),E=C.pop(),x=C[0]!=null&&parseClassType(C[0]);this[IN_MAIN_PROCESS_KEY]=!0,updateMainProcessVersion(this);var A=[v],N=!1;v.batch&&(N=!0,A=map$1(v.batch,function(q){return q=defaults(extend({},q),v),q.batch=null,q}));var M=[],R,D=[],L=S.nonRefinedEventType,I=isSelectChangePayload(v),$=isHighDownPayload(v);if($&&allLeaveBlur(this._api),each$8(A,function(q){var z=S.action(q,y,g._api);if(S.refineEvent?D.push(z):R=z,R=R||extend({},q),R.type=L,M.push(R),$){var G=preParseFinder(v),oe=G.queryOptionMap,ne=G.mainTypeSpecified,ue=ne?oe.keys()[0]:"series";updateDirectly(g,E,q,ue),markStatusToUpdate(g)}else I?(updateDirectly(g,E,q,"series"),markStatusToUpdate(g)):x&&updateDirectly(g,E,q,x.main,x.sub)}),E!=="none"&&!$&&!I&&!x)try{this[PENDING_UPDATE]?(prepare(this),updateMethods.update.call(this,v),this[PENDING_UPDATE]=null):updateMethods[E].call(this,v)}catch(q){throw this[IN_MAIN_PROCESS_KEY]=!1,q}if(N?R={type:L,escapeConnect:T,batch:M}:R=M[0],this[IN_MAIN_PROCESS_KEY]=!1,!_){var V=void 0;if(S.refineEvent){var H=S.refineEvent(D,v,y,this._api).eventContent;assert(isObject$3(H)),V=defaults({type:S.refinedEventType},H),V.fromAction=v.type,V.fromActionPayload=v,V.escapeConnect=!0}var X=this._messageCenter;X.trigger(R.type,R),V&&X.trigger(V.type,V)}},flushPendingActions=function(v){for(var _=this._pendingActions;_.length;){var g=_.shift();doDispatchAction.call(this,g,v)}},triggerUpdatedEvent=function(v){!v&&this.trigger("updated")},bindRenderedEvent=function(v,_){v.on("rendered",function(g){_.trigger("rendered",g),v.animation.isFinished()&&!_[PENDING_UPDATE]&&!_._scheduler.unfinished&&!_._pendingActions.length&&_.trigger("finished")})},bindMouseEvent=function(v,_){v.on("mouseover",function(g){var y=g.target,b=findEventDispatcher(y,isHighDownDispatcher);b&&(handleGlobalMouseOverForHighDown(b,g,_._api),markStatusToUpdate(_))}).on("mouseout",function(g){var y=g.target,b=findEventDispatcher(y,isHighDownDispatcher);b&&(handleGlobalMouseOutForHighDown(b,g,_._api),markStatusToUpdate(_))}).on("click",function(g){var y=g.target,b=findEventDispatcher(y,function(C){return getECData(C).dataIndex!=null},!0);if(b){var T=b.selected?"unselect":"select",S=getECData(b);_._api.dispatchAction({type:T,dataType:S.dataType,dataIndexInside:S.dataIndex,seriesIndex:S.seriesIndex,isFromClick:!0})}})};function r(v){v.clearColorPalette(),v.eachSeries(function(_){_.clearColorPalette()})}function o(v){var _=[],g=[],y=!1;if(v.eachComponent(function(C,E){var x=E.get("zlevel")||0,A=E.get("z")||0,N=E.getZLevelKey();y=y||!!N,(C==="series"?g:_).push({zlevel:x,z:A,idx:E.componentIndex,type:C,key:N})}),y){var b=_.concat(g),T,S;sort(b,function(C,E){return C.zlevel===E.zlevel?C.z-E.z:C.zlevel-E.zlevel}),each$8(b,function(C){var E=v.getComponent(C.type,C.idx),x=C.zlevel,A=C.key;T!=null&&(x=Math.max(T,x)),A?(x===T&&A!==S&&x++,S=A):S&&(x===T&&x++,S=""),T=x,E.setZLevel(x)})}}render=function(v,_,g,y,b){o(_),renderComponents(v,_,g,y,b),each$8(v._chartsViews,function(T){T.__alive=!1}),renderSeries(v,_,g,y,b),each$8(v._chartsViews,function(T){T.__alive||T.remove(_,g)})},renderComponents=function(v,_,g,y,b,T){each$8(T||v._componentsViews,function(S){var C=S.__model;d(C,S),S.render(C,_,g,y),u(C,S),f(C,S)})},renderSeries=function(v,_,g,y,b,T){var S=v._scheduler;b=extend(b||{},{updatedSeries:_.getSeries()}),lifecycle.trigger("series:beforeupdate",_,g,b);var C=!1;_.eachSeries(function(E){var x=v._chartsMap[E.__viewId];x.__alive=!0;var A=x.renderTask;S.updatePayload(A,y),d(E,x),T&&T.get(E.uid)&&A.dirty(),A.perform(S.getPerformArgs(A))&&(C=!0),x.group.silent=!!E.get("silent"),c(E,x),updateSeriesElementSelection(E)}),S.unfinished=C||S.unfinished,lifecycle.trigger("series:layoutlabels",_,g,b),lifecycle.trigger("series:transition",_,g,b),_.eachSeries(function(E){var x=v._chartsMap[E.__viewId];u(E,x),f(E,x)}),l(v,_),lifecycle.trigger("series:afterupdate",_,g,b)},markStatusToUpdate=function(v){v[STATUS_NEEDS_UPDATE_KEY]=!0,v.getZr().wakeUp()},updateMainProcessVersion=function(v){v[MAIN_PROCESS_VERSION_KEY]=(v[MAIN_PROCESS_VERSION_KEY]+1)%1e3},applyChangedStates=function(v){v[STATUS_NEEDS_UPDATE_KEY]&&(v.getZr().storage.traverse(function(_){isElementRemoved(_)||s(_)}),v[STATUS_NEEDS_UPDATE_KEY]=!1)};function s(v){for(var _=[],g=v.currentStates,y=0;y<g.length;y++){var b=g[y];b==="emphasis"||b==="blur"||b==="select"||_.push(b)}v.selected&&v.states.select&&_.push("select"),v.hoverState===HOVER_STATE_EMPHASIS&&v.states.emphasis?_.push("emphasis"):v.hoverState===HOVER_STATE_BLUR&&v.states.blur&&_.push("blur"),v.useStates(_)}function l(v,_){var g=v._zr,y=g.storage,b=0;y.traverse(function(T){T.isGroup||b++}),b>_.get("hoverLayerThreshold")&&!env.node&&!env.worker&&_.eachSeries(function(T){if(!T.preventUsingHoverLayer){var S=v._chartsMap[T.__viewId];S.__alive&&S.eachRendered(function(C){C.states.emphasis&&(C.states.emphasis.hoverLayer=!0)})}})}function c(v,_){var g=v.get("blendMode")||null;_.eachRendered(function(y){y.isGroup||(y.style.blend=g)})}function u(v,_){if(!v.preventAutoZ){var g=retrieveZInfo(v);_.eachRendered(function(y){return traverseUpdateZ(y,g.z,g.zlevel),!0})}}function d(v,_){_.eachRendered(function(g){if(!isElementRemoved(g)){var y=g.getTextContent(),b=g.getTextGuideLine();g.stateTransition&&(g.stateTransition=null),y&&y.stateTransition&&(y.stateTransition=null),b&&b.stateTransition&&(b.stateTransition=null),g.hasState()?(g.prevStates=g.currentStates,g.clearStates()):g.prevStates&&(g.prevStates=null)}})}function f(v,_){var g=v.getModel("stateAnimation"),y=v.isAnimationEnabled(),b=g.get("duration"),T=b>0?{duration:b,delay:g.get("delay"),easing:g.get("easing")}:null;_.eachRendered(function(S){if(S.states&&S.states.emphasis){if(isElementRemoved(S))return;if(S instanceof Path&&savePathStates(S),S.__dirty){var C=S.prevStates;C&&S.useStates(C)}if(y){S.stateTransition=T;var E=S.getTextContent(),x=S.getTextGuideLine();E&&(E.stateTransition=T),x&&(x.stateTransition=T)}S.__dirty&&s(S)}})}createExtensionAPI=function(v){return new(function(_){__extends$1(g,_);function g(){return _!==null&&_.apply(this,arguments)||this}return g.prototype.getCoordinateSystems=function(){return v._coordSysMgr.getCoordinateSystems()},g.prototype.getComponentByElement=function(y){for(;y;){var b=y.__ecComponentInfo;if(b!=null)return v._model.getComponent(b.mainType,b.index);y=y.parent}},g.prototype.enterEmphasis=function(y,b){enterEmphasis(y,b),markStatusToUpdate(v)},g.prototype.leaveEmphasis=function(y,b){leaveEmphasis(y,b),markStatusToUpdate(v)},g.prototype.enterBlur=function(y){enterBlur(y),markStatusToUpdate(v)},g.prototype.leaveBlur=function(y){leaveBlur(y),markStatusToUpdate(v)},g.prototype.enterSelect=function(y){enterSelect(y),markStatusToUpdate(v)},g.prototype.leaveSelect=function(y){leaveSelect(y),markStatusToUpdate(v)},g.prototype.getModel=function(){return v.getModel()},g.prototype.getViewOfComponentModel=function(y){return v.getViewOfComponentModel(y)},g.prototype.getViewOfSeriesModel=function(y){return v.getViewOfSeriesModel(y)},g.prototype.getMainProcessVersion=function(){return v[MAIN_PROCESS_VERSION_KEY]},g}(ExtensionAPI))(v)},enableConnect=function(v){function _(g,y){for(var b=0;b<g.length;b++){var T=g[b];T[CONNECT_STATUS_KEY]=y}}each$8(connectionEventRevertMap,function(g,y){v._messageCenter.on(y,function(b){if(connectedGroups[v.group]&&v[CONNECT_STATUS_KEY]!==CONNECT_STATUS_PENDING){if(b&&b.escapeConnect)return;var T=v.makeActionFromEvent(b),S=[];each$8(instances,function(C){C!==v&&C.group===v.group&&S.push(C)}),_(S,CONNECT_STATUS_PENDING),each$8(S,function(C){C[CONNECT_STATUS_KEY]!==CONNECT_STATUS_UPDATING&&C.dispatchAction(T)}),_(S,CONNECT_STATUS_UPDATED)}})})}}(),n}(Eventful),echartsProto=ECharts.prototype;echartsProto.on=createRegisterEventWithLowercaseECharts("on");echartsProto.off=createRegisterEventWithLowercaseECharts("off");echartsProto.one=function(t,n,a){var r=this;function o(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];n&&n.apply&&n.apply(this,s),r.off(t,o)}this.on.call(this,t,o,a)};var MOUSE_EVENT_NAMES=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function disposedWarning(t){}var actions$1={},connectionEventRevertMap={},publicEventTypeMap={},dataProcessorFuncs=[],optionPreprocessorFuncs=[],visualFuncs=[],themeStorage={},loadingEffects={},instances={},connectedGroups={},idBase=+new Date-0,DOM_ATTRIBUTE_KEY="_echarts_instance_";function init(t,n,a){var r=!(a&&a.ssr);if(r){var o=getInstanceByDom(t);if(o)return o}var s=new ECharts(t,n,a);return s.id="ec_"+idBase++,instances[s.id]=s,r&&setAttribute(t,DOM_ATTRIBUTE_KEY,s.id),enableConnect(s),lifecycle.trigger("afterinit",s),s}function getInstanceByDom(t){return instances[getAttribute(t,DOM_ATTRIBUTE_KEY)]}function registerTheme(t,n){themeStorage[t]=n}function registerPreprocessor(t){indexOf(optionPreprocessorFuncs,t)<0&&optionPreprocessorFuncs.push(t)}function registerProcessor(t,n){normalizeRegister(dataProcessorFuncs,t,n,PRIORITY_PROCESSOR_DEFAULT)}function registerPostInit(t){registerUpdateLifecycle("afterinit",t)}function registerPostUpdate(t){registerUpdateLifecycle("afterupdate",t)}function registerUpdateLifecycle(t,n){lifecycle.on(t,n)}function registerAction(t,n,a){var r,o,s,l,c;isFunction(n)&&(a=n,n=""),isObject$3(t)?(r=t.type,o=t.event,l=t.update,c=t.publishNonRefinedEvent,a||(a=t.action),s=t.refineEvent):(r=t,o=n);function u(f){return f.toLowerCase()}o=u(o||r);var d=s?u(r):o;actions$1[r]||(assert(ACTION_REG.test(r)&&ACTION_REG.test(o)),s&&assert(o!==r),actions$1[r]={actionType:r,refinedEventType:o,nonRefinedEventType:d,update:l,action:a,refineEvent:s},publicEventTypeMap[o]=1,s&&c&&(publicEventTypeMap[d]=1),connectionEventRevertMap[d]=r)}function registerCoordinateSystem(t,n){CoordinateSystemManager.register(t,n)}function registerLayout(t,n){normalizeRegister(visualFuncs,t,n,PRIORITY_VISUAL_LAYOUT,"layout")}function registerVisual(t,n){normalizeRegister(visualFuncs,t,n,PRIORITY_VISUAL_CHART,"visual")}var registeredTasks=[];function normalizeRegister(t,n,a,r,o){if((isFunction(n)||isObject$3(n))&&(a=n,n=r),!(indexOf(registeredTasks,a)>=0)){registeredTasks.push(a);var s=Scheduler.wrapStageHandler(a,o);s.__prio=n,s.__raw=a,t.push(s)}}function registerLoading(t,n){loadingEffects[t]=n}function registerMap$1(t,n,a){var r=getImpl("registerMap");r&&r(t,n,a)}var registerTransform=registerExternalTransform;registerVisual(PRIORITY_VISUAL_GLOBAL,seriesStyleTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataStyleTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataColorPaletteTask);registerVisual(PRIORITY_VISUAL_GLOBAL,seriesSymbolTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataSymbolTask);registerVisual(PRIORITY_VISUAL_DECAL,decalVisual);registerPreprocessor(globalBackwardCompat);registerProcessor(PRIORITY_PROCESSOR_DATASTACK,dataStack);registerLoading("default",defaultLoading);registerAction({type:HIGHLIGHT_ACTION_TYPE,event:HIGHLIGHT_ACTION_TYPE,update:HIGHLIGHT_ACTION_TYPE},noop);registerAction({type:DOWNPLAY_ACTION_TYPE,event:DOWNPLAY_ACTION_TYPE,update:DOWNPLAY_ACTION_TYPE},noop);registerAction({type:SELECT_ACTION_TYPE,event:SELECT_CHANGED_EVENT_TYPE,update:SELECT_ACTION_TYPE,action:noop,refineEvent:makeSelectChangedEvent,publishNonRefinedEvent:!0});registerAction({type:UNSELECT_ACTION_TYPE,event:SELECT_CHANGED_EVENT_TYPE,update:UNSELECT_ACTION_TYPE,action:noop,refineEvent:makeSelectChangedEvent,publishNonRefinedEvent:!0});registerAction({type:TOGGLE_SELECT_ACTION_TYPE,event:SELECT_CHANGED_EVENT_TYPE,update:TOGGLE_SELECT_ACTION_TYPE,action:noop,refineEvent:makeSelectChangedEvent,publishNonRefinedEvent:!0});function makeSelectChangedEvent(t,n,a,r){return{eventContent:{selected:getAllSelectedIndices(a),isFromClick:n.isFromClick||!1}}}registerTheme("default",{});registerTheme("dark",theme);function dataIndexMapValueLength(t){return t==null?0:t.length||1}function defaultKeyGetter(t){return t}var DataDiffer=function(){function t(n,a,r,o,s,l){this._old=n,this._new=a,this._oldKeyGetter=r||defaultKeyGetter,this._newKeyGetter=o||defaultKeyGetter,this.context=s,this._diffModeMultiple=l==="multiple"}return t.prototype.add=function(n){return this._add=n,this},t.prototype.update=function(n){return this._update=n,this},t.prototype.updateManyToOne=function(n){return this._updateManyToOne=n,this},t.prototype.updateOneToMany=function(n){return this._updateOneToMany=n,this},t.prototype.updateManyToMany=function(n){return this._updateManyToMany=n,this},t.prototype.remove=function(n){return this._remove=n,this},t.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},t.prototype._executeOneToOne=function(){var n=this._old,a=this._new,r={},o=new Array(n.length),s=new Array(a.length);this._initIndexMap(n,null,o,"_oldKeyGetter"),this._initIndexMap(a,r,s,"_newKeyGetter");for(var l=0;l<n.length;l++){var c=o[l],u=r[c],d=dataIndexMapValueLength(u);if(d>1){var f=u.shift();u.length===1&&(r[c]=u[0]),this._update&&this._update(f,l)}else d===1?(r[c]=null,this._update&&this._update(u,l)):this._remove&&this._remove(l)}this._performRestAdd(s,r)},t.prototype._executeMultiple=function(){var n=this._old,a=this._new,r={},o={},s=[],l=[];this._initIndexMap(n,r,s,"_oldKeyGetter"),this._initIndexMap(a,o,l,"_newKeyGetter");for(var c=0;c<s.length;c++){var u=s[c],d=r[u],f=o[u],v=dataIndexMapValueLength(d),_=dataIndexMapValueLength(f);if(v>1&&_===1)this._updateManyToOne&&this._updateManyToOne(f,d),o[u]=null;else if(v===1&&_>1)this._updateOneToMany&&this._updateOneToMany(f,d),o[u]=null;else if(v===1&&_===1)this._update&&this._update(f,d),o[u]=null;else if(v>1&&_>1)this._updateManyToMany&&this._updateManyToMany(f,d),o[u]=null;else if(v>1)for(var g=0;g<v;g++)this._remove&&this._remove(d[g]);else this._remove&&this._remove(d)}this._performRestAdd(l,o)},t.prototype._performRestAdd=function(n,a){for(var r=0;r<n.length;r++){var o=n[r],s=a[o],l=dataIndexMapValueLength(s);if(l>1)for(var c=0;c<l;c++)this._add&&this._add(s[c]);else l===1&&this._add&&this._add(s);a[o]=null}},t.prototype._initIndexMap=function(n,a,r,o){for(var s=this._diffModeMultiple,l=0;l<n.length;l++){var c="_ec_"+this[o](n[l],l);if(s||(r[l]=c),!!a){var u=a[c],d=dataIndexMapValueLength(u);d===0?(a[c]=l,s&&r.push(c)):d===1?a[c]=[u,l]:u.push(l)}}},t}(),DimensionUserOuput=function(){function t(n,a){this._encode=n,this._schema=a}return t.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},t.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},t}();function summarizeDimensions(t,n){var a={},r=a.encode={},o=createHashMap(),s=[],l=[],c={};each$8(t.dimensions,function(_){var g=t.getDimensionInfo(_),y=g.coordDim;if(y){var b=g.coordDimIndex;getOrCreateEncodeArr(r,y)[b]=_,g.isExtraCoord||(o.set(y,1),mayLabelDimType(g.type)&&(s[0]=_),getOrCreateEncodeArr(c,y)[b]=t.getDimensionIndex(g.name)),g.defaultTooltip&&l.push(_)}VISUAL_DIMENSIONS.each(function(T,S){var C=getOrCreateEncodeArr(r,S),E=g.otherDims[S];E!=null&&E!==!1&&(C[E]=g.name)})});var u=[],d={};o.each(function(_,g){var y=r[g];d[g]=y[0],u=u.concat(y)}),a.dataDimsOnCoord=u,a.dataDimIndicesOnCoord=map$1(u,function(_){return t.getDimensionInfo(_).storeDimIndex}),a.encodeFirstDimNotExtra=d;var f=r.label;f&&f.length&&(s=f.slice());var v=r.tooltip;return v&&v.length?l=v.slice():l.length||(l=s.slice()),r.defaultedLabel=s,r.defaultedTooltip=l,a.userOutput=new DimensionUserOuput(c,n),a}function getOrCreateEncodeArr(t,n){return t.hasOwnProperty(n)||(t[n]=[]),t[n]}function getDimensionTypeByAxis(t){return t==="category"?"ordinal":t==="time"?"time":"float"}function mayLabelDimType(t){return!(t==="ordinal"||t==="time")}var SeriesDimensionDefine=function(){function t(n){this.otherDims={},n!=null&&extend(this,n)}return t}(),inner$5=makeInner(),dimTypeShort={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},SeriesDataSchema=function(){function t(n){this.dimensions=n.dimensions,this._dimOmitted=n.dimensionOmitted,this.source=n.source,this._fullDimCount=n.fullDimensionCount,this._updateDimOmitted(n.dimensionOmitted)}return t.prototype.isDimensionOmitted=function(){return this._dimOmitted},t.prototype._updateDimOmitted=function(n){this._dimOmitted=n,n&&(this._dimNameMap||(this._dimNameMap=ensureSourceDimNameMap(this.source)))},t.prototype.getSourceDimensionIndex=function(n){return retrieve2(this._dimNameMap.get(n),-1)},t.prototype.getSourceDimension=function(n){var a=this.source.dimensionsDefine;if(a)return a[n]},t.prototype.makeStoreSchema=function(){for(var n=this._fullDimCount,a=shouldRetrieveDataByName(this.source),r=!shouldOmitUnusedDimensions(n),o="",s=[],l=0,c=0;l<n;l++){var u=void 0,d=void 0,f=void 0,v=this.dimensions[c];if(v&&v.storeDimIndex===l)u=a?v.name:null,d=v.type,f=v.ordinalMeta,c++;else{var _=this.getSourceDimension(l);_&&(u=a?_.name:null,d=_.type)}s.push({property:u,type:d,ordinalMeta:f}),a&&u!=null&&(!v||!v.isCalculationCoord)&&(o+=r?u.replace(/\`/g,"`1").replace(/\$/g,"`2"):u),o+="$",o+=dimTypeShort[d]||"f",f&&(o+=f.uid),o+="$"}var g=this.source,y=[g.seriesLayoutBy,g.startIndex,o].join("$$");return{dimensions:s,hash:y}},t.prototype.makeOutputDimensionNames=function(){for(var n=[],a=0,r=0;a<this._fullDimCount;a++){var o=void 0,s=this.dimensions[r];if(s&&s.storeDimIndex===a)s.isCalculationCoord||(o=s.name),r++;else{var l=this.getSourceDimension(a);l&&(o=l.name)}n.push(o)}return n},t.prototype.appendCalculationDimension=function(n){this.dimensions.push(n),n.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},t}();function isSeriesDataSchema(t){return t instanceof SeriesDataSchema}function createDimNameMap(t){for(var n=createHashMap(),a=0;a<(t||[]).length;a++){var r=t[a],o=isObject$3(r)?r.name:r;o!=null&&n.get(o)==null&&n.set(o,a)}return n}function ensureSourceDimNameMap(t){var n=inner$5(t);return n.dimNameMap||(n.dimNameMap=createDimNameMap(t.dimensionsDefine))}function shouldOmitUnusedDimensions(t){return t>30}var isObject$1=isObject$3,map=map$1,CtorInt32Array=typeof Int32Array>"u"?Array:Int32Array,ID_PREFIX="e\0\0",INDEX_NOT_FOUND=-1,TRANSFERABLE_PROPERTIES=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],CLONE_PROPERTIES=["_approximateExtent"],prepareInvertedIndex,getId,getIdNameFromStore,normalizeDimensions,transferProperties,cloneListForMapAndSample,makeIdFromName,SeriesData=function(){function t(n,a){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","minmaxDownSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","minmaxDownSample","lttbDownSample"];var r,o=!1;isSeriesDataSchema(n)?(r=n.dimensions,this._dimOmitted=n.isDimensionOmitted(),this._schema=n):(o=!0,r=n),r=r||["x","y"];for(var s={},l=[],c={},u=!1,d={},f=0;f<r.length;f++){var v=r[f],_=isString(v)?new SeriesDimensionDefine({name:v}):v instanceof SeriesDimensionDefine?v:new SeriesDimensionDefine(v),g=_.name;_.type=_.type||"float",_.coordDim||(_.coordDim=g,_.coordDimIndex=0);var y=_.otherDims=_.otherDims||{};l.push(g),s[g]=_,d[g]!=null&&(u=!0),_.createInvertedIndices&&(c[g]=[]);var b=f;isNumber(_.storeDimIndex)&&(b=_.storeDimIndex),y.itemName===0&&(this._nameDimIdx=b),y.itemId===0&&(this._idDimIdx=b),o&&(_.storeDimIndex=f)}if(this.dimensions=l,this._dimInfos=s,this._initGetDimensionInfo(u),this.hostModel=a,this._invertedIndicesMap=c,this._dimOmitted){var T=this._dimIdxToName=createHashMap();each$8(l,function(S){T.set(s[S].storeDimIndex,S)})}}return t.prototype.getDimension=function(n){var a=this._recognizeDimIndex(n);if(a==null)return n;if(a=n,!this._dimOmitted)return this.dimensions[a];var r=this._dimIdxToName.get(a);if(r!=null)return r;var o=this._schema.getSourceDimension(a);if(o)return o.name},t.prototype.getDimensionIndex=function(n){var a=this._recognizeDimIndex(n);if(a!=null)return a;if(n==null)return-1;var r=this._getDimInfo(n);return r?r.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(n):-1},t.prototype._recognizeDimIndex=function(n){if(isNumber(n)||n!=null&&!isNaN(n)&&!this._getDimInfo(n)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(n)<0))return+n},t.prototype._getStoreDimIndex=function(n){var a=this.getDimensionIndex(n);return a},t.prototype.getDimensionInfo=function(n){return this._getDimInfo(this.getDimension(n))},t.prototype._initGetDimensionInfo=function(n){var a=this._dimInfos;this._getDimInfo=n?function(r){return a.hasOwnProperty(r)?a[r]:void 0}:function(r){return a[r]}},t.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},t.prototype.mapDimension=function(n,a){var r=this._dimSummary;if(a==null)return r.encodeFirstDimNotExtra[n];var o=r.encode[n];return o?o[a]:null},t.prototype.mapDimensionsAll=function(n){var a=this._dimSummary,r=a.encode[n];return(r||[]).slice()},t.prototype.getStore=function(){return this._store},t.prototype.initData=function(n,a,r){var o=this,s;if(n instanceof DataStore&&(s=n),!s){var l=this.dimensions,c=isSourceInstance(n)||isArrayLike(n)?new DefaultDataProvider(n,l.length):n;s=new DataStore;var u=map(l,function(d){return{type:o._dimInfos[d].type,property:d}});s.initData(c,u,r)}this._store=s,this._nameList=(a||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,s.count()),this._dimSummary=summarizeDimensions(this,this._schema),this.userOutput=this._dimSummary.userOutput},t.prototype.appendData=function(n){var a=this._store.appendData(n);this._doInit(a[0],a[1])},t.prototype.appendValues=function(n,a){var r=this._store.appendValues(n,a&&a.length),o=r.start,s=r.end,l=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),a)for(var c=o;c<s;c++){var u=c-o;this._nameList[c]=a[u],l&&makeIdFromName(this,c)}},t.prototype._updateOrdinalMeta=function(){for(var n=this._store,a=this.dimensions,r=0;r<a.length;r++){var o=this._dimInfos[a[r]];o.ordinalMeta&&n.collectOrdinalMeta(o.storeDimIndex,o.ordinalMeta)}},t.prototype._shouldMakeIdFromName=function(){var n=this._store.getProvider();return this._idDimIdx==null&&n.getSource().sourceFormat!==SOURCE_FORMAT_TYPED_ARRAY&&!n.fillStorage},t.prototype._doInit=function(n,a){if(!(n>=a)){var r=this._store,o=r.getProvider();this._updateOrdinalMeta();var s=this._nameList,l=this._idList,c=o.getSource().sourceFormat,u=c===SOURCE_FORMAT_ORIGINAL;if(u&&!o.pure)for(var d=[],f=n;f<a;f++){var v=o.getItem(f,d);if(!this.hasItemOption&&isDataItemOption(v)&&(this.hasItemOption=!0),v){var _=v.name;s[f]==null&&_!=null&&(s[f]=convertOptionIdName(_,null));var g=v.id;l[f]==null&&g!=null&&(l[f]=convertOptionIdName(g,null))}}if(this._shouldMakeIdFromName())for(var f=n;f<a;f++)makeIdFromName(this,f);prepareInvertedIndex(this)}},t.prototype.getApproximateExtent=function(n){return this._approximateExtent[n]||this._store.getDataExtent(this._getStoreDimIndex(n))},t.prototype.setApproximateExtent=function(n,a){a=this.getDimension(a),this._approximateExtent[a]=n.slice()},t.prototype.getCalculationInfo=function(n){return this._calculationInfo[n]},t.prototype.setCalculationInfo=function(n,a){isObject$1(n)?extend(this._calculationInfo,n):this._calculationInfo[n]=a},t.prototype.getName=function(n){var a=this.getRawIndex(n),r=this._nameList[a];return r==null&&this._nameDimIdx!=null&&(r=getIdNameFromStore(this,this._nameDimIdx,a)),r==null&&(r=""),r},t.prototype._getCategory=function(n,a){var r=this._store.get(n,a),o=this._store.getOrdinalMeta(n);return o?o.categories[r]:r},t.prototype.getId=function(n){return getId(this,this.getRawIndex(n))},t.prototype.count=function(){return this._store.count()},t.prototype.get=function(n,a){var r=this._store,o=this._dimInfos[n];if(o)return r.get(o.storeDimIndex,a)},t.prototype.getByRawIndex=function(n,a){var r=this._store,o=this._dimInfos[n];if(o)return r.getByRawIndex(o.storeDimIndex,a)},t.prototype.getIndices=function(){return this._store.getIndices()},t.prototype.getDataExtent=function(n){return this._store.getDataExtent(this._getStoreDimIndex(n))},t.prototype.getSum=function(n){return this._store.getSum(this._getStoreDimIndex(n))},t.prototype.getMedian=function(n){return this._store.getMedian(this._getStoreDimIndex(n))},t.prototype.getValues=function(n,a){var r=this,o=this._store;return isArray$1(n)?o.getValues(map(n,function(s){return r._getStoreDimIndex(s)}),a):o.getValues(n)},t.prototype.hasValue=function(n){for(var a=this._dimSummary.dataDimIndicesOnCoord,r=0,o=a.length;r<o;r++)if(isNaN(this._store.get(a[r],n)))return!1;return!0},t.prototype.indexOfName=function(n){for(var a=0,r=this._store.count();a<r;a++)if(this.getName(a)===n)return a;return-1},t.prototype.getRawIndex=function(n){return this._store.getRawIndex(n)},t.prototype.indexOfRawIndex=function(n){return this._store.indexOfRawIndex(n)},t.prototype.rawIndexOf=function(n,a){var r=n&&this._invertedIndicesMap[n],o=r&&r[a];return o==null||isNaN(o)?INDEX_NOT_FOUND:o},t.prototype.each=function(n,a,r){isFunction(n)&&(r=a,a=n,n=[]);var o=r||this,s=map(normalizeDimensions(n),this._getStoreDimIndex,this);this._store.each(s,o?bind$1(a,o):a)},t.prototype.filterSelf=function(n,a,r){isFunction(n)&&(r=a,a=n,n=[]);var o=r||this,s=map(normalizeDimensions(n),this._getStoreDimIndex,this);return this._store=this._store.filter(s,o?bind$1(a,o):a),this},t.prototype.selectRange=function(n){var a=this,r={},o=keys(n);return each$8(o,function(s){var l=a._getStoreDimIndex(s);r[l]=n[s]}),this._store=this._store.selectRange(r),this},t.prototype.mapArray=function(n,a,r){isFunction(n)&&(r=a,a=n,n=[]),r=r||this;var o=[];return this.each(n,function(){o.push(a&&a.apply(this,arguments))},r),o},t.prototype.map=function(n,a,r,o){var s=r||o||this,l=map(normalizeDimensions(n),this._getStoreDimIndex,this),c=cloneListForMapAndSample(this);return c._store=this._store.map(l,s?bind$1(a,s):a),c},t.prototype.modify=function(n,a,r,o){var s=r||o||this,l=map(normalizeDimensions(n),this._getStoreDimIndex,this);this._store.modify(l,s?bind$1(a,s):a)},t.prototype.downSample=function(n,a,r,o){var s=cloneListForMapAndSample(this);return s._store=this._store.downSample(this._getStoreDimIndex(n),a,r,o),s},t.prototype.minmaxDownSample=function(n,a){var r=cloneListForMapAndSample(this);return r._store=this._store.minmaxDownSample(this._getStoreDimIndex(n),a),r},t.prototype.lttbDownSample=function(n,a){var r=cloneListForMapAndSample(this);return r._store=this._store.lttbDownSample(this._getStoreDimIndex(n),a),r},t.prototype.getRawDataItem=function(n){return this._store.getRawDataItem(n)},t.prototype.getItemModel=function(n){var a=this.hostModel,r=this.getRawDataItem(n);return new Model(r,a,a&&a.ecModel)},t.prototype.diff=function(n){var a=this;return new DataDiffer(n?n.getStore().getIndices():[],this.getStore().getIndices(),function(r){return getId(n,r)},function(r){return getId(a,r)})},t.prototype.getVisual=function(n){var a=this._visual;return a&&a[n]},t.prototype.setVisual=function(n,a){this._visual=this._visual||{},isObject$1(n)?extend(this._visual,n):this._visual[n]=a},t.prototype.getItemVisual=function(n,a){var r=this._itemVisuals[n],o=r&&r[a];return o??this.getVisual(a)},t.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},t.prototype.ensureUniqueItemVisual=function(n,a){var r=this._itemVisuals,o=r[n];o||(o=r[n]={});var s=o[a];return s==null&&(s=this.getVisual(a),isArray$1(s)?s=s.slice():isObject$1(s)&&(s=extend({},s)),o[a]=s),s},t.prototype.setItemVisual=function(n,a,r){var o=this._itemVisuals[n]||{};this._itemVisuals[n]=o,isObject$1(a)?extend(o,a):o[a]=r},t.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},t.prototype.setLayout=function(n,a){isObject$1(n)?extend(this._layout,n):this._layout[n]=a},t.prototype.getLayout=function(n){return this._layout[n]},t.prototype.getItemLayout=function(n){return this._itemLayouts[n]},t.prototype.setItemLayout=function(n,a,r){this._itemLayouts[n]=r?extend(this._itemLayouts[n]||{},a):a},t.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},t.prototype.setItemGraphicEl=function(n,a){var r=this.hostModel&&this.hostModel.seriesIndex;setCommonECData(r,this.dataType,n,a),this._graphicEls[n]=a},t.prototype.getItemGraphicEl=function(n){return this._graphicEls[n]},t.prototype.eachItemGraphicEl=function(n,a){each$8(this._graphicEls,function(r,o){r&&n&&n.call(a,r,o)})},t.prototype.cloneShallow=function(n){return n||(n=new t(this._schema?this._schema:map(this.dimensions,this._getDimInfo,this),this.hostModel)),transferProperties(n,this),n._store=this._store,n},t.prototype.wrapMethod=function(n,a){var r=this[n];isFunction(r)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(n),this[n]=function(){var o=r.apply(this,arguments);return a.apply(this,[o].concat(slice(arguments)))})},t.internalField=function(){prepareInvertedIndex=function(n){var a=n._invertedIndicesMap;each$8(a,function(r,o){var s=n._dimInfos[o],l=s.ordinalMeta,c=n._store;if(l){r=a[o]=new CtorInt32Array(l.categories.length);for(var u=0;u<r.length;u++)r[u]=INDEX_NOT_FOUND;for(var u=0;u<c.count();u++)r[c.get(s.storeDimIndex,u)]=u}})},getIdNameFromStore=function(n,a,r){return convertOptionIdName(n._getCategory(a,r),null)},getId=function(n,a){var r=n._idList[a];return r==null&&n._idDimIdx!=null&&(r=getIdNameFromStore(n,n._idDimIdx,a)),r==null&&(r=ID_PREFIX+a),r},normalizeDimensions=function(n){return isArray$1(n)||(n=n!=null?[n]:[]),n},cloneListForMapAndSample=function(n){var a=new t(n._schema?n._schema:map(n.dimensions,n._getDimInfo,n),n.hostModel);return transferProperties(a,n),a},transferProperties=function(n,a){each$8(TRANSFERABLE_PROPERTIES.concat(a.__wrappedMethods||[]),function(r){a.hasOwnProperty(r)&&(n[r]=a[r])}),n.__wrappedMethods=a.__wrappedMethods,each$8(CLONE_PROPERTIES,function(r){n[r]=clone$3(a[r])}),n._calculationInfo=extend({},a._calculationInfo)},makeIdFromName=function(n,a){var r=n._nameList,o=n._idList,s=n._nameDimIdx,l=n._idDimIdx,c=r[a],u=o[a];if(c==null&&s!=null&&(r[a]=c=getIdNameFromStore(n,s,a)),u==null&&l!=null&&(o[a]=u=getIdNameFromStore(n,l,a)),u==null&&c!=null){var d=n._nameRepeatCount,f=d[c]=(d[c]||0)+1;u=c,f>1&&(u+="__ec__"+f),o[a]=u}}}(),t}();function prepareSeriesDataSchema(t,n){isSourceInstance(t)||(t=createSourceFromSeriesDataOption(t)),n=n||{};var a=n.coordDimensions||[],r=n.dimensionsDefine||t.dimensionsDefine||[],o=createHashMap(),s=[],l=getDimCount(t,a,r,n.dimensionsCount),c=n.canOmitUnusedDimensions&&shouldOmitUnusedDimensions(l),u=r===t.dimensionsDefine,d=u?ensureSourceDimNameMap(t):createDimNameMap(r),f=n.encodeDefine;!f&&n.encodeDefaulter&&(f=n.encodeDefaulter(t,l));for(var v=createHashMap(f),_=new CtorInt32Array$1(l),g=0;g<_.length;g++)_[g]=-1;function y(D){var L=_[D];if(L<0){var I=r[D],$=isObject$3(I)?I:{name:I},V=new SeriesDimensionDefine,H=$.name;H!=null&&d.get(H)!=null&&(V.name=V.displayName=H),$.type!=null&&(V.type=$.type),$.displayName!=null&&(V.displayName=$.displayName);var X=s.length;return _[D]=X,V.storeDimIndex=D,s.push(V),V}return s[L]}if(!c)for(var g=0;g<l;g++)y(g);v.each(function(D,L){var I=normalizeToArray(D).slice();if(I.length===1&&!isString(I[0])&&I[0]<0){v.set(L,!1);return}var $=v.set(L,[]);each$8(I,function(V,H){var X=isString(V)?d.get(V):V;X!=null&&X<l&&($[H]=X,T(y(X),L,H))})});var b=0;each$8(a,function(D){var L,I,$,V;if(isString(D))L=D,V={};else{V=D,L=V.name;var H=V.ordinalMeta;V.ordinalMeta=null,V=extend({},V),V.ordinalMeta=H,I=V.dimsDef,$=V.otherDims,V.name=V.coordDim=V.coordDimIndex=V.dimsDef=V.otherDims=null}var X=v.get(L);if(X!==!1){if(X=normalizeToArray(X),!X.length)for(var q=0;q<(I&&I.length||1);q++){for(;b<l&&y(b).coordDim!=null;)b++;b<l&&X.push(b++)}each$8(X,function(z,G){var oe=y(z);if(u&&V.type!=null&&(oe.type=V.type),T(defaults(oe,V),L,G),oe.name==null&&I){var ne=I[G];!isObject$3(ne)&&(ne={name:ne}),oe.name=oe.displayName=ne.name,oe.defaultTooltip=ne.defaultTooltip}$&&defaults(oe.otherDims,$)})}});function T(D,L,I){VISUAL_DIMENSIONS.get(L)!=null?D.otherDims[L]=I:(D.coordDim=L,D.coordDimIndex=I,o.set(L,!0))}var S=n.generateCoord,C=n.generateCoordCount,E=C!=null;C=S?C||1:0;var x=S||"value";function A(D){D.name==null&&(D.name=D.coordDim)}if(c)each$8(s,function(D){A(D)}),s.sort(function(D,L){return D.storeDimIndex-L.storeDimIndex});else for(var N=0;N<l;N++){var M=y(N),R=M.coordDim;R==null&&(M.coordDim=genCoordDimName(x,o,E),M.coordDimIndex=0,(!S||C<=0)&&(M.isExtraCoord=!0),C--),A(M),M.type==null&&(guessOrdinal(t,N)===BE_ORDINAL.Must||M.isExtraCoord&&(M.otherDims.itemName!=null||M.otherDims.seriesName!=null))&&(M.type="ordinal")}return removeDuplication(s),new SeriesDataSchema({source:t,dimensions:s,fullDimensionCount:l,dimensionOmitted:c})}function removeDuplication(t){for(var n=createHashMap(),a=0;a<t.length;a++){var r=t[a],o=r.name,s=n.get(o)||0;s>0&&(r.name=o+(s-1)),s++,n.set(o,s)}}function getDimCount(t,n,a,r){var o=Math.max(t.dimensionsDetectedCount||1,n.length,a.length,r||0);return each$8(n,function(s){var l;isObject$3(s)&&(l=s.dimsDef)&&(o=Math.max(o,l.length))}),o}function genCoordDimName(t,n,a){if(a||n.hasKey(t)){for(var r=0;n.hasKey(t+r);)r++;t+=r}return n.set(t,!0),t}var CoordSysInfo=function(){function t(n){this.coordSysDims=[],this.axisMap=createHashMap(),this.categoryAxisMap=createHashMap(),this.coordSysName=n}return t}();function getCoordSysInfoBySeries(t){var n=t.get("coordinateSystem"),a=new CoordSysInfo(n),r=fetchers[n];if(r)return r(t,a,a.axisMap,a.categoryAxisMap),a}var fetchers={cartesian2d:function(t,n,a,r){var o=t.getReferringComponents("xAxis",SINGLE_REFERRING).models[0],s=t.getReferringComponents("yAxis",SINGLE_REFERRING).models[0];n.coordSysDims=["x","y"],a.set("x",o),a.set("y",s),isCategory(o)&&(r.set("x",o),n.firstCategoryDimIndex=0),isCategory(s)&&(r.set("y",s),n.firstCategoryDimIndex==null&&(n.firstCategoryDimIndex=1))},singleAxis:function(t,n,a,r){var o=t.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0];n.coordSysDims=["single"],a.set("single",o),isCategory(o)&&(r.set("single",o),n.firstCategoryDimIndex=0)},polar:function(t,n,a,r){var o=t.getReferringComponents("polar",SINGLE_REFERRING).models[0],s=o.findAxisModel("radiusAxis"),l=o.findAxisModel("angleAxis");n.coordSysDims=["radius","angle"],a.set("radius",s),a.set("angle",l),isCategory(s)&&(r.set("radius",s),n.firstCategoryDimIndex=0),isCategory(l)&&(r.set("angle",l),n.firstCategoryDimIndex==null&&(n.firstCategoryDimIndex=1))},geo:function(t,n,a,r){n.coordSysDims=["lng","lat"]},parallel:function(t,n,a,r){var o=t.ecModel,s=o.getComponent("parallel",t.get("parallelIndex")),l=n.coordSysDims=s.dimensions.slice();each$8(s.parallelAxisIndex,function(c,u){var d=o.getComponent("parallelAxis",c),f=l[u];a.set(f,d),isCategory(d)&&(r.set(f,d),n.firstCategoryDimIndex==null&&(n.firstCategoryDimIndex=u))})},matrix:function(t,n,a,r){var o=t.getReferringComponents("matrix",SINGLE_REFERRING).models[0];n.coordSysDims=["x","y"];var s=o.getDimensionModel("x"),l=o.getDimensionModel("y");a.set("x",s),a.set("y",l),r.set("x",s),r.set("y",l)}};function isCategory(t){return t.get("type")==="category"}function enableDataStack(t,n,a){a=a||{};var r=a.byIndex,o=a.stackedCoordDimension,s,l,c;isLegacyDimensionsInput(n)?s=n:(l=n.schema,s=l.dimensions,c=n.store);var u=!!(t&&t.get("stack")),d,f,v,_;if(each$8(s,function(C,E){isString(C)&&(s[E]=C={name:C}),u&&!C.isExtraCoord&&(!r&&!d&&C.ordinalMeta&&(d=C),!f&&C.type!=="ordinal"&&C.type!=="time"&&(!o||o===C.coordDim)&&(f=C))}),f&&!r&&!d&&(r=!0),f){v="__\0ecstackresult_"+t.id,_="__\0ecstackedover_"+t.id,d&&(d.createInvertedIndices=!0);var g=f.coordDim,y=f.type,b=0;each$8(s,function(C){C.coordDim===g&&b++});var T={name:v,coordDim:g,coordDimIndex:b,type:y,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:s.length},S={name:_,coordDim:_,coordDimIndex:b+1,type:y,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:s.length+1};l?(c&&(T.storeDimIndex=c.ensureCalculationDimension(_,y),S.storeDimIndex=c.ensureCalculationDimension(v,y)),l.appendCalculationDimension(T),l.appendCalculationDimension(S)):(s.push(T),s.push(S))}return{stackedDimension:f&&f.name,stackedByDimension:d&&d.name,isStackedByIndex:r,stackedOverDimension:_,stackResultDimension:v}}function isLegacyDimensionsInput(t){return!isSeriesDataSchema(t.schema)}function isDimensionStacked(t,n){return!!n&&n===t.getCalculationInfo("stackedDimension")}function getStackedDimension(t,n){return isDimensionStacked(t,n)?t.getCalculationInfo("stackResultDimension"):n}function getCoordSysDimDefs(t,n){var a=t.get("coordinateSystem"),r=CoordinateSystemManager.get(a),o;return n&&n.coordSysDims&&(o=map$1(n.coordSysDims,function(s){var l={name:s},c=n.axisMap.get(s);if(c){var u=c.get("type");l.type=getDimensionTypeByAxis(u)}return l})),o||(o=r&&(r.getDimensionsInfo?r.getDimensionsInfo():r.dimensions.slice())||["x","y"]),o}function injectOrdinalMeta(t,n,a){var r,o;return a&&each$8(t,function(s,l){var c=s.coordDim,u=a.categoryAxisMap.get(c);u&&(r==null&&(r=l),s.ordinalMeta=u.getOrdinalMeta(),n&&(s.createInvertedIndices=!0)),s.otherDims.itemName!=null&&(o=!0)}),!o&&r!=null&&(t[r].otherDims.itemName=0),r}function createSeriesData(t,n,a){a=a||{};var r=n.getSourceManager(),o,s=!1;o=r.getSource(),s=o.sourceFormat===SOURCE_FORMAT_ORIGINAL;var l=getCoordSysInfoBySeries(n),c=getCoordSysDimDefs(n,l),u=a.useEncodeDefaulter,d=isFunction(u)?u:u?curry(makeSeriesEncodeForAxisCoordSys,c,n):null,f={coordDimensions:c,generateCoord:a.generateCoord,encodeDefine:n.getEncode(),encodeDefaulter:d,canOmitUnusedDimensions:!s},v=prepareSeriesDataSchema(o,f),_=injectOrdinalMeta(v.dimensions,a.createInvertedIndices,l),g=s?null:r.getSharedDataStore(v),y=enableDataStack(n,{schema:v,store:g}),b=new SeriesData(v,n);b.setCalculationInfo(y);var T=_!=null&&isNeedCompleteOrdinalData(o)?function(S,C,E,x){return x===_?E:this.defaultDimValueGetter(S,C,E,x)}:null;return b.hasItemOption=!1,b.initData(s?o:g,null,T),b}function isNeedCompleteOrdinalData(t){if(t.sourceFormat===SOURCE_FORMAT_ORIGINAL){var n=firstDataNotNull(t.data||[]);return!isArray$1(getDataItemValue(n))}}function firstDataNotNull(t){for(var n=0;n<t.length&&t[n]==null;)n++;return t[n]}function isIntervalOrLogScale(t){return t.type==="interval"||t.type==="log"}function intervalScaleNiceTicks(t,n,a,r,o){var s={},l=s.interval=nice(n/a);r!=null&&l<r&&(l=s.interval=r),o!=null&&l>o&&(l=s.interval=o);var c=s.intervalPrecision=getIntervalPrecision(l),u=s.niceTickExtent=[round$1(Math.ceil(t[0]/l)*l,c),round$1(Math.floor(t[1]/l)*l,c)];return fixExtent(u,t),s}function increaseInterval(t){var n=Math.pow(10,quantityExponent(t)),a=t/n;return a?a===2?a=3:a===3?a=5:a*=2:a=1,round$1(a*n)}function getIntervalPrecision(t){return getPrecision(t)+2}function clamp(t,n,a){t[n]=Math.max(Math.min(t[n],a[1]),a[0])}function fixExtent(t,n){!isFinite(t[0])&&(t[0]=n[0]),!isFinite(t[1])&&(t[1]=n[1]),clamp(t,0,n),clamp(t,1,n),t[0]>t[1]&&(t[0]=t[1])}function contain$1(t,n){return t>=n[0]&&t<=n[1]}var ScaleCalculator=function(){function t(){this.normalize=normalize,this.scale=scale}return t.prototype.updateMethods=function(n){n.hasBreaks()?(this.normalize=bind$1(n.normalize,n),this.scale=bind$1(n.scale,n)):(this.normalize=normalize,this.scale=scale)},t}();function normalize(t,n){return n[1]===n[0]?.5:(t-n[0])/(n[1]-n[0])}function scale(t,n){return t*(n[1]-n[0])+n[0]}function logTransform(t,n,a){var r=Math.log(t);return[Math.log(a?n[0]:Math.max(0,n[0]))/r,Math.log(a?n[1]:Math.max(0,n[1]))/r]}var Scale=function(){function t(n){this._calculator=new ScaleCalculator,this._setting=n||{},this._extent=[1/0,-1/0]}return t.prototype.getSetting=function(n){return this._setting[n]},t.prototype._innerUnionExtent=function(n){var a=this._extent;this._innerSetExtent(n[0]<a[0]?n[0]:a[0],n[1]>a[1]?n[1]:a[1])},t.prototype.unionExtentFromData=function(n,a){this._innerUnionExtent(n.getApproximateExtent(a))},t.prototype.getExtent=function(){return this._extent.slice()},t.prototype.setExtent=function(n,a){this._innerSetExtent(n,a)},t.prototype._innerSetExtent=function(n,a){var r=this._extent;isNaN(n)||(r[0]=n),isNaN(a)||(r[1]=a),this._brkCtx&&this._brkCtx.update(r)},t.prototype.setBreaksFromOption=function(n){},t.prototype._innerSetBreak=function(n){this._brkCtx&&(this._brkCtx.setBreaks(n),this._calculator.updateMethods(this._brkCtx),this._brkCtx.update(this._extent))},t.prototype._innerGetBreaks=function(){return this._brkCtx?this._brkCtx.breaks:[]},t.prototype.hasBreaks=function(){return this._brkCtx?this._brkCtx.hasBreaks():!1},t.prototype._getExtentSpanWithBreaks=function(){return this._brkCtx&&this._brkCtx.hasBreaks()?this._brkCtx.getExtentSpan():this._extent[1]-this._extent[0]},t.prototype.isInExtentRange=function(n){return this._extent[0]<=n&&this._extent[1]>=n},t.prototype.isBlank=function(){return this._isBlank},t.prototype.setBlank=function(n){this._isBlank=n},t}();enableClassManagement(Scale);var uidBase=0,OrdinalMeta=function(){function t(n){this.categories=n.categories||[],this._needCollect=n.needCollect,this._deduplication=n.deduplication,this.uid=++uidBase,this._onCollect=n.onCollect}return t.createByAxisModel=function(n){var a=n.option,r=a.data,o=r&&map$1(r,getName);return new t({categories:o,needCollect:!o,deduplication:a.dedplication!==!1})},t.prototype.getOrdinal=function(n){return this._getOrCreateMap().get(n)},t.prototype.parseAndCollect=function(n){var a,r=this._needCollect;if(!isString(n)&&!r)return n;if(r&&!this._deduplication)return a=this.categories.length,this.categories[a]=n,this._onCollect&&this._onCollect(n,a),a;var o=this._getOrCreateMap();return a=o.get(n),a==null&&(r?(a=this.categories.length,this.categories[a]=n,o.set(n,a),this._onCollect&&this._onCollect(n,a)):a=NaN),a},t.prototype._getOrCreateMap=function(){return this._map||(this._map=createHashMap(this.categories))},t}();function getName(t){return isObject$3(t)&&t.value!=null?t.value:t+""}var OrdinalScale=function(t){__extends$1(n,t);function n(a){var r=t.call(this,a)||this;r.type="ordinal";var o=r.getSetting("ordinalMeta");return o||(o=new OrdinalMeta({})),isArray$1(o)&&(o=new OrdinalMeta({categories:map$1(o,function(s){return isObject$3(s)?s.value:s})})),r._ordinalMeta=o,r._extent=r.getSetting("extent")||[0,o.categories.length-1],r}return n.prototype.parse=function(a){return a==null?NaN:isString(a)?this._ordinalMeta.getOrdinal(a):Math.round(a)},n.prototype.contain=function(a){return contain$1(a,this._extent)&&a>=0&&a<this._ordinalMeta.categories.length},n.prototype.normalize=function(a){return a=this._getTickNumber(a),this._calculator.normalize(a,this._extent)},n.prototype.scale=function(a){return a=Math.round(this._calculator.scale(a,this._extent)),this.getRawOrdinalNumber(a)},n.prototype.getTicks=function(){for(var a=[],r=this._extent,o=r[0];o<=r[1];)a.push({value:o}),o++;return a},n.prototype.getMinorTicks=function(a){},n.prototype.setSortInfo=function(a){if(a==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var r=a.ordinalNumbers,o=this._ordinalNumbersByTick=[],s=this._ticksByOrdinalNumber=[],l=0,c=this._ordinalMeta.categories.length,u=Math.min(c,r.length);l<u;++l){var d=r[l];o[l]=d,s[d]=l}for(var f=0;l<c;++l){for(;s[f]!=null;)f++;o.push(f),s[f]=l}},n.prototype._getTickNumber=function(a){var r=this._ticksByOrdinalNumber;return r&&a>=0&&a<r.length?r[a]:a},n.prototype.getRawOrdinalNumber=function(a){var r=this._ordinalNumbersByTick;return r&&a>=0&&a<r.length?r[a]:a},n.prototype.getLabel=function(a){if(!this.isBlank()){var r=this.getRawOrdinalNumber(a.value),o=this._ordinalMeta.categories[r];return o==null?"":o+""}},n.prototype.count=function(){return this._extent[1]-this._extent[0]+1},n.prototype.isInExtentRange=function(a){return a=this._getTickNumber(a),this._extent[0]<=a&&this._extent[1]>=a},n.prototype.getOrdinalMeta=function(){return this._ordinalMeta},n.prototype.calcNiceTicks=function(){},n.prototype.calcNiceExtent=function(){},n.type="ordinal",n}(Scale);Scale.registerClass(OrdinalScale);var roundNumber=round$1,IntervalScale=function(t){__extends$1(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type="interval",a._interval=0,a._intervalPrecision=2,a}return n.prototype.parse=function(a){return a==null||a===""?NaN:Number(a)},n.prototype.contain=function(a){return contain$1(a,this._extent)},n.prototype.normalize=function(a){return this._calculator.normalize(a,this._extent)},n.prototype.scale=function(a){return this._calculator.scale(a,this._extent)},n.prototype.getInterval=function(){return this._interval},n.prototype.setInterval=function(a){this._interval=a,this._niceExtent=this._extent.slice(),this._intervalPrecision=getIntervalPrecision(a)},n.prototype.getTicks=function(a){a=a||{};var r=this._interval,o=this._extent,s=this._niceExtent,l=this._intervalPrecision,c=getScaleBreakHelper(),u=[];if(!r)return u;a.breakTicks;var d=1e4;o[0]<s[0]&&(a.expandToNicedExtent?u.push({value:roundNumber(s[0]-r,l)}):u.push({value:o[0]}));for(var f=function(y,b){return Math.round((b-y)/r)},v=s[0];v<=s[1];){if(u.push({value:v}),v=roundNumber(v+r,l),this._brkCtx){var _=this._brkCtx.calcNiceTickMultiple(v,f);_>=0&&(v=roundNumber(v+_*r,l))}if(u.length>0&&v===u[u.length-1].value)break;if(u.length>d)return[]}var g=u.length?u[u.length-1].value:s[1];return o[1]>g&&(a.expandToNicedExtent?u.push({value:roundNumber(g+r,l)}):u.push({value:o[1]})),a.breakTicks,u},n.prototype.getMinorTicks=function(a){for(var r=this.getTicks({expandToNicedExtent:!0}),o=[],s=this.getExtent(),l=1;l<r.length;l++){var c=r[l],u=r[l-1];if(!(u.break||c.break)){for(var d=0,f=[],v=c.value-u.value,_=v/a,g=getIntervalPrecision(_);d<a-1;){var y=roundNumber(u.value+(d+1)*_,g);y>s[0]&&y<s[1]&&f.push(y),d++}var b=getScaleBreakHelper();b&&b.pruneTicksByBreak("auto",f,this._getNonTransBreaks(),function(T){return T},this._interval,s),o.push(f)}}return o},n.prototype._getNonTransBreaks=function(){return this._brkCtx?this._brkCtx.breaks:[]},n.prototype.getLabel=function(a,r){if(a==null)return"";var o=r&&r.precision;o==null?o=getPrecision(a.value)||0:o==="auto"&&(o=this._intervalPrecision);var s=roundNumber(a.value,o,!0);return addCommas(s)},n.prototype.calcNiceTicks=function(a,r,o){a=a||5;var s=this._extent.slice(),l=this._getExtentSpanWithBreaks();if(isFinite(l)){l<0&&(l=-l,s.reverse(),this._innerSetExtent(s[0],s[1]),s=this._extent.slice());var c=intervalScaleNiceTicks(s,l,a,r,o);this._intervalPrecision=c.intervalPrecision,this._interval=c.interval,this._niceExtent=c.niceTickExtent}},n.prototype.calcNiceExtent=function(a){var r=this._extent.slice();if(r[0]===r[1])if(r[0]!==0){var o=Math.abs(r[0]);a.fixMax||(r[1]+=o/2),r[0]-=o/2}else r[1]=1;var s=r[1]-r[0];isFinite(s)||(r[0]=0,r[1]=1),this._innerSetExtent(r[0],r[1]),r=this._extent.slice(),this.calcNiceTicks(a.splitNumber,a.minInterval,a.maxInterval);var l=this._interval,c=this._intervalPrecision;a.fixMin||(r[0]=roundNumber(Math.floor(r[0]/l)*l,c)),a.fixMax||(r[1]=roundNumber(Math.ceil(r[1]/l)*l,c)),this._innerSetExtent(r[0],r[1])},n.prototype.setNiceExtent=function(a,r){this._niceExtent=[a,r]},n.type="interval",n}(Scale);Scale.registerClass(IntervalScale);var supportFloat32Array=typeof Float32Array<"u",Float32ArrayCtor=supportFloat32Array?Float32Array:Array;function createFloat32Array(t){return isArray$1(t)?supportFloat32Array?new Float32Array(t):t:new Float32ArrayCtor(t)}var STACK_PREFIX="__ec_stack_";function getSeriesStackId(t){return t.get("stack")||STACK_PREFIX+t.seriesIndex}function getAxisKey(t){return t.dim+t.index}function prepareLayoutBarSeries(t,n){var a=[];return n.eachSeriesByType(t,function(r){isOnCartesian(r)&&a.push(r)}),a}function getValueAxesMinGaps(t){var n={};each$8(t,function(u){var d=u.coordinateSystem,f=d.getBaseAxis();if(!(f.type!=="time"&&f.type!=="value"))for(var v=u.getData(),_=f.dim+"_"+f.index,g=v.getDimensionIndex(v.mapDimension(f.dim)),y=v.getStore(),b=0,T=y.count();b<T;++b){var S=y.get(g,b);n[_]?n[_].push(S):n[_]=[S]}});var a={};for(var r in n)if(n.hasOwnProperty(r)){var o=n[r];if(o){o.sort(function(u,d){return u-d});for(var s=null,l=1;l<o.length;++l){var c=o[l]-o[l-1];c>0&&(s=s===null?c:Math.min(s,c))}a[r]=s}}return a}function makeColumnLayout(t){var n=getValueAxesMinGaps(t),a=[];return each$8(t,function(r){var o=r.coordinateSystem,s=o.getBaseAxis(),l=s.getExtent(),c;if(s.type==="category")c=s.getBandWidth();else if(s.type==="value"||s.type==="time"){var u=s.dim+"_"+s.index,d=n[u],f=Math.abs(l[1]-l[0]),v=s.scale.getExtent(),_=Math.abs(v[1]-v[0]);c=d?f/_*d:f}else{var g=r.getData();c=Math.abs(l[1]-l[0])/g.count()}var y=parsePercent(r.get("barWidth"),c),b=parsePercent(r.get("barMaxWidth"),c),T=parsePercent(r.get("barMinWidth")||(isInLargeMode(r)?.5:1),c),S=r.get("barGap"),C=r.get("barCategoryGap"),E=r.get("defaultBarGap");a.push({bandWidth:c,barWidth:y,barMaxWidth:b,barMinWidth:T,barGap:S,barCategoryGap:C,defaultBarGap:E,axisKey:getAxisKey(s),stackId:getSeriesStackId(r)})}),doCalBarWidthAndOffset(a)}function doCalBarWidthAndOffset(t){var n={};each$8(t,function(r,o){var s=r.axisKey,l=r.bandWidth,c=n[s]||{bandWidth:l,remainedWidth:l,autoWidthCount:0,categoryGap:null,gap:r.defaultBarGap||0,stacks:{}},u=c.stacks;n[s]=c;var d=r.stackId;u[d]||c.autoWidthCount++,u[d]=u[d]||{width:0,maxWidth:0};var f=r.barWidth;f&&!u[d].width&&(u[d].width=f,f=Math.min(c.remainedWidth,f),c.remainedWidth-=f);var v=r.barMaxWidth;v&&(u[d].maxWidth=v);var _=r.barMinWidth;_&&(u[d].minWidth=_);var g=r.barGap;g!=null&&(c.gap=g);var y=r.barCategoryGap;y!=null&&(c.categoryGap=y)});var a={};return each$8(n,function(r,o){a[o]={};var s=r.stacks,l=r.bandWidth,c=r.categoryGap;if(c==null){var u=keys(s).length;c=Math.max(35-u*4,15)+"%"}var d=parsePercent(c,l),f=parsePercent(r.gap,1),v=r.remainedWidth,_=r.autoWidthCount,g=(v-d)/(_+(_-1)*f);g=Math.max(g,0),each$8(s,function(S){var C=S.maxWidth,E=S.minWidth;if(S.width){var x=S.width;C&&(x=Math.min(x,C)),E&&(x=Math.max(x,E)),S.width=x,v-=x+f*x,_--}else{var x=g;C&&C<x&&(x=Math.min(C,v)),E&&E>x&&(x=E),x!==g&&(S.width=x,v-=x+f*x,_--)}}),g=(v-d)/(_+(_-1)*f),g=Math.max(g,0);var y=0,b;each$8(s,function(S,C){S.width||(S.width=g),b=S,y+=S.width*(1+f)}),b&&(y-=b.width*f);var T=-y/2;each$8(s,function(S,C){a[o][C]=a[o][C]||{bandWidth:l,offset:T,width:S.width},T+=S.width*(1+f)})}),a}function retrieveColumnLayout(t,n,a){if(t&&n){var r=t[getAxisKey(n)];return r}}function isOnCartesian(t){return t.coordinateSystem&&t.coordinateSystem.type==="cartesian2d"}function isInLargeMode(t){return t.pipelineContext&&t.pipelineContext.large}var bisect=function(t,n,a,r){for(;a<r;){var o=a+r>>>1;t[o][1]<n?a=o+1:r=o}return a},TimeScale=function(t){__extends$1(n,t);function n(a){var r=t.call(this,a)||this;return r.type="time",r}return n.prototype.getLabel=function(a){var r=this.getSetting("useUTC");return format(a.value,fullLeveledFormatter[getDefaultFormatPrecisionOfInterval(getPrimaryTimeUnit(this._minLevelUnit))]||fullLeveledFormatter.second,r,this.getSetting("locale"))},n.prototype.getFormattedLabel=function(a,r,o){var s=this.getSetting("useUTC"),l=this.getSetting("locale");return leveledFormat(a,r,o,l,s)},n.prototype.getTicks=function(a){var r=this._interval,o=this._extent,s=[];if(!r)return s;var l=this.getSetting("useUTC"),c=getUnitFromValue(o[1],l);s.push({value:o[0],time:{level:0,upperTimeUnit:c,lowerTimeUnit:c}});var u=getIntervalTicks(this._minLevelUnit,this._approxInterval,l,o,this._getExtentSpanWithBreaks(),this._brkCtx);s=s.concat(u);var d=getUnitFromValue(o[1],l);s.push({value:o[1],time:{level:0,upperTimeUnit:d,lowerTimeUnit:d}}),this.getSetting("useUTC");var f=primaryTimeUnits.length-1,v=0;return each$8(s,function(_){f=Math.min(f,indexOf(primaryTimeUnits,_.time.upperTimeUnit)),v=Math.max(v,_.time.level)}),s},n.prototype.calcNiceExtent=function(a){var r=this.getExtent();if(r[0]===r[1]&&(r[0]-=ONE_DAY,r[1]+=ONE_DAY),r[1]===-1/0&&r[0]===1/0){var o=new Date;r[1]=+new Date(o.getFullYear(),o.getMonth(),o.getDate()),r[0]=r[1]-ONE_DAY}this._innerSetExtent(r[0],r[1]),this.calcNiceTicks(a.splitNumber,a.minInterval,a.maxInterval)},n.prototype.calcNiceTicks=function(a,r,o){a=a||10;var s=this._getExtentSpanWithBreaks();this._approxInterval=s/a,r!=null&&this._approxInterval<r&&(this._approxInterval=r),o!=null&&this._approxInterval>o&&(this._approxInterval=o);var l=scaleIntervals.length,c=Math.min(bisect(scaleIntervals,this._approxInterval,0,l),l-1);this._interval=scaleIntervals[c][1],this._intervalPrecision=getIntervalPrecision(this._interval),this._minLevelUnit=scaleIntervals[Math.max(c-1,0)][0]},n.prototype.parse=function(a){return isNumber(a)?a:+parseDate(a)},n.prototype.contain=function(a){return contain$1(a,this._extent)},n.prototype.normalize=function(a){return this._calculator.normalize(a,this._extent)},n.prototype.scale=function(a){return this._calculator.scale(a,this._extent)},n.type="time",n}(IntervalScale),scaleIntervals=[["second",ONE_SECOND],["minute",ONE_MINUTE],["hour",ONE_HOUR],["quarter-day",ONE_HOUR*6],["half-day",ONE_HOUR*12],["day",ONE_DAY*1.2],["half-week",ONE_DAY*3.5],["week",ONE_DAY*7],["month",ONE_DAY*31],["quarter",ONE_DAY*95],["half-year",ONE_YEAR/2],["year",ONE_YEAR]];function isPrimaryUnitValueAndGreaterSame(t,n,a,r){return roundTime(new Date(n),t,r).getTime()===roundTime(new Date(a),t,r).getTime()}function getDateInterval(t,n){return t/=ONE_DAY,t>16?16:t>7.5?7:t>3.5?4:t>1.5?2:1}function getMonthInterval(t){var n=30*ONE_DAY;return t/=n,t>6?6:t>3?3:t>2?2:1}function getHourInterval(t){return t/=ONE_HOUR,t>12?12:t>6?6:t>3.5?4:t>2?2:1}function getMinutesAndSecondsInterval(t,n){return t/=n?ONE_MINUTE:ONE_SECOND,t>30?30:t>20?20:t>15?15:t>10?10:t>5?5:t>2?2:1}function getMillisecondsInterval(t){return nice(t)}function getFirstTimestampOfUnit(t,n,a){var r=Math.max(0,indexOf(primaryTimeUnits,n)-1);return roundTime(new Date(t),primaryTimeUnits[r],a).getTime()}function createEstimateNiceMultiple(t,n){var a=new Date(0);a[t](1);var r=a.getTime();a[t](1+n);var o=a.getTime()-r;return function(s,l){return Math.max(0,Math.round((l-s)/o))}}function getIntervalTicks(t,n,a,r,o,s){var l=1e4,c=timeUnits,u=0;function d(V,H,X,q,z,G,oe){for(var ne=createEstimateNiceMultiple(z,V),ue=H,se=new Date(ue);ue<X&&ue<=r[1]&&(oe.push({value:ue}),!(u++>l));)if(se[z](se[q]()+V),ue=se.getTime(),s){var fe=s.calcNiceTickMultiple(ue,ne);fe>0&&(se[z](se[q]()+fe*V),ue=se.getTime())}oe.push({value:ue,notAdd:!0})}function f(V,H,X){var q=[],z=!H.length;if(!isPrimaryUnitValueAndGreaterSame(getPrimaryTimeUnit(V),r[0],r[1],a)){z&&(H=[{value:getFirstTimestampOfUnit(r[0],V,a)},{value:r[1]}]);for(var G=0;G<H.length-1;G++){var oe=H[G].value,ne=H[G+1].value;if(oe!==ne){var ue=void 0,se=void 0,fe=void 0,ae=!1;switch(V){case"year":ue=Math.max(1,Math.round(n/ONE_DAY/365)),se=fullYearGetterName(a),fe=fullYearSetterName(a);break;case"half-year":case"quarter":case"month":ue=getMonthInterval(n),se=monthGetterName(a),fe=monthSetterName(a);break;case"week":case"half-week":case"day":ue=getDateInterval(n),se=dateGetterName(a),fe=dateSetterName(a),ae=!0;break;case"half-day":case"quarter-day":case"hour":ue=getHourInterval(n),se=hoursGetterName(a),fe=hoursSetterName(a);break;case"minute":ue=getMinutesAndSecondsInterval(n,!0),se=minutesGetterName(a),fe=minutesSetterName(a);break;case"second":ue=getMinutesAndSecondsInterval(n,!1),se=secondsGetterName(a),fe=secondsSetterName(a);break;case"millisecond":ue=getMillisecondsInterval(n),se=millisecondsGetterName(a),fe=millisecondsSetterName(a);break}ne>=r[0]&&oe<=r[1]&&d(ue,oe,ne,se,fe,ae,q),V==="year"&&X.length>1&&G===0&&X.unshift({value:X[0].value-ue})}}for(var G=0;G<q.length;G++)X.push(q[G])}}for(var v=[],_=[],g=0,y=0,b=0;b<c.length;++b){var T=getPrimaryTimeUnit(c[b]);if(isPrimaryTimeUnit(c[b])){f(c[b],v[v.length-1]||[],_);var S=c[b+1]?getPrimaryTimeUnit(c[b+1]):null;if(T!==S){if(_.length){y=g,_.sort(function(V,H){return V.value-H.value});for(var C=[],E=0;E<_.length;++E){var x=_[E].value;(E===0||_[E-1].value!==x)&&(C.push(_[E]),x>=r[0]&&x<=r[1]&&g++)}var A=o/n;if(g>A*1.5&&y>A/1.5||(v.push(C),g>A||t===c[b]))break}_=[]}}}for(var N=filter(map$1(v,function(V){return filter(V,function(H){return H.value>=r[0]&&H.value<=r[1]&&!H.notAdd})}),function(V){return V.length>0}),M=[],R=N.length-1,b=0;b<N.length;++b)for(var D=N[b],L=0;L<D.length;++L){var I=getUnitFromValue(D[L].value,a);M.push({value:D[L].value,time:{level:R-b,upperTimeUnit:I,lowerTimeUnit:I}})}M.sort(function(V,H){return V.value-H.value});for(var $=[],b=0;b<M.length;++b)(b===0||M[b].value!==M[b-1].value)&&$.push(M[b]);return $}Scale.registerClass(TimeScale);var fixRound=round$1,mathFloor=Math.floor,mathCeil=Math.ceil,mathPow=Math.pow,mathLog=Math.log,LogScale=function(t){__extends$1(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type="log",a.base=10,a._originalScale=new IntervalScale,a}return n.prototype.getTicks=function(a){a=a||{};var r=this._extent.slice(),o=this._originalScale.getExtent(),s=t.prototype.getTicks.call(this,a),l=this.base;return this._originalScale._innerGetBreaks(),map$1(s,function(c){var u=c.value,d=null,f=mathPow(l,u);u===r[0]&&this._fixMin?d=o[0]:u===r[1]&&this._fixMax&&(d=o[1]);var v;return d!=null&&(f=fixRoundingError(f,d)),{value:f,break:v}},this)},n.prototype._getNonTransBreaks=function(){return this._originalScale._innerGetBreaks()},n.prototype.setExtent=function(a,r){this._originalScale.setExtent(a,r);var o=logTransform(this.base,[a,r]);t.prototype.setExtent.call(this,o[0],o[1])},n.prototype.getExtent=function(){var a=this.base,r=t.prototype.getExtent.call(this);r[0]=mathPow(a,r[0]),r[1]=mathPow(a,r[1]);var o=this._originalScale.getExtent();return this._fixMin&&(r[0]=fixRoundingError(r[0],o[0])),this._fixMax&&(r[1]=fixRoundingError(r[1],o[1])),r},n.prototype.unionExtentFromData=function(a,r){this._originalScale.unionExtentFromData(a,r);var o=logTransform(this.base,a.getApproximateExtent(r),!0);this._innerUnionExtent(o)},n.prototype.calcNiceTicks=function(a){a=a||10;var r=this._extent.slice(),o=this._getExtentSpanWithBreaks();if(!(!isFinite(o)||o<=0)){var s=quantity(o),l=a/o*s;for(l<=.5&&(s*=10);!isNaN(s)&&Math.abs(s)<1&&Math.abs(s)>0;)s*=10;var c=[fixRound(mathCeil(r[0]/s)*s),fixRound(mathFloor(r[1]/s)*s)];this._interval=s,this._intervalPrecision=getIntervalPrecision(s),this._niceExtent=c}},n.prototype.calcNiceExtent=function(a){t.prototype.calcNiceExtent.call(this,a),this._fixMin=a.fixMin,this._fixMax=a.fixMax},n.prototype.contain=function(a){return a=mathLog(a)/mathLog(this.base),t.prototype.contain.call(this,a)},n.prototype.normalize=function(a){return a=mathLog(a)/mathLog(this.base),t.prototype.normalize.call(this,a)},n.prototype.scale=function(a){return a=t.prototype.scale.call(this,a),mathPow(this.base,a)},n.prototype.setBreaksFromOption=function(a){},n.type="log",n}(IntervalScale);function fixRoundingError(t,n){return fixRound(t,getPrecision(n))}Scale.registerClass(LogScale);var ScaleRawExtentInfo=function(){function t(n,a,r){this._prepareParams(n,a,r)}return t.prototype._prepareParams=function(n,a,r){r[1]<r[0]&&(r=[NaN,NaN]),this._dataMin=r[0],this._dataMax=r[1];var o=this._isOrdinal=n.type==="ordinal";this._needCrossZero=n.type==="interval"&&a.getNeedCrossZero&&a.getNeedCrossZero();var s=a.get("min",!0);s==null&&(s=a.get("startValue",!0));var l=this._modelMinRaw=s;isFunction(l)?this._modelMinNum=parseAxisModelMinMax(n,l({min:r[0],max:r[1]})):l!=="dataMin"&&(this._modelMinNum=parseAxisModelMinMax(n,l));var c=this._modelMaxRaw=a.get("max",!0);if(isFunction(c)?this._modelMaxNum=parseAxisModelMinMax(n,c({min:r[0],max:r[1]})):c!=="dataMax"&&(this._modelMaxNum=parseAxisModelMinMax(n,c)),o)this._axisDataLen=a.getCategories().length;else{var u=a.get("boundaryGap"),d=isArray$1(u)?u:[u||0,u||0];typeof d[0]=="boolean"||typeof d[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[parsePercent$1(d[0],1),parsePercent$1(d[1],1)]}},t.prototype.calculate=function(){var n=this._isOrdinal,a=this._dataMin,r=this._dataMax,o=this._axisDataLen,s=this._boundaryGapInner,l=n?null:r-a||Math.abs(a),c=this._modelMinRaw==="dataMin"?a:this._modelMinNum,u=this._modelMaxRaw==="dataMax"?r:this._modelMaxNum,d=c!=null,f=u!=null;c==null&&(c=n?o?0:NaN:a-s[0]*l),u==null&&(u=n?o?o-1:NaN:r+s[1]*l),(c==null||!isFinite(c))&&(c=NaN),(u==null||!isFinite(u))&&(u=NaN);var v=eqNaN(c)||eqNaN(u)||n&&!o;this._needCrossZero&&(c>0&&u>0&&!d&&(c=0),c<0&&u<0&&!f&&(u=0));var _=this._determinedMin,g=this._determinedMax;return _!=null&&(c=_,d=!0),g!=null&&(u=g,f=!0),{min:c,max:u,minFixed:d,maxFixed:f,isBlank:v}},t.prototype.modifyDataMinMax=function(n,a){this[DATA_MIN_MAX_ATTR[n]]=a},t.prototype.setDeterminedMinMax=function(n,a){var r=DETERMINED_MIN_MAX_ATTR[n];this[r]=a},t.prototype.freeze=function(){this.frozen=!0},t}(),DETERMINED_MIN_MAX_ATTR={min:"_determinedMin",max:"_determinedMax"},DATA_MIN_MAX_ATTR={min:"_dataMin",max:"_dataMax"};function ensureScaleRawExtentInfo(t,n,a){var r=t.rawExtentInfo;return r||(r=new ScaleRawExtentInfo(t,n,a),t.rawExtentInfo=r,r)}function parseAxisModelMinMax(t,n){return n==null?null:eqNaN(n)?NaN:t.parse(n)}function getScaleExtent(t,n){var a=t.type,r=ensureScaleRawExtentInfo(t,n,t.getExtent()).calculate();t.setBlank(r.isBlank);var o=r.min,s=r.max,l=n.ecModel;if(l&&a==="time"){var c=prepareLayoutBarSeries("bar",l),u=!1;if(each$8(c,function(v){u=u||v.getBaseAxis()===n.axis}),u){var d=makeColumnLayout(c),f=adjustScaleForOverflow(o,s,n,d);o=f.min,s=f.max}}return{extent:[o,s],fixMin:r.minFixed,fixMax:r.maxFixed}}function adjustScaleForOverflow(t,n,a,r){var o=a.axis.getExtent(),s=Math.abs(o[1]-o[0]),l=retrieveColumnLayout(r,a.axis);if(l===void 0)return{min:t,max:n};var c=1/0;each$8(l,function(g){c=Math.min(g.offset,c)});var u=-1/0;each$8(l,function(g){u=Math.max(g.offset+g.width,u)}),c=Math.abs(c),u=Math.abs(u);var d=c+u,f=n-t,v=1-(c+u)/s,_=f/v-f;return n+=_*(u/d),t-=_*(c/d),{min:t,max:n}}function niceScaleExtent(t,n){var a=n,r=getScaleExtent(t,a),o=r.extent,s=a.get("splitNumber");t instanceof LogScale&&(t.base=a.get("logBase"));var l=t.type,c=a.get("interval"),u=l==="interval"||l==="time";t.setBreaksFromOption(retrieveAxisBreaksOption(a)),t.setExtent(o[0],o[1]),t.calcNiceExtent({splitNumber:s,fixMin:r.fixMin,fixMax:r.fixMax,minInterval:u?a.get("minInterval"):null,maxInterval:u?a.get("maxInterval"):null}),c!=null&&t.setInterval&&t.setInterval(c)}function createScaleByModel(t,n){if(n=n||t.get("type"),n)switch(n){case"category":return new OrdinalScale({ordinalMeta:t.getOrdinalMeta?t.getOrdinalMeta():t.getCategories(),extent:[1/0,-1/0]});case"time":return new TimeScale({locale:t.ecModel.getLocaleModel(),useUTC:t.ecModel.get("useUTC")});default:return new(Scale.getClass(n)||IntervalScale)}}function ifAxisCrossZero(t){var n=t.scale.getExtent(),a=n[0],r=n[1];return!(a>0&&r>0||a<0&&r<0)}function makeLabelFormatter(t){var n=t.getLabelModel().get("formatter");if(t.type==="time"){var a=parseTimeAxisLabelFormatter(n);return function(o,s){return t.scale.getFormattedLabel(o,s,a)}}else{if(isString(n))return function(o){var s=t.scale.getLabel(o),l=n.replace("{value}",s??"");return l};if(isFunction(n)){if(t.type==="category")return function(o,s){return n(getAxisRawValue(t,o),o.value-t.scale.getExtent()[0],null)};var r=getScaleBreakHelper();return function(o,s){var l=null;return r&&(l=r.makeAxisLabelFormatterParamBreak(l,o.break)),n(getAxisRawValue(t,o),s,l)}}else return function(o){return t.scale.getLabel(o)}}}function getAxisRawValue(t,n){return t.type==="category"?t.scale.getLabel(n):n.value}function getOptionCategoryInterval(t){var n=t.get("interval");return n??"auto"}function shouldShowAllLabels(t){return t.type==="category"&&getOptionCategoryInterval(t.getLabelModel())===0}function getDataDimensionsOnAxis(t,n){var a={};return each$8(t.mapDimensionsAll(n),function(r){a[getStackedDimension(t,r)]=!0}),keys(a)}function isNameLocationCenter(t){return t==="middle"||t==="center"}function shouldAxisShow(t){return t.getShallow("show")}function retrieveAxisBreaksOption(t){var n=t.get("breaks",!0);n==null}var AxisModelCommonMixin=function(){function t(){}return t.prototype.getNeedCrossZero=function(){var n=this.option;return!n.scale},t.prototype.getCoordSysModel=function(){},t}(),extensions=[],extensionRegisters={registerPreprocessor,registerProcessor,registerPostInit,registerPostUpdate,registerUpdateLifecycle,registerAction,registerCoordinateSystem,registerLayout,registerVisual,registerTransform,registerLoading,registerMap:registerMap$1,registerImpl,PRIORITY,ComponentModel,ComponentView,SeriesModel,ChartView,registerComponentModel:function(t){ComponentModel.registerClass(t)},registerComponentView:function(t){ComponentView.registerClass(t)},registerSeriesModel:function(t){SeriesModel.registerClass(t)},registerChartView:function(t){ChartView.registerClass(t)},registerCustomSeries:function(t,n){},registerSubTypeDefaulter:function(t,n){ComponentModel.registerSubTypeDefaulter(t,n)},registerPainter:function(t,n){registerPainter(t,n)}};function use(t){if(isArray$1(t)){each$8(t,function(n){use(n)});return}indexOf(extensions,t)>=0||(extensions.push(t),isFunction(t)&&(t={install:t}),t.install(extensionRegisters))}var EPSILON=1e-8;function isAroundEqual(t,n){return Math.abs(t-n)<EPSILON}function contain(t,n,a){var r=0,o=t[0];if(!o)return!1;for(var s=1;s<t.length;s++){var l=t[s];r+=windingLine(o[0],o[1],l[0],l[1],n,a),o=l}var c=t[0];return(!isAroundEqual(o[0],c[0])||!isAroundEqual(o[1],c[1]))&&(r+=windingLine(o[0],o[1],c[0],c[1],n,a)),r!==0}var TMP_TRANSFORM=[];function transformPoints(t,n){for(var a=0;a<t.length;a++)applyTransform$1(t[a],t[a],n)}function updateBBoxFromPoints(t,n,a,r){for(var o=0;o<t.length;o++){var s=t[o];r&&(s=r.project(s)),s&&isFinite(s[0])&&isFinite(s[1])&&(min$1(n,n,s),max$1(a,a,s))}}function centroid(t){for(var n=0,a=0,r=0,o=t.length,s=t[o-1][0],l=t[o-1][1],c=0;c<o;c++){var u=t[c][0],d=t[c][1],f=s*d-u*l;n+=f,a+=(s+u)*f,r+=(l+d)*f,s=u,l=d}return n?[a/n/3,r/n/3,n]:[t[0][0]||0,t[0][1]||0]}var Region=function(){function t(n){this.name=n}return t.prototype.setCenter=function(n){this._center=n},t.prototype.getCenter=function(){var n=this._center;return n||(n=this._center=this.calcCenter()),n},t}(),GeoJSONPolygonGeometry=function(){function t(n,a){this.type="polygon",this.exterior=n,this.interiors=a}return t}(),GeoJSONLineStringGeometry=function(){function t(n){this.type="linestring",this.points=n}return t}(),GeoJSONRegion=function(t){__extends$1(n,t);function n(a,r,o){var s=t.call(this,a)||this;return s.type="geoJSON",s.geometries=r,s._center=o&&[o[0],o[1]],s}return n.prototype.calcCenter=function(){for(var a=this.geometries,r,o=0,s=0;s<a.length;s++){var l=a[s],c=l.exterior,u=c&&c.length;u>o&&(r=l,o=u)}if(r)return centroid(r.exterior);var d=this.getBoundingRect();return[d.x+d.width/2,d.y+d.height/2]},n.prototype.getBoundingRect=function(a){var r=this._rect;if(r&&!a)return r;var o=[1/0,1/0],s=[-1/0,-1/0],l=this.geometries;return each$8(l,function(c){c.type==="polygon"?updateBBoxFromPoints(c.exterior,o,s,a):each$8(c.points,function(u){updateBBoxFromPoints(u,o,s,a)})}),isFinite(o[0])&&isFinite(o[1])&&isFinite(s[0])&&isFinite(s[1])||(o[0]=o[1]=s[0]=s[1]=0),r=new BoundingRect(o[0],o[1],s[0]-o[0],s[1]-o[1]),a||(this._rect=r),r},n.prototype.contain=function(a){var r=this.getBoundingRect(),o=this.geometries;if(!r.contain(a[0],a[1]))return!1;e:for(var s=0,l=o.length;s<l;s++){var c=o[s];if(c.type==="polygon"){var u=c.exterior,d=c.interiors;if(contain(u,a[0],a[1])){for(var f=0;f<(d?d.length:0);f++)if(contain(d[f],a[0],a[1]))continue e;return!0}}}return!1},n.prototype.transformTo=function(a,r,o,s){var l=this.getBoundingRect(),c=l.width/l.height;o?s||(s=o/c):o=c*s;for(var u=new BoundingRect(a,r,o,s),d=l.calculateTransform(u),f=this.geometries,v=0;v<f.length;v++){var _=f[v];_.type==="polygon"?(transformPoints(_.exterior,d),each$8(_.interiors,function(g){transformPoints(g,d)})):each$8(_.points,function(g){transformPoints(g,d)})}l=this._rect,l.copy(u),this._center=[l.x+l.width/2,l.y+l.height/2]},n.prototype.cloneShallow=function(a){a==null&&(a=this.name);var r=new n(a,this.geometries,this._center);return r._rect=this._rect,r.transformTo=null,r},n}(Region),GeoSVGRegion=function(t){__extends$1(n,t);function n(a,r){var o=t.call(this,a)||this;return o.type="geoSVG",o._elOnlyForCalculate=r,o}return n.prototype.calcCenter=function(){for(var a=this._elOnlyForCalculate,r=a.getBoundingRect(),o=[r.x+r.width/2,r.y+r.height/2],s=identity(TMP_TRANSFORM),l=a;l&&!l.isGeoSVGGraphicRoot;)mul(s,l.getLocalTransform(),s),l=l.parent;return invert(s,s),applyTransform$1(o,o,s),o},n}(Region);function decode(t){if(!t.UTF8Encoding)return t;var n=t,a=n.UTF8Scale;a==null&&(a=1024);var r=n.features;return each$8(r,function(o){var s=o.geometry,l=s.encodeOffsets,c=s.coordinates;if(l)switch(s.type){case"LineString":s.coordinates=decodeRing(c,l,a);break;case"Polygon":decodeRings(c,l,a);break;case"MultiLineString":decodeRings(c,l,a);break;case"MultiPolygon":each$8(c,function(u,d){return decodeRings(u,l[d],a)})}}),n.UTF8Encoding=!1,n}function decodeRings(t,n,a){for(var r=0;r<t.length;r++)t[r]=decodeRing(t[r],n[r],a)}function decodeRing(t,n,a){for(var r=[],o=n[0],s=n[1],l=0;l<t.length;l+=2){var c=t.charCodeAt(l)-64,u=t.charCodeAt(l+1)-64;c=c>>1^-(c&1),u=u>>1^-(u&1),c+=o,u+=s,o=c,s=u,r.push([c/a,u/a])}return r}function parseGeoJSON(t,n){return t=decode(t),map$1(filter(t.features,function(a){return a.geometry&&a.properties&&a.geometry.coordinates.length>0}),function(a){var r=a.properties,o=a.geometry,s=[];switch(o.type){case"Polygon":var l=o.coordinates;s.push(new GeoJSONPolygonGeometry(l[0],l.slice(1)));break;case"MultiPolygon":each$8(o.coordinates,function(u){u[0]&&s.push(new GeoJSONPolygonGeometry(u[0],u.slice(1)))});break;case"LineString":s.push(new GeoJSONLineStringGeometry([o.coordinates]));break;case"MultiLineString":s.push(new GeoJSONLineStringGeometry(o.coordinates))}var c=new GeoJSONRegion(r[n||"name"],s,r.cp);return c.properties=r,c})}var modelInner=makeInner(),axisInner=makeInner(),AxisTickLabelComputingKind={estimate:1,determine:2};function createAxisLabelsComputingContext(t){return{out:{noPxChangeTryDetermine:[]},kind:t}}function tickValuesToNumbers(t,n){var a=map$1(n,function(r){return t.scale.parse(r)});return t.type==="time"&&a.length>0&&(a.sort(),a.unshift(a[0]),a.push(a[a.length-1])),a}function createAxisLabels(t,n){var a=t.getLabelModel().get("customValues");if(a){var r=makeLabelFormatter(t),o=t.scale.getExtent(),s=tickValuesToNumbers(t,a),l=filter(s,function(c){return c>=o[0]&&c<=o[1]});return{labels:map$1(l,function(c){var u={value:c};return{formattedLabel:r(u),rawLabel:t.scale.getLabel(u),tickValue:c,time:void 0,break:void 0}})}}return t.type==="category"?makeCategoryLabels(t,n):makeRealNumberLabels(t)}function createAxisTicks(t,n,a){var r=t.getTickModel().get("customValues");if(r){var o=t.scale.getExtent(),s=tickValuesToNumbers(t,r);return{ticks:filter(s,function(l){return l>=o[0]&&l<=o[1]})}}return t.type==="category"?makeCategoryTicks(t,n):{ticks:map$1(t.scale.getTicks(a),function(l){return l.value})}}function makeCategoryLabels(t,n){var a=t.getLabelModel(),r=makeCategoryLabelsActually(t,a,n);return!a.get("show")||t.scale.isBlank()?{labels:[]}:r}function makeCategoryLabelsActually(t,n,a){var r=ensureCategoryLabelCache(t),o=getOptionCategoryInterval(n),s=a.kind===AxisTickLabelComputingKind.estimate;if(!s){var l=axisCacheGet(r,o);if(l)return l}var c,u;isFunction(o)?c=makeLabelsByCustomizedCategoryInterval(t,o):(u=o==="auto"?makeAutoCategoryInterval(t,a):o,c=makeLabelsByNumericCategoryInterval(t,u));var d={labels:c,labelCategoryInterval:u};return s?a.out.noPxChangeTryDetermine.push(function(){return axisCacheSet(r,o,d),!0}):axisCacheSet(r,o,d),d}function makeCategoryTicks(t,n){var a=ensureCategoryTickCache(t),r=getOptionCategoryInterval(n),o=axisCacheGet(a,r);if(o)return o;var s,l;if((!n.get("show")||t.scale.isBlank())&&(s=[]),isFunction(r))s=makeLabelsByCustomizedCategoryInterval(t,r,!0);else if(r==="auto"){var c=makeCategoryLabelsActually(t,t.getLabelModel(),createAxisLabelsComputingContext(AxisTickLabelComputingKind.determine));l=c.labelCategoryInterval,s=map$1(c.labels,function(u){return u.tickValue})}else l=r,s=makeLabelsByNumericCategoryInterval(t,l,!0);return axisCacheSet(a,r,{ticks:s,tickCategoryInterval:l})}function makeRealNumberLabels(t){var n=t.scale.getTicks(),a=makeLabelFormatter(t);return{labels:map$1(n,function(r,o){return{formattedLabel:a(r,o),rawLabel:t.scale.getLabel(r),tickValue:r.value,time:r.time,break:r.break}})}}var ensureCategoryTickCache=initAxisCacheMethod("axisTick"),ensureCategoryLabelCache=initAxisCacheMethod("axisLabel");function initAxisCacheMethod(t){return function(a){return axisInner(a)[t]||(axisInner(a)[t]={list:[]})}}function axisCacheGet(t,n){for(var a=0;a<t.list.length;a++)if(t.list[a].key===n)return t.list[a].value}function axisCacheSet(t,n,a){return t.list.push({key:n,value:a}),a}function makeAutoCategoryInterval(t,n){if(n.kind===AxisTickLabelComputingKind.estimate){var a=t.calculateCategoryInterval(n);return n.out.noPxChangeTryDetermine.push(function(){return axisInner(t).autoInterval=a,!0}),a}var r=axisInner(t).autoInterval;return r??(axisInner(t).autoInterval=t.calculateCategoryInterval(n))}function calculateCategoryInterval(t,n){var a=n.kind,r=fetchAutoCategoryIntervalCalculationParams(t),o=makeLabelFormatter(t),s=(r.axisRotate-r.labelRotate)/180*Math.PI,l=t.scale,c=l.getExtent(),u=l.count();if(c[1]-c[0]<1)return 0;var d=1,f=40;u>f&&(d=Math.max(1,Math.floor(u/f)));for(var v=c[0],_=t.dataToCoord(v+1)-t.dataToCoord(v),g=Math.abs(_*Math.cos(s)),y=Math.abs(_*Math.sin(s)),b=0,T=0;v<=c[1];v+=d){var S=0,C=0,E=getBoundingRect(o({value:v}),r.font,"center","top");S=E.width*1.3,C=E.height*1.3,b=Math.max(b,S,7),T=Math.max(T,C,7)}var x=b/g,A=T/y;isNaN(x)&&(x=1/0),isNaN(A)&&(A=1/0);var N=Math.max(0,Math.floor(Math.min(x,A)));if(a===AxisTickLabelComputingKind.estimate)return n.out.noPxChangeTryDetermine.push(bind$1(calculateCategoryIntervalTryDetermine,null,t,N,u)),N;var M=calculateCategoryIntervalDealCache(t,N,u);return M??N}function calculateCategoryIntervalTryDetermine(t,n,a){return calculateCategoryIntervalDealCache(t,n,a)==null}function calculateCategoryIntervalDealCache(t,n,a){var r=modelInner(t.model),o=t.getExtent(),s=r.lastAutoInterval,l=r.lastTickCount;if(s!=null&&l!=null&&Math.abs(s-n)<=1&&Math.abs(l-a)<=1&&s>n&&r.axisExtent0===o[0]&&r.axisExtent1===o[1])return s;r.lastTickCount=a,r.lastAutoInterval=n,r.axisExtent0=o[0],r.axisExtent1=o[1]}function fetchAutoCategoryIntervalCalculationParams(t){var n=t.getLabelModel();return{axisRotate:t.getRotate?t.getRotate():t.isHorizontal&&!t.isHorizontal()?90:0,labelRotate:n.get("rotate")||0,font:n.getFont()}}function makeLabelsByNumericCategoryInterval(t,n,a){var r=makeLabelFormatter(t),o=t.scale,s=o.getExtent(),l=t.getLabelModel(),c=[],u=Math.max((n||0)+1,1),d=s[0],f=o.count();d!==0&&u>1&&f/u>2&&(d=Math.round(Math.ceil(d/u)*u));var v=shouldShowAllLabels(t),_=l.get("showMinLabel")||v,g=l.get("showMaxLabel")||v;_&&d!==s[0]&&b(s[0]);for(var y=d;y<=s[1];y+=u)b(y);g&&y-u!==s[1]&&b(s[1]);function b(T){var S={value:T};c.push(a?T:{formattedLabel:r(S),rawLabel:o.getLabel(S),tickValue:T,time:void 0,break:void 0})}return c}function makeLabelsByCustomizedCategoryInterval(t,n,a){var r=t.scale,o=makeLabelFormatter(t),s=[];return each$8(r.getTicks(),function(l){var c=r.getLabel(l),u=l.value;n(l.value,c)&&s.push(a?u:{formattedLabel:o(l),rawLabel:c,tickValue:u,time:void 0,break:void 0})}),s}var NORMALIZED_EXTENT=[0,1],Axis=function(){function t(n,a,r){this.onBand=!1,this.inverse=!1,this.dim=n,this.scale=a,this._extent=r||[0,0]}return t.prototype.contain=function(n){var a=this._extent,r=Math.min(a[0],a[1]),o=Math.max(a[0],a[1]);return n>=r&&n<=o},t.prototype.containData=function(n){return this.scale.contain(this.scale.parse(n))},t.prototype.getExtent=function(){return this._extent.slice()},t.prototype.getPixelPrecision=function(n){return getPixelPrecision(n||this.scale.getExtent(),this._extent)},t.prototype.setExtent=function(n,a){var r=this._extent;r[0]=n,r[1]=a},t.prototype.dataToCoord=function(n,a){var r=this._extent,o=this.scale;return n=o.normalize(o.parse(n)),this.onBand&&o.type==="ordinal"&&(r=r.slice(),fixExtentWithBands(r,o.count())),linearMap$2(n,NORMALIZED_EXTENT,r,a)},t.prototype.coordToData=function(n,a){var r=this._extent,o=this.scale;this.onBand&&o.type==="ordinal"&&(r=r.slice(),fixExtentWithBands(r,o.count()));var s=linearMap$2(n,r,NORMALIZED_EXTENT,a);return this.scale.scale(s)},t.prototype.pointToData=function(n,a){},t.prototype.getTicksCoords=function(n){n=n||{};var a=n.tickModel||this.getTickModel(),r=createAxisTicks(this,a,{breakTicks:n.breakTicks,pruneByBreak:n.pruneByBreak}),o=r.ticks,s=map$1(o,function(c){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(c):c),tickValue:c}},this),l=a.get("alignWithLabel");return fixOnBandTicksCoords(this,s,l,n.clamp),s},t.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var n=this.model.getModel("minorTick"),a=n.get("splitNumber");a>0&&a<100||(a=5);var r=this.scale.getMinorTicks(a),o=map$1(r,function(s){return map$1(s,function(l){return{coord:this.dataToCoord(l),tickValue:l}},this)},this);return o},t.prototype.getViewLabels=function(n){return n=n||createAxisLabelsComputingContext(AxisTickLabelComputingKind.determine),createAxisLabels(this,n).labels},t.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},t.prototype.getTickModel=function(){return this.model.getModel("axisTick")},t.prototype.getBandWidth=function(){var n=this._extent,a=this.scale.getExtent(),r=a[1]-a[0]+(this.onBand?1:0);r===0&&(r=1);var o=Math.abs(n[1]-n[0]);return Math.abs(o)/r},t.prototype.calculateCategoryInterval=function(n){return n=n||createAxisLabelsComputingContext(AxisTickLabelComputingKind.determine),calculateCategoryInterval(this,n)},t}();function fixExtentWithBands(t,n){var a=t[1]-t[0],r=n,o=a/r/2;t[0]+=o,t[1]-=o}function fixOnBandTicksCoords(t,n,a,r){var o=n.length;if(!t.onBand||a||!o)return;var s=t.getExtent(),l,c;if(o===1)n[0].coord=s[0],n[0].onBand=!0,l=n[1]={coord:s[1],tickValue:n[0].tickValue,onBand:!0};else{var u=n[o-1].tickValue-n[0].tickValue,d=(n[o-1].coord-n[0].coord)/u;each$8(n,function(g){g.coord-=d/2,g.onBand=!0});var f=t.scale.getExtent();c=1+f[1]-n[o-1].tickValue,l={coord:n[o-1].coord+d*c,tickValue:f[1]+1,onBand:!0},n.push(l)}var v=s[0]>s[1];_(n[0].coord,s[0])&&(r?n[0].coord=s[0]:n.shift()),r&&_(s[0],n[0].coord)&&n.unshift({coord:s[0],onBand:!0}),_(s[1],l.coord)&&(r?l.coord=s[1]:n.pop()),r&&_(l.coord,s[1])&&n.push({coord:s[1],onBand:!0});function _(g,y){return g=round$1(g),y=round$1(y),v?g>y:g<y}}var LABEL_LAYOUT_BASE_PROPS=["label","labelLine","layoutOption","priority","defaultAttr","marginForce","minMarginForce","marginDefault","suggestIgnore"],LABEL_LAYOUT_DIRTY_BIT_OTHERS=1,LABEL_LAYOUT_DIRTY_BIT_OBB=2,LABEL_LAYOUT_DIRTY_ALL=LABEL_LAYOUT_DIRTY_BIT_OTHERS|LABEL_LAYOUT_DIRTY_BIT_OBB;function setLabelLayoutDirty(t,n,a){a=a||LABEL_LAYOUT_DIRTY_ALL,n?t.dirty|=a:t.dirty&=~a}function isLabelLayoutDirty(t,n){return n=n||LABEL_LAYOUT_DIRTY_ALL,t.dirty==null||!!(t.dirty&n)}function ensureLabelLayoutWithGeometry(t){if(t)return isLabelLayoutDirty(t)&&computeLabelGeometry(t,t.label,t),t}function computeLabelGeometry(t,n,a){var r=n.getComputedTransform();t.transform=ensureCopyTransform(t.transform,r);var o=t.localRect=ensureCopyRect(t.localRect,n.getBoundingRect()),s=n.style,l=s.margin,c=a&&a.marginForce,u=a&&a.minMarginForce,d=a&&a.marginDefault,f=s.__marginType;f==null&&d&&(l=d,f=LabelMarginType.textMargin);for(var v=0;v<4;v++)_tmpLabelMargin[v]=f===LabelMarginType.minMargin&&u&&u[v]!=null?u[v]:c&&c[v]!=null?c[v]:l?l[v]:0;f===LabelMarginType.textMargin&&expandOrShrinkRect(o,_tmpLabelMargin,!1,!1);var _=t.rect=ensureCopyRect(t.rect,o);return r&&_.applyTransform(r),f===LabelMarginType.minMargin&&expandOrShrinkRect(_,_tmpLabelMargin,!1,!1),t.axisAligned=isBoundingRectAxisAligned(r),(t.label=t.label||{}).ignore=n.ignore,setLabelLayoutDirty(t,!1),setLabelLayoutDirty(t,!0,LABEL_LAYOUT_DIRTY_BIT_OBB),t}var _tmpLabelMargin=[0,0,0,0];function computeLabelGeometry2(t,n,a){return t.transform=ensureCopyTransform(t.transform,a),t.localRect=ensureCopyRect(t.localRect,n),t.rect=ensureCopyRect(t.rect,n),a&&t.rect.applyTransform(a),t.axisAligned=isBoundingRectAxisAligned(a),t.obb=void 0,(t.label=t.label||{}).ignore=!1,t}function labelLayoutApplyTranslation(t,n){if(t){t.label.x+=n.x,t.label.y+=n.y,t.label.markRedraw();var a=t.transform;a&&(a[4]+=n.x,a[5]+=n.y);var r=t.rect;r&&(r.x+=n.x,r.y+=n.y);var o=t.obb;o&&o.fromBoundingRect(t.localRect,a)}}function newLabelLayoutWithGeometry(t,n){for(var a=0;a<LABEL_LAYOUT_BASE_PROPS.length;a++){var r=LABEL_LAYOUT_BASE_PROPS[a];t[r]==null&&(t[r]=n[r])}return ensureLabelLayoutWithGeometry(t)}function ensureOBB(t){var n=t.obb;return(!n||isLabelLayoutDirty(t,LABEL_LAYOUT_DIRTY_BIT_OBB))&&(t.obb=n=n||new OrientedBoundingRect,n.fromBoundingRect(t.localRect,t.transform),setLabelLayoutDirty(t,!1,LABEL_LAYOUT_DIRTY_BIT_OBB)),n}function hideOverlap(t){var n=[];t.sort(function(d,f){return(f.suggestIgnore?1:0)-(d.suggestIgnore?1:0)||f.priority-d.priority});function a(d){if(!d.ignore){var f=d.ensureState("emphasis");f.ignore==null&&(f.ignore=!1)}d.ignore=!0}for(var r=0;r<t.length;r++){var o=ensureLabelLayoutWithGeometry(t[r]);if(!o.label.ignore){for(var s=o.label,l=o.labelLine,c=!1,u=0;u<n.length;u++)if(labelIntersect(o,n[u],null,{touchThreshold:.05})){c=!0;break}c?(a(s),l&&a(l)):n.push(o)}}}function labelIntersect(t,n,a,r){return!t||!n||t.label&&t.label.ignore||n.label&&n.label.ignore||!t.rect.intersect(n.rect,a,r)?!1:t.axisAligned&&n.axisAligned?!0:ensureOBB(t).intersect(ensureOBB(n),a,r)}function getDefaultLabel(t,n){var a=t.mapDimensionsAll("defaultedLabel"),r=a.length;if(r===1){var o=retrieveRawValue(t,n,a[0]);return o!=null?o+"":null}else if(r){for(var s=[],l=0;l<a.length;l++)s.push(retrieveRawValue(t,n,a[l]));return s.join(" ")}}var Symbol$1=function(t){__extends$1(n,t);function n(a,r,o,s){var l=t.call(this)||this;return l.updateData(a,r,o,s),l}return n.prototype._createSymbol=function(a,r,o,s,l,c){this.removeAll();var u=createSymbol$1(a,-1,-1,2,2,null,c);u.attr({z2:retrieve2(l,100),culling:!0,scaleX:s[0]/2,scaleY:s[1]/2}),u.drift=driftSymbol,this._symbolType=a,this.add(u)},n.prototype.stopSymbolAnimation=function(a){this.childAt(0).stopAnimation(null,a)},n.prototype.getSymbolType=function(){return this._symbolType},n.prototype.getSymbolPath=function(){return this.childAt(0)},n.prototype.highlight=function(){enterEmphasis(this.childAt(0))},n.prototype.downplay=function(){leaveEmphasis(this.childAt(0))},n.prototype.setZ=function(a,r){var o=this.childAt(0);o.zlevel=a,o.z=r},n.prototype.setDraggable=function(a,r){var o=this.childAt(0);o.draggable=a,o.cursor=!r&&a?"move":o.cursor},n.prototype.updateData=function(a,r,o,s){this.silent=!1;var l=a.getItemVisual(r,"symbol")||"circle",c=a.hostModel,u=n.getSymbolSize(a,r),d=n.getSymbolZ2(a,r),f=l!==this._symbolType,v=s&&s.disableAnimation;if(f){var _=a.getItemVisual(r,"symbolKeepAspect");this._createSymbol(l,a,r,u,d,_)}else{var g=this.childAt(0);g.silent=!1;var y={scaleX:u[0]/2,scaleY:u[1]/2};v?g.attr(y):updateProps$1(g,y,c,r),saveOldStyle(g)}if(this._updateCommon(a,r,u,o,s),f){var g=this.childAt(0);if(!v){var y={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:g.style.opacity}};g.scaleX=g.scaleY=0,g.style.opacity=0,initProps(g,y,c,r)}}v&&this.childAt(0).stopAnimation("leave")},n.prototype._updateCommon=function(a,r,o,s,l){var c=this.childAt(0),u=a.hostModel,d,f,v,_,g,y,b,T,S;if(s&&(d=s.emphasisItemStyle,f=s.blurItemStyle,v=s.selectItemStyle,_=s.focus,g=s.blurScope,b=s.labelStatesModels,T=s.hoverScale,S=s.cursorStyle,y=s.emphasisDisabled),!s||a.hasItemOption){var C=s&&s.itemModel?s.itemModel:a.getItemModel(r),E=C.getModel("emphasis");d=E.getModel("itemStyle").getItemStyle(),v=C.getModel(["select","itemStyle"]).getItemStyle(),f=C.getModel(["blur","itemStyle"]).getItemStyle(),_=E.get("focus"),g=E.get("blurScope"),y=E.get("disabled"),b=getLabelStatesModels(C),T=E.getShallow("scale"),S=C.getShallow("cursor")}var x=a.getItemVisual(r,"symbolRotate");c.attr("rotation",(x||0)*Math.PI/180||0);var A=normalizeSymbolOffset(a.getItemVisual(r,"symbolOffset"),o);A&&(c.x=A[0],c.y=A[1]),S&&c.attr("cursor",S);var N=a.getItemVisual(r,"style"),M=N.fill;if(c instanceof ZRImage){var R=c.style;c.useStyle(extend({image:R.image,x:R.x,y:R.y,width:R.width,height:R.height},N))}else c.__isEmptyBrush?c.useStyle(extend({},N)):c.useStyle(N),c.style.decal=null,c.setColor(M,l&&l.symbolInnerColor),c.style.strokeNoScale=!0;var D=a.getItemVisual(r,"liftZ"),L=this._z2;D!=null?L==null&&(this._z2=c.z2,c.z2+=D):L!=null&&(c.z2=L,this._z2=null);var I=l&&l.useNameLabel;setLabelStyle(c,b,{labelFetcher:u,labelDataIndex:r,defaultText:$,inheritColor:M,defaultOpacity:N.opacity});function $(X){return I?a.getName(X):getDefaultLabel(a,X)}this._sizeX=o[0]/2,this._sizeY=o[1]/2;var V=c.ensureState("emphasis");V.style=d,c.ensureState("select").style=v,c.ensureState("blur").style=f;var H=T==null||T===!0?Math.max(1.1,3/this._sizeY):isFinite(T)&&T>0?+T:1;V.scaleX=this._sizeX*H,V.scaleY=this._sizeY*H,this.setSymbolScale(1),toggleHoverEmphasis(this,_,g,y)},n.prototype.setSymbolScale=function(a){this.scaleX=this.scaleY=a},n.prototype.fadeOut=function(a,r,o){var s=this.childAt(0),l=getECData(this).dataIndex,c=o&&o.animation;if(this.silent=s.silent=!0,o&&o.fadeLabel){var u=s.getTextContent();u&&removeElement(u,{style:{opacity:0}},r,{dataIndex:l,removeOpt:c,cb:function(){s.removeTextContent()}})}else s.removeTextContent();removeElement(s,{style:{opacity:0},scaleX:0,scaleY:0},r,{dataIndex:l,cb:a,removeOpt:c})},n.getSymbolSize=function(a,r){return normalizeSymbolSize(a.getItemVisual(r,"symbolSize"))},n.getSymbolZ2=function(a,r){return a.getItemVisual(r,"z2")},n}(Group);function driftSymbol(t,n){this.parent.drift(t,n)}function symbolNeedsDraw(t,n,a,r){return n&&!isNaN(n[0])&&!isNaN(n[1])&&!(r.isIgnore&&r.isIgnore(a))&&!(r.clipShape&&!r.clipShape.contain(n[0],n[1]))&&t.getItemVisual(a,"symbol")!=="none"}function normalizeUpdateOpt(t){return t!=null&&!isObject$3(t)&&(t={isIgnore:t}),t||{}}function makeSeriesScope(t){var n=t.hostModel,a=n.getModel("emphasis");return{emphasisItemStyle:a.getModel("itemStyle").getItemStyle(),blurItemStyle:n.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:n.getModel(["select","itemStyle"]).getItemStyle(),focus:a.get("focus"),blurScope:a.get("blurScope"),emphasisDisabled:a.get("disabled"),hoverScale:a.get("scale"),labelStatesModels:getLabelStatesModels(n),cursorStyle:n.get("cursor")}}var SymbolDraw=function(){function t(n){this.group=new Group,this._SymbolCtor=n||Symbol$1}return t.prototype.updateData=function(n,a){this._progressiveEls=null,a=normalizeUpdateOpt(a);var r=this.group,o=n.hostModel,s=this._data,l=this._SymbolCtor,c=a.disableAnimation,u=makeSeriesScope(n),d={disableAnimation:c},f=a.getSymbolPoint||function(v){return n.getItemLayout(v)};s||r.removeAll(),n.diff(s).add(function(v){var _=f(v);if(symbolNeedsDraw(n,_,v,a)){var g=new l(n,v,u,d);g.setPosition(_),n.setItemGraphicEl(v,g),r.add(g)}}).update(function(v,_){var g=s.getItemGraphicEl(_),y=f(v);if(!symbolNeedsDraw(n,y,v,a)){r.remove(g);return}var b=n.getItemVisual(v,"symbol")||"circle",T=g&&g.getSymbolType&&g.getSymbolType();if(!g||T&&T!==b)r.remove(g),g=new l(n,v,u,d),g.setPosition(y);else{g.updateData(n,v,u,d);var S={x:y[0],y:y[1]};c?g.attr(S):updateProps$1(g,S,o)}r.add(g),n.setItemGraphicEl(v,g)}).remove(function(v){var _=s.getItemGraphicEl(v);_&&_.fadeOut(function(){r.remove(_)},o)}).execute(),this._getSymbolPoint=f,this._data=n},t.prototype.updateLayout=function(){var n=this,a=this._data;a&&a.eachItemGraphicEl(function(r,o){var s=n._getSymbolPoint(o);r.setPosition(s),r.markRedraw()})},t.prototype.incrementalPrepareUpdate=function(n){this._seriesScope=makeSeriesScope(n),this._data=null,this.group.removeAll()},t.prototype.incrementalUpdate=function(n,a,r){this._progressiveEls=[],r=normalizeUpdateOpt(r);function o(u){u.isGroup||(u.incremental=!0,u.ensureState("emphasis").hoverLayer=!0)}for(var s=n.start;s<n.end;s++){var l=a.getItemLayout(s);if(symbolNeedsDraw(a,l,s,r)){var c=new this._SymbolCtor(a,s,this._seriesScope);c.traverse(o),c.setPosition(l),this.group.add(c),a.setItemGraphicEl(s,c),this._progressiveEls.push(c)}}},t.prototype.eachRendered=function(n){traverseElements(this._progressiveEls||this.group,n)},t.prototype.remove=function(n){var a=this.group,r=this._data;r&&n?r.eachItemGraphicEl(function(o){o.fadeOut(function(){a.remove(o)},r.hostModel)}):a.removeAll()},t}();function pointsLayout(t,n){return{seriesType:t,plan:createRenderPlanner(),reset:function(a){var r=a.getData(),o=a.coordinateSystem,s=a.pipelineContext,l=s.large;if(o){var c=map$1(o.dimensions,function(g){return r.mapDimension(g)}).slice(0,2),u=c.length,d=r.getCalculationInfo("stackResultDimension");isDimensionStacked(r,c[0])&&(c[0]=d),isDimensionStacked(r,c[1])&&(c[1]=d);var f=r.getStore(),v=r.getDimensionIndex(c[0]),_=r.getDimensionIndex(c[1]);return u&&{progress:function(g,y){for(var b=g.end-g.start,T=l&&createFloat32Array(b*u),S=[],C=[],E=g.start,x=0;E<g.end;E++){var A=void 0;if(u===1){var N=f.get(v,E);A=o.dataToPoint(N,null,C)}else S[0]=f.get(v,E),S[1]=f.get(_,E),A=o.dataToPoint(S,null,C);l?(T[x++]=A[0],T[x++]=A[1]):y.setItemLayout(E,A.slice())}l&&y.setLayout("points",T)}}}}}}function dataFilter(t){return{seriesType:t,reset:function(n,a){var r=a.findComponents({mainType:"legend"});if(!(!r||!r.length)){var o=n.getData();o.filterSelf(function(s){for(var l=o.getName(s),c=0;c<r.length;c++)if(!r[c].isSelected(l))return!1;return!0})}}}}function createSeriesDataSimply(t,n,a){n=isArray$1(n)&&{coordDimensions:n}||extend({encodeDefine:t.getEncode()},n);var r=t.getSource(),o=prepareSeriesDataSchema(r,n).dimensions,s=new SeriesData(o,t);return s.initData(r,a),s}var LegendVisualProvider=function(){function t(n,a){this._getDataWithEncodedVisual=n,this._getRawData=a}return t.prototype.getAllNames=function(){var n=this._getRawData();return n.mapArray(n.getName)},t.prototype.containName=function(n){var a=this._getRawData();return a.indexOfName(n)>=0},t.prototype.indexOfName=function(n){var a=this._getDataWithEncodedVisual();return a.indexOfName(n)},t.prototype.getItemVisual=function(n,a){var r=this._getDataWithEncodedVisual();return r.getItemVisual(n,a)},t}(),ScatterSeriesModel=function(t){__extends$1(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.hasSymbolVisual=!0,a}return n.prototype.getInitialData=function(a,r){return createSeriesData(null,this,{useEncodeDefaulter:!0})},n.prototype.getProgressive=function(){var a=this.option.progressive;return a??(this.option.large?5e3:this.get("progressive"))},n.prototype.getProgressiveThreshold=function(){var a=this.option.progressiveThreshold;return a??(this.option.large?1e4:this.get("progressiveThreshold"))},n.prototype.brushSelector=function(a,r,o){return o.point(r.getItemLayout(a))},n.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},n.type="series.scatter",n.dependencies=["grid","polar","geo","singleAxis","calendar","matrix"],n.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:tokens.color.primary}},universalTransition:{divideShape:"clone"}},n}(SeriesModel),BOOST_SIZE_THRESHOLD=4,LargeSymbolPathShape=function(){function t(){}return t}(),LargeSymbolPath=function(t){__extends$1(n,t);function n(a){var r=t.call(this,a)||this;return r._off=0,r.hoverDataIdx=-1,r}return n.prototype.getDefaultShape=function(){return new LargeSymbolPathShape},n.prototype.reset=function(){this.notClear=!1,this._off=0},n.prototype.buildPath=function(a,r){var o=r.points,s=r.size,l=this.symbolProxy,c=l.shape,u=a.getContext?a.getContext():a,d=u&&s[0]<BOOST_SIZE_THRESHOLD,f=this.softClipShape,v;if(d){this._ctx=u;return}for(this._ctx=null,v=this._off;v<o.length;){var _=o[v++],g=o[v++];isNaN(_)||isNaN(g)||f&&!f.contain(_,g)||(c.x=_-s[0]/2,c.y=g-s[1]/2,c.width=s[0],c.height=s[1],l.buildPath(a,c,!0))}this.incremental&&(this._off=v,this.notClear=!0)},n.prototype.afterBrush=function(){var a=this.shape,r=a.points,o=a.size,s=this._ctx,l=this.softClipShape,c;if(s){for(c=this._off;c<r.length;){var u=r[c++],d=r[c++];isNaN(u)||isNaN(d)||l&&!l.contain(u,d)||s.fillRect(u-o[0]/2,d-o[1]/2,o[0],o[1])}this.incremental&&(this._off=c,this.notClear=!0)}},n.prototype.findDataIndex=function(a,r){for(var o=this.shape,s=o.points,l=o.size,c=Math.max(l[0],4),u=Math.max(l[1],4),d=s.length/2-1;d>=0;d--){var f=d*2,v=s[f]-c/2,_=s[f+1]-u/2;if(a>=v&&r>=_&&a<=v+c&&r<=_+u)return d}return-1},n.prototype.contain=function(a,r){var o=this.transformCoordToLocal(a,r),s=this.getBoundingRect();if(a=o[0],r=o[1],s.contain(a,r)){var l=this.hoverDataIdx=this.findDataIndex(a,r);return l>=0}return this.hoverDataIdx=-1,!1},n.prototype.getBoundingRect=function(){var a=this._rect;if(!a){for(var r=this.shape,o=r.points,s=r.size,l=s[0],c=s[1],u=1/0,d=1/0,f=-1/0,v=-1/0,_=0;_<o.length;){var g=o[_++],y=o[_++];u=Math.min(g,u),f=Math.max(g,f),d=Math.min(y,d),v=Math.max(y,v)}a=this._rect=new BoundingRect(u-l/2,d-c/2,f-u+l,v-d+c)}return a},n}(Path),LargeSymbolDraw=function(){function t(){this.group=new Group}return t.prototype.updateData=function(n,a){this._clear();var r=this._create();r.setShape({points:n.getLayout("points")}),this._setCommon(r,n,a)},t.prototype.updateLayout=function(n){var a=n.getLayout("points");this.group.eachChild(function(r){if(r.startIndex!=null){var o=(r.endIndex-r.startIndex)*2,s=r.startIndex*4*2;a=new Float32Array(a.buffer,s,o)}r.setShape("points",a),r.reset()})},t.prototype.incrementalPrepareUpdate=function(n){this._clear()},t.prototype.incrementalUpdate=function(n,a,r){var o=this._newAdded[0],s=a.getLayout("points"),l=o&&o.shape.points;if(l&&l.length<2e4){var c=l.length,u=new Float32Array(c+s.length);u.set(l),u.set(s,c),o.endIndex=n.end,o.setShape({points:u})}else{this._newAdded=[];var d=this._create();d.startIndex=n.start,d.endIndex=n.end,d.incremental=!0,d.setShape({points:s}),this._setCommon(d,a,r)}},t.prototype.eachRendered=function(n){this._newAdded[0]&&n(this._newAdded[0])},t.prototype._create=function(){var n=new LargeSymbolPath({cursor:"default"});return n.ignoreCoarsePointer=!0,this.group.add(n),this._newAdded.push(n),n},t.prototype._setCommon=function(n,a,r){var o=a.hostModel;r=r||{};var s=a.getVisual("symbolSize");n.setShape("size",s instanceof Array?s:[s,s]),n.softClipShape=r.clipShape||null,n.symbolProxy=createSymbol$1(a.getVisual("symbol"),0,0,0,0),n.setColor=n.symbolProxy.setColor;var l=n.shape.size[0]<BOOST_SIZE_THRESHOLD;n.useStyle(o.getModel("itemStyle").getItemStyle(l?["color","shadowBlur","shadowColor"]:["color"]));var c=a.getVisual("style"),u=c&&c.fill;u&&n.setColor(u);var d=getECData(n);d.seriesIndex=o.seriesIndex,n.on("mousemove",function(f){d.dataIndex=null;var v=n.hoverDataIdx;v>=0&&(d.dataIndex=v+(n.startIndex||0))})},t.prototype.remove=function(){this._clear()},t.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},t}(),ScatterView=function(t){__extends$1(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,r,o){var s=a.getData(),l=this._updateSymbolDraw(s,a);l.updateData(s,{clipShape:this._getClipShape(a)}),this._finished=!0},n.prototype.incrementalPrepareRender=function(a,r,o){var s=a.getData(),l=this._updateSymbolDraw(s,a);l.incrementalPrepareUpdate(s),this._finished=!1},n.prototype.incrementalRender=function(a,r,o){this._symbolDraw.incrementalUpdate(a,r.getData(),{clipShape:this._getClipShape(r)}),this._finished=a.end===r.getData().count()},n.prototype.updateTransform=function(a,r,o){var s=a.getData();if(this.group.dirty(),!this._finished||s.count()>1e4)return{update:!0};var l=pointsLayout("").reset(a,r,o);l.progress&&l.progress({start:0,end:s.count(),count:s.count()},s),this._symbolDraw.updateLayout(s)},n.prototype.eachRendered=function(a){this._symbolDraw&&this._symbolDraw.eachRendered(a)},n.prototype._getClipShape=function(a){if(a.get("clip",!0)){var r=a.coordinateSystem;return r&&r.getArea&&r.getArea(.1)}},n.prototype._updateSymbolDraw=function(a,r){var o=this._symbolDraw,s=r.pipelineContext,l=s.large;return(!o||l!==this._isLargeDraw)&&(o&&o.remove(),o=this._symbolDraw=l?new LargeSymbolDraw:new SymbolDraw,this._isLargeDraw=l,this.group.removeAll()),this.group.add(o.group),o},n.prototype.remove=function(a,r){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},n.prototype.dispose=function(){},n.type="scatter",n}(ChartView),OUTER_BOUNDS_DEFAULT={left:0,right:0,top:0,bottom:0},OUTER_BOUNDS_CLAMP_DEFAULT=["25%","25%"],GridModel=function(t){__extends$1(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.mergeDefaultAndTheme=function(a,r){var o=getLayoutParams(a.outerBounds);t.prototype.mergeDefaultAndTheme.apply(this,arguments),o&&a.outerBounds&&mergeLayoutParam(a.outerBounds,o)},n.prototype.mergeOption=function(a,r){t.prototype.mergeOption.apply(this,arguments),this.option.outerBounds&&a.outerBounds&&mergeLayoutParam(this.option.outerBounds,a.outerBounds)},n.type="grid",n.dependencies=["xAxis","yAxis"],n.layoutMode="box",n.defaultOption={show:!1,z:0,left:"15%",top:65,right:"10%",bottom:80,containLabel:!1,outerBoundsMode:"auto",outerBounds:OUTER_BOUNDS_DEFAULT,outerBoundsContain:"all",outerBoundsClampWidth:OUTER_BOUNDS_CLAMP_DEFAULT[0],outerBoundsClampHeight:OUTER_BOUNDS_CLAMP_DEFAULT[1],backgroundColor:tokens.color.transparent,borderWidth:1,borderColor:tokens.color.neutral30},n}(ComponentModel),CartesianAxisModel=function(t){__extends$1(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",SINGLE_REFERRING).models[0]},n.type="cartesian2dAxis",n}(ComponentModel);mixin(CartesianAxisModel,AxisModelCommonMixin);var defaultOption$1={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:tokens.color.axisLine,width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15],breakLine:!0},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12,color:tokens.color.axisLabel,textMargin:[0,3]},splitLine:{show:!0,showMinLine:!0,showMaxLine:!0,lineStyle:{color:tokens.color.axisSplitLine,width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:[tokens.color.backgroundTint,tokens.color.backgroundTransparent]}},breakArea:{show:!0,itemStyle:{color:tokens.color.neutral00,borderColor:tokens.color.border,borderWidth:1,borderType:[3,3],opacity:.6},zigzagAmplitude:4,zigzagMinSpan:4,zigzagMaxSpan:20,zigzagZ:100,expandOnClick:!0},breakLabelLayout:{moveOverlap:"auto"}},categoryAxis=merge({boundaryGap:!0,deduplication:null,jitter:0,jitterOverlap:!0,jitterMargin:2,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto",show:"auto"},axisLabel:{interval:"auto"}},defaultOption$1),valueAxis=merge({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:tokens.color.axisMinorSplitLine,width:1}}},defaultOption$1),timeAxis=merge({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},valueAxis),logAxis=defaults({logBase:10},valueAxis);const axisDefault={category:categoryAxis,value:valueAxis,time:timeAxis,log:logAxis};var AXIS_TYPES={value:1,category:1,time:1,log:1},_impl=null;function getAxisBreakHelper(){return _impl}function axisModelCreator(t,n,a,r){each$8(AXIS_TYPES,function(o,s){var l=merge(merge({},axisDefault[s],!0),r,!0),c=function(u){__extends$1(d,u);function d(){var f=u!==null&&u.apply(this,arguments)||this;return f.type=n+"Axis."+s,f}return d.prototype.mergeDefaultAndTheme=function(f,v){var _=fetchLayoutMode(this),g=_?getLayoutParams(f):{},y=v.getTheme();merge(f,y.get(s+"Axis")),merge(f,this.getDefaultOption()),f.type=getAxisType(f),_&&mergeLayoutParam(f,g,_)},d.prototype.optionUpdated=function(){var f=this.option;f.type==="category"&&(this.__ordinalMeta=OrdinalMeta.createByAxisModel(this))},d.prototype.getCategories=function(f){var v=this.option;if(v.type==="category")return f?v.data:this.__ordinalMeta.categories},d.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},d.prototype.updateAxisBreaks=function(f){return{breaks:[]}},d.type=n+"Axis."+s,d.defaultOption=l,d}(a);t.registerComponentModel(c)}),t.registerSubTypeDefaulter(n+"Axis",getAxisType)}function getAxisType(t){return t.type||(t.data?"category":"value")}var Cartesian=function(){function t(n){this.type="cartesian",this._dimList=[],this._axes={},this.name=n||""}return t.prototype.getAxis=function(n){return this._axes[n]},t.prototype.getAxes=function(){return map$1(this._dimList,function(n){return this._axes[n]},this)},t.prototype.getAxesByScale=function(n){return n=n.toLowerCase(),filter(this.getAxes(),function(a){return a.scale.type===n})},t.prototype.addAxis=function(n){var a=n.dim;this._axes[a]=n,this._dimList.push(a)},t}(),cartesian2DDimensions=["x","y"];function canCalculateAffineTransform(t){return(t.type==="interval"||t.type==="time")&&!t.hasBreaks()}var Cartesian2D=function(t){__extends$1(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type="cartesian2d",a.dimensions=cartesian2DDimensions,a}return n.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var a=this.getAxis("x").scale,r=this.getAxis("y").scale;if(!(!canCalculateAffineTransform(a)||!canCalculateAffineTransform(r))){var o=a.getExtent(),s=r.getExtent(),l=this.dataToPoint([o[0],s[0]]),c=this.dataToPoint([o[1],s[1]]),u=o[1]-o[0],d=s[1]-s[0];if(!(!u||!d)){var f=(c[0]-l[0])/u,v=(c[1]-l[1])/d,_=l[0]-o[0]*f,g=l[1]-s[0]*v,y=this._transform=[f,0,0,v,_,g];this._invTransform=invert([],y)}}},n.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},n.prototype.containPoint=function(a){var r=this.getAxis("x"),o=this.getAxis("y");return r.contain(r.toLocalCoord(a[0]))&&o.contain(o.toLocalCoord(a[1]))},n.prototype.containData=function(a){return this.getAxis("x").containData(a[0])&&this.getAxis("y").containData(a[1])},n.prototype.containZone=function(a,r){var o=this.dataToPoint(a),s=this.dataToPoint(r),l=this.getArea(),c=new BoundingRect(o[0],o[1],s[0]-o[0],s[1]-o[1]);return l.intersect(c)},n.prototype.dataToPoint=function(a,r,o){o=o||[];var s=a[0],l=a[1];if(this._transform&&s!=null&&isFinite(s)&&l!=null&&isFinite(l))return applyTransform$1(o,a,this._transform);var c=this.getAxis("x"),u=this.getAxis("y");return o[0]=c.toGlobalCoord(c.dataToCoord(s,r)),o[1]=u.toGlobalCoord(u.dataToCoord(l,r)),o},n.prototype.clampData=function(a,r){var o=this.getAxis("x").scale,s=this.getAxis("y").scale,l=o.getExtent(),c=s.getExtent(),u=o.parse(a[0]),d=s.parse(a[1]);return r=r||[],r[0]=Math.min(Math.max(Math.min(l[0],l[1]),u),Math.max(l[0],l[1])),r[1]=Math.min(Math.max(Math.min(c[0],c[1]),d),Math.max(c[0],c[1])),r},n.prototype.pointToData=function(a,r,o){if(o=o||[],this._invTransform)return applyTransform$1(o,a,this._invTransform);var s=this.getAxis("x"),l=this.getAxis("y");return o[0]=s.coordToData(s.toLocalCoord(a[0]),r),o[1]=l.coordToData(l.toLocalCoord(a[1]),r),o},n.prototype.getOtherAxis=function(a){return this.getAxis(a.dim==="x"?"y":"x")},n.prototype.getArea=function(a){a=a||0;var r=this.getAxis("x").getGlobalExtent(),o=this.getAxis("y").getGlobalExtent(),s=Math.min(r[0],r[1])-a,l=Math.min(o[0],o[1])-a,c=Math.max(r[0],r[1])-s+a,u=Math.max(o[0],o[1])-l+a;return new BoundingRect(s,l,c,u)},n}(Cartesian),Axis2D=function(t){__extends$1(n,t);function n(a,r,o,s,l){var c=t.call(this,a,r,o)||this;return c.index=0,c.type=s||"value",c.position=l||"bottom",c}return n.prototype.isHorizontal=function(){var a=this.position;return a==="top"||a==="bottom"},n.prototype.getGlobalExtent=function(a){var r=this.getExtent();return r[0]=this.toGlobalCoord(r[0]),r[1]=this.toGlobalCoord(r[1]),a&&r[0]>r[1]&&r.reverse(),r},n.prototype.pointToData=function(a,r){return this.coordToData(this.toLocalCoord(a[this.dim==="x"?0:1]),r)},n.prototype.setCategorySortInfo=function(a){if(this.type!=="category")return!1;this.model.option.categorySortInfo=a,this.scale.setSortInfo(a)},n}(Axis),AXIS_BREAK_EXPAND_ACTION_TYPE="expandAxisBreak",PI=Math.PI,DEFAULT_CENTER_NAME_MARGIN_LEVELS=[[1,2,1,2],[5,3,5,3],[8,3,8,3]],DEFAULT_ENDS_NAME_MARGIN_LEVELS=[[0,1,0,1],[0,3,0,3],[0,3,0,3]],getLabelInner=makeInner(),getTickInner=makeInner(),AxisBuilderSharedContext=function(){function t(n){this.recordMap={},this.resolveAxisNameOverlap=n}return t.prototype.ensureRecord=function(n){var a=n.axis.dim,r=n.componentIndex,o=this.recordMap,s=o[a]||(o[a]=[]);return s[r]||(s[r]={ready:{}})},t}();function resetOverlapRecordToShared(t,n,a,r){var o=a.axis,s=n.ensureRecord(a),l=[],c,u=hasAxisName(t.axisName)&&isNameLocationCenter(t.nameLocation);each$8(r,function(y){var b=ensureLabelLayoutWithGeometry(y);if(!(!b||b.label.ignore)){l.push(b);var T=s.transGroup;u&&(T.transform?invert(_stTransTmp,T.transform):identity(_stTransTmp),b.transform&&mul(_stTransTmp,_stTransTmp,b.transform),BoundingRect.copy(_stLabelRectTmp,b.localRect),_stLabelRectTmp.applyTransform(_stTransTmp),c?c.union(_stLabelRectTmp):BoundingRect.copy(c=new BoundingRect(0,0,0,0),_stLabelRectTmp))}});var d=Math.abs(s.dirVec.x)>.1?"x":"y",f=s.transGroup[d];if(l.sort(function(y,b){return Math.abs(y.label[d]-f)-Math.abs(b.label[d]-f)}),u&&c){var v=o.getExtent(),_=Math.min(v[0],v[1]),g=Math.max(v[0],v[1])-_;c.union(new BoundingRect(_,0,g,1))}s.stOccupiedRect=c,s.labelInfoList=l}var _stTransTmp=create(),_stLabelRectTmp=new BoundingRect(0,0,0,0),resolveAxisNameOverlapDefault=function(t,n,a,r,o,s){if(isNameLocationCenter(t.nameLocation)){var l=s.stOccupiedRect;l&&moveIfOverlap(computeLabelGeometry2({},l,s.transGroup.transform),r,o)}else moveIfOverlapByLinearLabels(s.labelInfoList,s.dirVec,r,o)};function moveIfOverlap(t,n,a){var r=new Point;labelIntersect(t,n,r,{direction:Math.atan2(a.y,a.x),bidirectional:!1,touchThreshold:.05})&&labelLayoutApplyTranslation(n,r)}function moveIfOverlapByLinearLabels(t,n,a,r){for(var o=Point.dot(r,n)>=0,s=0,l=t.length;s<l;s++){var c=t[o?s:l-1-s];c.label.ignore||moveIfOverlap(c,a,r)}}var AxisBuilder=function(){function t(n,a,r,o){this.group=new Group,this._axisModel=n,this._api=a,this._local={},this._shared=o||new AxisBuilderSharedContext(resolveAxisNameOverlapDefault),this._resetCfgDetermined(r)}return t.prototype.updateCfg=function(n){var a=this._cfg.raw;a.position=n.position,a.labelOffset=n.labelOffset,this._resetCfgDetermined(a)},t.prototype.__getRawCfg=function(){return this._cfg.raw},t.prototype._resetCfgDetermined=function(n){var a=this._axisModel,r=a.getDefaultOption?a.getDefaultOption():{},o=retrieve2(n.axisName,a.get("name")),s=a.get("nameMoveOverlap");(s==null||s==="auto")&&(s=retrieve2(n.defaultNameMoveOverlap,!0));var l={raw:n,position:n.position,rotation:n.rotation,nameDirection:retrieve2(n.nameDirection,1),tickDirection:retrieve2(n.tickDirection,1),labelDirection:retrieve2(n.labelDirection,1),labelOffset:retrieve2(n.labelOffset,0),silent:retrieve2(n.silent,!0),axisName:o,nameLocation:retrieve3(a.get("nameLocation"),r.nameLocation,"end"),shouldNameMoveOverlap:hasAxisName(o)&&s,optionHideOverlap:a.get(["axisLabel","hideOverlap"]),showMinorTicks:a.get(["minorTick","show"])};this._cfg=l;var c=new Group({x:l.position[0],y:l.position[1],rotation:l.rotation});c.updateTransform(),this._transformGroup=c;var u=this._shared.ensureRecord(a);u.transGroup=this._transformGroup,u.dirVec=new Point(Math.cos(-l.rotation),Math.sin(-l.rotation))},t.prototype.build=function(n,a){var r=this;return n||(n={axisLine:!0,axisTickLabelEstimate:!1,axisTickLabelDetermine:!0,axisName:!0}),each$8(AXIS_BUILDER_AXIS_PART_NAMES,function(o){n[o]&&builders[o](r._cfg,r._local,r._shared,r._axisModel,r.group,r._transformGroup,r._api,a||{})}),this},t.innerTextLayout=function(n,a,r){var o=remRadian(a-n),s,l;return isRadianAroundZero(o)?(l=r>0?"top":"bottom",s="center"):isRadianAroundZero(o-PI)?(l=r>0?"bottom":"top",s="center"):(l="middle",o>0&&o<PI?s=r>0?"right":"left":s=r>0?"left":"right"),{rotation:o,textAlign:s,textVerticalAlign:l}},t.makeAxisEventDataBase=function(n){var a={componentType:n.mainType,componentIndex:n.componentIndex};return a[n.mainType+"Index"]=n.componentIndex,a},t.isLabelSilent=function(n){var a=n.get("tooltip");return n.get("silent")||!(n.get("triggerEvent")||a&&a.show)},t}(),AXIS_BUILDER_AXIS_PART_NAMES=["axisLine","axisTickLabelEstimate","axisTickLabelDetermine","axisName"],builders={axisLine:function(t,n,a,r,o,s,l){var c=r.get(["axisLine","show"]);if(c==="auto"&&(c=!0,t.raw.axisLineAutoShow!=null&&(c=!!t.raw.axisLineAutoShow)),!!c){var u=r.axis.getExtent(),d=s.transform,f=[u[0],0],v=[u[1],0],_=f[0]>v[0];d&&(applyTransform$1(f,f,d),applyTransform$1(v,v,d));var g=extend({lineCap:"round"},r.getModel(["axisLine","lineStyle"]).getLineStyle()),y={strokeContainThreshold:t.raw.strokeContainThreshold||5,silent:!0,z2:1,style:g};if(r.get(["axisLine","breakLine"])&&r.axis.scale.hasBreaks())getAxisBreakHelper().buildAxisBreakLine(r,o,s,y);else{var b=new Line(extend({shape:{x1:f[0],y1:f[1],x2:v[0],y2:v[1]}},y));subPixelOptimizeLine(b.shape,b.style.lineWidth),b.anid="line",o.add(b)}var T=r.get(["axisLine","symbol"]);if(T!=null){var S=r.get(["axisLine","symbolSize"]);isString(T)&&(T=[T,T]),(isString(S)||isNumber(S))&&(S=[S,S]);var C=normalizeSymbolOffset(r.get(["axisLine","symbolOffset"])||0,S),E=S[0],x=S[1];each$8([{rotate:t.rotation+Math.PI/2,offset:C[0],r:0},{rotate:t.rotation-Math.PI/2,offset:C[1],r:Math.sqrt((f[0]-v[0])*(f[0]-v[0])+(f[1]-v[1])*(f[1]-v[1]))}],function(A,N){if(T[N]!=="none"&&T[N]!=null){var M=createSymbol$1(T[N],-E/2,-x/2,E,x,g.stroke,!0),R=A.r+A.offset,D=_?v:f;M.attr({rotation:A.rotate,x:D[0]+R*Math.cos(t.rotation),y:D[1]-R*Math.sin(t.rotation),silent:!0,z2:11}),o.add(M)}})}}},axisTickLabelEstimate:function(t,n,a,r,o,s,l,c){var u=dealLastTickLabelResultReusable(n,o,c);u&&layOutAxisTickLabel(t,n,a,r,o,s,l,AxisTickLabelComputingKind.estimate)},axisTickLabelDetermine:function(t,n,a,r,o,s,l,c){var u=dealLastTickLabelResultReusable(n,o,c);u&&layOutAxisTickLabel(t,n,a,r,o,s,l,AxisTickLabelComputingKind.determine);var d=buildAxisMajorTicks(t,o,s,r);syncLabelIgnoreToMajorTicks(t,n.labelLayoutList,d),buildAxisMinorTicks(t,o,s,r,t.tickDirection)},axisName:function(t,n,a,r,o,s,l,c){var u=a.ensureRecord(r);n.nameEl&&(o.remove(n.nameEl),n.nameEl=u.nameLayout=u.nameLocation=null);var d=t.axisName;if(hasAxisName(d)){var f=t.nameLocation,v=t.nameDirection,_=r.getModel("nameTextStyle"),g=r.get("nameGap")||0,y=r.axis.getExtent(),b=r.axis.inverse?-1:1,T=new Point(0,0),S=new Point(0,0);f==="start"?(T.x=y[0]-b*g,S.x=-b):f==="end"?(T.x=y[1]+b*g,S.x=b):(T.x=(y[0]+y[1])/2,T.y=t.labelOffset+v*g,S.y=v);var C=create();S.transform(rotate(C,C,t.rotation));var E=r.get("nameRotate");E!=null&&(E=E*PI/180);var x,A;isNameLocationCenter(f)?x=AxisBuilder.innerTextLayout(t.rotation,E??t.rotation,v):(x=endTextLayout(t.rotation,f,E||0,y),A=t.raw.axisNameAvailableWidth,A!=null&&(A=Math.abs(A/Math.sin(x.rotation)),!isFinite(A)&&(A=null)));var N=_.getFont(),M=r.get("nameTruncate",!0)||{},R=M.ellipsis,D=retrieve(t.raw.nameTruncateMaxWidth,M.maxWidth,A),L=c.nameMarginLevel||0,I=new ZRText({x:T.x,y:T.y,rotation:x.rotation,silent:AxisBuilder.isLabelSilent(r),style:createTextStyle(_,{text:d,font:N,overflow:"truncate",width:D,ellipsis:R,fill:_.getTextColor()||r.get(["axisLine","lineStyle","color"]),align:_.get("align")||x.textAlign,verticalAlign:_.get("verticalAlign")||x.textVerticalAlign}),z2:1});if(setTooltipConfig({el:I,componentModel:r,itemName:d}),I.__fullText=d,I.anid="name",r.get("triggerEvent")){var $=AxisBuilder.makeAxisEventDataBase(r);$.targetType="axisName",$.name=d,getECData(I).eventData=$}s.add(I),I.updateTransform(),n.nameEl=I;var V=u.nameLayout=ensureLabelLayoutWithGeometry({label:I,priority:I.z2,defaultAttr:{ignore:I.ignore},marginDefault:isNameLocationCenter(f)?DEFAULT_CENTER_NAME_MARGIN_LEVELS[L]:DEFAULT_ENDS_NAME_MARGIN_LEVELS[L]});if(u.nameLocation=f,o.add(I),I.decomposeTransform(),t.shouldNameMoveOverlap&&V){var H=a.ensureRecord(r);a.resolveAxisNameOverlap(t,a,r,V,S,H)}}}};function layOutAxisTickLabel(t,n,a,r,o,s,l,c){axisLabelBuildResultExists(n)||buildAxisLabel(t,n,o,c,r,l);var u=n.labelLayoutList;updateAxisLabelChangableProps(t,r,u,s),t.rotation;var d=t.optionHideOverlap;fixMinMaxLabelShow(r,u,d),d&&hideOverlap(filter(u,function(f){return f&&!f.label.ignore})),resetOverlapRecordToShared(t,a,r,u)}function endTextLayout(t,n,a,r){var o=remRadian(a-t),s,l,c=r[0]>r[1],u=n==="start"&&!c||n!=="start"&&c;return isRadianAroundZero(o-PI/2)?(l=u?"bottom":"top",s="center"):isRadianAroundZero(o-PI*1.5)?(l=u?"top":"bottom",s="center"):(l="middle",o<PI*1.5&&o>PI/2?s=u?"left":"right":s=u?"right":"left"),{rotation:o,textAlign:s,textVerticalAlign:l}}function fixMinMaxLabelShow(t,n,a){if(shouldShowAllLabels(t.axis))return;function r(c,u,d){var f=ensureLabelLayoutWithGeometry(n[u]),v=ensureLabelLayoutWithGeometry(n[d]);if(!(!f||!v)){if(c===!1||f.suggestIgnore){ignoreEl(f.label);return}if(v.suggestIgnore){ignoreEl(v.label);return}var _=.1;if(!a){var g=[0,0,0,0];f=newLabelLayoutWithGeometry({marginForce:g},f),v=newLabelLayoutWithGeometry({marginForce:g},v)}labelIntersect(f,v,null,{touchThreshold:_})&&ignoreEl(c?v.label:f.label)}}var o=t.get(["axisLabel","showMinLabel"]),s=t.get(["axisLabel","showMaxLabel"]),l=n.length;r(o,0,1),r(s,l-1,l-2)}function syncLabelIgnoreToMajorTicks(t,n,a){t.showMinorTicks||each$8(n,function(r){if(r&&r.label.ignore)for(var o=0;o<a.length;o++){var s=a[o],l=getTickInner(s),c=getLabelInner(r.label);if(l.tickValue!=null&&!l.onBand&&l.tickValue===c.tickValue){ignoreEl(s);return}}})}function ignoreEl(t){t&&(t.ignore=!0)}function createTicks(t,n,a,r,o){for(var s=[],l=[],c=[],u=0;u<t.length;u++){var d=t[u].coord;l[0]=d,l[1]=0,c[0]=d,c[1]=a,n&&(applyTransform$1(l,l,n),applyTransform$1(c,c,n));var f=new Line({shape:{x1:l[0],y1:l[1],x2:c[0],y2:c[1]},style:r,z2:2,autoBatch:!0,silent:!0});subPixelOptimizeLine(f.shape,f.style.lineWidth),f.anid=o+"_"+t[u].tickValue,s.push(f);var v=getTickInner(f);v.onBand=!!t[u].onBand,v.tickValue=t[u].tickValue}return s}function buildAxisMajorTicks(t,n,a,r){var o=r.axis,s=r.getModel("axisTick"),l=s.get("show");if(l==="auto"&&(l=!0,t.raw.axisTickAutoShow!=null&&(l=!!t.raw.axisTickAutoShow)),!l||o.scale.isBlank())return[];for(var c=s.getModel("lineStyle"),u=t.tickDirection*s.get("length"),d=o.getTicksCoords(),f=createTicks(d,a.transform,u,defaults(c.getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])}),"ticks"),v=0;v<f.length;v++)n.add(f[v]);return f}function buildAxisMinorTicks(t,n,a,r,o){var s=r.axis,l=r.getModel("minorTick");if(!(!t.showMinorTicks||s.scale.isBlank())){var c=s.getMinorTicksCoords();if(c.length)for(var u=l.getModel("lineStyle"),d=o*l.get("length"),f=defaults(u.getLineStyle(),defaults(r.getModel("axisTick").getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])})),v=0;v<c.length;v++)for(var _=createTicks(c[v],a.transform,d,f,"minorticks_"+v),g=0;g<_.length;g++)n.add(_[g])}}function dealLastTickLabelResultReusable(t,n,a){if(axisLabelBuildResultExists(t)){var r=t.axisLabelsCreationContext,o=r.out.noPxChangeTryDetermine;if(a.noPxChange){for(var s=!0,l=0;l<o.length;l++)s=s&&o[l]();if(s)return!1}o.length&&(n.remove(t.labelGroup),axisLabelBuildResultSet(t,null,null,null))}return!0}function buildAxisLabel(t,n,a,r,o,s){var l=o.axis,c=retrieve(t.raw.axisLabelShow,o.get(["axisLabel","show"])),u=new Group;a.add(u);var d=createAxisLabelsComputingContext(r);if(!c||l.scale.isBlank()){axisLabelBuildResultSet(n,[],u,d);return}var f=o.getModel("axisLabel"),v=l.getViewLabels(d),_=(retrieve(t.raw.labelRotate,f.get("rotate"))||0)*PI/180,g=AxisBuilder.innerTextLayout(t.rotation,_,t.labelDirection),y=o.getCategories&&o.getCategories(!0),b=[],T=o.get("triggerEvent"),S=1/0,C=-1/0;each$8(v,function(x,A){var N,M=l.scale.type==="ordinal"?l.scale.getRawOrdinalNumber(x.tickValue):x.tickValue,R=x.formattedLabel,D=x.rawLabel,L=f;if(y&&y[M]){var I=y[M];isObject$3(I)&&I.textStyle&&(L=new Model(I.textStyle,f,o.ecModel))}var $=L.getTextColor()||o.get(["axisLine","lineStyle","color"]),V=L.getShallow("align",!0)||g.textAlign,H=retrieve2(L.getShallow("alignMinLabel",!0),V),X=retrieve2(L.getShallow("alignMaxLabel",!0),V),q=L.getShallow("verticalAlign",!0)||L.getShallow("baseline",!0)||g.textVerticalAlign,z=retrieve2(L.getShallow("verticalAlignMinLabel",!0),q),G=retrieve2(L.getShallow("verticalAlignMaxLabel",!0),q),oe=10+(((N=x.time)===null||N===void 0?void 0:N.level)||0);S=Math.min(S,oe),C=Math.max(C,oe);var ne=new ZRText({x:0,y:0,rotation:0,silent:AxisBuilder.isLabelSilent(o),z2:oe,style:createTextStyle(L,{text:R,align:A===0?H:A===v.length-1?X:V,verticalAlign:A===0?z:A===v.length-1?G:q,fill:isFunction($)?$(l.type==="category"?D:l.type==="value"?M+"":M,A):$})});ne.anid="label_"+M;var ue=getLabelInner(ne);if(ue.break=x.break,ue.tickValue=M,ue.layoutRotation=g.rotation,setTooltipConfig({el:ne,componentModel:o,itemName:R,formatterParamsExtra:{isTruncated:function(){return ne.isTruncated},value:D,tickIndex:A}}),T){var se=AxisBuilder.makeAxisEventDataBase(o);se.targetType="axisLabel",se.value=D,se.tickIndex=A,x.break&&(se.break={start:x.break.parsedBreak.vmin,end:x.break.parsedBreak.vmax}),l.type==="category"&&(se.dataIndex=M),getECData(ne).eventData=se,x.break&&addBreakEventHandler(o,s,ne,x.break)}b.push(ne),u.add(ne)});var E=map$1(b,function(x){return{label:x,priority:getLabelInner(x).break?x.z2+(C-S+1):x.z2,defaultAttr:{ignore:x.ignore}}});axisLabelBuildResultSet(n,E,u,d)}function axisLabelBuildResultExists(t){return!!t.labelLayoutList}function axisLabelBuildResultSet(t,n,a,r){t.labelLayoutList=n,t.labelGroup=a,t.axisLabelsCreationContext=r}function updateAxisLabelChangableProps(t,n,a,r){var o=n.get(["axisLabel","margin"]);each$8(a,function(s,l){var c=ensureLabelLayoutWithGeometry(s);if(c){var u=c.label,d=getLabelInner(u);c.suggestIgnore=u.ignore,u.ignore=!1,copyTransform(_tmpLayoutEl,_tmpLayoutElReset),_tmpLayoutEl.x=n.axis.dataToCoord(d.tickValue),_tmpLayoutEl.y=t.labelOffset+t.labelDirection*o,_tmpLayoutEl.rotation=d.layoutRotation,r.add(_tmpLayoutEl),_tmpLayoutEl.updateTransform(),r.remove(_tmpLayoutEl),_tmpLayoutEl.decomposeTransform(),copyTransform(u,_tmpLayoutEl),u.markRedraw(),setLabelLayoutDirty(c,!0),ensureLabelLayoutWithGeometry(c)}})}var _tmpLayoutEl=new Rect,_tmpLayoutElReset=new Rect;function hasAxisName(t){return!!t}function addBreakEventHandler(t,n,a,r){a.on("click",function(o){var s={type:AXIS_BREAK_EXPAND_ACTION_TYPE,breaks:[{start:r.parsedBreak.breakOption.start,end:r.parsedBreak.breakOption.end}]};s[t.axis.dim+"AxisIndex"]=t.componentIndex,n.dispatchAction(s)})}function adjustBreakLabels(t,n,a){}function layout(t,n,a){a=a||{};var r=n.axis,o={},s=r.getAxesOnZeroOf()[0],l=r.position,c=s?"onZero":l,u=r.dim,d=[t.x,t.x+t.width,t.y,t.y+t.height],f={left:0,right:1,top:0,bottom:1,onZero:2},v=n.get("offset")||0,_=u==="x"?[d[2]-v,d[3]+v]:[d[0]-v,d[1]+v];if(s){var g=s.toGlobalCoord(s.dataToCoord(0));_[f.onZero]=Math.max(Math.min(g,_[1]),_[0])}o.position=[u==="y"?_[f[c]]:d[0],u==="x"?_[f[c]]:d[3]],o.rotation=Math.PI/2*(u==="x"?0:1);var y={top:-1,bottom:1,left:-1,right:1};o.labelDirection=o.tickDirection=o.nameDirection=y[l],o.labelOffset=s?_[f[l]]-_[f.onZero]:0,n.get(["axisTick","inside"])&&(o.tickDirection=-o.tickDirection),retrieve(a.labelInside,n.get(["axisLabel","inside"]))&&(o.labelDirection=-o.labelDirection);var b=n.get(["axisLabel","rotate"]);return o.labelRotate=c==="top"?-b:b,o.z2=1,o}function isCartesian2DInjectedAsDataCoordSys(t){return t.coordinateSystem&&t.coordinateSystem.type==="cartesian2d"}function findAxisModels(t){var n={xAxisModel:null,yAxisModel:null};return each$8(n,function(a,r){var o=r.replace(/Model$/,""),s=t.getReferringComponents(o,SINGLE_REFERRING).models[0];n[r]=s}),n}function createCartesianAxisViewCommonPartBuilder(t,n,a,r,o,s){for(var l=layout(t,a),c=!1,u=!1,d=0;d<n.length;d++)isIntervalOrLogScale(n[d].getOtherAxis(a.axis).scale)&&(c=u=!0,a.axis.type==="category"&&a.axis.onBand&&(u=!1));return l.axisLineAutoShow=c,l.axisTickAutoShow=u,l.defaultNameMoveOverlap=s,new AxisBuilder(a,r,l,o)}function updateCartesianAxisViewCommonPartBuilder(t,n,a){var r=layout(n,a);t.updateCfg(r)}function alignScaleTicks(t,n,a){var r=IntervalScale.prototype,o=r.getTicks.call(a),s=r.getTicks.call(a,{expandToNicedExtent:!0}),l=o.length-1,c=r.getInterval.call(a),u=getScaleExtent(t,n),d=u.extent,f=u.fixMin,v=u.fixMax;t.type==="log"&&(d=logTransform(t.base,d,!0)),t.setBreaksFromOption(retrieveAxisBreaksOption(n)),t.setExtent(d[0],d[1]),t.calcNiceExtent({splitNumber:l,fixMin:f,fixMax:v});var _=r.getExtent.call(t);f&&(d[0]=_[0]),v&&(d[1]=_[1]);var g=r.getInterval.call(t),y=d[0],b=d[1];if(f&&v)g=(b-y)/l;else if(f)for(b=d[0]+g*l;b<d[1]&&isFinite(b)&&isFinite(d[1]);)g=increaseInterval(g),b=d[0]+g*l;else if(v)for(y=d[1]-g*l;y>d[0]&&isFinite(y)&&isFinite(d[0]);)g=increaseInterval(g),y=d[1]-g*l;else{var T=t.getTicks().length-1;T>l&&(g=increaseInterval(g));var S=g*l;b=Math.ceil(d[1]/g)*g,y=round$1(b-S),y<0&&d[0]>=0?(y=0,b=round$1(S)):b>0&&d[1]<=0&&(b=0,y=-round$1(S))}var C=(o[0].value-s[0].value)/c,E=(o[l].value-s[l].value)/c;r.setExtent.call(t,y+g*C,b+g*E),r.setInterval.call(t,g),(C||E)&&r.setNiceExtent.call(t,y+g,b-g)}var XY_TO_MARGIN_IDX=[[3,1],[0,2]],Grid=function(){function t(n,a,r){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=cartesian2DDimensions,this._initCartesian(n,a,r),this.model=n}return t.prototype.getRect=function(){return this._rect},t.prototype.update=function(n,a){var r=this._axesMap;this._updateScale(n,this.model);function o(l){var c,u=keys(l),d=u.length;if(d){for(var f=[],v=d-1;v>=0;v--){var _=+u[v],g=l[_],y=g.model,b=g.scale;isIntervalOrLogScale(b)&&y.get("alignTicks")&&y.get("interval")==null?f.push(g):(niceScaleExtent(b,y),isIntervalOrLogScale(b)&&(c=g))}f.length&&(c||(c=f.pop(),niceScaleExtent(c.scale,c.model)),each$8(f,function(T){alignScaleTicks(T.scale,T.model,c.scale)}))}}o(r.x),o(r.y);var s={};each$8(r.x,function(l){fixAxisOnZero(r,"y",l,s)}),each$8(r.y,function(l){fixAxisOnZero(r,"x",l,s)}),this.resize(this.model,a)},t.prototype.resize=function(n,a,r){var o=createBoxLayoutReference(n,a),s=this._rect=getLayoutRect(n.getBoxLayoutParams(),o.refContainer),l=this._axesMap,c=this._coordsList,u=n.get("containLabel");if(updateAllAxisExtentTransByGridRect(l,s),!r){var d=createAxisBiulders(s,c,l,u,a),f=void 0;if(u)f=layOutGridByOuterBounds(s.clone(),"axisLabel",null,s,l,d,o);else{var v=prepareOuterBounds(n,s,o),_=v.outerBoundsRect,g=v.parsedOuterBoundsContain,y=v.outerBoundsClamp;_&&(f=layOutGridByOuterBounds(_,g,y,s,l,d,o))}createOrUpdateAxesView(s,l,AxisTickLabelComputingKind.determine,null,f,o)}each$8(this._coordsList,function(b){b.calcAffineTransform()})},t.prototype.getAxis=function(n,a){var r=this._axesMap[n];if(r!=null)return r[a||0]},t.prototype.getAxes=function(){return this._axesList.slice()},t.prototype.getCartesian=function(n,a){if(n!=null&&a!=null){var r="x"+n+"y"+a;return this._coordsMap[r]}isObject$3(n)&&(a=n.yAxisIndex,n=n.xAxisIndex);for(var o=0,s=this._coordsList;o<s.length;o++)if(s[o].getAxis("x").index===n||s[o].getAxis("y").index===a)return s[o]},t.prototype.getCartesians=function(){return this._coordsList.slice()},t.prototype.convertToPixel=function(n,a,r){var o=this._findConvertTarget(a);return o.cartesian?o.cartesian.dataToPoint(r):o.axis?o.axis.toGlobalCoord(o.axis.dataToCoord(r)):null},t.prototype.convertFromPixel=function(n,a,r){var o=this._findConvertTarget(a);return o.cartesian?o.cartesian.pointToData(r):o.axis?o.axis.coordToData(o.axis.toLocalCoord(r)):null},t.prototype._findConvertTarget=function(n){var a=n.seriesModel,r=n.xAxisModel||a&&a.getReferringComponents("xAxis",SINGLE_REFERRING).models[0],o=n.yAxisModel||a&&a.getReferringComponents("yAxis",SINGLE_REFERRING).models[0],s=n.gridModel,l=this._coordsList,c,u;if(a)c=a.coordinateSystem,indexOf(l,c)<0&&(c=null);else if(r&&o)c=this.getCartesian(r.componentIndex,o.componentIndex);else if(r)u=this.getAxis("x",r.componentIndex);else if(o)u=this.getAxis("y",o.componentIndex);else if(s){var d=s.coordinateSystem;d===this&&(c=this._coordsList[0])}return{cartesian:c,axis:u}},t.prototype.containPoint=function(n){var a=this._coordsList[0];if(a)return a.containPoint(n)},t.prototype._initCartesian=function(n,a,r){var o=this,s=this,l={left:!1,right:!1,top:!1,bottom:!1},c={x:{},y:{}},u={x:0,y:0};if(a.eachComponent("xAxis",d("x"),this),a.eachComponent("yAxis",d("y"),this),!u.x||!u.y){this._axesMap={},this._axesList=[];return}this._axesMap=c,each$8(c.x,function(f,v){each$8(c.y,function(_,g){var y="x"+v+"y"+g,b=new Cartesian2D(y);b.master=o,b.model=n,o._coordsMap[y]=b,o._coordsList.push(b),b.addAxis(f),b.addAxis(_)})});function d(f){return function(v,_){if(isAxisUsedInTheGrid(v,n)){var g=v.get("position");f==="x"?g!=="top"&&g!=="bottom"&&(g=l.bottom?"top":"bottom"):g!=="left"&&g!=="right"&&(g=l.left?"right":"left"),l[g]=!0;var y=new Axis2D(f,createScaleByModel(v),[0,0],v.get("type"),g),b=y.type==="category";y.onBand=b&&v.get("boundaryGap"),y.inverse=v.get("inverse"),v.axis=y,y.model=v,y.grid=s,y.index=_,s._axesList.push(y),c[f][_]=y,u[f]++}}}},t.prototype._updateScale=function(n,a){each$8(this._axesList,function(o){if(o.scale.setExtent(1/0,-1/0),o.type==="category"){var s=o.model.get("categorySortInfo");o.scale.setSortInfo(s)}}),n.eachSeries(function(o){if(isCartesian2DInjectedAsDataCoordSys(o)){var s=findAxisModels(o),l=s.xAxisModel,c=s.yAxisModel;if(!isAxisUsedInTheGrid(l,a)||!isAxisUsedInTheGrid(c,a))return;var u=this.getCartesian(l.componentIndex,c.componentIndex),d=o.getData(),f=u.getAxis("x"),v=u.getAxis("y");r(d,f),r(d,v)}},this);function r(o,s){each$8(getDataDimensionsOnAxis(o,s.dim),function(l){s.scale.unionExtentFromData(o,l)})}},t.prototype.getTooltipAxes=function(n){var a=[],r=[];return each$8(this.getCartesians(),function(o){var s=n!=null&&n!=="auto"?o.getAxis(n):o.getBaseAxis(),l=o.getOtherAxis(s);indexOf(a,s)<0&&a.push(s),indexOf(r,l)<0&&r.push(l)}),{baseAxes:a,otherAxes:r}},t.create=function(n,a){var r=[];return n.eachComponent("grid",function(o,s){var l=new t(o,n,a);l.name="grid_"+s,l.resize(o,a,!0),o.coordinateSystem=l,r.push(l)}),n.eachSeries(function(o){injectCoordSysByOption({targetModel:o,coordSysType:"cartesian2d",coordSysProvider:s});function s(){var l=findAxisModels(o),c=l.xAxisModel,u=l.yAxisModel,d=c.getCoordSysModel(),f=d.coordinateSystem;return f.getCartesian(c.componentIndex,u.componentIndex)}}),r},t.dimensions=cartesian2DDimensions,t}();function isAxisUsedInTheGrid(t,n){return t.getCoordSysModel()===n}function fixAxisOnZero(t,n,a,r){a.getAxesOnZeroOf=function(){return s?[s]:[]};var o=t[n],s,l=a.model,c=l.get(["axisLine","onZero"]),u=l.get(["axisLine","onZeroAxisIndex"]);if(!c)return;if(u!=null)canOnZeroToAxis(o[u])&&(s=o[u]);else for(var d in o)if(o.hasOwnProperty(d)&&canOnZeroToAxis(o[d])&&!r[f(o[d])]){s=o[d];break}s&&(r[f(s)]=!0);function f(v){return v.dim+"_"+v.index}}function canOnZeroToAxis(t){return t&&t.type!=="category"&&t.type!=="time"&&ifAxisCrossZero(t)}function updateAxisTransform(t,n){var a=t.getExtent(),r=a[0]+a[1];t.toGlobalCoord=t.dim==="x"?function(o){return o+n}:function(o){return r-o+n},t.toLocalCoord=t.dim==="x"?function(o){return o-n}:function(o){return r-o+n}}function updateAllAxisExtentTransByGridRect(t,n){each$8(t.x,function(a){return updateAxisExtentTransByGridRect(a,n.x,n.width)}),each$8(t.y,function(a){return updateAxisExtentTransByGridRect(a,n.y,n.height)})}function updateAxisExtentTransByGridRect(t,n,a){var r=[0,a],o=t.inverse?1:0;t.setExtent(r[o],r[1-o]),updateAxisTransform(t,n)}function layOutGridByOuterBounds(t,n,a,r,o,s,l){createOrUpdateAxesView(r,o,AxisTickLabelComputingKind.estimate,n,!1,l);var c=[0,0,0,0];d(0),d(1),f(r,0,NaN),f(r,1,NaN);var u=find(c,function(_){return _>0})==null;return expandOrShrinkRect(r,c,!0,!0,a),updateAllAxisExtentTransByGridRect(o,r),u;function d(_){each$8(o[XY[_]],function(g){if(shouldAxisShow(g.model)){var y=s.ensureRecord(g.model),b=y.labelInfoList;if(b)for(var T=0;T<b.length;T++){var S=b[T],C=g.scale.normalize(getLabelInner(S.label).tickValue);C=_===1?1-C:C,f(S.rect,_,C),f(S.rect,1-_,NaN)}var E=y.nameLayout;if(E){var C=isNameLocationCenter(y.nameLocation)?.5:NaN;f(E.rect,_,C),f(E.rect,1-_,NaN)}}})}function f(_,g,y){var b=t[XY[g]]-_[XY[g]],T=_[WH[g]]+_[XY[g]]-(t[WH[g]]+t[XY[g]]);b=v(b,1-y),T=v(T,y);var S=XY_TO_MARGIN_IDX[g][0],C=XY_TO_MARGIN_IDX[g][1];c[S]=mathMax$5(c[S],b),c[C]=mathMax$5(c[C],T)}function v(_,g){return _>0&&!eqNaN(g)&&g>1e-4&&(_/=g),_}}function createAxisBiulders(t,n,a,r,o){var s=new AxisBuilderSharedContext(resolveAxisNameOverlapForGrid);return each$8(a,function(l){return each$8(l,function(c){if(shouldAxisShow(c.model)){var u=!r;c.axisBuilder=createCartesianAxisViewCommonPartBuilder(t,n,c.model,o,s,u)}})}),s}function createOrUpdateAxesView(t,n,a,r,o,s){var l=a===AxisTickLabelComputingKind.determine;each$8(n,function(d){return each$8(d,function(f){shouldAxisShow(f.model)&&(updateCartesianAxisViewCommonPartBuilder(f.axisBuilder,t,f.model),f.axisBuilder.build(l?{axisTickLabelDetermine:!0}:{axisTickLabelEstimate:!0},{noPxChange:o}))})});var c={x:0,y:0};u(0),u(1);function u(d){c[XY[1-d]]=t[WH[d]]<=s.refContainer[WH[d]]*.5?0:1-d===1?2:1}each$8(n,function(d,f){return each$8(d,function(v){shouldAxisShow(v.model)&&((r==="all"||l)&&v.axisBuilder.build({axisName:!0},{nameMarginLevel:c[f]}),l&&v.axisBuilder.build({axisLine:!0}))})})}function prepareOuterBounds(t,n,a){var r,o=t.get("outerBoundsMode",!0);o==="same"?r=n.clone():(o==null||o==="auto")&&(r=getLayoutRect(t.get("outerBounds",!0)||OUTER_BOUNDS_DEFAULT,a.refContainer));var s=t.get("outerBoundsContain",!0),l;s==null||s==="auto"||indexOf(["all","axisLabel"],s)<0?l="all":l=s;var c=[parsePositionSizeOption(retrieve2(t.get("outerBoundsClampWidth",!0),OUTER_BOUNDS_CLAMP_DEFAULT[0]),n.width),parsePositionSizeOption(retrieve2(t.get("outerBoundsClampHeight",!0),OUTER_BOUNDS_CLAMP_DEFAULT[1]),n.height)];return{outerBoundsRect:r,parsedOuterBoundsContain:l,outerBoundsClamp:c}}var resolveAxisNameOverlapForGrid=function(t,n,a,r,o,s){var l=a.axis.dim==="x"?"y":"x";resolveAxisNameOverlapDefault(t,n,a,r,o,s),isNameLocationCenter(t.nameLocation)||each$8(n.recordMap[l],function(c){c&&c.labelInfoList&&c.dirVec&&moveIfOverlapByLinearLabels(c.labelInfoList,c.dirVec,r,o)})};function collect(t,n){var a={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return collectAxesInfo(a,t,n),a.seriesInvolved&&collectSeriesInfo(a,t),a}function collectAxesInfo(t,n,a){var r=n.getComponent("tooltip"),o=n.getComponent("axisPointer"),s=o.get("link",!0)||[],l=[];each$8(a.getCoordinateSystems(),function(c){if(!c.axisPointerEnabled)return;var u=makeKey(c.model),d=t.coordSysAxesInfo[u]={};t.coordSysMap[u]=c;var f=c.model,v=f.getModel("tooltip",r);if(each$8(c.getAxes(),curry(b,!1,null)),c.getTooltipAxes&&r&&v.get("show")){var _=v.get("trigger")==="axis",g=v.get(["axisPointer","type"])==="cross",y=c.getTooltipAxes(v.get(["axisPointer","axis"]));(_||g)&&each$8(y.baseAxes,curry(b,g?"cross":!0,_)),g&&each$8(y.otherAxes,curry(b,"cross",!1))}function b(T,S,C){var E=C.model.getModel("axisPointer",o),x=E.get("show");if(!(!x||x==="auto"&&!T&&!isHandleTrigger(E))){S==null&&(S=E.get("triggerTooltip")),E=T?makeAxisPointerModel(C,v,o,n,T,S):E;var A=E.get("snap"),N=E.get("triggerEmphasis"),M=makeKey(C.model),R=S||A||C.type==="category",D=t.axesInfo[M]={key:M,axis:C,coordSys:c,axisPointerModel:E,triggerTooltip:S,triggerEmphasis:N,involveSeries:R,snap:A,useHandle:isHandleTrigger(E),seriesModels:[],linkGroup:null};d[M]=D,t.seriesInvolved=t.seriesInvolved||R;var L=getLinkGroupIndex(s,C);if(L!=null){var I=l[L]||(l[L]={axesInfo:{}});I.axesInfo[M]=D,I.mapper=s[L].mapper,D.linkGroup=I}}}})}function makeAxisPointerModel(t,n,a,r,o,s){var l=n.getModel("axisPointer"),c=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],u={};each$8(c,function(_){u[_]=clone$3(l.get(_))}),u.snap=t.type!=="category"&&!!s,l.get("type")==="cross"&&(u.type="line");var d=u.label||(u.label={});if(d.show==null&&(d.show=!1),o==="cross"){var f=l.get(["label","show"]);if(d.show=f??!0,!s){var v=u.lineStyle=l.get("crossStyle");v&&defaults(d,v.textStyle)}}return t.model.getModel("axisPointer",new Model(u,a,r))}function collectSeriesInfo(t,n){n.eachSeries(function(a){var r=a.coordinateSystem,o=a.get(["tooltip","trigger"],!0),s=a.get(["tooltip","show"],!0);!r||!r.model||o==="none"||o===!1||o==="item"||s===!1||a.get(["axisPointer","show"],!0)===!1||each$8(t.coordSysAxesInfo[makeKey(r.model)],function(l){var c=l.axis;r.getAxis(c.dim)===c&&(l.seriesModels.push(a),l.seriesDataCount==null&&(l.seriesDataCount=0),l.seriesDataCount+=a.getData().count())})})}function getLinkGroupIndex(t,n){for(var a=n.model,r=n.dim,o=0;o<t.length;o++){var s=t[o]||{};if(checkPropInLink(s[r+"AxisId"],a.id)||checkPropInLink(s[r+"AxisIndex"],a.componentIndex)||checkPropInLink(s[r+"AxisName"],a.name))return o}}function checkPropInLink(t,n){return t==="all"||isArray$1(t)&&indexOf(t,n)>=0||t===n}function fixValue(t){var n=getAxisInfo(t);if(n){var a=n.axisPointerModel,r=n.axis.scale,o=a.option,s=a.get("status"),l=a.get("value");l!=null&&(l=r.parse(l));var c=isHandleTrigger(a);s==null&&(o.status=c?"show":"hide");var u=r.getExtent().slice();u[0]>u[1]&&u.reverse(),(l==null||l>u[1])&&(l=u[1]),l<u[0]&&(l=u[0]),o.value=l,c&&(o.status=n.axis.scale.isBlank()?"hide":"show")}}function getAxisInfo(t){var n=(t.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return n&&n.axesInfo[makeKey(t)]}function getAxisPointerModel(t){var n=getAxisInfo(t);return n&&n.axisPointerModel}function isHandleTrigger(t){return!!t.get(["handle","show"])}function makeKey(t){return t.type+"||"+t.id}var axisPointerClazz={},AxisView=function(t){__extends$1(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,r,o,s){this.axisPointerClass&&fixValue(a),t.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(a,o,!0)},n.prototype.updateAxisPointer=function(a,r,o,s){this._doUpdateAxisPointerClass(a,o,!1)},n.prototype.remove=function(a,r){var o=this._axisPointer;o&&o.remove(r)},n.prototype.dispose=function(a,r){this._disposeAxisPointer(r),t.prototype.dispose.apply(this,arguments)},n.prototype._doUpdateAxisPointerClass=function(a,r,o){var s=n.getAxisPointerClass(this.axisPointerClass);if(s){var l=getAxisPointerModel(a);l?(this._axisPointer||(this._axisPointer=new s)).render(a,l,r,o):this._disposeAxisPointer(r)}},n.prototype._disposeAxisPointer=function(a){this._axisPointer&&this._axisPointer.dispose(a),this._axisPointer=null},n.registerAxisPointerClass=function(a,r){axisPointerClazz[a]=r},n.getAxisPointerClass=function(a){return a&&axisPointerClazz[a]},n.type="axis",n}(ComponentView),inner$4=makeInner();function rectCoordAxisBuildSplitArea(t,n,a,r){var o=a.axis;if(!o.scale.isBlank()){var s=a.getModel("splitArea"),l=s.getModel("areaStyle"),c=l.get("color"),u=r.coordinateSystem.getRect(),d=o.getTicksCoords({tickModel:s,clamp:!0,breakTicks:"none",pruneByBreak:"preserve_extent_bound"});if(d.length){var f=c.length,v=inner$4(t).splitAreaColors,_=createHashMap(),g=0;if(v)for(var y=0;y<d.length;y++){var b=v.get(d[y].tickValue);if(b!=null){g=(b+(f-1)*y)%f;break}}var T=o.toGlobalCoord(d[0].coord),S=l.getAreaStyle();c=isArray$1(c)?c:[c];for(var y=1;y<d.length;y++){var C=o.toGlobalCoord(d[y].coord),E=void 0,x=void 0,A=void 0,N=void 0;o.isHorizontal()?(E=T,x=u.y,A=C-E,N=u.height,T=E+A):(E=u.x,x=T,A=u.width,N=C-x,T=x+N);var M=d[y-1].tickValue;M!=null&&_.set(M,g),n.add(new Rect({anid:M!=null?"area_"+M:null,shape:{x:E,y:x,width:A,height:N},style:defaults({fill:c[g]},S),autoBatch:!0,silent:!0})),g=(g+1)%f}inner$4(t).splitAreaColors=_}}}function rectCoordAxisHandleRemove(t){inner$4(t).splitAreaColors=null}var selfBuilderAttrs=["splitArea","splitLine","minorSplitLine","breakArea"],CartesianAxisView=function(t){__extends$1(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.axisPointerClass="CartesianAxisPointer",a}return n.prototype.render=function(a,r,o,s){this.group.removeAll();var l=this._axisGroup;if(this._axisGroup=new Group,this.group.add(this._axisGroup),!!shouldAxisShow(a)){this._axisGroup.add(a.axis.axisBuilder.group),each$8(selfBuilderAttrs,function(u){a.get([u,"show"])&&axisElementBuilders[u](this,this._axisGroup,a,a.getCoordSysModel(),o)},this);var c=s&&s.type==="changeAxisOrder"&&s.isInitSort;c||groupTransition(l,this._axisGroup,a),t.prototype.render.call(this,a,r,o,s)}},n.prototype.remove=function(){rectCoordAxisHandleRemove(this)},n.type="cartesianAxis",n}(AxisView),axisElementBuilders={splitLine:function(t,n,a,r,o){var s=a.axis;if(!s.scale.isBlank()){var l=a.getModel("splitLine"),c=l.getModel("lineStyle"),u=c.get("color"),d=l.get("showMinLine")!==!1,f=l.get("showMaxLine")!==!1;u=isArray$1(u)?u:[u];for(var v=r.coordinateSystem.getRect(),_=s.isHorizontal(),g=0,y=s.getTicksCoords({tickModel:l,breakTicks:"none",pruneByBreak:"preserve_extent_bound"}),b=[],T=[],S=c.getLineStyle(),C=0;C<y.length;C++){var E=s.toGlobalCoord(y[C].coord);if(!(C===0&&!d||C===y.length-1&&!f)){var x=y[C].tickValue;_?(b[0]=E,b[1]=v.y,T[0]=E,T[1]=v.y+v.height):(b[0]=v.x,b[1]=E,T[0]=v.x+v.width,T[1]=E);var A=g++%u.length,N=new Line({anid:x!=null?"line_"+x:null,autoBatch:!0,shape:{x1:b[0],y1:b[1],x2:T[0],y2:T[1]},style:defaults({stroke:u[A]},S),silent:!0});subPixelOptimizeLine(N.shape,S.lineWidth),n.add(N)}}}},minorSplitLine:function(t,n,a,r,o){var s=a.axis,l=a.getModel("minorSplitLine"),c=l.getModel("lineStyle"),u=r.coordinateSystem.getRect(),d=s.isHorizontal(),f=s.getMinorTicksCoords();if(f.length)for(var v=[],_=[],g=c.getLineStyle(),y=0;y<f.length;y++)for(var b=0;b<f[y].length;b++){var T=s.toGlobalCoord(f[y][b].coord);d?(v[0]=T,v[1]=u.y,_[0]=T,_[1]=u.y+u.height):(v[0]=u.x,v[1]=T,_[0]=u.x+u.width,_[1]=T);var S=new Line({anid:"minor_line_"+f[y][b].tickValue,autoBatch:!0,shape:{x1:v[0],y1:v[1],x2:_[0],y2:_[1]},style:g,silent:!0});subPixelOptimizeLine(S.shape,g.lineWidth),n.add(S)}},splitArea:function(t,n,a,r,o){rectCoordAxisBuildSplitArea(t,n,a,r)},breakArea:function(t,n,a,r,o){a.axis.scale}},CartesianXAxisView=function(t){__extends$1(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="xAxis",n}(CartesianAxisView),CartesianYAxisView=function(t){__extends$1(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=CartesianXAxisView.type,a}return n.type="yAxis",n}(CartesianAxisView),GridView=function(t){__extends$1(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type="grid",a}return n.prototype.render=function(a,r){this.group.removeAll(),a.get("show")&&this.group.add(new Rect({shape:a.coordinateSystem.getRect(),style:defaults({fill:a.get("backgroundColor")},a.getItemStyle()),silent:!0,z2:-1}))},n.type="grid",n}(ComponentView),extraOption={offset:0};function install$d(t){t.registerComponentView(GridView),t.registerComponentModel(GridModel),t.registerCoordinateSystem("cartesian2d",Grid),axisModelCreator(t,"x",CartesianAxisModel,extraOption),axisModelCreator(t,"y",CartesianAxisModel,extraOption),t.registerComponentView(CartesianXAxisView),t.registerComponentView(CartesianYAxisView),t.registerPreprocessor(function(n){n.xAxis&&n.yAxis&&!n.grid&&(n.grid={})})}function install$c(t){use(install$d),t.registerSeriesModel(ScatterSeriesModel),t.registerChartView(ScatterView),t.registerLayout(pointsLayout("scatter"))}function radarLayout(t){t.eachSeriesByType("radar",function(n){var a=n.getData(),r=[],o=n.coordinateSystem;if(o){var s=o.getIndicatorAxes();each$8(s,function(l,c){a.each(a.mapDimension(s[c].dim),function(u,d){r[d]=r[d]||[];var f=o.dataToPoint(u,c);r[d][c]=isValidPoint(f)?f:getValueMissingPoint(o)})}),a.each(function(l){var c=find(r[l],function(u){return isValidPoint(u)})||getValueMissingPoint(o);r[l].push(c.slice()),a.setItemLayout(l,r[l])})}})}function isValidPoint(t){return!isNaN(t[0])&&!isNaN(t[1])}function getValueMissingPoint(t){return[t.cx,t.cy]}function radarBackwardCompat(t){var n=t.polar;if(n){isArray$1(n)||(n=[n]);var a=[];each$8(n,function(r,o){r.indicator?(r.type&&!r.shape&&(r.shape=r.type),t.radar=t.radar||[],isArray$1(t.radar)||(t.radar=[t.radar]),t.radar.push(r)):a.push(r)}),t.polar=a}each$8(t.series,function(r){r&&r.type==="radar"&&r.polarIndex&&(r.radarIndex=r.polarIndex)})}var RadarView$1=function(t){__extends$1(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,r,o){var s=a.coordinateSystem,l=this.group,c=a.getData(),u=this._data;function d(_,g){var y=_.getItemVisual(g,"symbol")||"circle";if(y!=="none"){var b=normalizeSymbolSize(_.getItemVisual(g,"symbolSize")),T=createSymbol$1(y,-1,-1,2,2),S=_.getItemVisual(g,"symbolRotate")||0;return T.attr({style:{strokeNoScale:!0},z2:100,scaleX:b[0]/2,scaleY:b[1]/2,rotation:S*Math.PI/180||0}),T}}function f(_,g,y,b,T,S){y.removeAll();for(var C=0;C<g.length-1;C++){var E=d(b,T);E&&(E.__dimIdx=C,_[C]?(E.setPosition(_[C]),graphic[S?"initProps":"updateProps"](E,{x:g[C][0],y:g[C][1]},a,T)):E.setPosition(g[C]),y.add(E))}}function v(_){return map$1(_,function(g){return[s.cx,s.cy]})}c.diff(u).add(function(_){var g=c.getItemLayout(_);if(g){var y=new Polygon,b=new Polyline,T={shape:{points:g}};y.shape.points=v(g),b.shape.points=v(g),initProps(y,T,a,_),initProps(b,T,a,_);var S=new Group,C=new Group;S.add(b),S.add(y),S.add(C),f(b.shape.points,g,C,c,_,!0),c.setItemGraphicEl(_,S)}}).update(function(_,g){var y=u.getItemGraphicEl(g),b=y.childAt(0),T=y.childAt(1),S=y.childAt(2),C={shape:{points:c.getItemLayout(_)}};C.shape.points&&(f(b.shape.points,C.shape.points,S,c,_,!1),saveOldStyle(T),saveOldStyle(b),updateProps$1(b,C,a),updateProps$1(T,C,a),c.setItemGraphicEl(_,y))}).remove(function(_){l.remove(u.getItemGraphicEl(_))}).execute(),c.eachItemGraphicEl(function(_,g){var y=c.getItemModel(g),b=_.childAt(0),T=_.childAt(1),S=_.childAt(2),C=c.getItemVisual(g,"style"),E=C.fill;l.add(_),b.useStyle(defaults(y.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:E})),setStatesStylesFromModel(b,y,"lineStyle"),setStatesStylesFromModel(T,y,"areaStyle");var x=y.getModel("areaStyle"),A=x.isEmpty()&&x.parentModel.isEmpty();T.ignore=A,each$8(["emphasis","select","blur"],function(M){var R=y.getModel([M,"areaStyle"]),D=R.isEmpty()&&R.parentModel.isEmpty();T.ensureState(M).ignore=D&&A;var L=y.getModel([M,"lineStyle"]).getLineStyle();b.ensureState(M).style=L;var I=R.getAreaStyle();T.ensureState(M).style=I;var $=y.getModel([M,"itemStyle"]).getItemStyle();S.eachChild(function(V){V.ensureState(M).style=clone$3($)})}),T.useStyle(defaults(y.getModel("areaStyle").getAreaStyle(),{fill:E,opacity:.7,decal:C.decal}));var N=y.getModel("emphasis");S.eachChild(function(M){if(M instanceof ZRImage){var R=M.style;M.useStyle(extend({image:R.image,x:R.x,y:R.y,width:R.width,height:R.height},C))}else M.useStyle(C),M.setColor(E),M.style.strokeNoScale=!0;var D=c.getStore().get(c.getDimensionIndex(M.__dimIdx),g);(D==null||isNaN(D))&&(D=""),setLabelStyle(M,getLabelStatesModels(y),{labelFetcher:c.hostModel,labelDataIndex:g,labelDimIndex:M.__dimIdx,defaultText:D,inheritColor:E,defaultOpacity:C.opacity})}),toggleHoverEmphasis(_,N.get("focus"),N.get("blurScope"),N.get("disabled"))}),this._data=c},n.prototype.remove=function(){this.group.removeAll(),this._data=null},n.type="radar",n}(ChartView),RadarSeriesModel=function(t){__extends$1(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.hasSymbolVisual=!0,a}return n.prototype.init=function(a){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this))},n.prototype.getInitialData=function(a,r){return createSeriesDataSimply(this,{generateCoord:"indicator_",generateCoordCount:1/0})},n.prototype.formatTooltip=function(a,r,o){var s=this.getData(),l=this.coordinateSystem,c=l.getIndicatorAxes(),u=this.getData().getName(a),d=u===""?this.name:u,f=retrieveVisualColorForTooltipMarker(this,a);return createTooltipMarkup("section",{header:d,sortBlocks:!0,blocks:map$1(c,function(v){var _=s.get(s.mapDimension(v.dim),a);return createTooltipMarkup("nameValue",{markerType:"subItem",markerColor:f,name:v.name,value:_,sortParam:_})})})},n.prototype.getTooltipPosition=function(a){if(a!=null){for(var r=this.getData(),o=this.coordinateSystem,s=r.getValues(map$1(o.dimensions,function(d){return r.mapDimension(d)}),a),l=0,c=s.length;l<c;l++)if(!isNaN(s[l])){var u=o.getIndicatorAxes();return o.coordToPoint(u[l].dataToCoord(s[l]),l)}}},n.type="series.radar",n.dependencies=["radar"],n.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},n}(SeriesModel),valueAxisDefault=axisDefault.value;function defaultsShow(t,n){return defaults({show:n},t)}var RadarModel=function(t){__extends$1(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.optionUpdated=function(){var a=this.get("boundaryGap"),r=this.get("splitNumber"),o=this.get("scale"),s=this.get("axisLine"),l=this.get("axisTick"),c=this.get("axisLabel"),u=this.get("axisName"),d=this.get(["axisName","show"]),f=this.get(["axisName","formatter"]),v=this.get("axisNameGap"),_=this.get("triggerEvent"),g=map$1(this.get("indicator")||[],function(y){y.max!=null&&y.max>0&&!y.min?y.min=0:y.min!=null&&y.min<0&&!y.max&&(y.max=0);var b=u;y.color!=null&&(b=defaults({color:y.color},u));var T=merge(clone$3(y),{boundaryGap:a,splitNumber:r,scale:o,axisLine:s,axisTick:l,axisLabel:c,name:y.text,showName:d,nameLocation:"end",nameGap:v,nameTextStyle:b,triggerEvent:_},!1);if(isString(f)){var S=T.name;T.name=f.replace("{value}",S??"")}else isFunction(f)&&(T.name=f(T.name,T));var C=new Model(T,null,this.ecModel);return mixin(C,AxisModelCommonMixin.prototype),C.mainType="radar",C.componentIndex=this.componentIndex,C},this);this._indicatorModels=g},n.prototype.getIndicatorModels=function(){return this._indicatorModels},n.type="radar",n.defaultOption={z:0,center:["50%","50%"],radius:"50%",startAngle:90,axisName:{show:!0,color:tokens.color.axisLabel},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:merge({lineStyle:{color:tokens.color.neutral20}},valueAxisDefault.axisLine),axisLabel:defaultsShow(valueAxisDefault.axisLabel,!1),axisTick:defaultsShow(valueAxisDefault.axisTick,!1),splitLine:defaultsShow(valueAxisDefault.splitLine,!0),splitArea:defaultsShow(valueAxisDefault.splitArea,!0),indicator:[]},n}(ComponentModel),RadarView=function(t){__extends$1(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,r,o){var s=this.group;s.removeAll(),this._buildAxes(a,o),this._buildSplitLineAndArea(a)},n.prototype._buildAxes=function(a,r){var o=a.coordinateSystem,s=o.getIndicatorAxes(),l=map$1(s,function(c){var u=c.model.get("showName")?c.name:"",d=new AxisBuilder(c.model,r,{axisName:u,position:[o.cx,o.cy],rotation:c.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return d});each$8(l,function(c){c.build(),this.group.add(c.group)},this)},n.prototype._buildSplitLineAndArea=function(a){var r=a.coordinateSystem,o=r.getIndicatorAxes();if(!o.length)return;var s=a.get("shape"),l=a.getModel("splitLine"),c=a.getModel("splitArea"),u=l.getModel("lineStyle"),d=c.getModel("areaStyle"),f=l.get("show"),v=c.get("show"),_=u.get("color"),g=d.get("color"),y=isArray$1(_)?_:[_],b=isArray$1(g)?g:[g],T=[],S=[];function C(X,q,z){var G=z%q.length;return X[G]=X[G]||[],G}if(s==="circle")for(var E=o[0].getTicksCoords(),x=r.cx,A=r.cy,N=0;N<E.length;N++){if(f){var M=C(T,y,N);T[M].push(new Circle({shape:{cx:x,cy:A,r:E[N].coord}}))}if(v&&N<E.length-1){var M=C(S,b,N);S[M].push(new Ring({shape:{cx:x,cy:A,r0:E[N].coord,r:E[N+1].coord}}))}}else for(var R,D=map$1(o,function(X,q){var z=X.getTicksCoords();return R=R==null?z.length-1:Math.min(z.length-1,R),map$1(z,function(G){return r.coordToPoint(G.coord,q)})}),L=[],N=0;N<=R;N++){for(var I=[],$=0;$<o.length;$++)I.push(D[$][N]);if(I[0]&&I.push(I[0].slice()),f){var M=C(T,y,N);T[M].push(new Polyline({shape:{points:I}}))}if(v&&L){var M=C(S,b,N-1);S[M].push(new Polygon({shape:{points:I.concat(L)}}))}L=I.slice().reverse()}var V=u.getLineStyle(),H=d.getAreaStyle();each$8(S,function(X,q){this.group.add(mergePath(X,{style:defaults({stroke:"none",fill:b[q%b.length]},H),silent:!0}))},this),each$8(T,function(X,q){this.group.add(mergePath(X,{style:defaults({fill:"none",stroke:y[q%y.length]},V),silent:!0}))},this)},n.type="radar",n}(ComponentView),IndicatorAxis=function(t){__extends$1(n,t);function n(a,r,o){var s=t.call(this,a,r,o)||this;return s.type="value",s.angle=0,s.name="",s}return n}(Axis),Radar=function(){function t(n,a,r){this.dimensions=[],this._model=n,this._indicatorAxes=map$1(n.getIndicatorModels(),function(o,s){var l="indicator_"+s,c=new IndicatorAxis(l,new IntervalScale);return c.name=o.get("name"),c.model=o,o.axis=c,this.dimensions.push(l),c},this),this.resize(n,r)}return t.prototype.getIndicatorAxes=function(){return this._indicatorAxes},t.prototype.dataToPoint=function(n,a){var r=this._indicatorAxes[a];return this.coordToPoint(r.dataToCoord(n),a)},t.prototype.coordToPoint=function(n,a){var r=this._indicatorAxes[a],o=r.angle,s=this.cx+n*Math.cos(o),l=this.cy-n*Math.sin(o);return[s,l]},t.prototype.pointToData=function(n){var a=n[0]-this.cx,r=n[1]-this.cy,o=Math.sqrt(a*a+r*r);a/=o,r/=o;for(var s=Math.atan2(-r,a),l=1/0,c,u=-1,d=0;d<this._indicatorAxes.length;d++){var f=this._indicatorAxes[d],v=Math.abs(s-f.angle);v<l&&(c=f,u=d,l=v)}return[u,+(c&&c.coordToData(o))]},t.prototype.resize=function(n,a){var r=createBoxLayoutReference(n,a).refContainer,o=n.get("center"),s=Math.min(r.width,r.height)/2;this.cx=parsePercent(o[0],r.width)+r.x,this.cy=parsePercent(o[1],r.height)+r.y,this.startAngle=n.get("startAngle")*Math.PI/180;var l=n.get("radius");(isString(l)||isNumber(l))&&(l=[0,l]),this.r0=parsePercent(l[0],s),this.r=parsePercent(l[1],s),each$8(this._indicatorAxes,function(c,u){c.setExtent(this.r0,this.r);var d=this.startAngle+u*Math.PI*2/this._indicatorAxes.length;d=Math.atan2(Math.sin(d),Math.cos(d)),c.angle=d},this)},t.prototype.update=function(n,a){var r=this._indicatorAxes,o=this._model;each$8(r,function(c){c.scale.setExtent(1/0,-1/0)}),n.eachSeriesByType("radar",function(c,u){if(!(c.get("coordinateSystem")!=="radar"||n.getComponent("radar",c.get("radarIndex"))!==o)){var d=c.getData();each$8(r,function(f){f.scale.unionExtentFromData(d,d.mapDimension(f.dim))})}},this);var s=o.get("splitNumber"),l=new IntervalScale;l.setExtent(0,s),l.setInterval(1),each$8(r,function(c,u){alignScaleTicks(c.scale,c.model,l)})},t.prototype.convertToPixel=function(n,a,r){return console.warn("Not implemented."),null},t.prototype.convertFromPixel=function(n,a,r){return console.warn("Not implemented."),null},t.prototype.containPoint=function(n){return console.warn("Not implemented."),!1},t.create=function(n,a){var r=[];return n.eachComponent("radar",function(o){var s=new t(o,n,a);r.push(s),o.coordinateSystem=s}),n.eachSeriesByType("radar",function(o){o.get("coordinateSystem")==="radar"&&(o.coordinateSystem=r[o.get("radarIndex")||0])}),r},t.dimensions=[],t}();function install$b(t){t.registerCoordinateSystem("radar",Radar),t.registerComponentModel(RadarModel),t.registerComponentView(RadarView),t.registerVisual({seriesType:"radar",reset:function(n){var a=n.getData();a.each(function(r){a.setItemVisual(r,"legendIcon","roundRect")}),a.setVisual("legendIcon","roundRect")}})}function install$a(t){use(install$b),t.registerChartView(RadarView$1),t.registerSeriesModel(RadarSeriesModel),t.registerLayout(radarLayout),t.registerProcessor(dataFilter("radar")),t.registerPreprocessor(radarBackwardCompat)}var inner$3=makeInner();function isTaken(t,n){return!!inner$3(t)[n]}registerAction({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},noop);var IRRELEVANT_EXCLUDES={axisPointer:1,tooltip:1,brush:1};function onIrrelevantElement(t,n,a){var r=n.getComponentByElement(t.topTarget);if(!r||r===a||IRRELEVANT_EXCLUDES.hasOwnProperty(r.mainType))return!1;var o=r.coordinateSystem;if(!o||o.model===a)return!1;var s=retrieveZInfo(r),l=retrieveZInfo(a);return!((s.zlevel-l.zlevel||s.z-l.z)<=0)}var RoamController=function(t){__extends$1(n,t);function n(a){var r=t.call(this)||this;r._zr=a;var o=bind$1(r._mousedownHandler,r),s=bind$1(r._mousemoveHandler,r),l=bind$1(r._mouseupHandler,r),c=bind$1(r._mousewheelHandler,r),u=bind$1(r._pinchHandler,r);return r.enable=function(d,f){var v=f.zInfo,_=retrieveZInfo(v.component),g=_.z,y=_.zlevel,b={component:v.component,z:g,zlevel:y,z2:retrieve2(v.z2,-1/0)},T=extend({},f.triggerInfo);this._opt=defaults(extend({},f),{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0,zInfoParsed:b,triggerInfo:T}),d==null&&(d=!0),(!this._enabled||this._controlType!==d)&&(this._enabled=!0,this.disable(),(d===!0||d==="move"||d==="pan")&&(addRoamZrListener(a,"mousedown",o,b),addRoamZrListener(a,"mousemove",s,b),addRoamZrListener(a,"mouseup",l,b)),(d===!0||d==="scale"||d==="zoom")&&(addRoamZrListener(a,"mousewheel",c,b),addRoamZrListener(a,"pinch",u,b)))},r.disable=function(){this._enabled=!1,removeRoamZrListener(a,"mousedown",o),removeRoamZrListener(a,"mousemove",s),removeRoamZrListener(a,"mouseup",l),removeRoamZrListener(a,"mousewheel",c),removeRoamZrListener(a,"pinch",u)},r}return n.prototype.isDragging=function(){return this._dragging},n.prototype.isPinching=function(){return this._pinching},n.prototype._checkPointer=function(a,r,o){var s=this._opt,l=s.zInfoParsed;if(onIrrelevantElement(a,s.api,l.component))return!1;var c=s.triggerInfo,u=c.roamTrigger,d=!1;return u==="global"&&(d=!0),d||(d=c.isInSelf(a,r,o)),d&&c.isInClip&&!c.isInClip(a,r,o)&&(d=!1),d},n.prototype._decideCursorStyle=function(a,r,o,s){var l=a.target;if(!l&&this._checkPointer(a,r,o))return"grab";if(s)return l&&l.cursor||"default"},n.prototype.dispose=function(){this.disable()},n.prototype._mousedownHandler=function(a){if(!(isMiddleOrRightButtonOnMouseUpDown(a)||eventConsumed(a))){for(var r=a.target;r;){if(r.draggable)return;r=r.__hostTarget||r.parent}var o=a.offsetX,s=a.offsetY;this._checkPointer(a,o,s)&&(this._x=o,this._y=s,this._dragging=!0)}},n.prototype._mousemoveHandler=function(a){var r=this._zr;if(!(a.gestureEvent==="pinch"||isTaken(r,"globalPan")||eventConsumed(a))){var o=a.offsetX,s=a.offsetY;if(!this._dragging||!isAvailableBehavior("moveOnMouseMove",a,this._opt)){var l=this._decideCursorStyle(a,o,s,!1);l&&r.setCursorStyle(l);return}r.setCursorStyle("grabbing");var c=this._x,u=this._y,d=o-c,f=s-u;this._x=o,this._y=s,this._opt.preventDefaultMouseMove&&stop(a.event),a.__ecRoamConsumed=!0,trigger(this,"pan","moveOnMouseMove",a,{dx:d,dy:f,oldX:c,oldY:u,newX:o,newY:s,isAvailableBehavior:null})}},n.prototype._mouseupHandler=function(a){if(!eventConsumed(a)){var r=this._zr;if(!isMiddleOrRightButtonOnMouseUpDown(a)){this._dragging=!1;var o=this._decideCursorStyle(a,a.offsetX,a.offsetY,!0);o&&r.setCursorStyle(o)}}},n.prototype._mousewheelHandler=function(a){if(!eventConsumed(a)){var r=isAvailableBehavior("zoomOnMouseWheel",a,this._opt),o=isAvailableBehavior("moveOnMouseWheel",a,this._opt),s=a.wheelDelta,l=Math.abs(s),c=a.offsetX,u=a.offsetY;if(!(s===0||!r&&!o)){if(r){var d=l>3?1.4:l>1?1.2:1.1,f=s>0?d:1/d;this._checkTriggerMoveZoom(this,"zoom","zoomOnMouseWheel",a,{scale:f,originX:c,originY:u,isAvailableBehavior:null})}if(o){var v=Math.abs(s),_=(s>0?1:-1)*(v>3?.4:v>1?.15:.05);this._checkTriggerMoveZoom(this,"scrollMove","moveOnMouseWheel",a,{scrollDelta:_,originX:c,originY:u,isAvailableBehavior:null})}}}},n.prototype._pinchHandler=function(a){if(!(isTaken(this._zr,"globalPan")||eventConsumed(a))){var r=a.pinchScale>1?1.1:1/1.1;this._checkTriggerMoveZoom(this,"zoom",null,a,{scale:r,originX:a.pinchX,originY:a.pinchY,isAvailableBehavior:null})}},n.prototype._checkTriggerMoveZoom=function(a,r,o,s,l){a._checkPointer(s,l.originX,l.originY)&&(stop(s.event),s.__ecRoamConsumed=!0,trigger(a,r,o,s,l))},n}(Eventful);function eventConsumed(t){return t.__ecRoamConsumed}var innerZrStore=makeInner();function ensureZrStore(t){var n=innerZrStore(t);return n.roam=n.roam||{},n.uniform=n.uniform||{},n}function addRoamZrListener(t,n,a,r){for(var o=ensureZrStore(t),s=o.roam,l=s[n]=s[n]||[],c=0;c<l.length;c++){var u=l[c].zInfoParsed;if((u.zlevel-r.zlevel||u.z-r.z||u.z2-r.z2)<=0)break}l.splice(c,0,{listener:a,zInfoParsed:r}),ensureUniformListener(t,n)}function removeRoamZrListener(t,n,a){for(var r=ensureZrStore(t),o=r.roam[n]||[],s=0;s<o.length;s++)if(o[s].listener===a){o.splice(s,1),o.length||removeUniformListener(t,n);return}}function ensureUniformListener(t,n){var a=ensureZrStore(t);a.uniform[n]||t.on(n,a.uniform[n]=function(r){var o=a.roam[n];if(o)for(var s=0;s<o.length;s++)o[s].listener(r)})}function removeUniformListener(t,n){var a=ensureZrStore(t),r=a.uniform;r[n]&&(t.off(n,r[n]),r[n]=null)}function trigger(t,n,a,r,o){o.isAvailableBehavior=bind$1(isAvailableBehavior,null,a,r),t.trigger(n,o)}function isAvailableBehavior(t,n,a){var r=a[t];return!t||r&&(!isString(r)||n.event[r+"Key"])}function updateViewOnPan(t,n,a){var r=t.target;r.x+=n,r.y+=a,r.dirty()}function updateViewOnZoom(t,n,a,r){var o=t.target,s=t.zoomLimit,l=t.zoom=t.zoom||1;l*=n,l=clampByZoomLimit(l,s);var c=l/t.zoom;t.zoom=l,zoomTransformableByOrigin(o,a,r,c),o.dirty()}function getCenterCoord(t,n){return t.pointToProjected?t.pointToProjected(n):t.pointToData(n)}function updateCenterAndZoomInAction(t,n,a){var r=t.getZoom(),o=t.getCenter(),s=n.zoom,l=t.projectedToPoint?t.projectedToPoint(o):t.dataToPoint(o);return n.dx!=null&&n.dy!=null&&(l[0]-=n.dx,l[1]-=n.dy,t.setCenter(getCenterCoord(t,l))),s!=null&&(s=clampByZoomLimit(r*s,a)/r,zoomTransformableByOrigin(t,n.originX,n.originY,s),t.updateTransform(),t.setCenter(getCenterCoord(t,l)),t.setZoom(s*r)),{center:t.getCenter(),zoom:t.getZoom()}}function zoomTransformableByOrigin(t,n,a,r){t.x-=(n-t.x)*(r-1),t.y-=(a-t.y)*(r-1),t.scaleX*=r,t.scaleY*=r}function clampByZoomLimit(t,n){if(n){var a=n.min||0,r=n.max||1/0;t=Math.max(Math.min(r,t),a)}return t}function parseXML(t){if(isString(t)){var n=new DOMParser;t=n.parseFromString(t,"text/xml")}var a=t;for(a.nodeType===9&&(a=a.firstChild);a.nodeName.toLowerCase()!=="svg"||a.nodeType!==1;)a=a.nextSibling;return a}var nodeParsers,INHERITABLE_STYLE_ATTRIBUTES_MAP={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS=keys(INHERITABLE_STYLE_ATTRIBUTES_MAP),SELF_STYLE_ATTRIBUTES_MAP={"alignment-baseline":"textBaseline","stop-color":"stopColor"},SELF_STYLE_ATTRIBUTES_MAP_KEYS=keys(SELF_STYLE_ATTRIBUTES_MAP),SVGParser=function(){function t(){this._defs={},this._root=null}return t.prototype.parse=function(n,a){a=a||{};var r=parseXML(n);this._defsUsePending=[];var o=new Group;this._root=o;var s=[],l=r.getAttribute("viewBox")||"",c=parseFloat(r.getAttribute("width")||a.width),u=parseFloat(r.getAttribute("height")||a.height);isNaN(c)&&(c=null),isNaN(u)&&(u=null),parseAttributes(r,o,null,!0,!1);for(var d=r.firstChild;d;)this._parseNode(d,o,s,null,!1,!1),d=d.nextSibling;applyDefs(this._defs,this._defsUsePending),this._defsUsePending=[];var f,v;if(l){var _=splitNumberSequence(l);_.length>=4&&(f={x:parseFloat(_[0]||0),y:parseFloat(_[1]||0),width:parseFloat(_[2]),height:parseFloat(_[3])})}if(f&&c!=null&&u!=null&&(v=makeViewBoxTransform(f,{x:0,y:0,width:c,height:u}),!a.ignoreViewBox)){var g=o;o=new Group,o.add(g),g.scaleX=g.scaleY=v.scale,g.x=v.x,g.y=v.y}return!a.ignoreRootClip&&c!=null&&u!=null&&o.setClipPath(new Rect({shape:{x:0,y:0,width:c,height:u}})),{root:o,width:c,height:u,viewBoxRect:f,viewBoxTransform:v,named:s}},t.prototype._parseNode=function(n,a,r,o,s,l){var c=n.nodeName.toLowerCase(),u,d=o;if(c==="defs"&&(s=!0),c==="text"&&(l=!0),c==="defs"||c==="switch")u=a;else{if(!s){var f=nodeParsers[c];if(f&&hasOwn(nodeParsers,c)){u=f.call(this,n,a);var v=n.getAttribute("name");if(v){var _={name:v,namedFrom:null,svgNodeTagLower:c,el:u};r.push(_),c==="g"&&(d=_)}else o&&r.push({name:o.name,namedFrom:o,svgNodeTagLower:c,el:u});a.add(u)}}var g=paintServerParsers[c];if(g&&hasOwn(paintServerParsers,c)){var y=g.call(this,n),b=n.getAttribute("id");b&&(this._defs[b]=y)}}if(u&&u.isGroup)for(var T=n.firstChild;T;)T.nodeType===1?this._parseNode(T,u,r,d,s,l):T.nodeType===3&&l&&this._parseText(T,u),T=T.nextSibling},t.prototype._parseText=function(n,a){var r=new TSpan({style:{text:n.textContent},silent:!0,x:this._textX||0,y:this._textY||0});inheritStyle(a,r),parseAttributes(n,r,this._defsUsePending,!1,!1),applyTextAlignment(r,a);var o=r.style,s=o.fontSize;s&&s<9&&(o.fontSize=9,r.scaleX*=s/9,r.scaleY*=s/9);var l=(o.fontSize||o.fontFamily)&&[o.fontStyle,o.fontWeight,(o.fontSize||12)+"px",o.fontFamily||"sans-serif"].join(" ");o.font=l;var c=r.getBoundingRect();return this._textX+=c.width,a.add(r),r},t.internalField=function(){nodeParsers={g:function(n,a){var r=new Group;return inheritStyle(a,r),parseAttributes(n,r,this._defsUsePending,!1,!1),r},rect:function(n,a){var r=new Rect;return inheritStyle(a,r),parseAttributes(n,r,this._defsUsePending,!1,!1),r.setShape({x:parseFloat(n.getAttribute("x")||"0"),y:parseFloat(n.getAttribute("y")||"0"),width:parseFloat(n.getAttribute("width")||"0"),height:parseFloat(n.getAttribute("height")||"0")}),r.silent=!0,r},circle:function(n,a){var r=new Circle;return inheritStyle(a,r),parseAttributes(n,r,this._defsUsePending,!1,!1),r.setShape({cx:parseFloat(n.getAttribute("cx")||"0"),cy:parseFloat(n.getAttribute("cy")||"0"),r:parseFloat(n.getAttribute("r")||"0")}),r.silent=!0,r},line:function(n,a){var r=new Line;return inheritStyle(a,r),parseAttributes(n,r,this._defsUsePending,!1,!1),r.setShape({x1:parseFloat(n.getAttribute("x1")||"0"),y1:parseFloat(n.getAttribute("y1")||"0"),x2:parseFloat(n.getAttribute("x2")||"0"),y2:parseFloat(n.getAttribute("y2")||"0")}),r.silent=!0,r},ellipse:function(n,a){var r=new Ellipse;return inheritStyle(a,r),parseAttributes(n,r,this._defsUsePending,!1,!1),r.setShape({cx:parseFloat(n.getAttribute("cx")||"0"),cy:parseFloat(n.getAttribute("cy")||"0"),rx:parseFloat(n.getAttribute("rx")||"0"),ry:parseFloat(n.getAttribute("ry")||"0")}),r.silent=!0,r},polygon:function(n,a){var r=n.getAttribute("points"),o;r&&(o=parsePoints(r));var s=new Polygon({shape:{points:o||[]},silent:!0});return inheritStyle(a,s),parseAttributes(n,s,this._defsUsePending,!1,!1),s},polyline:function(n,a){var r=n.getAttribute("points"),o;r&&(o=parsePoints(r));var s=new Polyline({shape:{points:o||[]},silent:!0});return inheritStyle(a,s),parseAttributes(n,s,this._defsUsePending,!1,!1),s},image:function(n,a){var r=new ZRImage;return inheritStyle(a,r),parseAttributes(n,r,this._defsUsePending,!1,!1),r.setStyle({image:n.getAttribute("xlink:href")||n.getAttribute("href"),x:+n.getAttribute("x"),y:+n.getAttribute("y"),width:+n.getAttribute("width"),height:+n.getAttribute("height")}),r.silent=!0,r},text:function(n,a){var r=n.getAttribute("x")||"0",o=n.getAttribute("y")||"0",s=n.getAttribute("dx")||"0",l=n.getAttribute("dy")||"0";this._textX=parseFloat(r)+parseFloat(s),this._textY=parseFloat(o)+parseFloat(l);var c=new Group;return inheritStyle(a,c),parseAttributes(n,c,this._defsUsePending,!1,!0),c},tspan:function(n,a){var r=n.getAttribute("x"),o=n.getAttribute("y");r!=null&&(this._textX=parseFloat(r)),o!=null&&(this._textY=parseFloat(o));var s=n.getAttribute("dx")||"0",l=n.getAttribute("dy")||"0",c=new Group;return inheritStyle(a,c),parseAttributes(n,c,this._defsUsePending,!1,!0),this._textX+=parseFloat(s),this._textY+=parseFloat(l),c},path:function(n,a){var r=n.getAttribute("d")||"",o=createFromString(r);return inheritStyle(a,o),parseAttributes(n,o,this._defsUsePending,!1,!1),o.silent=!0,o}}}(),t}(),paintServerParsers={lineargradient:function(t){var n=parseInt(t.getAttribute("x1")||"0",10),a=parseInt(t.getAttribute("y1")||"0",10),r=parseInt(t.getAttribute("x2")||"10",10),o=parseInt(t.getAttribute("y2")||"0",10),s=new LinearGradient(n,a,r,o);return parsePaintServerUnit(t,s),parseGradientColorStops(t,s),s},radialgradient:function(t){var n=parseInt(t.getAttribute("cx")||"0",10),a=parseInt(t.getAttribute("cy")||"0",10),r=parseInt(t.getAttribute("r")||"0",10),o=new RadialGradient(n,a,r);return parsePaintServerUnit(t,o),parseGradientColorStops(t,o),o}};function parsePaintServerUnit(t,n){var a=t.getAttribute("gradientUnits");a==="userSpaceOnUse"&&(n.global=!0)}function parseGradientColorStops(t,n){for(var a=t.firstChild;a;){if(a.nodeType===1&&a.nodeName.toLocaleLowerCase()==="stop"){var r=a.getAttribute("offset"),o=void 0;r&&r.indexOf("%")>0?o=parseInt(r,10)/100:r?o=parseFloat(r):o=0;var s={};parseInlineStyle(a,s,s);var l=s.stopColor||a.getAttribute("stop-color")||"#000000",c=s.stopOpacity||a.getAttribute("stop-opacity");if(c){var u=parse(l),d=u&&u[3];d&&(u[3]*=parseCssFloat(c),l=stringify(u,"rgba"))}n.colorStops.push({offset:o,color:l})}a=a.nextSibling}}function inheritStyle(t,n){t&&t.__inheritedStyle&&(n.__inheritedStyle||(n.__inheritedStyle={}),defaults(n.__inheritedStyle,t.__inheritedStyle))}function parsePoints(t){for(var n=splitNumberSequence(t),a=[],r=0;r<n.length;r+=2){var o=parseFloat(n[r]),s=parseFloat(n[r+1]);a.push([o,s])}return a}function parseAttributes(t,n,a,r,o){var s=n,l=s.__inheritedStyle=s.__inheritedStyle||{},c={};t.nodeType===1&&(parseTransformAttribute(t,n),parseInlineStyle(t,l,c),r||parseAttributeStyle(t,l,c)),s.style=s.style||{},l.fill!=null&&(s.style.fill=getFillStrokeStyle(s,"fill",l.fill,a)),l.stroke!=null&&(s.style.stroke=getFillStrokeStyle(s,"stroke",l.stroke,a)),each$8(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(u){l[u]!=null&&(s.style[u]=parseFloat(l[u]))}),each$8(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(u){l[u]!=null&&(s.style[u]=l[u])}),o&&(s.__selfStyle=c),l.lineDash&&(s.style.lineDash=map$1(splitNumberSequence(l.lineDash),function(u){return parseFloat(u)})),(l.visibility==="hidden"||l.visibility==="collapse")&&(s.invisible=!0),l.display==="none"&&(s.ignore=!0)}function applyTextAlignment(t,n){var a=n.__selfStyle;if(a){var r=a.textBaseline,o=r;!r||r==="auto"||r==="baseline"?o="alphabetic":r==="before-edge"||r==="text-before-edge"?o="top":r==="after-edge"||r==="text-after-edge"?o="bottom":(r==="central"||r==="mathematical")&&(o="middle"),t.style.textBaseline=o}var s=n.__inheritedStyle;if(s){var l=s.textAlign,c=l;l&&(l==="middle"&&(c="center"),t.style.textAlign=c)}}var urlRegex=/^url\(\s*#(.*?)\)/;function getFillStrokeStyle(t,n,a,r){var o=a&&a.match(urlRegex);if(o){var s=trim(o[1]);r.push([t,n,s]);return}return a==="none"&&(a=null),a}function applyDefs(t,n){for(var a=0;a<n.length;a++){var r=n[a];r[0].style[r[1]]=t[r[2]]}}var numberReg=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function splitNumberSequence(t){return t.match(numberReg)||[]}var transformRegex=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,DEGREE_TO_ANGLE=Math.PI/180;function parseTransformAttribute(t,n){var a=t.getAttribute("transform");if(a){a=a.replace(/,/g," ");var r=[],o=null;a.replace(transformRegex,function(v,_,g){return r.push(_,g),""});for(var s=r.length-1;s>0;s-=2){var l=r[s],c=r[s-1],u=splitNumberSequence(l);switch(o=o||create(),c){case"translate":translate(o,o,[parseFloat(u[0]),parseFloat(u[1]||"0")]);break;case"scale":scale$1(o,o,[parseFloat(u[0]),parseFloat(u[1]||u[0])]);break;case"rotate":rotate(o,o,-parseFloat(u[0])*DEGREE_TO_ANGLE,[parseFloat(u[1]||"0"),parseFloat(u[2]||"0")]);break;case"skewX":var d=Math.tan(parseFloat(u[0])*DEGREE_TO_ANGLE);mul(o,[1,0,d,1,0,0],o);break;case"skewY":var f=Math.tan(parseFloat(u[0])*DEGREE_TO_ANGLE);mul(o,[1,f,0,1,0,0],o);break;case"matrix":o[0]=parseFloat(u[0]),o[1]=parseFloat(u[1]),o[2]=parseFloat(u[2]),o[3]=parseFloat(u[3]),o[4]=parseFloat(u[4]),o[5]=parseFloat(u[5]);break}}n.setLocalTransform(o)}}var styleRegex=/([^\s:;]+)\s*:\s*([^:;]+)/g;function parseInlineStyle(t,n,a){var r=t.getAttribute("style");if(r){styleRegex.lastIndex=0;for(var o;(o=styleRegex.exec(r))!=null;){var s=o[1],l=hasOwn(INHERITABLE_STYLE_ATTRIBUTES_MAP,s)?INHERITABLE_STYLE_ATTRIBUTES_MAP[s]:null;l&&(n[l]=o[2]);var c=hasOwn(SELF_STYLE_ATTRIBUTES_MAP,s)?SELF_STYLE_ATTRIBUTES_MAP[s]:null;c&&(a[c]=o[2])}}}function parseAttributeStyle(t,n,a){for(var r=0;r<INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS.length;r++){var o=INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS[r],s=t.getAttribute(o);s!=null&&(n[INHERITABLE_STYLE_ATTRIBUTES_MAP[o]]=s)}for(var r=0;r<SELF_STYLE_ATTRIBUTES_MAP_KEYS.length;r++){var o=SELF_STYLE_ATTRIBUTES_MAP_KEYS[r],s=t.getAttribute(o);s!=null&&(a[SELF_STYLE_ATTRIBUTES_MAP[o]]=s)}}function makeViewBoxTransform(t,n){var a=n.width/t.width,r=n.height/t.height,o=Math.min(a,r);return{scale:o,x:-(t.x+t.width/2)*o+(n.x+n.width/2),y:-(t.y+t.height/2)*o+(n.y+n.height/2)}}function parseSVG(t,n){var a=new SVGParser;return a.parse(t,n)}var REGION_AVAILABLE_SVG_TAG_MAP=createHashMap(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),GeoSVGResource=function(){function t(n,a){this.type="geoSVG",this._usedGraphicMap=createHashMap(),this._freedGraphics=[],this._mapName=n,this._parsedXML=parseXML(a)}return t.prototype.load=function(){var n=this._firstGraphic;if(!n){n=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(n),this._boundingRect=this._firstGraphic.boundingRect.clone();var a=createRegions(n.named),r=a.regions,o=a.regionsMap;this._regions=r,this._regionsMap=o}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},t.prototype._buildGraphic=function(n){var a,r;try{a=n&&parseSVG(n,{ignoreViewBox:!0,ignoreRootClip:!0})||{},r=a.root,assert(r!=null)}catch(T){throw new Error(`Invalid svg format
`+T.message)}var o=new Group;o.add(r),o.isGeoSVGGraphicRoot=!0;var s=a.width,l=a.height,c=a.viewBoxRect,u=this._boundingRect;if(!u){var d=void 0,f=void 0,v=void 0,_=void 0;if(s!=null?(d=0,v=s):c&&(d=c.x,v=c.width),l!=null?(f=0,_=l):c&&(f=c.y,_=c.height),d==null||f==null){var g=r.getBoundingRect();d==null&&(d=g.x,v=g.width),f==null&&(f=g.y,_=g.height)}u=this._boundingRect=new BoundingRect(d,f,v,_)}if(c){var y=makeViewBoxTransform(c,u);r.scaleX=r.scaleY=y.scale,r.x=y.x,r.y=y.y}o.setClipPath(new Rect({shape:u.plain()}));var b=[];return each$8(a.named,function(T){REGION_AVAILABLE_SVG_TAG_MAP.get(T.svgNodeTagLower)!=null&&(b.push(T),setSilent(T.el))}),{root:o,boundingRect:u,named:b}},t.prototype.useGraphic=function(n){var a=this._usedGraphicMap,r=a.get(n);return r||(r=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),a.set(n,r),r)},t.prototype.freeGraphic=function(n){var a=this._usedGraphicMap,r=a.get(n);r&&(a.removeKey(n),this._freedGraphics.push(r))},t}();function setSilent(t){t.silent=!1,t.isGroup&&t.traverse(function(n){n.silent=!1})}function createRegions(t){var n=[],a=createHashMap();return each$8(t,function(r){if(r.namedFrom==null){var o=new GeoSVGRegion(r.name,r.el);n.push(o),a.set(r.name,o)}}),{regions:n,regionsMap:a}}var geoCoord=[126,25],nanhaiName="",points$1=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var i=0;i<points$1.length;i++)for(var k=0;k<points$1[i].length;k++)points$1[i][k][0]/=10.5,points$1[i][k][1]/=-10.5/.75,points$1[i][k][0]+=geoCoord[0],points$1[i][k][1]+=geoCoord[1];function fixNanhai(t,n){if(t==="china"){for(var a=0;a<n.length;a++)if(n[a].name===nanhaiName)return;n.push(new GeoJSONRegion(nanhaiName,map$1(points$1,function(r){return{type:"polygon",exterior:r}}),geoCoord))}}var coordsOffsetMap={:[32,80],:[0,-10],:[10,5],:[-10,10],:[5,5]};function fixTextCoords(t,n){if(t==="china"){var a=coordsOffsetMap[n.name];if(a){var r=n.getCenter();r[0]+=a[0]/10.5,r[1]+=-a[1]/(10.5/.75),n.setCenter(r)}}}var points=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function fixDiaoyuIsland(t,n){t==="china"&&n.name===""&&n.geometries.push({type:"polygon",exterior:points[0]})}var DEFAULT_NAME_PROPERTY="name",GeoJSONResource=function(){function t(n,a,r){this.type="geoJSON",this._parsedMap=createHashMap(),this._mapName=n,this._specialAreas=r,this._geoJSON=parseInput(a)}return t.prototype.load=function(n,a){a=a||DEFAULT_NAME_PROPERTY;var r=this._parsedMap.get(a);if(!r){var o=this._parseToRegions(a);r=this._parsedMap.set(a,{regions:o,boundingRect:calculateBoundingRect(o)})}var s=createHashMap(),l=[];return each$8(r.regions,function(c){var u=c.name;n&&hasOwn(n,u)&&(c=c.cloneShallow(u=n[u])),l.push(c),s.set(u,c)}),{regions:l,boundingRect:r.boundingRect||new BoundingRect(0,0,0,0),regionsMap:s}},t.prototype._parseToRegions=function(n){var a=this._mapName,r=this._geoJSON,o;try{o=r?parseGeoJSON(r,n):[]}catch(s){throw new Error(`Invalid geoJson format
`+s.message)}return fixNanhai(a,o),each$8(o,function(s){var l=s.name;fixTextCoords(a,s),fixDiaoyuIsland(a,s);var c=this._specialAreas&&this._specialAreas[l];c&&s.transformTo(c.left,c.top,c.width,c.height)},this),o},t.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},t}();function calculateBoundingRect(t){for(var n,a=0;a<t.length;a++){var r=t[a].getBoundingRect();n=n||r.clone(),n.union(r)}return n}function parseInput(t){return isString(t)?typeof JSON<"u"&&JSON.parse?JSON.parse(t):new Function("return ("+t+");")():t}var storage=createHashMap();const geoSourceManager={registerMap:function(t,n,a){if(n.svg){var r=new GeoSVGResource(t,n.svg);storage.set(t,r)}else{var o=n.geoJson||n.geoJSON;o&&!n.features?a=n.specialAreas:o=n;var r=new GeoJSONResource(t,o,a);storage.set(t,r)}},getGeoResource:function(t){return storage.get(t)},getMapForUser:function(t){var n=storage.get(t);return n&&n.type==="geoJSON"&&n.getMapForUser()},load:function(t,n,a){var r=storage.get(t);if(r)return r.load(n,a)}};var OPTION_STYLE_ENABLED_TAGS=["rect","circle","line","ellipse","polygon","polyline","path"],OPTION_STYLE_ENABLED_TAG_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS),STATE_TRIGGER_TAG_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS.concat(["g"])),LABEL_HOST_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS.concat(["g"])),mapLabelRaw=makeInner();function getFixedItemStyle(t){var n=t.getItemStyle(),a=t.get("areaColor");return a!=null&&(n.fill=a),n}function fixLineStyle(t){var n=t.style;n&&(n.stroke=n.stroke||n.fill,n.fill=null)}var MapDraw=function(){function t(n){var a=this.group=new Group,r=this._transformGroup=new Group;a.add(r),this.uid=getUID("ec_map_draw"),this._controller=new RoamController(n.getZr()),this._controllerHost={target:r},r.add(this._regionsGroup=new Group),r.add(this._svgGroup=new Group)}return t.prototype.draw=function(n,a,r,o,s){var l=n.mainType==="geo",c=n.getData&&n.getData();l&&a.eachComponent({mainType:"series",subType:"map"},function(E){!c&&E.getHostGeoModel()===n&&(c=E.getData())});var u=n.coordinateSystem,d=this._regionsGroup,f=this._transformGroup,v=u.getTransformInfo(),_=v.raw,g=v.roam,y=!d.childAt(0)||s,b=n.getShallow("clip",!0),T;b?(T=u.getViewRect().clone(),this.group.setClipPath(new Rect({shape:T.clone()}))):this.group.removeClipPath(),y?(f.x=g.x,f.y=g.y,f.scaleX=g.scaleX,f.scaleY=g.scaleY,f.dirty()):updateProps$1(f,g,n);var S=c&&c.getVisual("visualMeta")&&c.getVisual("visualMeta").length>0,C={api:r,geo:u,mapOrGeoModel:n,data:c,isVisualEncodedByVisualMap:S,isGeo:l,transformInfoRaw:_};u.resourceType==="geoJSON"?this._buildGeoJSON(C):u.resourceType==="geoSVG"&&this._buildSVG(C),this._updateController(n,T,a,r),this._updateMapSelectHandler(n,d,r,o)},t.prototype._buildGeoJSON=function(n){var a=this._regionsGroupByName=createHashMap(),r=createHashMap(),o=this._regionsGroup,s=n.transformInfoRaw,l=n.mapOrGeoModel,c=n.data,u=n.geo.projection,d=u&&u.stream;function f(g,y){return y&&(g=y(g)),g&&[g[0]*s.scaleX+s.x,g[1]*s.scaleY+s.y]}function v(g){for(var y=[],b=!d&&u&&u.project,T=0;T<g.length;++T){var S=f(g[T],b);S&&y.push(S)}return y}function _(g){return{shape:{points:v(g)}}}o.removeAll(),each$8(n.geo.regions,function(g){var y=g.name,b=a.get(y),T=r.get(y)||{},S=T.dataIdx,C=T.regionModel;if(!b){b=a.set(y,new Group),o.add(b),S=c?c.indexOfName(y):null,C=n.isGeo?l.getRegionModel(y):c?c.getItemModel(S):null;var E=C.get("silent",!0);E!=null&&(b.silent=E),r.set(y,{dataIdx:S,regionModel:C})}var x=[],A=[];each$8(g.geometries,function(R){if(R.type==="polygon"){var D=[R.exterior].concat(R.interiors||[]);d&&(D=projectPolys(D,d)),each$8(D,function(I){x.push(new Polygon(_(I)))})}else{var L=R.points;d&&(L=projectPolys(L,d,!0)),each$8(L,function(I){A.push(new Polyline(_(I)))})}});var N=f(g.getCenter(),u&&u.project);function M(R,D){if(R.length){var L=new CompoundPath({culling:!0,segmentIgnoreThreshold:1,shape:{paths:R}});b.add(L),applyOptionStyleForRegion(n,L,S,C),resetLabelForRegion(n,L,y,C,l,S,N),D&&(fixLineStyle(L),each$8(L.states,fixLineStyle))}}M(x),M(A,!0)}),a.each(function(g,y){var b=r.get(y),T=b.dataIdx,S=b.regionModel;resetEventTriggerForRegion(n,g,y,S,l,T),resetTooltipForRegion(n,g,y,S,l),resetStateTriggerForRegion(n,g,y,S,l)},this)},t.prototype._buildSVG=function(n){var a=n.geo.map,r=n.transformInfoRaw;this._svgGroup.x=r.x,this._svgGroup.y=r.y,this._svgGroup.scaleX=r.scaleX,this._svgGroup.scaleY=r.scaleY,this._svgResourceChanged(a)&&(this._freeSVG(),this._useSVG(a));var o=this._svgDispatcherMap=createHashMap(),s=!1;each$8(this._svgGraphicRecord.named,function(l){var c=l.name,u=n.mapOrGeoModel,d=n.data,f=l.svgNodeTagLower,v=l.el,_=d?d.indexOfName(c):null,g=u.getRegionModel(c);OPTION_STYLE_ENABLED_TAG_MAP.get(f)!=null&&v instanceof Displayable&&applyOptionStyleForRegion(n,v,_,g),v instanceof Displayable&&(v.culling=!0);var y=g.get("silent",!0);if(y!=null&&(v.silent=y),v.z2EmphasisLift=0,!l.namedFrom&&(LABEL_HOST_MAP.get(f)!=null&&resetLabelForRegion(n,v,c,g,u,_,null),resetEventTriggerForRegion(n,v,c,g,u,_),resetTooltipForRegion(n,v,c,g,u),STATE_TRIGGER_TAG_MAP.get(f)!=null)){var b=resetStateTriggerForRegion(n,v,c,g,u);b==="self"&&(s=!0);var T=o.get(c)||o.set(c,[]);T.push(v)}},this),this._enableBlurEntireSVG(s,n)},t.prototype._enableBlurEntireSVG=function(n,a){if(n&&a.isGeo){var r=a.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),o=r.opacity;this._svgGraphicRecord.root.traverse(function(s){if(!s.isGroup){setDefaultStateProxy(s);var l=s.ensureState("blur").style||{};l.opacity==null&&o!=null&&(l.opacity=o),s.ensureState("emphasis")}})}},t.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},t.prototype.findHighDownDispatchers=function(n,a){if(n==null)return[];var r=a.coordinateSystem;if(r.resourceType==="geoJSON"){var o=this._regionsGroupByName;if(o){var s=o.get(n);return s?[s]:[]}}else if(r.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(n)||[]},t.prototype._svgResourceChanged=function(n){return this._svgMapName!==n},t.prototype._useSVG=function(n){var a=geoSourceManager.getGeoResource(n);if(a&&a.type==="geoSVG"){var r=a.useGraphic(this.uid);this._svgGroup.add(r.root),this._svgGraphicRecord=r,this._svgMapName=n}},t.prototype._freeSVG=function(){var n=this._svgMapName;if(n!=null){var a=geoSourceManager.getGeoResource(n);a&&a.type==="geoSVG"&&a.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},t.prototype._updateController=function(n,a,r,o){var s=n.coordinateSystem,l=this._controller,c=this._controllerHost;c.zoomLimit=n.get("scaleLimit"),c.zoom=s.getZoom(),l.enable(n.get("roam")||!1,{api:o,zInfo:{component:n},triggerInfo:{roamTrigger:n.get("roamTrigger"),isInSelf:function(f,v,_){return s.containPoint([v,_])},isInClip:function(f,v,_){return!a||a.contain(v,_)}}});var u=n.mainType;function d(){var f={type:"geoRoam",componentType:u};return f[u+"Id"]=n.id,f}l.off("pan").on("pan",function(f){this._mouseDownFlag=!1,updateViewOnPan(c,f.dx,f.dy),o.dispatchAction(extend(d(),{dx:f.dx,dy:f.dy,animation:{duration:0}}))},this),l.off("zoom").on("zoom",function(f){this._mouseDownFlag=!1,updateViewOnZoom(c,f.scale,f.originX,f.originY),o.dispatchAction(extend(d(),{totalZoom:c.zoom,zoom:f.scale,originX:f.originX,originY:f.originY,animation:{duration:0}}))},this)},t.prototype.resetForLabelLayout=function(){this.group.traverse(function(n){var a=n.getTextContent();a&&(a.ignore=mapLabelRaw(a).ignore)})},t.prototype._updateMapSelectHandler=function(n,a,r,o){var s=this;a.off("mousedown"),a.off("click"),n.get("selectedMode")&&(a.on("mousedown",function(){s._mouseDownFlag=!0}),a.on("click",function(l){s._mouseDownFlag&&(s._mouseDownFlag=!1)}))},t}();function applyOptionStyleForRegion(t,n,a,r){var o=r.getModel("itemStyle"),s=r.getModel(["emphasis","itemStyle"]),l=r.getModel(["blur","itemStyle"]),c=r.getModel(["select","itemStyle"]),u=getFixedItemStyle(o),d=getFixedItemStyle(s),f=getFixedItemStyle(c),v=getFixedItemStyle(l),_=t.data;if(_){var g=_.getItemVisual(a,"style"),y=_.getItemVisual(a,"decal");t.isVisualEncodedByVisualMap&&g.fill&&(u.fill=g.fill),y&&(u.decal=createOrUpdatePatternFromDecal(y,t.api))}n.setStyle(u),n.style.strokeNoScale=!0,n.ensureState("emphasis").style=d,n.ensureState("select").style=f,n.ensureState("blur").style=v,setDefaultStateProxy(n)}function resetLabelForRegion(t,n,a,r,o,s,l){var c=t.data,u=t.isGeo,d=c&&isNaN(c.get(c.mapDimension("value"),s)),f=c&&c.getItemLayout(s);if(u||d||f&&f.showLabel){var v=u?a:s,_=void 0;(!c||s>=0)&&(_=o);var g=l?{normal:{align:"center",verticalAlign:"middle"}}:null;setLabelStyle(n,getLabelStatesModels(r),{labelFetcher:_,labelDataIndex:v,defaultText:a},g);var y=n.getTextContent();if(y&&(mapLabelRaw(y).ignore=y.ignore,n.textConfig&&l)){var b=n.getBoundingRect().clone();n.textConfig.layoutRect=b,n.textConfig.position=[(l[0]-b.x)/b.width*100+"%",(l[1]-b.y)/b.height*100+"%"]}n.disableLabelAnimation=!0}else n.removeTextContent(),n.removeTextConfig(),n.disableLabelAnimation=null}function resetEventTriggerForRegion(t,n,a,r,o,s){t.data?t.data.setItemGraphicEl(s,n):getECData(n).eventData={componentType:"geo",componentIndex:o.componentIndex,geoIndex:o.componentIndex,name:a,region:r&&r.option||{}}}function resetTooltipForRegion(t,n,a,r,o){t.data||setTooltipConfig({el:n,componentModel:o,itemName:a,itemTooltipOption:r.get("tooltip")})}function resetStateTriggerForRegion(t,n,a,r,o){n.highDownSilentOnTouch=!!o.get("selectedMode");var s=r.getModel("emphasis"),l=s.get("focus");return toggleHoverEmphasis(n,l,s.get("blurScope"),s.get("disabled")),t.isGeo&&enableComponentHighDownFeatures(n,o,a),l}function projectPolys(t,n,a){var r=[],o;function s(){o=[]}function l(){o.length&&(r.push(o),o=[])}var c=n({polygonStart:s,polygonEnd:l,lineStart:s,lineEnd:l,point:function(u,d){isFinite(u)&&isFinite(d)&&o.push([u,d])},sphere:function(){}});return!a&&c.polygonStart(),each$8(t,function(u){c.lineStart();for(var d=0;d<u.length;d++)c.point(u[d][0],u[d][1]);c.lineEnd()}),!a&&c.polygonEnd(),r}var MapView=function(t){__extends$1(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,r,o,s){if(!(s&&s.type==="mapToggleSelect"&&s.from===this.uid)){var l=this.group;if(l.removeAll(),!a.getHostGeoModel()){if(this._mapDraw&&s&&s.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),s&&s.type==="geoRoam"&&s.componentType==="series"&&s.seriesId===a.id){var c=this._mapDraw;c&&l.add(c.group)}else if(a.needsDrawMap){var c=this._mapDraw||new MapDraw(o);l.add(c.group),c.draw(a,r,o,this,s),this._mapDraw=c}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;a.get("showLegendSymbol")&&r.getComponent("legend")&&this._renderSymbols(a,r,o)}}},n.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},n.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},n.prototype._renderSymbols=function(a,r,o){var s=a.originalData,l=this.group;s.each(s.mapDimension("value"),function(c,u){if(!isNaN(c)){var d=s.getItemLayout(u);if(!(!d||!d.point)){var f=d.point,v=d.offset,_=new Circle({style:{fill:a.getData().getVisual("style").fill},shape:{cx:f[0]+v*9,cy:f[1],r:3},silent:!0,z2:8+(v?0:Z2_EMPHASIS_LIFT+1)});if(!v){var g=a.mainSeries.getData(),y=s.getName(u),b=g.indexOfName(y),T=s.getItemModel(u),S=T.getModel("label"),C=g.getItemGraphicEl(b);setLabelStyle(_,getLabelStatesModels(T),{labelFetcher:{getFormattedLabel:function(E,x){return a.getFormattedLabel(b,x)}},defaultText:y}),_.disableLabelAnimation=!0,S.get("position")||_.setTextConfig({position:"bottom"}),C.onHoverStateChange=function(E){setStatesFlag(_,E)}}l.add(_)}}})},n.type="map",n}(ChartView),MapSeries=function(t){__extends$1(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.needsDrawMap=!1,a.seriesGroup=[],a.getTooltipPosition=function(r){if(r!=null){var o=this.getData().getName(r),s=this.coordinateSystem,l=s.getRegion(o);return l&&s.dataToPoint(l.getCenter())}},a}return n.prototype.getInitialData=function(a){for(var r=createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry(makeSeriesEncodeForNameBased,this)}),o=createHashMap(),s=[],l=0,c=r.count();l<c;l++){var u=r.getName(l);o.set(u,l)}var d=geoSourceManager.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return each$8(d.regions,function(f){var v=f.name,_=o.get(v),g=f.properties&&f.properties.echartsStyle,y;_==null?(y={name:v},s.push(y)):y=r.getRawDataItem(_),g&&merge(y,g)}),r.appendData(s),r},n.prototype.getHostGeoModel=function(){if(decideCoordSysUsageKind(this).kind!==CoordinateSystemUsageKind.boxCoordSys)return this.getReferringComponents("geo",{useDefault:!1,enableAll:!1,enableNone:!1}).models[0]},n.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},n.prototype.getRawValue=function(a){var r=this.getData();return r.get(r.mapDimension("value"),a)},n.prototype.getRegionModel=function(a){var r=this.getData();return r.getItemModel(r.indexOfName(a))},n.prototype.formatTooltip=function(a,r,o){for(var s=this.getData(),l=this.getRawValue(a),c=s.getName(a),u=this.seriesGroup,d=[],f=0;f<u.length;f++){var v=u[f].originalData.indexOfName(c),_=s.mapDimension("value");isNaN(u[f].originalData.get(_,v))||d.push(u[f].name)}return createTooltipMarkup("section",{header:d.join(", "),noHeader:!d.length,blocks:[createTooltipMarkup("nameValue",{name:c,value:l})]})},n.prototype.setZoom=function(a){this.option.zoom=a},n.prototype.setCenter=function(a){this.option.center=a},n.prototype.getLegendIcon=function(a){var r=a.icon||"roundRect",o=createSymbol$1(r,0,0,a.itemWidth,a.itemHeight,a.itemStyle.fill);return o.setStyle(a.itemStyle),o.style.stroke="none",r.indexOf("empty")>-1&&(o.style.stroke=o.style.fill,o.style.fill=tokens.color.neutral00,o.style.lineWidth=2),o},n.type="series.map",n.dependencies=["geo"],n.layoutMode="box",n.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:tokens.color.tertiary},itemStyle:{borderWidth:.5,borderColor:tokens.color.border,areaColor:tokens.color.background},emphasis:{label:{show:!0,color:tokens.color.primary},itemStyle:{areaColor:tokens.color.highlight}},select:{label:{show:!0,color:tokens.color.primary},itemStyle:{color:tokens.color.highlight}},nameProperty:"name"},n}(SeriesModel);function dataStatistics(t,n){var a={};return each$8(t,function(r){r.each(r.mapDimension("value"),function(o,s){var l="ec-"+r.getName(s);a[l]=a[l]||[],isNaN(o)||a[l].push(o)})}),t[0].map(t[0].mapDimension("value"),function(r,o){for(var s="ec-"+t[0].getName(o),l=0,c=1/0,u=-1/0,d=a[s].length,f=0;f<d;f++)c=Math.min(c,a[s][f]),u=Math.max(u,a[s][f]),l+=a[s][f];var v;return n==="min"?v=c:n==="max"?v=u:n==="average"?v=l/d:v=l,d===0?NaN:v})}function mapDataStatistic(t){var n={};t.eachSeriesByType("map",function(a){var r=a.getHostGeoModel(),o=r?"o"+r.id:"i"+a.getMapType();(n[o]=n[o]||[]).push(a)}),each$8(n,function(a,r){for(var o=dataStatistics(map$1(a,function(l){return l.getData()}),a[0].get("mapValueCalculation")),s=0;s<a.length;s++)a[s].originalData=a[s].getData();for(var s=0;s<a.length;s++)a[s].seriesGroup=a,a[s].needsDrawMap=s===0&&!a[s].getHostGeoModel(),a[s].setData(o.cloneShallow()),a[s].mainSeries=a[0]})}function mapSymbolLayout(t){var n={};t.eachSeriesByType("map",function(a){var r=a.getMapType();if(!(a.getHostGeoModel()||n[r])){var o={};each$8(a.seriesGroup,function(l){var c=l.coordinateSystem,u=l.originalData;l.get("showLegendSymbol")&&t.getComponent("legend")&&u.each(u.mapDimension("value"),function(d,f){var v=u.getName(f),_=c.getRegion(v);if(!(!_||isNaN(d))){var g=o[v]||0,y=c.dataToPoint(_.getCenter());o[v]=g+1,u.setItemLayout(f,{point:y,offset:g})}})});var s=a.getData();s.each(function(l){var c=s.getName(l),u=s.getItemLayout(l)||{};u.showLabel=!o[c],s.setItemLayout(l,u)}),n[r]=!0}})}var v2ApplyTransform=applyTransform$1,View=function(t){__extends$1(n,t);function n(a,r){var o=t.call(this)||this;return o.type="view",o.dimensions=["x","y"],o._roamTransformable=new Transformable,o._rawTransformable=new Transformable,o.name=a,o._opt=r,o}return n.prototype.setBoundingRect=function(a,r,o,s){return this._rect=new BoundingRect(a,r,o,s),this._updateCenterAndZoom(),this._rect},n.prototype.getBoundingRect=function(){return this._rect},n.prototype.setViewRect=function(a,r,o,s){this._transformTo(a,r,o,s),this._viewRect=new BoundingRect(a,r,o,s)},n.prototype._transformTo=function(a,r,o,s){var l=this.getBoundingRect(),c=this._rawTransformable;c.transform=l.calculateTransform(new BoundingRect(a,r,o,s));var u=c.parent;c.parent=null,c.decomposeTransform(),c.parent=u,this._updateTransform()},n.prototype.setCenter=function(a){var r=this._opt;r&&r.api&&r.ecModel&&r.ecModel.getShallow("legacyViewCoordSysCenterBase")&&a&&(a=[parsePercent(a[0],r.api.getWidth()),parsePercent(a[1],r.api.getWidth())]),this._centerOption=clone$3(a),this._updateCenterAndZoom()},n.prototype.setZoom=function(a){this._zoom=clampByZoomLimit(a||1,this.zoomLimit),this._updateCenterAndZoom()},n.prototype.getDefaultCenter=function(){var a=this.getBoundingRect(),r=a.x+a.width/2,o=a.y+a.height/2;return[r,o]},n.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},n.prototype.getZoom=function(){return this._zoom||1},n.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},n.prototype._updateCenterAndZoom=function(){var a=this._centerOption,r=this._rect;a&&r&&(this._center=[parsePercent(a[0],r.width,r.x),parsePercent(a[1],r.height,r.y)]);var o=this._rawTransformable.getLocalTransform(),s=this._roamTransformable,l=this.getDefaultCenter(),c=this.getCenter(),u=this.getZoom();c=applyTransform$1([],c,o),l=applyTransform$1([],l,o),s.originX=c[0],s.originY=c[1],s.x=l[0]-c[0],s.y=l[1]-c[1],s.scaleX=s.scaleY=u,this._updateTransform()},n.prototype._updateTransform=function(){var a=this._roamTransformable,r=this._rawTransformable;r.parent=a,a.updateTransform(),r.updateTransform(),copy(this.transform||(this.transform=[]),r.transform||create()),this._rawTransform=r.getLocalTransform(),this.invTransform=this.invTransform||[],invert(this.invTransform,this.transform),this.decomposeTransform()},n.prototype.getTransformInfo=function(){var a=this._rawTransformable,r=this._roamTransformable,o=new Transformable;return o.transform=r.transform,o.decomposeTransform(),{roam:{x:o.x,y:o.y,scaleX:o.scaleX,scaleY:o.scaleY},raw:{x:a.x,y:a.y,scaleX:a.scaleX,scaleY:a.scaleY}}},n.prototype.getViewRect=function(){return this._viewRect},n.prototype.getViewRectAfterRoam=function(){var a=this.getBoundingRect().clone();return a.applyTransform(this.transform),a},n.prototype.dataToPoint=function(a,r,o){var s=r?this._rawTransform:this.transform;return o=o||[],s?v2ApplyTransform(o,a,s):copy$1(o,a)},n.prototype.pointToData=function(a,r,o){o=o||[];var s=this.invTransform;return s?v2ApplyTransform(o,a,s):(o[0]=a[0],o[1]=a[1],o)},n.prototype.convertToPixel=function(a,r,o){var s=getCoordSys$1(r);return s===this?s.dataToPoint(o):null},n.prototype.convertFromPixel=function(a,r,o){var s=getCoordSys$1(r);return s===this?s.pointToData(o):null},n.prototype.containPoint=function(a){return this.getViewRectAfterRoam().contain(a[0],a[1])},n.dimensions=["x","y"],n}(Transformable);function getCoordSys$1(t){var n=t.seriesModel;return n?n.coordinateSystem:null}var GEO_DEFAULT_PARAMS={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},geo2DDimensions=["lng","lat"],Geo=function(t){__extends$1(n,t);function n(a,r,o){var s=t.call(this,a,{api:o.api,ecModel:o.ecModel})||this;s.dimensions=geo2DDimensions,s.type="geo",s._nameCoordMap=createHashMap(),s.map=r;var l=o.projection,c=geoSourceManager.load(r,o.nameMap,o.nameProperty),u=geoSourceManager.getGeoResource(r);s.resourceType=u?u.type:null;var d=s.regions=c.regions,f=GEO_DEFAULT_PARAMS[u.type];s._regionsMap=c.regionsMap,s.regions=c.regions,s.projection=l;var v;if(l)for(var _=0;_<d.length;_++){var g=d[_].getBoundingRect(l);v=v||g.clone(),v.union(g)}else v=c.boundingRect;return s.setBoundingRect(v.x,v.y,v.width,v.height),s.aspectScale=l?1:retrieve2(o.aspectScale,f.aspectScale),s._invertLongitute=l?!1:f.invertLongitute,s}return n.prototype._transformTo=function(a,r,o,s){var l=this.getBoundingRect(),c=this._invertLongitute;l=l.clone(),c&&(l.y=-l.y-l.height);var u=this._rawTransformable;u.transform=l.calculateTransform(new BoundingRect(a,r,o,s));var d=u.parent;u.parent=null,u.decomposeTransform(),u.parent=d,c&&(u.scaleY=-u.scaleY),this._updateTransform()},n.prototype.getRegion=function(a){return this._regionsMap.get(a)},n.prototype.getRegionByCoord=function(a){for(var r=this.regions,o=0;o<r.length;o++){var s=r[o];if(s.type==="geoJSON"&&s.contain(a))return r[o]}},n.prototype.addGeoCoord=function(a,r){this._nameCoordMap.set(a,r)},n.prototype.getGeoCoord=function(a){var r=this._regionsMap.get(a);return this._nameCoordMap.get(a)||r&&r.getCenter()},n.prototype.dataToPoint=function(a,r,o){if(isString(a)&&(a=this.getGeoCoord(a)),a){var s=this.projection;return s&&(a=s.project(a)),a&&this.projectedToPoint(a,r,o)}},n.prototype.pointToData=function(a,r,o){var s=this.projection;return s&&(a=s.unproject(a)),a&&this.pointToProjected(a,o)},n.prototype.pointToProjected=function(a,r){return t.prototype.pointToData.call(this,a,0,r)},n.prototype.projectedToPoint=function(a,r,o){return t.prototype.dataToPoint.call(this,a,r,o)},n.prototype.convertToPixel=function(a,r,o){var s=getCoordSys(r);return s===this?s.dataToPoint(o):null},n.prototype.convertFromPixel=function(a,r,o){var s=getCoordSys(r);return s===this?s.pointToData(o):null},n}(View);mixin(Geo,View);function getCoordSys(t){var n=t.geoModel,a=t.seriesModel;return n?n.coordinateSystem:a?a.coordinateSystem||(a.getReferringComponents("geo",SINGLE_REFERRING).models[0]||{}).coordinateSystem:null}function resizeGeo(t,n){var a=t.get("boundingCoords");if(a!=null){var r=a[0],o=a[1];if(isFinite(r[0])&&isFinite(r[1])&&isFinite(o[0])&&isFinite(o[1])){var s=this.projection;if(s){var l=r[0],c=r[1],u=o[0],d=o[1];r=[1/0,1/0],o=[-1/0,-1/0];var f=function(A,N,M,R){for(var D=M-A,L=R-N,I=0;I<=100;I++){var $=I/100,V=s.project([A+D*$,N+L*$]);min$1(r,r,V),max$1(o,o,V)}};f(l,c,u,c),f(u,c,u,d),f(u,d,l,d),f(l,d,u,c)}this.setBoundingRect(r[0],r[1],o[0]-r[0],o[1]-r[1])}}var v=this.getBoundingRect(),_=t.get("layoutCenter"),g=t.get("layoutSize"),y=createBoxLayoutReference(t,n).refContainer,b=v.width/v.height*this.aspectScale,T=!1,S,C;_&&g&&(S=[parsePercent(_[0],y.width)+y.x,parsePercent(_[1],y.height)+y.y],C=parsePercent(g,Math.min(y.width,y.height)),!isNaN(S[0])&&!isNaN(S[1])&&!isNaN(C)&&(T=!0));var E;if(T)E={},b>1?(E.width=C,E.height=C/b):(E.height=C,E.width=C*b),E.y=S[1]-E.height/2,E.x=S[0]-E.width/2;else{var x=t.getBoxLayoutParams();x.aspect=b,E=getLayoutRect(x,y),E=applyPreserveAspect(t,E,b)}this.setViewRect(E.x,E.y,E.width,E.height),this.setCenter(t.get("center")),this.setZoom(t.get("zoom"))}function setGeoCoords(t,n){each$8(n.get("geoCoord"),function(a,r){t.addGeoCoord(r,a)})}var GeoCreator=function(){function t(){this.dimensions=geo2DDimensions}return t.prototype.create=function(n,a){var r=[];function o(l){return{nameProperty:l.get("nameProperty"),aspectScale:l.get("aspectScale"),projection:l.get("projection")}}n.eachComponent("geo",function(l,c){var u=l.get("map"),d=new Geo(u+c,u,extend({nameMap:l.get("nameMap"),api:a,ecModel:n},o(l)));d.zoomLimit=l.get("scaleLimit"),r.push(d),l.coordinateSystem=d,d.model=l,d.resize=resizeGeo,d.resize(l,a)}),n.eachSeries(function(l){injectCoordSysByOption({targetModel:l,coordSysType:"geo",coordSysProvider:function(){var c=l.subType==="map"?l.getHostGeoModel():l.getReferringComponents("geo",SINGLE_REFERRING).models[0];return c&&c.coordinateSystem},allowNotFound:!0})});var s={};return n.eachSeriesByType("map",function(l){if(!l.getHostGeoModel()){var c=l.getMapType();s[c]=s[c]||[],s[c].push(l)}}),each$8(s,function(l,c){var u=map$1(l,function(f){return f.get("nameMap")}),d=new Geo(c,c,extend({nameMap:mergeAll(u),api:a,ecModel:n},o(l[0])));d.zoomLimit=retrieve.apply(null,map$1(l,function(f){return f.get("scaleLimit")})),r.push(d),d.resize=resizeGeo,d.resize(l[0],a),each$8(l,function(f){f.coordinateSystem=d,setGeoCoords(d,f)})}),r},t.prototype.getFilledRegions=function(n,a,r,o){for(var s=(n||[]).slice(),l=createHashMap(),c=0;c<s.length;c++)l.set(s[c].name,s[c]);var u=geoSourceManager.load(a,r,o);return each$8(u.regions,function(d){var f=d.name,v=l.get(f),_=d.properties&&d.properties.echartsStyle;v||(v={name:f},s.push(v)),_&&merge(v,_)}),s},t}(),geoCreator=new GeoCreator,GeoModel=function(t){__extends$1(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(a,r,o){this.mergeDefaultAndTheme(a,o);var s=geoSourceManager.getGeoResource(a.map);if(s&&s.type==="geoJSON"){var l=a.itemStyle=a.itemStyle||{};"color"in l||(l.color=a.defaultItemStyleColor||tokens.color.backgroundTint)}defaultEmphasis(a,"label",["show"])},n.prototype.optionUpdated=function(){var a=this,r=this.option;r.regions=geoCreator.getFilledRegions(r.regions,r.map,r.nameMap,r.nameProperty);var o={};this._optionModelMap=reduce(r.regions||[],function(s,l){var c=l.name;return c&&(s.set(c,new Model(l,a,a.ecModel)),l.selected&&(o[c]=!0)),s},createHashMap()),r.selectedMap||(r.selectedMap=o)},n.prototype.getRegionModel=function(a){return this._optionModelMap.get(a)||new Model(null,this,this.ecModel)},n.prototype.getFormattedLabel=function(a,r){var o=this.getRegionModel(a),s=r==="normal"?o.get(["label","formatter"]):o.get(["emphasis","label","formatter"]),l={name:a};if(isFunction(s))return l.status=r,s(l);if(isString(s))return s.replace("{a}",a??"")},n.prototype.setZoom=function(a){this.option.zoom=a},n.prototype.setCenter=function(a){this.option.center=a},n.prototype.select=function(a){var r=this.option,o=r.selectedMode;if(o){o!=="multiple"&&(r.selectedMap=null);var s=r.selectedMap||(r.selectedMap={});s[a]=!0}},n.prototype.unSelect=function(a){var r=this.option.selectedMap;r&&(r[a]=!1)},n.prototype.toggleSelected=function(a){this[this.isSelected(a)?"unSelect":"select"](a)},n.prototype.isSelected=function(a){var r=this.option.selectedMap;return!!(r&&r[a])},n.type="geo",n.layoutMode="box",n.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:tokens.color.tertiary},itemStyle:{borderWidth:.5,borderColor:tokens.color.border},emphasis:{label:{show:!0,color:tokens.color.primary},itemStyle:{color:tokens.color.highlight}},select:{label:{show:!0,color:tokens.color.primary},itemStyle:{color:tokens.color.highlight}},regions:[]},n}(ComponentModel),GeoView=function(t){__extends$1(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.focusBlurEnabled=!0,a}return n.prototype.init=function(a,r){this._api=r},n.prototype.render=function(a,r,o,s){if(this._model=a,!a.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new MapDraw(o));var l=this._mapDraw;l.draw(a,r,o,this,s),l.group.on("click",this._handleRegionClick,this),l.group.silent=a.get("silent"),this.group.add(l.group),this.updateSelectStatus(a,r,o)},n.prototype._handleRegionClick=function(a){var r;findEventDispatcher(a.target,function(o){return(r=getECData(o).eventData)!=null},!0),r&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:r.name})},n.prototype.updateSelectStatus=function(a,r,o){var s=this;this._mapDraw.group.traverse(function(l){var c=getECData(l).eventData;if(c)return s._model.isSelected(c.name)?o.enterSelect(l):o.leaveSelect(l),!0})},n.prototype.findHighDownDispatchers=function(a){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(a,this._model)},n.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},n.type="geo",n}(ComponentView);function registerMap(t,n,a){geoSourceManager.registerMap(t,n,a)}function install$9(t){t.registerCoordinateSystem("geo",geoCreator),t.registerComponentModel(GeoModel),t.registerComponentView(GeoView),t.registerImpl("registerMap",registerMap),t.registerImpl("getMap",function(a){return geoSourceManager.getMapForUser(a)});function n(a,r){r.update="geo:updateSelectStatus",t.registerAction(r,function(o,s){var l={},c=[];return s.eachComponent({mainType:"geo",query:o},function(u){u[a](o.name);var d=u.coordinateSystem;each$8(d.regions,function(v){l[v.name]=u.isSelected(v.name)||!1});var f=[];each$8(l,function(v,_){l[_]&&f.push(_)}),c.push({geoIndex:u.componentIndex,name:f})}),{selected:l,allSelected:c,name:o.name}})}n("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),n("select",{type:"geoSelect",event:"geoselected"}),n("unSelect",{type:"geoUnSelect",event:"geounselected"}),t.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(a,r,o){var s=a.componentType;s||(a.geoId!=null?s="geo":a.seriesId!=null&&(s="series")),s||(s="series"),r.eachComponent({mainType:s,query:a},function(l){var c=l.coordinateSystem;if(c.type==="geo"){var u=updateCenterAndZoomInAction(c,a,l.get("scaleLimit"));l.setCenter&&l.setCenter(u.center),l.setZoom&&l.setZoom(u.zoom),s==="series"&&each$8(l.seriesGroup,function(d){d.setCenter(u.center),d.setZoom(u.zoom)})}})})}function install$8(t){use(install$9),t.registerChartView(MapView),t.registerSeriesModel(MapSeries),t.registerLayout(mapSymbolLayout),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,mapDataStatistic),createLegacyDataSelectAction("map",t.registerAction)}var each$5=each$8,isObject=isObject$3,CATEGORY_DEFAULT_VISUAL_INDEX=-1,VisualMapping=function(){function t(n){var a=n.mappingMethod,r=n.type,o=this.option=clone$3(n);this.type=r,this.mappingMethod=a,this._normalizeData=normalizers[a];var s=t.visualHandlers[r];this.applyVisual=s.applyVisual,this.getColorMapper=s.getColorMapper,this._normalizedToVisual=s._normalizedToVisual[a],a==="piecewise"?(normalizeVisualRange(o),preprocessForPiecewise(o)):a==="category"?o.categories?preprocessForSpecifiedCategory(o):normalizeVisualRange(o,!0):(assert(a!=="linear"||o.dataExtent),normalizeVisualRange(o))}return t.prototype.mapValueToVisual=function(n){var a=this._normalizeData(n);return this._normalizedToVisual(a,n)},t.prototype.getNormalizer=function(){return bind$1(this._normalizeData,this)},t.listVisualTypes=function(){return keys(t.visualHandlers)},t.isValidType=function(n){return t.visualHandlers.hasOwnProperty(n)},t.eachVisual=function(n,a,r){isObject$3(n)?each$8(n,a,r):a.call(r,n)},t.mapVisual=function(n,a,r){var o,s=isArray$1(n)?[]:isObject$3(n)?{}:(o=!0,null);return t.eachVisual(n,function(l,c){var u=a.call(r,l,c);o?s=u:s[c]=u}),s},t.retrieveVisuals=function(n){var a={},r;return n&&each$5(t.visualHandlers,function(o,s){n.hasOwnProperty(s)&&(a[s]=n[s],r=!0)}),r?a:null},t.prepareVisualTypes=function(n){if(isArray$1(n))n=n.slice();else if(isObject(n)){var a=[];each$5(n,function(r,o){a.push(o)}),n=a}else return[];return n.sort(function(r,o){return o==="color"&&r!=="color"&&r.indexOf("color")===0?1:-1}),n},t.dependsOn=function(n,a){return a==="color"?!!(n&&n.indexOf(a)===0):n===a},t.findPieceIndex=function(n,a,r){for(var o,s=1/0,l=0,c=a.length;l<c;l++){var u=a[l].value;if(u!=null){if(u===n||isString(u)&&u===n+"")return l;r&&_(u,l)}}for(var l=0,c=a.length;l<c;l++){var d=a[l],f=d.interval,v=d.close;if(f){if(f[0]===-1/0){if(littleThan(v[1],n,f[1]))return l}else if(f[1]===1/0){if(littleThan(v[0],f[0],n))return l}else if(littleThan(v[0],f[0],n)&&littleThan(v[1],n,f[1]))return l;r&&_(f[0],l),r&&_(f[1],l)}}if(r)return n===1/0?a.length-1:n===-1/0?0:o;function _(g,y){var b=Math.abs(g-n);b<s&&(s=b,o=y)}},t.visualHandlers={color:{applyVisual:makeApplyVisual("color"),getColorMapper:function(){var n=this.option;return bind$1(n.mappingMethod==="category"?function(a,r){return!r&&(a=this._normalizeData(a)),doMapCategory.call(this,a)}:function(a,r,o){var s=!!o;return!r&&(a=this._normalizeData(a)),o=fastLerp(a,n.parsedVisual,o),s?o:stringify(o,"rgba")},this)},_normalizedToVisual:{linear:function(n){return stringify(fastLerp(n,this.option.parsedVisual),"rgba")},category:doMapCategory,piecewise:function(n,a){var r=getSpecifiedVisual.call(this,a);return r==null&&(r=stringify(fastLerp(n,this.option.parsedVisual),"rgba")),r},fixed:doMapFixed}},colorHue:makePartialColorVisualHandler(function(n,a){return modifyHSL(n,a)}),colorSaturation:makePartialColorVisualHandler(function(n,a){return modifyHSL(n,null,a)}),colorLightness:makePartialColorVisualHandler(function(n,a){return modifyHSL(n,null,null,a)}),colorAlpha:makePartialColorVisualHandler(function(n,a){return modifyAlpha(n,a)}),decal:{applyVisual:makeApplyVisual("decal"),_normalizedToVisual:{linear:null,category:doMapCategory,piecewise:null,fixed:null}},opacity:{applyVisual:makeApplyVisual("opacity"),_normalizedToVisual:createNormalizedToNumericVisual([0,1])},liftZ:{applyVisual:makeApplyVisual("liftZ"),_normalizedToVisual:{linear:doMapFixed,category:doMapFixed,piecewise:doMapFixed,fixed:doMapFixed}},symbol:{applyVisual:function(n,a,r){var o=this.mapValueToVisual(n);r("symbol",o)},_normalizedToVisual:{linear:doMapToArray,category:doMapCategory,piecewise:function(n,a){var r=getSpecifiedVisual.call(this,a);return r==null&&(r=doMapToArray.call(this,n)),r},fixed:doMapFixed}},symbolSize:{applyVisual:makeApplyVisual("symbolSize"),_normalizedToVisual:createNormalizedToNumericVisual([0,1])}},t}();function preprocessForPiecewise(t){var n=t.pieceList;t.hasSpecialVisual=!1,each$8(n,function(a,r){a.originIndex=r,a.visual!=null&&(t.hasSpecialVisual=!0)})}function preprocessForSpecifiedCategory(t){var n=t.categories,a=t.categoryMap={},r=t.visual;if(each$5(n,function(l,c){a[l]=c}),!isArray$1(r)){var o=[];isObject$3(r)?each$5(r,function(l,c){var u=a[c];o[u??CATEGORY_DEFAULT_VISUAL_INDEX]=l}):o[CATEGORY_DEFAULT_VISUAL_INDEX]=r,r=setVisualToOption(t,o)}for(var s=n.length-1;s>=0;s--)r[s]==null&&(delete a[n[s]],n.pop())}function normalizeVisualRange(t,n){var a=t.visual,r=[];isObject$3(a)?each$5(a,function(s){r.push(s)}):a!=null&&r.push(a);var o={color:1,symbol:1};!n&&r.length===1&&!o.hasOwnProperty(t.type)&&(r[1]=r[0]),setVisualToOption(t,r)}function makePartialColorVisualHandler(t){return{applyVisual:function(n,a,r){var o=this.mapValueToVisual(n);r("color",t(a("color"),o))},_normalizedToVisual:createNormalizedToNumericVisual([0,1])}}function doMapToArray(t){var n=this.option.visual;return n[Math.round(linearMap$2(t,[0,1],[0,n.length-1],!0))]||{}}function makeApplyVisual(t){return function(n,a,r){r(t,this.mapValueToVisual(n))}}function doMapCategory(t){var n=this.option.visual;return n[this.option.loop&&t!==CATEGORY_DEFAULT_VISUAL_INDEX?t%n.length:t]}function doMapFixed(){return this.option.visual[0]}function createNormalizedToNumericVisual(t){return{linear:function(n){return linearMap$2(n,t,this.option.visual,!0)},category:doMapCategory,piecewise:function(n,a){var r=getSpecifiedVisual.call(this,a);return r==null&&(r=linearMap$2(n,t,this.option.visual,!0)),r},fixed:doMapFixed}}function getSpecifiedVisual(t){var n=this.option,a=n.pieceList;if(n.hasSpecialVisual){var r=VisualMapping.findPieceIndex(t,a),o=a[r];if(o&&o.visual)return o.visual[this.type]}}function setVisualToOption(t,n){return t.visual=n,t.type==="color"&&(t.parsedVisual=map$1(n,function(a){var r=parse(a);return r||[0,0,0,1]})),n}var normalizers={linear:function(t){return linearMap$2(t,this.option.dataExtent,[0,1],!0)},piecewise:function(t){var n=this.option.pieceList,a=VisualMapping.findPieceIndex(t,n,!0);if(a!=null)return linearMap$2(a,[0,n.length-1],[0,1],!0)},category:function(t){var n=this.option.categories?this.option.categoryMap[t]:t;return n??CATEGORY_DEFAULT_VISUAL_INDEX},fixed:noop};function littleThan(t,n,a){return t?n<=a:n<a}function sliderMove(t,n,a,r,o,s){t=t||0;var l=a[1]-a[0];if(o!=null&&(o=restrict(o,[0,l])),s!=null&&(s=Math.max(s,o??0)),r==="all"){var c=Math.abs(n[1]-n[0]);c=restrict(c,[0,l]),o=s=restrict(c,[o,s]),r=0}n[0]=restrict(n[0],a),n[1]=restrict(n[1],a);var u=getSpanSign(n,r);n[r]+=t;var d=o||0,f=a.slice();u.sign<0?f[0]+=d:f[1]-=d,n[r]=restrict(n[r],f);var v;return v=getSpanSign(n,r),o!=null&&(v.sign!==u.sign||v.span<o)&&(n[1-r]=n[r]+u.sign*o),v=getSpanSign(n,r),s!=null&&v.span>s&&(n[1-r]=n[r]+v.sign*s),n}function getSpanSign(t,n){var a=t[n]-t[1-n];return{span:Math.abs(a),sign:a>0?-1:a<0?1:n?-1:1}}function restrict(t,n){return Math.min(n[1]!=null?n[1]:1/0,Math.max(n[0]!=null?n[0]:-1/0,t))}function updateRipplePath(t,n){var a=n.rippleEffectColor||n.color;t.eachChild(function(r){r.attr({z:n.z,zlevel:n.zlevel,style:{stroke:n.brushType==="stroke"?a:null,fill:n.brushType==="fill"?a:null}})})}var EffectSymbol=function(t){__extends$1(n,t);function n(a,r){var o=t.call(this)||this,s=new Symbol$1(a,r),l=new Group;return o.add(s),o.add(l),o.updateData(a,r),o}return n.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},n.prototype.startEffectAnimation=function(a){for(var r=a.symbolType,o=a.color,s=a.rippleNumber,l=this.childAt(1),c=0;c<s;c++){var u=createSymbol$1(r,-1,-1,2,2,o);u.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var d=-c/s*a.period+a.effectOffset;u.animate("",!0).when(a.period,{scaleX:a.rippleScale/2,scaleY:a.rippleScale/2}).delay(d).start(),u.animateStyle(!0).when(a.period,{opacity:0}).delay(d).start(),l.add(u)}updateRipplePath(l,a)},n.prototype.updateEffectAnimation=function(a){for(var r=this._effectCfg,o=this.childAt(1),s=["symbolType","period","rippleScale","rippleNumber"],l=0;l<s.length;l++){var c=s[l];if(r[c]!==a[c]){this.stopEffectAnimation(),this.startEffectAnimation(a);return}}updateRipplePath(o,a)},n.prototype.highlight=function(){enterEmphasis(this)},n.prototype.downplay=function(){leaveEmphasis(this)},n.prototype.getSymbolType=function(){var a=this.childAt(0);return a&&a.getSymbolType()},n.prototype.updateData=function(a,r){var o=this,s=a.hostModel;this.childAt(0).updateData(a,r);var l=this.childAt(1),c=a.getItemModel(r),u=a.getItemVisual(r,"symbol"),d=normalizeSymbolSize(a.getItemVisual(r,"symbolSize")),f=a.getItemVisual(r,"style"),v=f&&f.fill,_=c.getModel("emphasis");l.setScale(d),l.traverse(function(T){T.setStyle("fill",v)});var g=normalizeSymbolOffset(a.getItemVisual(r,"symbolOffset"),d);g&&(l.x=g[0],l.y=g[1]);var y=a.getItemVisual(r,"symbolRotate");l.rotation=(y||0)*Math.PI/180||0;var b={};b.showEffectOn=s.get("showEffectOn"),b.rippleScale=c.get(["rippleEffect","scale"]),b.brushType=c.get(["rippleEffect","brushType"]),b.period=c.get(["rippleEffect","period"])*1e3,b.effectOffset=r/a.count(),b.z=s.getShallow("z")||0,b.zlevel=s.getShallow("zlevel")||0,b.symbolType=u,b.color=v,b.rippleEffectColor=c.get(["rippleEffect","color"]),b.rippleNumber=c.get(["rippleEffect","number"]),b.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(b):this.startEffectAnimation(b),this._effectCfg=b):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(T){T==="emphasis"?b.showEffectOn!=="render"&&o.startEffectAnimation(b):T==="normal"&&b.showEffectOn!=="render"&&o.stopEffectAnimation()}),this._effectCfg=b,toggleHoverEmphasis(this,_.get("focus"),_.get("blurScope"),_.get("disabled"))},n.prototype.fadeOut=function(a){a&&a()},n}(Group),EffectScatterView=function(t){__extends$1(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(){this._symbolDraw=new SymbolDraw(EffectSymbol)},n.prototype.render=function(a,r,o){var s=a.getData(),l=this._symbolDraw;l.updateData(s,{clipShape:this._getClipShape(a)}),this.group.add(l.group)},n.prototype._getClipShape=function(a){var r=a.coordinateSystem,o=r&&r.getArea&&r.getArea();return a.get("clip",!0)?o:null},n.prototype.updateTransform=function(a,r,o){var s=a.getData();this.group.dirty();var l=pointsLayout("").reset(a,r,o);l.progress&&l.progress({start:0,end:s.count(),count:s.count()},s),this._symbolDraw.updateLayout()},n.prototype._updateGroupTransform=function(a){var r=a.coordinateSystem;r&&r.getRoamTransform&&(this.group.transform=clone$1(r.getRoamTransform()),this.group.decomposeTransform())},n.prototype.remove=function(a,r){this._symbolDraw&&this._symbolDraw.remove(!0)},n.type="effectScatter",n}(ChartView),EffectScatterSeriesModel=function(t){__extends$1(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.hasSymbolVisual=!0,a}return n.prototype.getInitialData=function(a,r){return createSeriesData(null,this,{useEncodeDefaulter:!0})},n.prototype.brushSelector=function(a,r,o){return o.point(r.getItemLayout(a))},n.type="series.effectScatter",n.dependencies=["grid","polar"],n.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},n}(SeriesModel);function install$7(t){t.registerChartView(EffectScatterView),t.registerSeriesModel(EffectScatterSeriesModel),t.registerLayout(pointsLayout("effectScatter"))}var inner$2=makeInner(),clone=clone$3,bind=bind$1,BaseAxisPointer=function(){function t(){this._dragging=!1,this.animationThreshold=15}return t.prototype.render=function(n,a,r,o){var s=a.get("value"),l=a.get("status");if(this._axisModel=n,this._axisPointerModel=a,this._api=r,!(!o&&this._lastValue===s&&this._lastStatus===l)){this._lastValue=s,this._lastStatus=l;var c=this._group,u=this._handle;if(!l||l==="hide"){c&&c.hide(),u&&u.hide();return}c&&c.show(),u&&u.show();var d={};this.makeElOption(d,s,n,a,r);var f=d.graphicKey;f!==this._lastGraphicKey&&this.clear(r),this._lastGraphicKey=f;var v=this._moveAnimation=this.determineAnimation(n,a);if(!c)c=this._group=new Group,this.createPointerEl(c,d,n,a),this.createLabelEl(c,d,n,a),r.getZr().add(c);else{var _=curry(updateProps,a,v);this.updatePointerEl(c,d,_),this.updateLabelEl(c,d,_,a)}updateMandatoryProps(c,a,!0),this._renderHandle(s)}},t.prototype.remove=function(n){this.clear(n)},t.prototype.dispose=function(n){this.clear(n)},t.prototype.determineAnimation=function(n,a){var r=a.get("animation"),o=n.axis,s=o.type==="category",l=a.get("snap");if(!l&&!s)return!1;if(r==="auto"||r==null){var c=this.animationThreshold;if(s&&o.getBandWidth()>c)return!0;if(l){var u=getAxisInfo(n).seriesDataCount,d=o.getExtent();return Math.abs(d[0]-d[1])/u>c}return!1}return r===!0},t.prototype.makeElOption=function(n,a,r,o,s){},t.prototype.createPointerEl=function(n,a,r,o){var s=a.pointer;if(s){var l=inner$2(n).pointerEl=new graphic[s.type](clone(a.pointer));n.add(l)}},t.prototype.createLabelEl=function(n,a,r,o){if(a.label){var s=inner$2(n).labelEl=new ZRText(clone(a.label));n.add(s),updateLabelShowHide(s,o)}},t.prototype.updatePointerEl=function(n,a,r){var o=inner$2(n).pointerEl;o&&a.pointer&&(o.setStyle(a.pointer.style),r(o,{shape:a.pointer.shape}))},t.prototype.updateLabelEl=function(n,a,r,o){var s=inner$2(n).labelEl;s&&(s.setStyle(a.label.style),r(s,{x:a.label.x,y:a.label.y}),updateLabelShowHide(s,o))},t.prototype._renderHandle=function(n){if(!(this._dragging||!this.updateHandleTransform)){var a=this._axisPointerModel,r=this._api.getZr(),o=this._handle,s=a.getModel("handle"),l=a.get("status");if(!s.get("show")||!l||l==="hide"){o&&r.remove(o),this._handle=null;return}var c;this._handle||(c=!0,o=this._handle=createIcon(s.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(d){stop(d.event)},onmousedown:bind(this._onHandleDragMove,this,0,0),drift:bind(this._onHandleDragMove,this),ondragend:bind(this._onHandleDragEnd,this)}),r.add(o)),updateMandatoryProps(o,a,!1),o.setStyle(s.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var u=s.get("size");isArray$1(u)||(u=[u,u]),o.scaleX=u[0]/2,o.scaleY=u[1]/2,createOrUpdate(this,"_doDispatchAxisPointer",s.get("throttle")||0,"fixRate"),this._moveHandleToValue(n,c)}},t.prototype._moveHandleToValue=function(n,a){updateProps(this._axisPointerModel,!a&&this._moveAnimation,this._handle,getHandleTransProps(this.getHandleTransform(n,this._axisModel,this._axisPointerModel)))},t.prototype._onHandleDragMove=function(n,a){var r=this._handle;if(r){this._dragging=!0;var o=this.updateHandleTransform(getHandleTransProps(r),[n,a],this._axisModel,this._axisPointerModel);this._payloadInfo=o,r.stopAnimation(),r.attr(getHandleTransProps(o)),inner$2(r).lastProp=null,this._doDispatchAxisPointer()}},t.prototype._doDispatchAxisPointer=function(){var n=this._handle;if(n){var a=this._payloadInfo,r=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:a.cursorPoint[0],y:a.cursorPoint[1],tooltipOption:a.tooltipOption,axesInfo:[{axisDim:r.axis.dim,axisIndex:r.componentIndex}]})}},t.prototype._onHandleDragEnd=function(){this._dragging=!1;var n=this._handle;if(n){var a=this._axisPointerModel.get("value");this._moveHandleToValue(a),this._api.dispatchAction({type:"hideTip"})}},t.prototype.clear=function(n){this._lastValue=null,this._lastStatus=null;var a=n.getZr(),r=this._group,o=this._handle;a&&r&&(this._lastGraphicKey=null,r&&a.remove(r),o&&a.remove(o),this._group=null,this._handle=null,this._payloadInfo=null),clear(this,"_doDispatchAxisPointer")},t.prototype.doClear=function(){},t.prototype.buildLabel=function(n,a,r){return r=r||0,{x:n[r],y:n[1-r],width:a[r],height:a[1-r]}},t}();function updateProps(t,n,a,r){propsEqual(inner$2(a).lastProp,r)||(inner$2(a).lastProp=r,n?updateProps$1(a,r,t):(a.stopAnimation(),a.attr(r)))}function propsEqual(t,n){if(isObject$3(t)&&isObject$3(n)){var a=!0;return each$8(n,function(r,o){a=a&&propsEqual(t[o],r)}),!!a}else return t===n}function updateLabelShowHide(t,n){t[n.get(["label","show"])?"show":"hide"]()}function getHandleTransProps(t){return{x:t.x||0,y:t.y||0,rotation:t.rotation||0}}function updateMandatoryProps(t,n,a){var r=n.get("z"),o=n.get("zlevel");t&&t.traverse(function(s){s.type!=="group"&&(r!=null&&(s.z=r),o!=null&&(s.zlevel=o),s.silent=a)})}function buildElStyle(t){var n=t.get("type"),a=t.getModel(n+"Style"),r;return n==="line"?(r=a.getLineStyle(),r.fill=null):n==="shadow"&&(r=a.getAreaStyle(),r.stroke=null),r}function buildLabelElOption(t,n,a,r,o){var s=a.get("value"),l=getValueLabel(s,n.axis,n.ecModel,a.get("seriesDataIndices"),{precision:a.get(["label","precision"]),formatter:a.get(["label","formatter"])}),c=a.getModel("label"),u=normalizeCssArray(c.get("padding")||0),d=c.getFont(),f=getBoundingRect(l,d),v=o.position,_=f.width+u[1]+u[3],g=f.height+u[0]+u[2],y=o.align;y==="right"&&(v[0]-=_),y==="center"&&(v[0]-=_/2);var b=o.verticalAlign;b==="bottom"&&(v[1]-=g),b==="middle"&&(v[1]-=g/2),confineInContainer(v,_,g,r);var T=c.get("backgroundColor");(!T||T==="auto")&&(T=n.get(["axisLine","lineStyle","color"])),t.label={x:v[0],y:v[1],style:createTextStyle(c,{text:l,font:d,fill:c.getTextColor(),padding:u,backgroundColor:T}),z2:10}}function confineInContainer(t,n,a,r){var o=r.getWidth(),s=r.getHeight();t[0]=Math.min(t[0]+n,o)-n,t[1]=Math.min(t[1]+a,s)-a,t[0]=Math.max(t[0],0),t[1]=Math.max(t[1],0)}function getValueLabel(t,n,a,r,o){t=n.scale.parse(t);var s=n.scale.getLabel({value:t},{precision:o.precision}),l=o.formatter;if(l){var c={value:getAxisRawValue(n,{value:t}),axisDimension:n.dim,axisIndex:n.index,seriesData:[]};each$8(r,function(u){var d=a.getSeriesByIndex(u.seriesIndex),f=u.dataIndexInside,v=d&&d.getDataParams(f);v&&c.seriesData.push(v)}),isString(l)?s=l.replace("{value}",s):isFunction(l)&&(s=l(c))}return s}function getTransformedPosition(t,n,a){var r=create();return rotate(r,r,a.rotation),translate(r,r,a.position),applyTransform([t.dataToCoord(n),(a.labelOffset||0)+(a.labelDirection||1)*(a.labelMargin||0)],r)}function buildCartesianSingleLabelElOption(t,n,a,r,o,s){var l=AxisBuilder.innerTextLayout(a.rotation,0,a.labelDirection);a.labelMargin=o.get(["label","margin"]),buildLabelElOption(n,r,o,s,{position:getTransformedPosition(r.axis,t,a),align:l.textAlign,verticalAlign:l.textVerticalAlign})}function makeLineShape(t,n,a){return a=a||0,{x1:t[a],y1:t[1-a],x2:n[a],y2:n[1-a]}}function makeRectShape(t,n,a){return a=a||0,{x:t[a],y:t[1-a],width:n[a],height:n[1-a]}}var CartesianAxisPointer=function(t){__extends$1(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.makeElOption=function(a,r,o,s,l){var c=o.axis,u=c.grid,d=s.get("type"),f=getCartesian(u,c).getOtherAxis(c).getGlobalExtent(),v=c.toGlobalCoord(c.dataToCoord(r,!0));if(d&&d!=="none"){var _=buildElStyle(s),g=pointerShapeBuilder[d](c,v,f);g.style=_,a.graphicKey=g.type,a.pointer=g}var y=layout(u.getRect(),o);buildCartesianSingleLabelElOption(r,a,y,o,s,l)},n.prototype.getHandleTransform=function(a,r,o){var s=layout(r.axis.grid.getRect(),r,{labelInside:!1});s.labelMargin=o.get(["handle","margin"]);var l=getTransformedPosition(r.axis,a,s);return{x:l[0],y:l[1],rotation:s.rotation+(s.labelDirection<0?Math.PI:0)}},n.prototype.updateHandleTransform=function(a,r,o,s){var l=o.axis,c=l.grid,u=l.getGlobalExtent(!0),d=getCartesian(c,l).getOtherAxis(l).getGlobalExtent(),f=l.dim==="x"?0:1,v=[a.x,a.y];v[f]+=r[f],v[f]=Math.min(u[1],v[f]),v[f]=Math.max(u[0],v[f]);var _=(d[1]+d[0])/2,g=[_,_];g[f]=v[f];var y=[{verticalAlign:"middle"},{align:"center"}];return{x:v[0],y:v[1],rotation:a.rotation,cursorPoint:g,tooltipOption:y[f]}},n}(BaseAxisPointer);function getCartesian(t,n){var a={};return a[n.dim+"AxisIndex"]=n.index,t.getCartesian(a)}var pointerShapeBuilder={line:function(t,n,a){var r=makeLineShape([n,a[0]],[n,a[1]],getAxisDimIndex(t));return{type:"Line",subPixelOptimize:!0,shape:r}},shadow:function(t,n,a){var r=Math.max(1,t.getBandWidth()),o=a[1]-a[0];return{type:"Rect",shape:makeRectShape([n-r/2,a[0]],[r,o],getAxisDimIndex(t))}}};function getAxisDimIndex(t){return t.dim==="x"?0:1}var AxisPointerModel=function(t){__extends$1(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="axisPointer",n.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:tokens.color.border,width:1,type:"dashed"},shadowStyle:{color:tokens.color.shadowTint},label:{show:!0,formatter:null,precision:"auto",margin:3,color:tokens.color.neutral00,padding:[5,7,5,7],backgroundColor:tokens.color.accent60,borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:tokens.color.accent40,throttle:40}},n}(ComponentModel),inner$1=makeInner(),each$4=each$8;function register$1(t,n,a){if(!env.node){var r=n.getZr();inner$1(r).records||(inner$1(r).records={}),initGlobalListeners(r,n);var o=inner$1(r).records[t]||(inner$1(r).records[t]={});o.handler=a}}function initGlobalListeners(t,n){if(inner$1(t).initialized)return;inner$1(t).initialized=!0,a("click",curry(doEnter,"click")),a("mousemove",curry(doEnter,"mousemove")),a("globalout",onLeave);function a(r,o){t.on(r,function(s){var l=makeDispatchAction$1(n);each$4(inner$1(t).records,function(c){c&&o(c,s,l.dispatchAction)}),dispatchTooltipFinally(l.pendings,n)})}}function dispatchTooltipFinally(t,n){var a=t.showTip.length,r=t.hideTip.length,o;a?o=t.showTip[a-1]:r&&(o=t.hideTip[r-1]),o&&(o.dispatchAction=null,n.dispatchAction(o))}function onLeave(t,n,a){t.handler("leave",null,a)}function doEnter(t,n,a,r){n.handler(t,a,r)}function makeDispatchAction$1(t){var n={showTip:[],hideTip:[]},a=function(r){var o=n[r.type];o?o.push(r):(r.dispatchAction=a,t.dispatchAction(r))};return{dispatchAction:a,pendings:n}}function unregister(t,n){if(!env.node){var a=n.getZr(),r=(inner$1(a).records||{})[t];r&&(inner$1(a).records[t]=null)}}var AxisPointerView=function(t){__extends$1(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,r,o){var s=r.getComponent("tooltip"),l=a.get("triggerOn")||s&&s.get("triggerOn")||"mousemove|click";register$1("axisPointer",o,function(c,u,d){l!=="none"&&(c==="leave"||l.indexOf(c)>=0)&&d({type:"updateAxisPointer",currTrigger:c,x:u&&u.offsetX,y:u&&u.offsetY})})},n.prototype.remove=function(a,r){unregister("axisPointer",r)},n.prototype.dispose=function(a,r){unregister("axisPointer",r)},n.type="axisPointer",n}(ComponentView);function findPointFromSeries(t,n){var a=[],r=t.seriesIndex,o;if(r==null||!(o=n.getSeriesByIndex(r)))return{point:[]};var s=o.getData(),l=queryDataIndex(s,t);if(l==null||l<0||isArray$1(l))return{point:[]};var c=s.getItemGraphicEl(l),u=o.coordinateSystem;if(o.getTooltipPosition)a=o.getTooltipPosition(l)||[];else if(u&&u.dataToPoint)if(t.isStacked){var d=u.getBaseAxis(),f=u.getOtherAxis(d),v=f.dim,_=d.dim,g=v==="x"||v==="radius"?1:0,y=s.mapDimension(_),b=[];b[g]=s.get(y,l),b[1-g]=s.get(s.getCalculationInfo("stackResultDimension"),l),a=u.dataToPoint(b)||[]}else a=u.dataToPoint(s.getValues(map$1(u.dimensions,function(S){return s.mapDimension(S)}),l))||[];else if(c){var T=c.getBoundingRect().clone();T.applyTransform(c.transform),a=[T.x+T.width/2,T.y+T.height/2]}return{point:a,el:c}}var inner=makeInner();function axisTrigger(t,n,a){var r=t.currTrigger,o=[t.x,t.y],s=t,l=t.dispatchAction||bind$1(a.dispatchAction,a),c=n.getComponent("axisPointer").coordSysAxesInfo;if(c){illegalPoint(o)&&(o=findPointFromSeries({seriesIndex:s.seriesIndex,dataIndex:s.dataIndex},n).point);var u=illegalPoint(o),d=s.axesInfo,f=c.axesInfo,v=r==="leave"||illegalPoint(o),_={},g={},y={list:[],map:{}},b={showPointer:curry(showPointer,g),showTooltip:curry(showTooltip,y)};each$8(c.coordSysMap,function(S,C){var E=u||S.containPoint(o);each$8(c.coordSysAxesInfo[C],function(x,A){var N=x.axis,M=findInputAxisInfo(d,x);if(!v&&E&&(!d||M)){var R=M&&M.value;R==null&&!u&&(R=N.pointToData(o)),R!=null&&processOnAxis(x,R,b,!1,_)}})});var T={};return each$8(f,function(S,C){var E=S.linkGroup;E&&!g[C]&&each$8(E.axesInfo,function(x,A){var N=g[A];if(x!==S&&N){var M=N.value;E.mapper&&(M=S.axis.scale.parse(E.mapper(M,makeMapperParam(x),makeMapperParam(S)))),T[S.key]=M}})}),each$8(T,function(S,C){processOnAxis(f[C],S,b,!0,_)}),updateModelActually(g,f,_),dispatchTooltipActually(y,o,t,l),dispatchHighDownActually(f,l,a),_}}function processOnAxis(t,n,a,r,o){var s=t.axis;if(!(s.scale.isBlank()||!s.containData(n))){if(!t.involveSeries){a.showPointer(t,n);return}var l=buildPayloadsBySeries(n,t),c=l.payloadBatch,u=l.snapToValue;c[0]&&o.seriesIndex==null&&extend(o,c[0]),!r&&t.snap&&s.containData(u)&&u!=null&&(n=u),a.showPointer(t,n,c),a.showTooltip(t,l,u)}}function buildPayloadsBySeries(t,n){var a=n.axis,r=a.dim,o=t,s=[],l=Number.MAX_VALUE,c=-1;return each$8(n.seriesModels,function(u,d){var f=u.getData().mapDimensionsAll(r),v,_;if(u.getAxisTooltipData){var g=u.getAxisTooltipData(f,t,a);_=g.dataIndices,v=g.nestestValue}else{if(_=u.indicesOfNearest(r,f[0],t,a.type==="category"?.5:null),!_.length)return;v=u.getData().get(f[0],_[0])}if(!(v==null||!isFinite(v))){var y=t-v,b=Math.abs(y);b<=l&&((b<l||y>=0&&c<0)&&(l=b,c=y,o=v,s.length=0),each$8(_,function(T){s.push({seriesIndex:u.seriesIndex,dataIndexInside:T,dataIndex:u.getData().getRawIndex(T)})}))}}),{payloadBatch:s,snapToValue:o}}function showPointer(t,n,a,r){t[n.key]={value:a,payloadBatch:r}}function showTooltip(t,n,a,r){var o=a.payloadBatch,s=n.axis,l=s.model,c=n.axisPointerModel;if(!(!n.triggerTooltip||!o.length)){var u=n.coordSys.model,d=makeKey(u),f=t.map[d];f||(f=t.map[d]={coordSysId:u.id,coordSysIndex:u.componentIndex,coordSysType:u.type,coordSysMainType:u.mainType,dataByAxis:[]},t.list.push(f)),f.dataByAxis.push({axisDim:s.dim,axisIndex:l.componentIndex,axisType:l.type,axisId:l.id,value:r,valueLabelOpt:{precision:c.get(["label","precision"]),formatter:c.get(["label","formatter"])},seriesDataIndices:o.slice()})}}function updateModelActually(t,n,a){var r=a.axesInfo=[];each$8(n,function(o,s){var l=o.axisPointerModel.option,c=t[s];c?(!o.useHandle&&(l.status="show"),l.value=c.value,l.seriesDataIndices=(c.payloadBatch||[]).slice()):!o.useHandle&&(l.status="hide"),l.status==="show"&&r.push({axisDim:o.axis.dim,axisIndex:o.axis.model.componentIndex,value:l.value})})}function dispatchTooltipActually(t,n,a,r){if(illegalPoint(n)||!t.list.length){r({type:"hideTip"});return}var o=((t.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};r({type:"showTip",escapeConnect:!0,x:n[0],y:n[1],tooltipOption:a.tooltipOption,position:a.position,dataIndexInside:o.dataIndexInside,dataIndex:o.dataIndex,seriesIndex:o.seriesIndex,dataByCoordSys:t.list})}function dispatchHighDownActually(t,n,a){var r=a.getZr(),o="axisPointerLastHighlights",s=inner(r)[o]||{},l=inner(r)[o]={};each$8(t,function(d,f){var v=d.axisPointerModel.option;v.status==="show"&&d.triggerEmphasis&&each$8(v.seriesDataIndices,function(_){var g=_.seriesIndex+" | "+_.dataIndex;l[g]=_})});var c=[],u=[];each$8(s,function(d,f){!l[f]&&u.push(d)}),each$8(l,function(d,f){!s[f]&&c.push(d)}),u.length&&a.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:u}),c.length&&a.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:c})}function findInputAxisInfo(t,n){for(var a=0;a<(t||[]).length;a++){var r=t[a];if(n.axis.dim===r.axisDim&&n.axis.model.componentIndex===r.axisIndex)return r}}function makeMapperParam(t){var n=t.axis.model,a={},r=a.axisDim=t.axis.dim;return a.axisIndex=a[r+"AxisIndex"]=n.componentIndex,a.axisName=a[r+"AxisName"]=n.name,a.axisId=a[r+"AxisId"]=n.id,a}function illegalPoint(t){return!t||t[0]==null||isNaN(t[0])||t[1]==null||isNaN(t[1])}function install$6(t){AxisView.registerAxisPointerClass("CartesianAxisPointer",CartesianAxisPointer),t.registerComponentModel(AxisPointerModel),t.registerComponentView(AxisPointerView),t.registerPreprocessor(function(n){if(n){(!n.axisPointer||n.axisPointer.length===0)&&(n.axisPointer={});var a=n.axisPointer.link;a&&!isArray$1(a)&&(n.axisPointer.link=[a])}}),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,function(n,a){n.getComponent("axisPointer").coordSysAxesInfo=collect(n,a)}),t.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},axisTrigger)}var TooltipModel=function(t){__extends$1(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.type="tooltip",n.dependencies=["axisPointer"],n.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,displayTransition:!0,enterable:!1,backgroundColor:tokens.color.neutral00,shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,defaultBorderColor:tokens.color.border,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:tokens.color.borderShade,width:1,type:"dashed",textStyle:{}}},textStyle:{color:tokens.color.tertiary,fontSize:14}},n}(ComponentModel);function shouldTooltipConfine(t){var n=t.get("confine");return n!=null?!!n:t.get("renderMode")==="richText"}function testStyle(t){if(env.domSupported){for(var n=document.documentElement.style,a=0,r=t.length;a<r;a++)if(t[a]in n)return t[a]}}var TRANSFORM_VENDOR=testStyle(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),TRANSITION_VENDOR=testStyle(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function toCSSVendorPrefix(t,n){if(!t)return n;n=toCamelCase(n,!0);var a=t.indexOf(n);return t=a===-1?n:"-"+t.slice(0,a)+"-"+n,t.toLowerCase()}function getComputedStyle(t,n){var a=t.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(t);return a?a[n]:null}var CSS_TRANSITION_VENDOR=toCSSVendorPrefix(TRANSITION_VENDOR,"transition"),CSS_TRANSFORM_VENDOR=toCSSVendorPrefix(TRANSFORM_VENDOR,"transform"),gCssText="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(env.transform3dSupported?"will-change:transform;":"");function mirrorPos(t){return t=t==="left"?"right":t==="right"?"left":t==="top"?"bottom":"top",t}function assembleArrow(t,n,a){if(!isString(a)||a==="inside")return"";var r=t.get("backgroundColor"),o=t.get("borderWidth");n=convertToColorString(n);var s=mirrorPos(a),l=Math.max(Math.round(o)*1.5,6),c="",u=CSS_TRANSFORM_VENDOR+":",d;indexOf(["left","right"],s)>-1?(c+="top:50%",u+="translateY(-50%) rotate("+(d=s==="left"?-225:-45)+"deg)"):(c+="left:50%",u+="translateX(-50%) rotate("+(d=s==="top"?225:45)+"deg)");var f=d*Math.PI/180,v=l+o,_=v*Math.abs(Math.cos(f))+v*Math.abs(Math.sin(f)),g=Math.round(((_-Math.SQRT2*o)/2+Math.SQRT2*o-(_-v)/2)*100)/100;c+=";"+s+":-"+g+"px";var y=n+" solid "+o+"px;",b=["position:absolute;width:"+l+"px;height:"+l+"px;z-index:-1;",c+";"+u+";","border-bottom:"+y,"border-right:"+y,"background-color:"+r+";"];return'<div style="'+b.join("")+'"></div>'}function assembleTransition(t,n,a){var r="cubic-bezier(0.23,1,0.32,1)",o="",s="";return a&&(o=" "+t/2+"s "+r,s="opacity"+o+",visibility"+o),n||(o=" "+t+"s "+r,s+=(s.length?",":"")+(env.transformSupported?""+CSS_TRANSFORM_VENDOR+o:",left"+o+",top"+o)),CSS_TRANSITION_VENDOR+":"+s}function assembleTransform(t,n,a){var r=t.toFixed(0)+"px",o=n.toFixed(0)+"px";if(!env.transformSupported)return a?"top:"+o+";left:"+r+";":[["top",o],["left",r]];var s=env.transform3dSupported,l="translate"+(s?"3d":"")+"("+r+","+o+(s?",0":"")+")";return a?"top:0;left:0;"+CSS_TRANSFORM_VENDOR+":"+l+";":[["top",0],["left",0],[TRANSFORM_VENDOR,l]]}function assembleFont(t){var n=[],a=t.get("fontSize"),r=t.getTextColor();r&&n.push("color:"+r),n.push("font:"+t.getFont());var o=retrieve2(t.get("lineHeight"),Math.round(a*3/2));a&&n.push("line-height:"+o+"px");var s=t.get("textShadowColor"),l=t.get("textShadowBlur")||0,c=t.get("textShadowOffsetX")||0,u=t.get("textShadowOffsetY")||0;return s&&l&&n.push("text-shadow:"+c+"px "+u+"px "+l+"px "+s),each$8(["decoration","align"],function(d){var f=t.get(d);f&&n.push("text-"+d+":"+f)}),n.join(";")}function assembleCssText(t,n,a,r){var o=[],s=t.get("transitionDuration"),l=t.get("backgroundColor"),c=t.get("shadowBlur"),u=t.get("shadowColor"),d=t.get("shadowOffsetX"),f=t.get("shadowOffsetY"),v=t.getModel("textStyle"),_=getPaddingFromTooltipModel(t,"html"),g=d+"px "+f+"px "+c+"px "+u;return o.push("box-shadow:"+g),n&&s>0&&o.push(assembleTransition(s,a,r)),l&&o.push("background-color:"+l),each$8(["width","color","radius"],function(y){var b="border-"+y,T=toCamelCase(b),S=t.get(T);S!=null&&o.push(b+":"+S+(y==="color"?"":"px"))}),o.push(assembleFont(v)),_!=null&&o.push("padding:"+normalizeCssArray(_).join("px ")+"px"),o.join(";")+";"}function makeStyleCoord$1(t,n,a,r,o){var s=n&&n.painter;if(a){var l=s&&s.getViewportRoot();l&&transformLocalCoord(t,l,a,r,o)}else{t[0]=r,t[1]=o;var c=s&&s.getViewportRootOffset();c&&(t[0]+=c.offsetLeft,t[1]+=c.offsetTop)}t[2]=t[0]/n.getWidth(),t[3]=t[1]/n.getHeight()}var TooltipHTMLContent=function(){function t(n,a){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,env.wxa)return null;var r=document.createElement("div");r.domBelongToZr=!0,this.el=r;var o=this._zr=n.getZr(),s=a.appendTo,l=s&&(isString(s)?document.querySelector(s):isDom(s)?s:isFunction(s)&&s(n.getDom()));makeStyleCoord$1(this._styleCoord,o,l,n.getWidth()/2,n.getHeight()/2),(l||n.getDom()).appendChild(r),this._api=n,this._container=l;var c=this;r.onmouseenter=function(){c._enterable&&(clearTimeout(c._hideTimeout),c._show=!0),c._inContent=!0},r.onmousemove=function(u){if(u=u||window.event,!c._enterable){var d=o.handler,f=o.painter.getViewportRoot();normalizeEvent(f,u,!0),d.dispatch("mousemove",u)}},r.onmouseleave=function(){c._inContent=!1,c._enterable&&c._show&&c.hideLater(c._hideDelay)}}return t.prototype.update=function(n){if(!this._container){var a=this._api.getDom(),r=getComputedStyle(a,"position"),o=a.style;o.position!=="absolute"&&r!=="absolute"&&(o.position="relative")}var s=n.get("alwaysShowContent");s&&this._moveIfResized(),this._alwaysShowContent=s,this._enableDisplayTransition=n.get("displayTransition")&&n.get("transitionDuration")>0,this.el.className=n.get("className")||""},t.prototype.show=function(n,a){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var r=this.el,o=r.style,s=this._styleCoord;r.innerHTML?o.cssText=gCssText+assembleCssText(n,!this._firstShow,this._longHide,this._enableDisplayTransition)+assembleTransform(s[0],s[1],!0)+("border-color:"+convertToColorString(a)+";")+(n.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):o.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},t.prototype.setContent=function(n,a,r,o,s){var l=this.el;if(n==null){l.innerHTML="";return}var c="";if(isString(s)&&r.get("trigger")==="item"&&!shouldTooltipConfine(r)&&(c=assembleArrow(r,o,s)),isString(n))l.innerHTML=n+c;else if(n){l.innerHTML="",isArray$1(n)||(n=[n]);for(var u=0;u<n.length;u++)isDom(n[u])&&n[u].parentNode!==l&&l.appendChild(n[u]);if(c&&l.childNodes.length){var d=document.createElement("div");d.innerHTML=c,l.appendChild(d)}}},t.prototype.setEnterable=function(n){this._enterable=n},t.prototype.getSize=function(){var n=this.el;return n?[n.offsetWidth,n.offsetHeight]:[0,0]},t.prototype.moveTo=function(n,a){if(this.el){var r=this._styleCoord;if(makeStyleCoord$1(r,this._zr,this._container,n,a),r[0]!=null&&r[1]!=null){var o=this.el.style,s=assembleTransform(r[0],r[1]);each$8(s,function(l){o[l[0]]=l[1]})}}},t.prototype._moveIfResized=function(){var n=this._styleCoord[2],a=this._styleCoord[3];this.moveTo(n*this._zr.getWidth(),a*this._zr.getHeight())},t.prototype.hide=function(){var n=this,a=this.el.style;this._enableDisplayTransition?(a.visibility="hidden",a.opacity="0"):a.display="none",env.transform3dSupported&&(a.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return n._longHide=!0},500)},t.prototype.hideLater=function(n){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(n?(this._hideDelay=n,this._show=!1,this._hideTimeout=setTimeout(bind$1(this.hide,this),n)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var n=this._zr;transformLocalCoordClear(n&&n.painter&&n.painter.getViewportRoot(),this._container);var a=this.el;if(a){a.onmouseenter=a.onmousemove=a.onmouseleave=null;var r=a.parentNode;r&&r.removeChild(a)}this.el=this._container=null},t}(),TooltipRichContent=function(){function t(n){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=n.getZr(),makeStyleCoord(this._styleCoord,this._zr,n.getWidth()/2,n.getHeight()/2)}return t.prototype.update=function(n){var a=n.get("alwaysShowContent");a&&this._moveIfResized(),this._alwaysShowContent=a},t.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},t.prototype.setContent=function(n,a,r,o,s){var l=this;isObject$3(n)&&throwError(""),this.el&&this._zr.remove(this.el);var c=r.getModel("textStyle");this.el=new ZRText({style:{rich:a.richTextStyles,text:n,lineHeight:22,borderWidth:1,borderColor:o,textShadowColor:c.get("textShadowColor"),fill:r.get(["textStyle","color"]),padding:getPaddingFromTooltipModel(r,"richText"),verticalAlign:"top",align:"left"},z:r.get("z")}),each$8(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(d){l.el.style[d]=r.get(d)}),each$8(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(d){l.el.style[d]=c.get(d)||0}),this._zr.add(this.el);var u=this;this.el.on("mouseover",function(){u._enterable&&(clearTimeout(u._hideTimeout),u._show=!0),u._inContent=!0}),this.el.on("mouseout",function(){u._enterable&&u._show&&u.hideLater(u._hideDelay),u._inContent=!1})},t.prototype.setEnterable=function(n){this._enterable=n},t.prototype.getSize=function(){var n=this.el,a=this.el.getBoundingRect(),r=calcShadowOuterSize(n.style);return[a.width+r.left+r.right,a.height+r.top+r.bottom]},t.prototype.moveTo=function(n,a){var r=this.el;if(r){var o=this._styleCoord;makeStyleCoord(o,this._zr,n,a),n=o[0],a=o[1];var s=r.style,l=mathMaxWith0(s.borderWidth||0),c=calcShadowOuterSize(s);r.x=n+l+c.left,r.y=a+l+c.top,r.markRedraw()}},t.prototype._moveIfResized=function(){var n=this._styleCoord[2],a=this._styleCoord[3];this.moveTo(n*this._zr.getWidth(),a*this._zr.getHeight())},t.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},t.prototype.hideLater=function(n){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(n?(this._hideDelay=n,this._show=!1,this._hideTimeout=setTimeout(bind$1(this.hide,this),n)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){this._zr.remove(this.el)},t}();function mathMaxWith0(t){return Math.max(0,t)}function calcShadowOuterSize(t){var n=mathMaxWith0(t.shadowBlur||0),a=mathMaxWith0(t.shadowOffsetX||0),r=mathMaxWith0(t.shadowOffsetY||0);return{left:mathMaxWith0(n-a),right:mathMaxWith0(n+a),top:mathMaxWith0(n-r),bottom:mathMaxWith0(n+r)}}function makeStyleCoord(t,n,a,r){t[0]=a,t[1]=r,t[2]=t[0]/n.getWidth(),t[3]=t[1]/n.getHeight()}var proxyRect=new Rect({shape:{x:-1,y:-1,width:2,height:2}}),TooltipView=function(t){__extends$1(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.init=function(a,r){if(!(env.node||!r.getDom())){var o=a.getComponent("tooltip"),s=this._renderMode=getTooltipRenderMode(o.get("renderMode"));this._tooltipContent=s==="richText"?new TooltipRichContent(r):new TooltipHTMLContent(r,{appendTo:o.get("appendToBody",!0)?"body":o.get("appendTo",!0)})}},n.prototype.render=function(a,r,o){if(!(env.node||!o.getDom())){this.group.removeAll(),this._tooltipModel=a,this._ecModel=r,this._api=o;var s=this._tooltipContent;s.update(a),s.setEnterable(a.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&a.get("transitionDuration")?createOrUpdate(this,"_updatePosition",50,"fixRate"):clear(this,"_updatePosition")}},n.prototype._initGlobalListener=function(){var a=this._tooltipModel,r=a.get("triggerOn");register$1("itemTooltip",this._api,bind$1(function(o,s,l){r!=="none"&&(r.indexOf(o)>=0?this._tryShow(s,l):o==="leave"&&this._hide(l))},this))},n.prototype._keepShow=function(){var a=this._tooltipModel,r=this._ecModel,o=this._api,s=a.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&s!=="none"&&s!=="click"){var l=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!o.isDisposed()&&l.manuallyShowTip(a,r,o,{x:l._lastX,y:l._lastY,dataByCoordSys:l._lastDataByCoordSys})})}},n.prototype.manuallyShowTip=function(a,r,o,s){if(!(s.from===this.uid||env.node||!o.getDom())){var l=makeDispatchAction(s,o);this._ticket="";var c=s.dataByCoordSys,u=findComponentReference(s,r,o);if(u){var d=u.el.getBoundingRect().clone();d.applyTransform(u.el.transform),this._tryShow({offsetX:d.x+d.width/2,offsetY:d.y+d.height/2,target:u.el,position:s.position,positionDefault:"bottom"},l)}else if(s.tooltip&&s.x!=null&&s.y!=null){var f=proxyRect;f.x=s.x,f.y=s.y,f.update(),getECData(f).tooltipConfig={name:null,option:s.tooltip},this._tryShow({offsetX:s.x,offsetY:s.y,target:f},l)}else if(c)this._tryShow({offsetX:s.x,offsetY:s.y,position:s.position,dataByCoordSys:c,tooltipOption:s.tooltipOption},l);else if(s.seriesIndex!=null){if(this._manuallyAxisShowTip(a,r,o,s))return;var v=findPointFromSeries(s,r),_=v.point[0],g=v.point[1];_!=null&&g!=null&&this._tryShow({offsetX:_,offsetY:g,target:v.el,position:s.position,positionDefault:"bottom"},l)}else s.x!=null&&s.y!=null&&(o.dispatchAction({type:"updateAxisPointer",x:s.x,y:s.y}),this._tryShow({offsetX:s.x,offsetY:s.y,position:s.position,target:o.getZr().findHover(s.x,s.y).target},l))}},n.prototype.manuallyHideTip=function(a,r,o,s){var l=this._tooltipContent;this._tooltipModel&&l.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,s.from!==this.uid&&this._hide(makeDispatchAction(s,o))},n.prototype._manuallyAxisShowTip=function(a,r,o,s){var l=s.seriesIndex,c=s.dataIndex,u=r.getComponent("axisPointer").coordSysAxesInfo;if(!(l==null||c==null||u==null)){var d=r.getSeriesByIndex(l);if(d){var f=d.getData(),v=buildTooltipModel([f.getItemModel(c),d,(d.coordinateSystem||{}).model],this._tooltipModel);if(v.get("trigger")==="axis")return o.dispatchAction({type:"updateAxisPointer",seriesIndex:l,dataIndex:c,position:s.position}),!0}}},n.prototype._tryShow=function(a,r){var o=a.target,s=this._tooltipModel;if(s){this._lastX=a.offsetX,this._lastY=a.offsetY;var l=a.dataByCoordSys;if(l&&l.length)this._showAxisTooltip(l,a);else if(o){var c=getECData(o);if(c.ssrType==="legend")return;this._lastDataByCoordSys=null;var u,d;findEventDispatcher(o,function(f){if(f.tooltipDisabled)return u=d=null,!0;u||d||(getECData(f).dataIndex!=null?u=f:getECData(f).tooltipConfig!=null&&(d=f))},!0),u?this._showSeriesItemTooltip(a,u,r):d?this._showComponentItemTooltip(a,d,r):this._hide(r)}else this._lastDataByCoordSys=null,this._hide(r)}},n.prototype._showOrMove=function(a,r){var o=a.get("showDelay");r=bind$1(r,this),clearTimeout(this._showTimout),o>0?this._showTimout=setTimeout(r,o):r()},n.prototype._showAxisTooltip=function(a,r){var o=this._ecModel,s=this._tooltipModel,l=[r.offsetX,r.offsetY],c=buildTooltipModel([r.tooltipOption],s),u=this._renderMode,d=[],f=createTooltipMarkup("section",{blocks:[],noHeader:!0}),v=[],_=new TooltipMarkupStyleCreator;each$8(a,function(C){each$8(C.dataByAxis,function(E){var x=o.getComponent(E.axisDim+"Axis",E.axisIndex),A=E.value;if(!(!x||A==null)){var N=getValueLabel(A,x.axis,o,E.seriesDataIndices,E.valueLabelOpt),M=createTooltipMarkup("section",{header:N,noHeader:!trim(N),sortBlocks:!0,blocks:[]});f.blocks.push(M),each$8(E.seriesDataIndices,function(R){var D=o.getSeriesByIndex(R.seriesIndex),L=R.dataIndexInside,I=D.getDataParams(L);if(!(I.dataIndex<0)){I.axisDim=E.axisDim,I.axisIndex=E.axisIndex,I.axisType=E.axisType,I.axisId=E.axisId,I.axisValue=getAxisRawValue(x.axis,{value:A}),I.axisValueLabel=N,I.marker=_.makeTooltipMarker("item",convertToColorString(I.color),u);var $=normalizeTooltipFormatResult(D.formatTooltip(L,!0,null)),V=$.frag;if(V){var H=buildTooltipModel([D],s).get("valueFormatter");M.blocks.push(H?extend({valueFormatter:H},V):V)}$.text&&v.push($.text),d.push(I)}})}})}),f.blocks.reverse(),v.reverse();var g=r.position,y=c.get("order"),b=buildTooltipMarkup(f,_,u,y,o.get("useUTC"),c.get("textStyle"));b&&v.unshift(b);var T=u==="richText"?`

`:"<br/>",S=v.join(T);this._showOrMove(c,function(){this._updateContentNotChangedOnAxis(a,d)?this._updatePosition(c,g,l[0],l[1],this._tooltipContent,d):this._showTooltipContent(c,S,d,Math.random()+"",l[0],l[1],g,null,_)})},n.prototype._showSeriesItemTooltip=function(a,r,o){var s=this._ecModel,l=getECData(r),c=l.seriesIndex,u=s.getSeriesByIndex(c),d=l.dataModel||u,f=l.dataIndex,v=l.dataType,_=d.getData(v),g=this._renderMode,y=a.positionDefault,b=buildTooltipModel([_.getItemModel(f),d,u&&(u.coordinateSystem||{}).model],this._tooltipModel,y?{position:y}:null),T=b.get("trigger");if(!(T!=null&&T!=="item")){var S=d.getDataParams(f,v),C=new TooltipMarkupStyleCreator;S.marker=C.makeTooltipMarker("item",convertToColorString(S.color),g);var E=normalizeTooltipFormatResult(d.formatTooltip(f,!1,v)),x=b.get("order"),A=b.get("valueFormatter"),N=E.frag,M=N?buildTooltipMarkup(A?extend({valueFormatter:A},N):N,C,g,x,s.get("useUTC"),b.get("textStyle")):E.text,R="item_"+d.name+"_"+f;this._showOrMove(b,function(){this._showTooltipContent(b,M,S,R,a.offsetX,a.offsetY,a.position,a.target,C)}),o({type:"showTip",dataIndexInside:f,dataIndex:_.getRawIndex(f),seriesIndex:c,from:this.uid})}},n.prototype._showComponentItemTooltip=function(a,r,o){var s=this._renderMode==="html",l=getECData(r),c=l.tooltipConfig,u=c.option||{},d=u.encodeHTMLContent;if(isString(u)){var f=u;u={content:f,formatter:f},d=!0}d&&s&&u.content&&(u=clone$3(u),u.content=encodeHTML(u.content));var v=[u],_=this._ecModel.getComponent(l.componentMainType,l.componentIndex);_&&v.push(_),v.push({formatter:u.content});var g=a.positionDefault,y=buildTooltipModel(v,this._tooltipModel,g?{position:g}:null),b=y.get("content"),T=Math.random()+"",S=new TooltipMarkupStyleCreator;this._showOrMove(y,function(){var C=clone$3(y.get("formatterParams")||{});this._showTooltipContent(y,b,C,T,a.offsetX,a.offsetY,a.position,r,S)}),o({type:"showTip",from:this.uid})},n.prototype._showTooltipContent=function(a,r,o,s,l,c,u,d,f){if(this._ticket="",!(!a.get("showContent")||!a.get("show"))){var v=this._tooltipContent;v.setEnterable(a.get("enterable"));var _=a.get("formatter");u=u||a.get("position");var g=r,y=this._getNearestPoint([l,c],o,a.get("trigger"),a.get("borderColor"),a.get("defaultBorderColor",!0)),b=y.color;if(_)if(isString(_)){var T=a.ecModel.get("useUTC"),S=isArray$1(o)?o[0]:o,C=S&&S.axisType&&S.axisType.indexOf("time")>=0;g=_,C&&(g=format(S.axisValue,g,T)),g=formatTpl(g,o,!0)}else if(isFunction(_)){var E=bind$1(function(x,A){x===this._ticket&&(v.setContent(A,f,a,b,u),this._updatePosition(a,u,l,c,v,o,d))},this);this._ticket=s,g=_(o,s,E)}else g=_;v.setContent(g,f,a,b,u),v.show(a,b),this._updatePosition(a,u,l,c,v,o,d)}},n.prototype._getNearestPoint=function(a,r,o,s,l){if(o==="axis"||isArray$1(r))return{color:s||l};if(!isArray$1(r))return{color:s||r.color||r.borderColor}},n.prototype._updatePosition=function(a,r,o,s,l,c,u){var d=this._api.getWidth(),f=this._api.getHeight();r=r||a.get("position");var v=l.getSize(),_=a.get("align"),g=a.get("verticalAlign"),y=u&&u.getBoundingRect().clone();if(u&&y.applyTransform(u.transform),isFunction(r)&&(r=r([o,s],c,l.el,y,{viewSize:[d,f],contentSize:v.slice()})),isArray$1(r))o=parsePercent(r[0],d),s=parsePercent(r[1],f);else if(isObject$3(r)){var b=r;b.width=v[0],b.height=v[1];var T=getLayoutRect(b,{width:d,height:f});o=T.x,s=T.y,_=null,g=null}else if(isString(r)&&u){var S=calcTooltipPosition(r,y,v,a.get("borderWidth"));o=S[0],s=S[1]}else{var S=refixTooltipPosition(o,s,l,d,f,_?null:20,g?null:20);o=S[0],s=S[1]}if(_&&(o-=isCenterAlign(_)?v[0]/2:_==="right"?v[0]:0),g&&(s-=isCenterAlign(g)?v[1]/2:g==="bottom"?v[1]:0),shouldTooltipConfine(a)){var S=confineTooltipPosition(o,s,l,d,f);o=S[0],s=S[1]}l.moveTo(o,s)},n.prototype._updateContentNotChangedOnAxis=function(a,r){var o=this._lastDataByCoordSys,s=this._cbParamsList,l=!!o&&o.length===a.length;return l&&each$8(o,function(c,u){var d=c.dataByAxis||[],f=a[u]||{},v=f.dataByAxis||[];l=l&&d.length===v.length,l&&each$8(d,function(_,g){var y=v[g]||{},b=_.seriesDataIndices||[],T=y.seriesDataIndices||[];l=l&&_.value===y.value&&_.axisType===y.axisType&&_.axisId===y.axisId&&b.length===T.length,l&&each$8(b,function(S,C){var E=T[C];l=l&&S.seriesIndex===E.seriesIndex&&S.dataIndex===E.dataIndex}),s&&each$8(_.seriesDataIndices,function(S){var C=S.seriesIndex,E=r[C],x=s[C];E&&x&&x.data!==E.data&&(l=!1)})})}),this._lastDataByCoordSys=a,this._cbParamsList=r,!!l},n.prototype._hide=function(a){this._lastDataByCoordSys=null,a({type:"hideTip",from:this.uid})},n.prototype.dispose=function(a,r){env.node||!r.getDom()||(clear(this,"_updatePosition"),this._tooltipContent.dispose(),unregister("itemTooltip",r))},n.type="tooltip",n}(ComponentView);function buildTooltipModel(t,n,a){var r=n.ecModel,o;a?(o=new Model(a,r,r),o=new Model(n.option,o,r)):o=n;for(var s=t.length-1;s>=0;s--){var l=t[s];l&&(l instanceof Model&&(l=l.get("tooltip",!0)),isString(l)&&(l={formatter:l}),l&&(o=new Model(l,o,r)))}return o}function makeDispatchAction(t,n){return t.dispatchAction||bind$1(n.dispatchAction,n)}function refixTooltipPosition(t,n,a,r,o,s,l){var c=a.getSize(),u=c[0],d=c[1];return s!=null&&(t+u+s+2>r?t-=u+s:t+=s),l!=null&&(n+d+l>o?n-=d+l:n+=l),[t,n]}function confineTooltipPosition(t,n,a,r,o){var s=a.getSize(),l=s[0],c=s[1];return t=Math.min(t+l,r)-l,n=Math.min(n+c,o)-c,t=Math.max(t,0),n=Math.max(n,0),[t,n]}function calcTooltipPosition(t,n,a,r){var o=a[0],s=a[1],l=Math.ceil(Math.SQRT2*r)+8,c=0,u=0,d=n.width,f=n.height;switch(t){case"inside":c=n.x+d/2-o/2,u=n.y+f/2-s/2;break;case"top":c=n.x+d/2-o/2,u=n.y-s-l;break;case"bottom":c=n.x+d/2-o/2,u=n.y+f+l;break;case"left":c=n.x-o-l,u=n.y+f/2-s/2;break;case"right":c=n.x+d+l,u=n.y+f/2-s/2}return[c,u]}function isCenterAlign(t){return t==="center"||t==="middle"}function findComponentReference(t,n,a){var r=preParseFinder(t).queryOptionMap,o=r.keys()[0];if(!(!o||o==="series")){var s=queryReferringComponents(n,o,r.get(o),{useDefault:!1,enableAll:!1,enableNone:!1}),l=s.models[0];if(l){var c=a.getViewOfComponentModel(l),u;if(c.group.traverse(function(d){var f=getECData(d).tooltipConfig;if(f&&f.name===t.name)return u=d,!0}),u)return{componentMainType:o,componentIndex:l.componentIndex,el:u}}}}function install$5(t){use(install$6),t.registerComponentModel(TooltipModel),t.registerComponentView(TooltipView),t.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},noop),t.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},noop)}var each$3=each$8;function hasKeys(t){if(t){for(var n in t)if(t.hasOwnProperty(n))return!0}}function createVisualMappings(t,n,a){var r={};return each$3(n,function(s){var l=r[s]=o();each$3(t[s],function(c,u){if(VisualMapping.isValidType(u)){var d={type:u,visual:c};a&&a(d,s),l[u]=new VisualMapping(d),u==="opacity"&&(d=clone$3(d),d.type="colorAlpha",l.__hidden.__alphaForOpacity=new VisualMapping(d))}})}),r;function o(){var s=function(){};s.prototype.__hidden=s.prototype;var l=new s;return l}}function replaceVisualOption(t,n,a){var r;each$8(a,function(o){n.hasOwnProperty(o)&&hasKeys(n[o])&&(r=!0)}),r&&each$8(a,function(o){n.hasOwnProperty(o)&&hasKeys(n[o])?t[o]=clone$3(n[o]):delete t[o]})}function incrementalApplyVisual(t,n,a,r){var o={};return each$8(t,function(s){var l=VisualMapping.prepareVisualTypes(n[s]);o[s]=l}),{progress:function(l,c){var u;r!=null&&(u=c.getDimensionIndex(r));function d(A){return getItemVisualFromData(c,v,A)}function f(A,N){setItemVisualFromData(c,v,A,N)}for(var v,_=c.getStore();(v=l.next())!=null;){var g=c.getRawDataItem(v);if(!(g&&g.visualMap===!1))for(var y=r!=null?_.get(u,v):v,b=a(y),T=n[b],S=o[b],C=0,E=S.length;C<E;C++){var x=S[C];T[x]&&T[x].applyVisual(y,d,f)}}}}}var TitleModel=function(t){__extends$1(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.layoutMode={type:"box",ignoreSize:!0},a}return n.type="title",n.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:"center",top:tokens.size.m,backgroundColor:tokens.color.transparent,borderColor:tokens.color.primary,borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:tokens.color.primary},subtextStyle:{fontSize:12,color:tokens.color.quaternary}},n}(ComponentModel),TitleView=function(t){__extends$1(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.render=function(a,r,o){if(this.group.removeAll(),!!a.get("show")){var s=this.group,l=a.getModel("textStyle"),c=a.getModel("subtextStyle"),u=a.get("textAlign"),d=retrieve2(a.get("textBaseline"),a.get("textVerticalAlign")),f=new ZRText({style:createTextStyle(l,{text:a.get("text"),fill:l.getTextColor()},{disableBox:!0}),z2:10}),v=f.getBoundingRect(),_=a.get("subtext"),g=new ZRText({style:createTextStyle(c,{text:_,fill:c.getTextColor(),y:v.height+a.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),y=a.get("link"),b=a.get("sublink"),T=a.get("triggerEvent",!0);f.silent=!y&&!T,g.silent=!b&&!T,y&&f.on("click",function(){windowOpen(y,"_"+a.get("target"))}),b&&g.on("click",function(){windowOpen(b,"_"+a.get("subtarget"))}),getECData(f).eventData=getECData(g).eventData=T?{componentType:"title",componentIndex:a.componentIndex}:null,s.add(f),_&&s.add(g);var S=s.getBoundingRect(),C=a.getBoxLayoutParams();C.width=S.width,C.height=S.height;var E=createBoxLayoutReference(a,o),x=getLayoutRect(C,E.refContainer,a.get("padding"));u||(u=a.get("left")||a.get("right"),u==="middle"&&(u="center"),u==="right"?x.x+=x.width:u==="center"&&(x.x+=x.width/2)),d||(d=a.get("top")||a.get("bottom"),d==="center"&&(d="middle"),d==="bottom"?x.y+=x.height:d==="middle"&&(x.y+=x.height/2),d=d||"top"),s.x=x.x,s.y=x.y,s.markRedraw();var A={align:u,verticalAlign:d};f.setStyle(A),g.setStyle(A),S=s.getBoundingRect();var N=x.margin,M=a.getItemStyle(["color","opacity"]);M.fill=a.get("backgroundColor");var R=new Rect({shape:{x:S.x-N[3],y:S.y-N[0],width:S.width+N[1]+N[3],height:S.height+N[0]+N[2],r:a.get("borderRadius")},style:M,subPixelOptimize:!0,silent:!0});s.add(R)}},n.type="title",n}(ComponentView);function install$4(t){t.registerComponentModel(TitleModel),t.registerComponentView(TitleView)}var visualDefault={get:function(t,n,a){var r=clone$3((defaultOption[t]||{})[n]);return a&&isArray$1(r)?r[r.length-1]:r}},defaultOption={color:{active:["#006edd","#e0ffff"],inactive:[tokens.color.transparent]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},mapVisual=VisualMapping.mapVisual,eachVisual=VisualMapping.eachVisual,isArray=isArray$1,each$2=each$8,asc=asc$1,linearMap$1=linearMap$2,VisualMapModel=function(t){__extends$1(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.stateList=["inRange","outOfRange"],a.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],a.layoutMode={type:"box",ignoreSize:!0},a.dataBound=[-1/0,1/0],a.targetVisuals={},a.controllerVisuals={},a}return n.prototype.init=function(a,r,o){this.mergeDefaultAndTheme(a,o)},n.prototype.optionUpdated=function(a,r){var o=this.option;!r&&replaceVisualOption(o,a,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},n.prototype.resetVisual=function(a){var r=this.stateList;a=bind$1(a,this),this.controllerVisuals=createVisualMappings(this.option.controller,r,a),this.targetVisuals=createVisualMappings(this.option.target,r,a)},n.prototype.getItemSymbol=function(){return null},n.prototype.getTargetSeriesIndices=function(){var a=this.option.seriesId,r=this.option.seriesIndex;r==null&&a==null&&(r="all");var o=queryReferringComponents(this.ecModel,"series",{index:r,id:a},{useDefault:!1,enableAll:!0,enableNone:!1}).models;return map$1(o,function(s){return s.componentIndex})},n.prototype.eachTargetSeries=function(a,r){each$8(this.getTargetSeriesIndices(),function(o){var s=this.ecModel.getSeriesByIndex(o);s&&a.call(r,s)},this)},n.prototype.isTargetSeries=function(a){var r=!1;return this.eachTargetSeries(function(o){o===a&&(r=!0)}),r},n.prototype.formatValueText=function(a,r,o){var s=this.option,l=s.precision,c=this.dataBound,u=s.formatter,d;o=o||["<",">"],isArray$1(a)&&(a=a.slice(),d=!0);var f=r?a:d?[v(a[0]),v(a[1])]:v(a);if(isString(u))return u.replace("{value}",d?f[0]:f).replace("{value2}",d?f[1]:f);if(isFunction(u))return d?u(a[0],a[1]):u(a);if(d)return a[0]===c[0]?o[0]+" "+f[1]:a[1]===c[1]?o[1]+" "+f[0]:f[0]+" - "+f[1];return f;function v(_){return _===c[0]?"min":_===c[1]?"max":(+_).toFixed(Math.min(l,20))}},n.prototype.resetExtent=function(){var a=this.option,r=asc([a.min,a.max]);this._dataExtent=r},n.prototype.getDataDimensionIndex=function(a){var r=this.option.dimension;if(r!=null)return a.getDimensionIndex(r);for(var o=a.dimensions,s=o.length-1;s>=0;s--){var l=o[s],c=a.getDimensionInfo(l);if(!c.isCalculationCoord)return c.storeDimIndex}},n.prototype.getExtent=function(){return this._dataExtent.slice()},n.prototype.completeVisualOption=function(){var a=this.ecModel,r=this.option,o={inRange:r.inRange,outOfRange:r.outOfRange},s=r.target||(r.target={}),l=r.controller||(r.controller={});merge(s,o),merge(l,o);var c=this.isCategory();u.call(this,s),u.call(this,l),d.call(this,s,"inRange","outOfRange"),f.call(this,l);function u(v){isArray(r.color)&&!v.inRange&&(v.inRange={color:r.color.slice().reverse()}),v.inRange=v.inRange||{color:a.get("gradientColor")}}function d(v,_,g){var y=v[_],b=v[g];y&&!b&&(b=v[g]={},each$2(y,function(T,S){if(VisualMapping.isValidType(S)){var C=visualDefault.get(S,"inactive",c);C!=null&&(b[S]=C,S==="color"&&!b.hasOwnProperty("opacity")&&!b.hasOwnProperty("colorAlpha")&&(b.opacity=[0,0]))}}))}function f(v){var _=(v.inRange||{}).symbol||(v.outOfRange||{}).symbol,g=(v.inRange||{}).symbolSize||(v.outOfRange||{}).symbolSize,y=this.get("inactiveColor"),b=this.getItemSymbol(),T=b||"roundRect";each$2(this.stateList,function(S){var C=this.itemSize,E=v[S];E||(E=v[S]={color:c?y:[y]}),E.symbol==null&&(E.symbol=_&&clone$3(_)||(c?T:[T])),E.symbolSize==null&&(E.symbolSize=g&&clone$3(g)||(c?C[0]:[C[0],C[0]])),E.symbol=mapVisual(E.symbol,function(N){return N==="none"?T:N});var x=E.symbolSize;if(x!=null){var A=-1/0;eachVisual(x,function(N){N>A&&(A=N)}),E.symbolSize=mapVisual(x,function(N){return linearMap$1(N,[0,A],[0,C[0]],!0)})}},this)}},n.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},n.prototype.isCategory=function(){return!!this.option.categories},n.prototype.setSelected=function(a){},n.prototype.getSelected=function(){return null},n.prototype.getValueState=function(a){return null},n.prototype.getVisualMeta=function(a){return null},n.type="visualMap",n.dependencies=["series"],n.defaultOption={show:!0,z:4,min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:tokens.color.transparent,borderColor:tokens.color.borderTint,contentColor:tokens.color.theme[0],inactiveColor:tokens.color.disabled,borderWidth:0,padding:tokens.size.m,textGap:10,precision:0,textStyle:{color:tokens.color.secondary}},n}(ComponentModel),DEFAULT_BAR_BOUND=[20,140],ContinuousModel=function(t){__extends$1(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.optionUpdated=function(a,r){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(o){o.mappingMethod="linear",o.dataExtent=this.getExtent()}),this._resetRange()},n.prototype.resetItemSize=function(){t.prototype.resetItemSize.apply(this,arguments);var a=this.itemSize;(a[0]==null||isNaN(a[0]))&&(a[0]=DEFAULT_BAR_BOUND[0]),(a[1]==null||isNaN(a[1]))&&(a[1]=DEFAULT_BAR_BOUND[1])},n.prototype._resetRange=function(){var a=this.getExtent(),r=this.option.range;!r||r.auto?(a.auto=1,this.option.range=a):isArray$1(r)&&(r[0]>r[1]&&r.reverse(),r[0]=Math.max(r[0],a[0]),r[1]=Math.min(r[1],a[1]))},n.prototype.completeVisualOption=function(){t.prototype.completeVisualOption.apply(this,arguments),each$8(this.stateList,function(a){var r=this.option.controller[a].symbolSize;r&&r[0]!==r[1]&&(r[0]=r[1]/3)},this)},n.prototype.setSelected=function(a){this.option.range=a.slice(),this._resetRange()},n.prototype.getSelected=function(){var a=this.getExtent(),r=asc$1((this.get("range")||[]).slice());return r[0]>a[1]&&(r[0]=a[1]),r[1]>a[1]&&(r[1]=a[1]),r[0]<a[0]&&(r[0]=a[0]),r[1]<a[0]&&(r[1]=a[0]),r},n.prototype.getValueState=function(a){var r=this.option.range,o=this.getExtent(),s=retrieve2(this.option.unboundedRange,!0);return(s&&r[0]<=o[0]||r[0]<=a)&&(s&&r[1]>=o[1]||a<=r[1])?"inRange":"outOfRange"},n.prototype.findTargetDataIndices=function(a){var r=[];return this.eachTargetSeries(function(o){var s=[],l=o.getData();l.each(this.getDataDimensionIndex(l),function(c,u){a[0]<=c&&c<=a[1]&&s.push(u)},this),r.push({seriesId:o.id,dataIndex:s})},this),r},n.prototype.getVisualMeta=function(a){var r=getColorStopValues(this,"outOfRange",this.getExtent()),o=getColorStopValues(this,"inRange",this.option.range.slice()),s=[];function l(g,y){s.push({value:g,color:a(g,y)})}for(var c=0,u=0,d=o.length,f=r.length;u<f&&(!o.length||r[u]<=o[0]);u++)r[u]<o[c]&&l(r[u],"outOfRange");for(var v=1;c<d;c++,v=0)v&&s.length&&l(o[c],"outOfRange"),l(o[c],"inRange");for(var v=1;u<f;u++)(!o.length||o[o.length-1]<r[u])&&(v&&(s.length&&l(s[s.length-1].value,"outOfRange"),v=0),l(r[u],"outOfRange"));var _=s.length;return{stops:s,outerColors:[_?s[0].color:"transparent",_?s[_-1].color:"transparent"]}},n.type="visualMap.continuous",n.defaultOption=inheritDefaultOption(VisualMapModel.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:tokens.color.neutral00,borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:tokens.color.neutral00,borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:tokens.color.shadow}}),n}(VisualMapModel);function getColorStopValues(t,n,a){if(a[0]===a[1])return a.slice();for(var r=200,o=(a[1]-a[0])/r,s=a[0],l=[],c=0;c<=r&&s<a[1];c++)l.push(s),s+=o;return l.push(a[1]),l}var VisualMapView=function(t){__extends$1(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a.autoPositionValues={left:1,right:1,top:1,bottom:1},a}return n.prototype.init=function(a,r){this.ecModel=a,this.api=r},n.prototype.render=function(a,r,o,s){if(this.visualMapModel=a,a.get("show")===!1){this.group.removeAll();return}this.doRender(a,r,o,s)},n.prototype.renderBackground=function(a){var r=this.visualMapModel,o=normalizeCssArray(r.get("padding")||0),s=a.getBoundingRect();a.add(new Rect({z2:-1,silent:!0,shape:{x:s.x-o[3],y:s.y-o[0],width:s.width+o[3]+o[1],height:s.height+o[0]+o[2]},style:{fill:r.get("backgroundColor"),stroke:r.get("borderColor"),lineWidth:r.get("borderWidth")}}))},n.prototype.getControllerVisual=function(a,r,o){o=o||{};var s=o.forceState,l=this.visualMapModel,c={};if(r==="color"){var u=l.get("contentColor");c.color=u}function d(g){return c[g]}function f(g,y){c[g]=y}var v=l.controllerVisuals[s||l.getValueState(a)],_=VisualMapping.prepareVisualTypes(v);return each$8(_,function(g){var y=v[g];o.convertOpacityToAlpha&&g==="opacity"&&(g="colorAlpha",y=v.__alphaForOpacity),VisualMapping.dependsOn(g,r)&&y&&y.applyVisual(a,d,f)}),c[r]},n.prototype.positionGroup=function(a){var r=this.visualMapModel,o=this.api,s=createBoxLayoutReference(r,o).refContainer;positionElement(a,r.getBoxLayoutParams(),s)},n.prototype.doRender=function(a,r,o,s){},n.type="visualMap",n}(ComponentView),paramsSet=[["left","right","width"],["top","bottom","height"]];function getItemAlign(t,n,a){var r=t.option,o=r.align;if(o!=null&&o!=="auto")return o;for(var s={width:n.getWidth(),height:n.getHeight()},l=r.orient==="horizontal"?1:0,c=paramsSet[l],u=[0,null,10],d={},f=0;f<3;f++)d[paramsSet[1-l][f]]=u[f],d[c[f]]=f===2?a[0]:r[c[f]];var v=[["x","width",3],["y","height",0]][l],_=getLayoutRect(d,s,r.padding);return c[(_.margin[v[2]]||0)+_[v[0]]+_[v[1]]*.5<s[v[1]]*.5?0:1]}function makeHighDownBatch(t,n){return each$8(t||[],function(a){a.dataIndex!=null&&(a.dataIndexInside=a.dataIndex,a.dataIndex=null),a.highlightKey="visualMap"+(n?n.componentIndex:"")}),t}var linearMap=linearMap$2,each$1=each$8,mathMin=Math.min,mathMax=Math.max,HOVER_LINK_SIZE=12,HOVER_LINK_OUT=6,ContinuousView=function(t){__extends$1(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a._shapes={},a._dataInterval=[],a._handleEnds=[],a._hoverLinkDataIndices=[],a}return n.prototype.init=function(a,r){t.prototype.init.call(this,a,r),this._hoverLinkFromSeriesMouseOver=bind$1(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=bind$1(this._hideIndicator,this)},n.prototype.doRender=function(a,r,o,s){(!s||s.type!=="selectDataRange"||s.from!==this.uid)&&this._buildView()},n.prototype._buildView=function(){this.group.removeAll();var a=this.visualMapModel,r=this.group;this._orient=a.get("orient"),this._useHandle=a.get("calculable"),this._resetInterval(),this._renderBar(r);var o=a.get("text");this._renderEndsText(r,o,0),this._renderEndsText(r,o,1),this._updateView(!0),this.renderBackground(r),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(r)},n.prototype._renderEndsText=function(a,r,o){if(r){var s=r[1-o];s=s!=null?s+"":"";var l=this.visualMapModel,c=l.get("textGap"),u=l.itemSize,d=this._shapes.mainGroup,f=this._applyTransform([u[0]/2,o===0?-c:u[1]+c],d),v=this._applyTransform(o===0?"bottom":"top",d),_=this._orient,g=this.visualMapModel.textStyleModel;this.group.add(new ZRText({style:createTextStyle(g,{x:f[0],y:f[1],verticalAlign:g.get("verticalAlign")||(_==="horizontal"?"middle":v),align:g.get("align")||(_==="horizontal"?v:"center"),text:s})}))}},n.prototype._renderBar=function(a){var r=this.visualMapModel,o=this._shapes,s=r.itemSize,l=this._orient,c=this._useHandle,u=getItemAlign(r,this.api,s),d=o.mainGroup=this._createBarGroup(u),f=new Group;d.add(f),f.add(o.outOfRange=createPolygon()),f.add(o.inRange=createPolygon(null,c?getCursor(this._orient):null,bind$1(this._dragHandle,this,"all",!1),bind$1(this._dragHandle,this,"all",!0))),f.setClipPath(new Rect({shape:{x:0,y:0,width:s[0],height:s[1],r:3}}));var v=r.textStyleModel.getTextRect(""),_=mathMax(v.width,v.height);c&&(o.handleThumbs=[],o.handleLabels=[],o.handleLabelPoints=[],this._createHandle(r,d,0,s,_,l),this._createHandle(r,d,1,s,_,l)),this._createIndicator(r,d,s,_,l),a.add(d)},n.prototype._createHandle=function(a,r,o,s,l,c){var u=bind$1(this._dragHandle,this,o,!1),d=bind$1(this._dragHandle,this,o,!0),f=parsePercent$1(a.get("handleSize"),s[0]),v=createSymbol$1(a.get("handleIcon"),-f/2,-f/2,f,f,null,!0),_=getCursor(this._orient);v.attr({cursor:_,draggable:!0,drift:u,ondragend:d,onmousemove:function(S){stop(S.event)}}),v.x=s[0]/2,v.useStyle(a.getModel("handleStyle").getItemStyle()),v.setStyle({strokeNoScale:!0,strokeFirst:!0}),v.style.lineWidth*=2,v.ensureState("emphasis").style=a.getModel(["emphasis","handleStyle"]).getItemStyle(),setAsHighDownDispatcher(v,!0),r.add(v);var g=this.visualMapModel.textStyleModel,y=new ZRText({cursor:_,draggable:!0,drift:u,onmousemove:function(S){stop(S.event)},ondragend:d,style:createTextStyle(g,{x:0,y:0,text:""})});y.ensureState("blur").style={opacity:.1},y.stateTransition={duration:200},this.group.add(y);var b=[f,0],T=this._shapes;T.handleThumbs[o]=v,T.handleLabelPoints[o]=b,T.handleLabels[o]=y},n.prototype._createIndicator=function(a,r,o,s,l){var c=parsePercent$1(a.get("indicatorSize"),o[0]),u=createSymbol$1(a.get("indicatorIcon"),-c/2,-c/2,c,c,null,!0);u.attr({cursor:"move",invisible:!0,silent:!0,x:o[0]/2});var d=a.getModel("indicatorStyle").getItemStyle();if(u instanceof ZRImage){var f=u.style;u.useStyle(extend({image:f.image,x:f.x,y:f.y,width:f.width,height:f.height},d))}else u.useStyle(d);r.add(u);var v=this.visualMapModel.textStyleModel,_=new ZRText({silent:!0,invisible:!0,style:createTextStyle(v,{x:0,y:0,text:""})});this.group.add(_);var g=[(l==="horizontal"?s/2:HOVER_LINK_OUT)+o[0]/2,0],y=this._shapes;y.indicator=u,y.indicatorLabel=_,y.indicatorLabelPoint=g,this._firstShowIndicator=!0},n.prototype._dragHandle=function(a,r,o,s){if(this._useHandle){if(this._dragging=!r,!r){var l=this._applyTransform([o,s],this._shapes.mainGroup,!0);this._updateInterval(a,l[1]),this._hideIndicator(),this._updateView()}r===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),r?!this._hovering&&this._clearHoverLinkToSeries():useHoverLinkOnHandle(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[a],!1)}},n.prototype._resetInterval=function(){var a=this.visualMapModel,r=this._dataInterval=a.getSelected(),o=a.getExtent(),s=[0,a.itemSize[1]];this._handleEnds=[linearMap(r[0],o,s,!0),linearMap(r[1],o,s,!0)]},n.prototype._updateInterval=function(a,r){r=r||0;var o=this.visualMapModel,s=this._handleEnds,l=[0,o.itemSize[1]];sliderMove(r,s,l,a,0);var c=o.getExtent();this._dataInterval=[linearMap(s[0],l,c,!0),linearMap(s[1],l,c,!0)]},n.prototype._updateView=function(a){var r=this.visualMapModel,o=r.getExtent(),s=this._shapes,l=[0,r.itemSize[1]],c=a?l:this._handleEnds,u=this._createBarVisual(this._dataInterval,o,c,"inRange"),d=this._createBarVisual(o,o,l,"outOfRange");s.inRange.setStyle({fill:u.barColor}).setShape("points",u.barPoints),s.outOfRange.setStyle({fill:d.barColor}).setShape("points",d.barPoints),this._updateHandle(c,u)},n.prototype._createBarVisual=function(a,r,o,s){var l={forceState:s,convertOpacityToAlpha:!0},c=this._makeColorGradient(a,l),u=[this.getControllerVisual(a[0],"symbolSize",l),this.getControllerVisual(a[1],"symbolSize",l)],d=this._createBarPoints(o,u);return{barColor:new LinearGradient(0,0,0,1,c),barPoints:d,handlesColor:[c[0].color,c[c.length-1].color]}},n.prototype._makeColorGradient=function(a,r){var o=100,s=[],l=(a[1]-a[0])/o;s.push({color:this.getControllerVisual(a[0],"color",r),offset:0});for(var c=1;c<o;c++){var u=a[0]+l*c;if(u>a[1])break;s.push({color:this.getControllerVisual(u,"color",r),offset:c/o})}return s.push({color:this.getControllerVisual(a[1],"color",r),offset:1}),s},n.prototype._createBarPoints=function(a,r){var o=this.visualMapModel.itemSize;return[[o[0]-r[0],a[0]],[o[0],a[0]],[o[0],a[1]],[o[0]-r[1],a[1]]]},n.prototype._createBarGroup=function(a){var r=this._orient,o=this.visualMapModel.get("inverse");return new Group(r==="horizontal"&&!o?{scaleX:a==="bottom"?1:-1,rotation:Math.PI/2}:r==="horizontal"&&o?{scaleX:a==="bottom"?-1:1,rotation:-Math.PI/2}:r==="vertical"&&!o?{scaleX:a==="left"?1:-1,scaleY:-1}:{scaleX:a==="left"?1:-1})},n.prototype._updateHandle=function(a,r){if(this._useHandle){var o=this._shapes,s=this.visualMapModel,l=o.handleThumbs,c=o.handleLabels,u=s.itemSize,d=s.getExtent(),f=this._applyTransform("left",o.mainGroup);each$1([0,1],function(v){var _=l[v];_.setStyle("fill",r.handlesColor[v]),_.y=a[v];var g=linearMap(a[v],[0,u[1]],d,!0),y=this.getControllerVisual(g,"symbolSize");_.scaleX=_.scaleY=y/u[0],_.x=u[0]-y/2;var b=applyTransform(o.handleLabelPoints[v],getTransform(_,this.group));if(this._orient==="horizontal"){var T=f==="left"||f==="top"?(u[0]-y)/2:(u[0]-y)/-2;b[1]+=T}c[v].setStyle({x:b[0],y:b[1],text:s.formatValueText(this._dataInterval[v]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",o.mainGroup):"center"})},this)}},n.prototype._showIndicator=function(a,r,o,s){var l=this.visualMapModel,c=l.getExtent(),u=l.itemSize,d=[0,u[1]],f=this._shapes,v=f.indicator;if(v){v.attr("invisible",!1);var _={convertOpacityToAlpha:!0},g=this.getControllerVisual(a,"color",_),y=this.getControllerVisual(a,"symbolSize"),b=linearMap(a,c,d,!0),T=u[0]-y/2,S={x:v.x,y:v.y};v.y=b,v.x=T;var C=applyTransform(f.indicatorLabelPoint,getTransform(v,this.group)),E=f.indicatorLabel;E.attr("invisible",!1);var x=this._applyTransform("left",f.mainGroup),A=this._orient,N=A==="horizontal";E.setStyle({text:(o||"")+l.formatValueText(r),verticalAlign:N?x:"middle",align:N?"center":x});var M={x:T,y:b,style:{fill:g}},R={style:{x:C[0],y:C[1]}};if(l.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var D={duration:100,easing:"cubicInOut",additive:!0};v.x=S.x,v.y=S.y,v.animateTo(M,D),E.animateTo(R,D)}else v.attr(M),E.attr(R);this._firstShowIndicator=!1;var L=this._shapes.handleLabels;if(L)for(var I=0;I<L.length;I++)this.api.enterBlur(L[I])}},n.prototype._enableHoverLinkToSeries=function(){var a=this;this._shapes.mainGroup.on("mousemove",function(r){if(a._hovering=!0,!a._dragging){var o=a.visualMapModel.itemSize,s=a._applyTransform([r.offsetX,r.offsetY],a._shapes.mainGroup,!0,!0);s[1]=mathMin(mathMax(0,s[1]),o[1]),a._doHoverLinkToSeries(s[1],0<=s[0]&&s[0]<=o[0])}}).on("mouseout",function(){a._hovering=!1,!a._dragging&&a._clearHoverLinkToSeries()})},n.prototype._enableHoverLinkFromSeries=function(){var a=this.api.getZr();this.visualMapModel.option.hoverLink?(a.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),a.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},n.prototype._doHoverLinkToSeries=function(a,r){var o=this.visualMapModel,s=o.itemSize;if(o.option.hoverLink){var l=[0,s[1]],c=o.getExtent();a=mathMin(mathMax(l[0],a),l[1]);var u=getHalfHoverLinkSize(o,c,l),d=[a-u,a+u],f=linearMap(a,l,c,!0),v=[linearMap(d[0],l,c,!0),linearMap(d[1],l,c,!0)];d[0]<l[0]&&(v[0]=-1/0),d[1]>l[1]&&(v[1]=1/0),r&&(v[0]===-1/0?this._showIndicator(f,v[1],"< ",u):v[1]===1/0?this._showIndicator(f,v[0],"> ",u):this._showIndicator(f,f," ",u));var _=this._hoverLinkDataIndices,g=[];(r||useHoverLinkOnHandle(o))&&(g=this._hoverLinkDataIndices=o.findTargetDataIndices(v));var y=compressBatches(_,g);this._dispatchHighDown("downplay",makeHighDownBatch(y[0],o)),this._dispatchHighDown("highlight",makeHighDownBatch(y[1],o))}},n.prototype._hoverLinkFromSeriesMouseOver=function(a){var r;if(findEventDispatcher(a.target,function(u){var d=getECData(u);if(d.dataIndex!=null)return r=d,!0},!0),!!r){var o=this.ecModel.getSeriesByIndex(r.seriesIndex),s=this.visualMapModel;if(s.isTargetSeries(o)){var l=o.getData(r.dataType),c=l.getStore().get(s.getDataDimensionIndex(l),r.dataIndex);isNaN(c)||this._showIndicator(c,c)}}},n.prototype._hideIndicator=function(){var a=this._shapes;a.indicator&&a.indicator.attr("invisible",!0),a.indicatorLabel&&a.indicatorLabel.attr("invisible",!0);var r=this._shapes.handleLabels;if(r)for(var o=0;o<r.length;o++)this.api.leaveBlur(r[o])},n.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var a=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",makeHighDownBatch(a,this.visualMapModel)),a.length=0},n.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var a=this.api.getZr();a.off("mouseover",this._hoverLinkFromSeriesMouseOver),a.off("mouseout",this._hideIndicator)},n.prototype._applyTransform=function(a,r,o,s){var l=getTransform(r,s?null:this.group);return isArray$1(a)?applyTransform(a,l,o):transformDirection(a,l,o)},n.prototype._dispatchHighDown=function(a,r){r&&r.length&&this.api.dispatchAction({type:a,batch:r})},n.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},n.type="visualMap.continuous",n}(VisualMapView);function createPolygon(t,n,a,r){return new Polygon({shape:{points:t},draggable:!!a,cursor:n,drift:a,onmousemove:function(o){stop(o.event)},ondragend:r})}function getHalfHoverLinkSize(t,n,a){var r=HOVER_LINK_SIZE/2,o=t.get("hoverLinkDataSize");return o&&(r=linearMap(o,n,a,!0)/2),r}function useHoverLinkOnHandle(t){var n=t.get("hoverLinkOnHandle");return!!(n??t.get("realtime"))}function getCursor(t){return t==="vertical"?"ns-resize":"ew-resize"}var visualMapActionInfo={type:"selectDataRange",event:"dataRangeSelected",update:"update"},visualMapActionHander=function(t,n){n.eachComponent({mainType:"visualMap",query:t},function(a){a.setSelected(t.selected)})},visualMapEncodingHandlers=[{createOnAllSeries:!0,reset:function(t,n){var a=[];return n.eachComponent("visualMap",function(r){var o=t.pipelineContext;!r.isTargetSeries(t)||o&&o.large||a.push(incrementalApplyVisual(r.stateList,r.targetVisuals,bind$1(r.getValueState,r),r.getDataDimensionIndex(t.getData())))}),a}},{createOnAllSeries:!0,reset:function(t,n){var a=t.getData(),r=[];n.eachComponent("visualMap",function(o){if(o.isTargetSeries(t)){var s=o.getVisualMeta(bind$1(getColorVisual,null,t,o))||{stops:[],outerColors:[]},l=o.getDataDimensionIndex(a);l>=0&&(s.dimension=l,r.push(s))}}),t.getData().setVisual("visualMeta",r)}}];function getColorVisual(t,n,a,r){for(var o=n.targetVisuals[r],s=VisualMapping.prepareVisualTypes(o),l={color:getVisualFromData(t.getData(),"color")},c=0,u=s.length;c<u;c++){var d=s[c],f=o[d==="opacity"?"__alphaForOpacity":d];f&&f.applyVisual(a,v,_)}return l.color;function v(g){return l[g]}function _(g,y){l[g]=y}}var each=each$8;function visualMapPreprocessor(t){var n=t&&t.visualMap;isArray$1(n)||(n=n?[n]:[]),each(n,function(a){if(a){has(a,"splitList")&&!has(a,"pieces")&&(a.pieces=a.splitList,delete a.splitList);var r=a.pieces;r&&isArray$1(r)&&each(r,function(o){isObject$3(o)&&(has(o,"start")&&!has(o,"min")&&(o.min=o.start),has(o,"end")&&!has(o,"max")&&(o.max=o.end))})}})}function has(t,n){return t&&t.hasOwnProperty&&t.hasOwnProperty(n)}var installed=!1;function installCommon(t){installed||(installed=!0,t.registerSubTypeDefaulter("visualMap",function(n){return!n.categories&&(!(n.pieces?n.pieces.length>0:n.splitNumber>0)||n.calculable)?"continuous":"piecewise"}),t.registerAction(visualMapActionInfo,visualMapActionHander),each$8(visualMapEncodingHandlers,function(n){t.registerVisual(t.PRIORITY.VISUAL.COMPONENT,n)}),t.registerPreprocessor(visualMapPreprocessor))}function install$3(t){t.registerComponentModel(ContinuousModel),t.registerComponentView(ContinuousView),installCommon(t)}var PiecewiseModel=function(t){__extends$1(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a._pieceList=[],a}return n.prototype.optionUpdated=function(a,r){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var o=this._mode=this._determineMode();this._pieceList=[],resetMethods[this._mode].call(this,this._pieceList),this._resetSelected(a,r);var s=this.option.categories;this.resetVisual(function(l,c){o==="categories"?(l.mappingMethod="category",l.categories=clone$3(s)):(l.dataExtent=this.getExtent(),l.mappingMethod="piecewise",l.pieceList=map$1(this._pieceList,function(u){return u=clone$3(u),c!=="inRange"&&(u.visual=null),u}))})},n.prototype.completeVisualOption=function(){var a=this.option,r={},o=VisualMapping.listVisualTypes(),s=this.isCategory();each$8(a.pieces,function(c){each$8(o,function(u){c.hasOwnProperty(u)&&(r[u]=1)})}),each$8(r,function(c,u){var d=!1;each$8(this.stateList,function(f){d=d||l(a,f,u)||l(a.target,f,u)},this),!d&&each$8(this.stateList,function(f){(a[f]||(a[f]={}))[u]=visualDefault.get(u,f==="inRange"?"active":"inactive",s)})},this);function l(c,u,d){return c&&c[u]&&c[u].hasOwnProperty(d)}t.prototype.completeVisualOption.apply(this,arguments)},n.prototype._resetSelected=function(a,r){var o=this.option,s=this._pieceList,l=(r?o:a).selected||{};if(o.selected=l,each$8(s,function(u,d){var f=this.getSelectedMapKey(u);l.hasOwnProperty(f)||(l[f]=!0)},this),o.selectedMode==="single"){var c=!1;each$8(s,function(u,d){var f=this.getSelectedMapKey(u);l[f]&&(c?l[f]=!1:c=!0)},this)}},n.prototype.getItemSymbol=function(){return this.get("itemSymbol")},n.prototype.getSelectedMapKey=function(a){return this._mode==="categories"?a.value+"":a.index+""},n.prototype.getPieceList=function(){return this._pieceList},n.prototype._determineMode=function(){var a=this.option;return a.pieces&&a.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},n.prototype.setSelected=function(a){this.option.selected=clone$3(a)},n.prototype.getValueState=function(a){var r=VisualMapping.findPieceIndex(a,this._pieceList);return r!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[r])]?"inRange":"outOfRange"},n.prototype.findTargetDataIndices=function(a){var r=[],o=this._pieceList;return this.eachTargetSeries(function(s){var l=[],c=s.getData();c.each(this.getDataDimensionIndex(c),function(u,d){var f=VisualMapping.findPieceIndex(u,o);f===a&&l.push(d)},this),r.push({seriesId:s.id,dataIndex:l})},this),r},n.prototype.getRepresentValue=function(a){var r;if(this.isCategory())r=a.value;else if(a.value!=null)r=a.value;else{var o=a.interval||[];r=o[0]===-1/0&&o[1]===1/0?0:(o[0]+o[1])/2}return r},n.prototype.getVisualMeta=function(a){if(this.isCategory())return;var r=[],o=["",""],s=this;function l(f,v){var _=s.getRepresentValue({interval:f});v||(v=s.getValueState(_));var g=a(_,v);f[0]===-1/0?o[0]=g:f[1]===1/0?o[1]=g:r.push({value:f[0],color:g},{value:f[1],color:g})}var c=this._pieceList.slice();if(!c.length)c.push({interval:[-1/0,1/0]});else{var u=c[0].interval[0];u!==-1/0&&c.unshift({interval:[-1/0,u]}),u=c[c.length-1].interval[1],u!==1/0&&c.push({interval:[u,1/0]})}var d=-1/0;return each$8(c,function(f){var v=f.interval;v&&(v[0]>d&&l([d,v[0]],"outOfRange"),l(v.slice()),d=v[1])},this),{stops:r,outerColors:o}},n.type="visualMap.piecewise",n.defaultOption=inheritDefaultOption(VisualMapModel.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),n}(VisualMapModel),resetMethods={splitNumber:function(t){var n=this.option,a=Math.min(n.precision,20),r=this.getExtent(),o=n.splitNumber;o=Math.max(parseInt(o,10),1),n.splitNumber=o;for(var s=(r[1]-r[0])/o;+s.toFixed(a)!==s&&a<5;)a++;n.precision=a,s=+s.toFixed(a),n.minOpen&&t.push({interval:[-1/0,r[0]],close:[0,0]});for(var l=0,c=r[0];l<o;c+=s,l++){var u=l===o-1?r[1]:c+s;t.push({interval:[c,u],close:[1,1]})}n.maxOpen&&t.push({interval:[r[1],1/0],close:[0,0]}),reformIntervals(t),each$8(t,function(d,f){d.index=f,d.text=this.formatValueText(d.interval)},this)},categories:function(t){var n=this.option;each$8(n.categories,function(a){t.push({text:this.formatValueText(a,!0),value:a})},this),normalizeReverse(n,t)},pieces:function(t){var n=this.option;each$8(n.pieces,function(a,r){isObject$3(a)||(a={value:a});var o={text:"",index:r};if(a.label!=null&&(o.text=a.label),a.hasOwnProperty("value")){var s=o.value=a.value;o.interval=[s,s],o.close=[1,1]}else{for(var l=o.interval=[],c=o.close=[0,0],u=[1,0,1],d=[-1/0,1/0],f=[],v=0;v<2;v++){for(var _=[["gte","gt","min"],["lte","lt","max"]][v],g=0;g<3&&l[v]==null;g++)l[v]=a[_[g]],c[v]=u[g],f[v]=g===2;l[v]==null&&(l[v]=d[v])}f[0]&&l[1]===1/0&&(c[0]=0),f[1]&&l[0]===-1/0&&(c[1]=0),l[0]===l[1]&&c[0]&&c[1]&&(o.value=l[0])}o.visual=VisualMapping.retrieveVisuals(a),t.push(o)},this),normalizeReverse(n,t),reformIntervals(t),each$8(t,function(a){var r=a.close,o=[["<",""][r[1]],[">",""][r[0]]];a.text=a.text||this.formatValueText(a.value!=null?a.value:a.interval,!1,o)},this)}};function normalizeReverse(t,n){var a=t.inverse;(t.orient==="vertical"?!a:a)&&n.reverse()}var PiecewiseVisualMapView=function(t){__extends$1(n,t);function n(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=n.type,a}return n.prototype.doRender=function(){var a=this.group;a.removeAll();var r=this.visualMapModel,o=r.get("textGap"),s=r.textStyleModel,l=this._getItemAlign(),c=r.itemSize,u=this._getViewData(),d=u.endsText,f=retrieve(r.get("showLabel",!0),!d),v=!r.get("selectedMode");d&&this._renderEndsText(a,d[0],c,f,l),each$8(u.viewPieceList,function(_){var g=_.piece,y=new Group;y.onclick=bind$1(this._onItemClick,this,g),this._enableHoverLink(y,_.indexInModelPieceList);var b=r.getRepresentValue(g);if(this._createItemSymbol(y,b,[0,0,c[0],c[1]],v),f){var T=this.visualMapModel.getValueState(b),S=s.get("align")||l;y.add(new ZRText({style:createTextStyle(s,{x:S==="right"?-o:c[0]+o,y:c[1]/2,text:g.text,verticalAlign:s.get("verticalAlign")||"middle",align:S,opacity:retrieve2(s.get("opacity"),T==="outOfRange"?.5:1)}),silent:v}))}a.add(y)},this),d&&this._renderEndsText(a,d[1],c,f,l),box(r.get("orient"),a,r.get("itemGap")),this.renderBackground(a),this.positionGroup(a)},n.prototype._enableHoverLink=function(a,r){var o=this;a.on("mouseover",function(){return s("highlight")}).on("mouseout",function(){return s("downplay")});var s=function(l){var c=o.visualMapModel;c.option.hoverLink&&o.api.dispatchAction({type:l,batch:makeHighDownBatch(c.findTargetDataIndices(r),c)})}},n.prototype._getItemAlign=function(){var a=this.visualMapModel,r=a.option;if(r.orient==="vertical")return getItemAlign(a,this.api,a.itemSize);var o=r.align;return(!o||o==="auto")&&(o="left"),o},n.prototype._renderEndsText=function(a,r,o,s,l){if(r){var c=new Group,u=this.visualMapModel.textStyleModel;c.add(new ZRText({style:createTextStyle(u,{x:s?l==="right"?o[0]:0:o[0]/2,y:o[1]/2,verticalAlign:"middle",align:s?l:"center",text:r})})),a.add(c)}},n.prototype._getViewData=function(){var a=this.visualMapModel,r=map$1(a.getPieceList(),function(c,u){return{piece:c,indexInModelPieceList:u}}),o=a.get("text"),s=a.get("orient"),l=a.get("inverse");return(s==="horizontal"?l:!l)?r.reverse():o&&(o=o.slice().reverse()),{viewPieceList:r,endsText:o}},n.prototype._createItemSymbol=function(a,r,o,s){var l=createSymbol$1(this.getControllerVisual(r,"symbol"),o[0],o[1],o[2],o[3],this.getControllerVisual(r,"color"));l.silent=s,a.add(l)},n.prototype._onItemClick=function(a){var r=this.visualMapModel,o=r.option,s=o.selectedMode;if(s){var l=clone$3(o.selected),c=r.getSelectedMapKey(a);s==="single"||s===!0?(l[c]=!0,each$8(l,function(u,d){l[d]=d===c})):l[c]=!l[c],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:l})}},n.type="visualMap.piecewise",n}(VisualMapView);function install$2(t){t.registerComponentModel(PiecewiseModel),t.registerComponentView(PiecewiseVisualMapView),installCommon(t)}function install$1(t){use(install$3),use(install$2)}function createDom(t,n,a){var r=platformApi.createCanvas(),o=n.getWidth(),s=n.getHeight(),l=r.style;return l&&(l.position="absolute",l.left="0",l.top="0",l.width=o+"px",l.height=s+"px",r.setAttribute("data-zr-dom-id",t)),r.width=o*a,r.height=s*a,r}var Layer=function(t){__extends(n,t);function n(a,r,o){var s=t.call(this)||this;s.motionBlur=!1,s.lastFrameAlpha=.7,s.dpr=1,s.virtual=!1,s.config={},s.incremental=!1,s.zlevel=0,s.maxRepaintRectCount=5,s.__dirty=!0,s.__firstTimePaint=!0,s.__used=!1,s.__drawIndex=0,s.__startIndex=0,s.__endIndex=0,s.__prevStartIndex=null,s.__prevEndIndex=null;var l;o=o||devicePixelRatio,typeof a=="string"?l=createDom(a,r,o):isObject$3(a)&&(l=a,a=l.id),s.id=a,s.dom=l;var c=l.style;return c&&(disableUserSelect(l),l.onselectstart=function(){return!1},c.padding="0",c.margin="0",c.borderWidth="0"),s.painter=r,s.dpr=o,s}return n.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},n.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},n.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},n.prototype.setUnpainted=function(){this.__firstTimePaint=!0},n.prototype.createBackBuffer=function(){var a=this.dpr;this.domBack=createDom("back-"+this.id,this.painter,a),this.ctxBack=this.domBack.getContext("2d"),a!==1&&this.ctxBack.scale(a,a)},n.prototype.createRepaintRects=function(a,r,o,s){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var l=[],c=this.maxRepaintRectCount,u=!1,d=new BoundingRect(0,0,0,0);function f(C){if(!(!C.isFinite()||C.isZero()))if(l.length===0){var E=new BoundingRect(0,0,0,0);E.copy(C),l.push(E)}else{for(var x=!1,A=1/0,N=0,M=0;M<l.length;++M){var R=l[M];if(R.intersect(C)){var D=new BoundingRect(0,0,0,0);D.copy(R),D.union(C),l[M]=D,x=!0;break}else if(u){d.copy(C),d.union(R);var L=C.width*C.height,I=R.width*R.height,$=d.width*d.height,V=$-L-I;V<A&&(A=V,N=M)}}if(u&&(l[N].union(C),x=!0),!x){var E=new BoundingRect(0,0,0,0);E.copy(C),l.push(E)}u||(u=l.length>=c)}}for(var v=this.__startIndex;v<this.__endIndex;++v){var _=a[v];if(_){var g=_.shouldBePainted(o,s,!0,!0),y=_.__isRendered&&(_.__dirty&REDRAW_BIT||!g)?_.getPrevPaintRect():null;y&&f(y);var b=g&&(_.__dirty&REDRAW_BIT||!_.__isRendered)?_.getPaintRect():null;b&&f(b)}}for(var v=this.__prevStartIndex;v<this.__prevEndIndex;++v){var _=r[v],g=_&&_.shouldBePainted(o,s,!0,!0);if(_&&(!g||!_.__zr)&&_.__isRendered){var y=_.getPrevPaintRect();y&&f(y)}}var T;do{T=!1;for(var v=0;v<l.length;){if(l[v].isZero()){l.splice(v,1);continue}for(var S=v+1;S<l.length;)l[v].intersect(l[S])?(T=!0,l[v].union(l[S]),l.splice(S,1)):S++;v++}}while(T);return this._paintRects=l,l},n.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},n.prototype.resize=function(a,r){var o=this.dpr,s=this.dom,l=s.style,c=this.domBack;l&&(l.width=a+"px",l.height=r+"px"),s.width=a*o,s.height=r*o,c&&(c.width=a*o,c.height=r*o,o!==1&&this.ctxBack.scale(o,o))},n.prototype.clear=function(a,r,o){var s=this.dom,l=this.ctx,c=s.width,u=s.height;r=r||this.clearColor;var d=this.motionBlur&&!a,f=this.lastFrameAlpha,v=this.dpr,_=this;d&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(s,0,0,c/v,u/v));var g=this.domBack;function y(b,T,S,C){if(l.clearRect(b,T,S,C),r&&r!=="transparent"){var E=void 0;if(isGradientObject(r)){var x=r.global||r.__width===S&&r.__height===C;E=x&&r.__canvasGradient||getCanvasGradient(l,r,{x:0,y:0,width:S,height:C}),r.__canvasGradient=E,r.__width=S,r.__height=C}else isImagePatternObject(r)&&(r.scaleX=r.scaleX||v,r.scaleY=r.scaleY||v,E=createCanvasPattern(l,r,{dirty:function(){_.setUnpainted(),_.painter.refresh()}}));l.save(),l.fillStyle=E||r,l.fillRect(b,T,S,C),l.restore()}d&&(l.save(),l.globalAlpha=f,l.drawImage(g,b,T,S,C),l.restore())}!o||d?y(0,0,c,u):o.length&&each$8(o,function(b){y(b.x*v,b.y*v,b.width*v,b.height*v)})},n}(Eventful),HOVER_LAYER_ZLEVEL=1e5,CANVAS_ZLEVEL=314159,EL_AFTER_INCREMENTAL_INC=.01,INCREMENTAL_INC=.001;function isLayerValid(t){return t?t.__builtin__?!0:!(typeof t.resize!="function"||typeof t.refresh!="function"):!1}function createRoot(t,n){var a=document.createElement("div");return a.style.cssText=["position:relative","width:"+t+"px","height:"+n+"px","padding:0","margin:0","border-width:0"].join(";")+";",a}var CanvasPainter=function(){function t(n,a,r,o){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var s=!n.nodeName||n.nodeName.toUpperCase()==="CANVAS";this._opts=r=extend({},r||{}),this.dpr=r.devicePixelRatio||devicePixelRatio,this._singleCanvas=s,this.root=n;var l=n.style;l&&(disableUserSelect(n),n.innerHTML=""),this.storage=a;var c=this._zlevelList;this._prevDisplayList=[];var u=this._layers;if(s){var f=n,v=f.width,_=f.height;r.width!=null&&(v=r.width),r.height!=null&&(_=r.height),this.dpr=r.devicePixelRatio||1,f.width=v*this.dpr,f.height=_*this.dpr,this._width=v,this._height=_;var g=new Layer(f,this,this.dpr);g.__builtin__=!0,g.initContext(),u[CANVAS_ZLEVEL]=g,g.zlevel=CANVAS_ZLEVEL,c.push(CANVAS_ZLEVEL),this._domRoot=n}else{this._width=getSize(n,0,r),this._height=getSize(n,1,r);var d=this._domRoot=createRoot(this._width,this._height);n.appendChild(d)}}return t.prototype.getType=function(){return"canvas"},t.prototype.isSingleCanvas=function(){return this._singleCanvas},t.prototype.getViewportRoot=function(){return this._domRoot},t.prototype.getViewportRootOffset=function(){var n=this.getViewportRoot();if(n)return{offsetLeft:n.offsetLeft||0,offsetTop:n.offsetTop||0}},t.prototype.refresh=function(n){var a=this.storage.getDisplayList(!0),r=this._prevDisplayList,o=this._zlevelList;this._redrawId=Math.random(),this._paintList(a,r,n,this._redrawId);for(var s=0;s<o.length;s++){var l=o[s],c=this._layers[l];if(!c.__builtin__&&c.refresh){var u=s===0?this._backgroundColor:null;c.refresh(u)}}return this._opts.useDirtyRect&&(this._prevDisplayList=a.slice()),this},t.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},t.prototype._paintHoverList=function(n){var a=n.length,r=this._hoverlayer;if(r&&r.clear(),!!a){for(var o={inHover:!0,viewWidth:this._width,viewHeight:this._height},s,l=0;l<a;l++){var c=n[l];c.__inHover&&(r||(r=this._hoverlayer=this.getLayer(HOVER_LAYER_ZLEVEL)),s||(s=r.ctx,s.save()),brush(s,c,o,l===a-1))}s&&s.restore()}},t.prototype.getHoverLayer=function(){return this.getLayer(HOVER_LAYER_ZLEVEL)},t.prototype.paintOne=function(n,a){brushSingle(n,a)},t.prototype._paintList=function(n,a,r,o){if(this._redrawId===o){r=r||!1,this._updateLayerStatus(n);var s=this._doPaintList(n,a,r),l=s.finished,c=s.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),c&&this._paintHoverList(n),l)this.eachLayer(function(d){d.afterBrush&&d.afterBrush()});else{var u=this;requestAnimationFrame$1(function(){u._paintList(n,a,r,o)})}}},t.prototype._compositeManually=function(){var n=this.getLayer(CANVAS_ZLEVEL).ctx,a=this._domRoot.width,r=this._domRoot.height;n.clearRect(0,0,a,r),this.eachBuiltinLayer(function(o){o.virtual&&n.drawImage(o.dom,0,0,a,r)})},t.prototype._doPaintList=function(n,a,r){for(var o=this,s=[],l=this._opts.useDirtyRect,c=0;c<this._zlevelList.length;c++){var u=this._zlevelList[c],d=this._layers[u];d.__builtin__&&d!==this._hoverlayer&&(d.__dirty||r)&&s.push(d)}for(var f=!0,v=!1,_=function(b){var T=s[b],S=T.ctx,C=l&&T.createRepaintRects(n,a,g._width,g._height),E=r?T.__startIndex:T.__drawIndex,x=!r&&T.incremental&&Date.now,A=x&&Date.now(),N=T.zlevel===g._zlevelList[0]?g._backgroundColor:null;if(T.__startIndex===T.__endIndex)T.clear(!1,N,C);else if(E===T.__startIndex){var M=n[E];(!M.incremental||!M.notClear||r)&&T.clear(!1,N,C)}E===-1&&(console.error("For some unknown reason. drawIndex is -1"),E=T.__startIndex);var R,D=function(V){var H={inHover:!1,allClipped:!1,prevEl:null,viewWidth:o._width,viewHeight:o._height};for(R=E;R<T.__endIndex;R++){var X=n[R];if(X.__inHover&&(v=!0),o._doPaintEl(X,T,l,V,H,R===T.__endIndex-1),x){var q=Date.now()-A;if(q>15)break}}H.prevElClipPaths&&S.restore()};if(C)if(C.length===0)R=T.__endIndex;else for(var L=g.dpr,I=0;I<C.length;++I){var $=C[I];S.save(),S.beginPath(),S.rect($.x*L,$.y*L,$.width*L,$.height*L),S.clip(),D($),S.restore()}else S.save(),D(),S.restore();T.__drawIndex=R,T.__drawIndex<T.__endIndex&&(f=!1)},g=this,y=0;y<s.length;y++)_(y);return env.wxa&&each$8(this._layers,function(b){b&&b.ctx&&b.ctx.draw&&b.ctx.draw()}),{finished:f,needsRefreshHover:v}},t.prototype._doPaintEl=function(n,a,r,o,s,l){var c=a.ctx;if(r){var u=n.getPaintRect();(!o||u&&u.intersect(o))&&(brush(c,n,s,l),n.setPrevPaintRect(u))}else brush(c,n,s,l)},t.prototype.getLayer=function(n,a){this._singleCanvas&&!this._needsManuallyCompositing&&(n=CANVAS_ZLEVEL);var r=this._layers[n];return r||(r=new Layer("zr_"+n,this,this.dpr),r.zlevel=n,r.__builtin__=!0,this._layerConfig[n]?merge(r,this._layerConfig[n],!0):this._layerConfig[n-EL_AFTER_INCREMENTAL_INC]&&merge(r,this._layerConfig[n-EL_AFTER_INCREMENTAL_INC],!0),a&&(r.virtual=a),this.insertLayer(n,r),r.initContext()),r},t.prototype.insertLayer=function(n,a){var r=this._layers,o=this._zlevelList,s=o.length,l=this._domRoot,c=null,u=-1;if(!r[n]&&isLayerValid(a)){if(s>0&&n>o[0]){for(u=0;u<s-1&&!(o[u]<n&&o[u+1]>n);u++);c=r[o[u]]}if(o.splice(u+1,0,n),r[n]=a,!a.virtual)if(c){var d=c.dom;d.nextSibling?l.insertBefore(a.dom,d.nextSibling):l.appendChild(a.dom)}else l.firstChild?l.insertBefore(a.dom,l.firstChild):l.appendChild(a.dom);a.painter||(a.painter=this)}},t.prototype.eachLayer=function(n,a){for(var r=this._zlevelList,o=0;o<r.length;o++){var s=r[o];n.call(a,this._layers[s],s)}},t.prototype.eachBuiltinLayer=function(n,a){for(var r=this._zlevelList,o=0;o<r.length;o++){var s=r[o],l=this._layers[s];l.__builtin__&&n.call(a,l,s)}},t.prototype.eachOtherLayer=function(n,a){for(var r=this._zlevelList,o=0;o<r.length;o++){var s=r[o],l=this._layers[s];l.__builtin__||n.call(a,l,s)}},t.prototype.getLayers=function(){return this._layers},t.prototype._updateLayerStatus=function(n){this.eachBuiltinLayer(function(v,_){v.__dirty=v.__used=!1});function a(v){s&&(s.__endIndex!==v&&(s.__dirty=!0),s.__endIndex=v)}if(this._singleCanvas)for(var r=1;r<n.length;r++){var o=n[r];if(o.zlevel!==n[r-1].zlevel||o.incremental){this._needsManuallyCompositing=!0;break}}var s=null,l=0,c,u;for(u=0;u<n.length;u++){var o=n[u],d=o.zlevel,f=void 0;c!==d&&(c=d,l=0),o.incremental?(f=this.getLayer(d+INCREMENTAL_INC,this._needsManuallyCompositing),f.incremental=!0,l=1):f=this.getLayer(d+(l>0?EL_AFTER_INCREMENTAL_INC:0),this._needsManuallyCompositing),f.__builtin__||logError("ZLevel "+d+" has been used by unkown layer "+f.id),f!==s&&(f.__used=!0,f.__startIndex!==u&&(f.__dirty=!0),f.__startIndex=u,f.incremental?f.__drawIndex=-1:f.__drawIndex=u,a(u),s=f),o.__dirty&REDRAW_BIT&&!o.__inHover&&(f.__dirty=!0,f.incremental&&f.__drawIndex<0&&(f.__drawIndex=u))}a(u),this.eachBuiltinLayer(function(v,_){!v.__used&&v.getElementCount()>0&&(v.__dirty=!0,v.__startIndex=v.__endIndex=v.__drawIndex=0),v.__dirty&&v.__drawIndex<0&&(v.__drawIndex=v.__startIndex)})},t.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},t.prototype._clearLayer=function(n){n.clear()},t.prototype.setBackgroundColor=function(n){this._backgroundColor=n,each$8(this._layers,function(a){a.setUnpainted()})},t.prototype.configLayer=function(n,a){if(a){var r=this._layerConfig;r[n]?merge(r[n],a,!0):r[n]=a;for(var o=0;o<this._zlevelList.length;o++){var s=this._zlevelList[o];if(s===n||s===n+EL_AFTER_INCREMENTAL_INC){var l=this._layers[s];merge(l,r[n],!0)}}}},t.prototype.delLayer=function(n){var a=this._layers,r=this._zlevelList,o=a[n];o&&(o.dom.parentNode.removeChild(o.dom),delete a[n],r.splice(indexOf(r,n),1))},t.prototype.resize=function(n,a){if(this._domRoot.style){var r=this._domRoot;r.style.display="none";var o=this._opts,s=this.root;if(n!=null&&(o.width=n),a!=null&&(o.height=a),n=getSize(s,0,o),a=getSize(s,1,o),r.style.display="",this._width!==n||a!==this._height){r.style.width=n+"px",r.style.height=a+"px";for(var l in this._layers)this._layers.hasOwnProperty(l)&&this._layers[l].resize(n,a);this.refresh(!0)}this._width=n,this._height=a}else{if(n==null||a==null)return;this._width=n,this._height=a,this.getLayer(CANVAS_ZLEVEL).resize(n,a)}return this},t.prototype.clearLayer=function(n){var a=this._layers[n];a&&a.clear()},t.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},t.prototype.getRenderedCanvas=function(n){if(n=n||{},this._singleCanvas&&!this._compositeManually)return this._layers[CANVAS_ZLEVEL].dom;var a=new Layer("image",this,n.pixelRatio||this.dpr);a.initContext(),a.clear(!1,n.backgroundColor||this._backgroundColor);var r=a.ctx;if(n.pixelRatio<=this.dpr){this.refresh();var o=a.dom.width,s=a.dom.height;this.eachLayer(function(v){v.__builtin__?r.drawImage(v.dom,0,0,o,s):v.renderToCanvas&&(r.save(),v.renderToCanvas(r),r.restore())})}else for(var l={inHover:!1,viewWidth:this._width,viewHeight:this._height},c=this.storage.getDisplayList(!0),u=0,d=c.length;u<d;u++){var f=c[u];brush(r,f,l,u===d-1)}return a.dom},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t}();function install(t){t.registerPainter("canvas",CanvasPainter)}const METHOD_NAMES=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function usePublicAPI(t){function n(a){return function(...o){if(!t.value)throw new Error("ECharts is not initialized yet.");return Reflect.apply(t.value[a],t.value,o)}}return METHOD_NAMES.reduce((a,r)=>(a[r]=n(r),a),{})}function useAutoresize(t,n,a){watch([a,t,n],([r,o,s],l,c)=>{let u=null;if(r&&o&&s){const{offsetWidth:d,offsetHeight:f}=r,{throttle:v=100,onResize:_}=s===!0?{}:s;let g=!1;const y=()=>{o.resize(),_==null||_()},b=v?throttle(y,v):y;u=new ResizeObserver(()=>{!g&&(g=!0,r.offsetWidth===d&&r.offsetHeight===f)||r.offsetWidth===0||r.offsetHeight===0||b()}),u.observe(r)}c(()=>{u&&(u.disconnect(),u=null)})})}const autoresizeProps={autoresize:[Boolean,Object]},LOADING_OPTIONS_KEY=Symbol();function useLoading(t,n,a){const r=inject(LOADING_OPTIONS_KEY,{}),o=computed(()=>({...toValue(r),...a==null?void 0:a.value}));watchEffect(()=>{const s=t.value;s&&(n.value?s.showLoading(o.value):s.hideLoading())})}const loadingProps={loading:Boolean,loadingOptions:Object};function isBrowser(){return typeof window<"u"&&typeof document<"u"}const onRE=/^on[^a-z]/,isOn=t=>onRE.test(t);function omitOn(t){const n={};for(const a in t)isOn(a)||(n[a]=t[a]);return n}function isValidArrayIndex(t){const n=Number(t);return Number.isInteger(n)&&n>=0&&n<Math.pow(2,32)-1&&String(n)===t}function isSameSet(t,n){const a=new Set(t),r=new Set(n);if(a.size!==r.size)return!1;for(const o of a)if(!r.has(o))return!1;return!0}function isPlainObject(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const SLOT_OPTION_PATHS={tooltip:["tooltip","formatter"],dataView:["toolbox","feature","dataView","optionToContent"]},SLOT_PREFIXES=Object.keys(SLOT_OPTION_PATHS);function isValidSlotName(t){return SLOT_PREFIXES.some(n=>t===n||t.startsWith(n+"-"))}function useSlotOption(t,n){const a=isBrowser()?document.createElement("div"):void 0,r=shallowReactive({}),o=shallowReactive({}),s=shallowReactive({}),l=shallowRef(!1),c=()=>l.value&&a?h(Teleport,{to:a},Object.entries(t).filter(([v])=>isValidSlotName(v)).map(([v,_])=>{const g=v;return h("div",{ref:y=>{y instanceof HTMLElement&&(r[g]=y)},style:{display:"contents"}},o[g]?_==null?void 0:_(s[g]):void 0)})):void 0;function u(v){return v!==null&&typeof v=="object"&&!Array.isArray(v)}function d(v){const _={...v},g=(y,b)=>{const T=y[b];if(Array.isArray(T))return y[b]=[...T],y[b];if(u(T))return y[b]={...T},y[b];if(T===void 0)return y[b]=isValidArrayIndex(b)?[]:{},y[b]};return Object.keys(t).filter(y=>isValidSlotName(y)).forEach(y=>{const[b,...T]=y.split("-"),S=SLOT_OPTION_PATHS[b];if(!S)return;const C=[...T,...S];if(C.length===0)return;let E=_;for(let x=0;x<C.length-1;x++)if(E=g(E,C[x]),!E)return;E[C[C.length-1]]=x=>(o[y]=!0,s[y]=x,r[y])}),_}let f=[];return onUpdated(()=>{const v=Object.keys(t).filter(isValidSlotName);isSameSet(v,f)||(f.forEach(_=>{v.includes(_)||(delete s[_],delete o[_],delete r[_])}),f=v,n())}),onMounted(()=>{l.value=!0}),onUnmounted(()=>{a==null||a.remove()}),{teleportedSlots:c,patchOption:d}}let registered=null;const TAG_NAME="x-vue-echarts";function register(){if(registered!=null)return registered;const t=globalThis.customElements;if(!isBrowser()||!(t!=null&&t.get))return registered=!1,registered;if(!t.get(TAG_NAME))try{class n extends HTMLElement{constructor(){super(...arguments);fn(this,"__dispose",null)}disconnectedCallback(){this.__dispose&&(this.__dispose(),this.__dispose=null)}}t.define(TAG_NAME,n)}catch{return registered=!1,registered}return registered=!0,registered}function readId(t){if(!isPlainObject(t))return;const n=t.id;if(typeof n=="string")return n;if(typeof n=="number"&&Number.isFinite(n))return String(n)}function buildSignature(t){const n=t,a=Array.isArray(n.options)?n.options.length:0,r=Array.isArray(n.media)?n.media.length:0,o=Object.create(null),s=[],l=[];for(const c of Object.keys(n)){if(c==="options"||c==="media")continue;const u=n[c];if(Array.isArray(u)){const d=u,f=new Set;let v=0;for(let _=0;_<d.length;_++){const g=readId(d[_]);g!==void 0?f.add(g):v++}o[c]={idsSorted:f.size>0?Array.from(f).sort():[],noIdCount:v}}else isPlainObject(u)?s.push(c):u!==void 0&&l.push(c)}return s.length>1&&s.sort(),l.length>1&&l.sort(),{optionsLength:a,mediaLength:r,arrays:o,objects:s,scalars:l}}function diffKeys(t,n){if(t.length===0)return[];if(n.length===0)return t.slice();const a=new Set(n),r=[];for(let o=0;o<t.length;o++){const s=t[o];a.has(s)||r.push(s)}return r}function hasMissingIds(t,n){if(t.length===0)return!1;if(n.length===0)return!0;const a=new Set(n);for(let r=0;r<t.length;r++)if(!a.has(t[r]))return!0;return!1}function planUpdate(t,n){const a=buildSignature(n);if(!t)return{option:n,signature:a,plan:{notMerge:!1}};if(a.optionsLength<t.optionsLength)return{option:n,signature:a,plan:{notMerge:!0}};if(a.mediaLength<t.mediaLength)return{option:n,signature:a,plan:{notMerge:!0}};if(diffKeys(t.scalars,a.scalars).length>0)return{option:n,signature:a,plan:{notMerge:!0}};const r=new Set,o=new Map,s=diffKeys(t.objects,a.objects);for(let d=0;d<s.length;d++)o.set(s[d],null);for(const d of Object.keys(t.arrays)){const f=t.arrays[d];if(!f)continue;const v=a.arrays[d];if(!v){(f.idsSorted.length>0||f.noIdCount>0)&&(o.set(d,[]),r.add(d));continue}if(hasMissingIds(f.idsSorted,v.idsSorted)){r.add(d);continue}v.noIdCount<f.noIdCount&&r.add(d)}let l=n,c=a;if(o.size>0){const d={...n};o.forEach((f,v)=>{d[v]=f}),l=d,c=buildSignature(l)}const u=r.size>0?Array.from(r).sort():void 0;return{option:l,signature:c,plan:u?{notMerge:!1,replaceMerge:u}:{notMerge:!1}}}var style_default=`x-vue-echarts{display:block;width:100%;height:100%;min-width:0;}
x-vue-echarts>:first-child,x-vue-echarts>:first-child>canvas{border-radius:inherit;}
`;if(typeof document<"u")if(Array.isArray(document.adoptedStyleSheets)&&"replaceSync"in CSSStyleSheet.prototype){const t=new CSSStyleSheet;t.replaceSync(style_default),document.adoptedStyleSheets=[...document.adoptedStyleSheets,t]}else{const t=document.createElement("style");t.textContent=style_default,document.head.appendChild(t)}const wcRegistered=register(),THEME_KEY=Symbol(),INIT_OPTIONS_KEY=Symbol(),UPDATE_OPTIONS_KEY=Symbol();var ECharts_default=defineComponent({name:"Echarts",inheritAttrs:!1,props:{option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean,...autoresizeProps,...loadingProps},emits:{},slots:Object,setup(t,{attrs:n,expose:a,slots:r}){const o=shallowRef(),s=shallowRef(),l=inject(THEME_KEY,null),c=inject(INIT_OPTIONS_KEY,null),u=inject(UPDATE_OPTIONS_KEY,null),{autoresize:d,manualUpdate:f,loading:v,loadingOptions:_}=toRefs(t),g=computed(()=>t.theme||toValue(l)),y=computed(()=>t.initOptions||toValue(c)||void 0),b=computed(()=>t.updateOptions||toValue(u)),T=computed(()=>omitOn(n)),S={},C=new Map,{teleportedSlots:E,patchOption:x}=useSlotOption(r,()=>{!f.value&&t.option&&s.value&&M(s.value,t.option)});let A;function N($){const V={},H=(($==null?void 0:$.replaceMerge)??[]).filter(X=>X!=null);return H.length>0&&(V.replaceMerge=[...new Set(H)]),($==null?void 0:$.notMerge)!==void 0&&(V.notMerge=$.notMerge),V}function M($,V,H,X=!1){const q=x(V);if(X){$.setOption(q,H??{}),A=void 0;return}if(b.value){const oe=H??b.value;$.setOption(q,oe),A=void 0;return}const z=planUpdate(A,q),G=N(z.plan);$.setOption(z.option,G),A=z.signature}Object.keys(n).filter($=>isOn($)).forEach($=>{if($.indexOf("Native:")===2){const q=`on${$.charAt(9).toUpperCase()}${$.slice(10)}`;S[q]=n[$];return}let V=$.charAt(2).toLowerCase()+$.slice(3),H;V.indexOf("zr:")===0&&(H=!0,V=V.substring(3));let X;V.substring(V.length-4)==="Once"&&(X=!0,V=V.substring(0,V.length-4)),C.set({event:V,zr:H,once:X},n[$])});function R(){if(!o.value)return;const $=s.value=init(o.value,g.value,y.value);t.group&&($.group=t.group),C.forEach((X,{zr:q,once:z,event:G})=>{if(!X)return;const oe=q?$.getZr():$;if(z){const ne=X;let ue=!1;X=(...se)=>{ue||(ue=!0,ne(...se),oe.off(G,X))}}oe.on(G,X)});function V(){$&&!$.isDisposed()&&$.resize()}function H(){const{option:X}=t;if(f.value){X&&M($,X,void 0,!0);return}X&&M($,X)}d.value?nextTick(()=>{V(),H()}):H()}const D=($,V,H)=>{if(!t.manualUpdate)return;const X=typeof V=="boolean"?{notMerge:V,lazyUpdate:H}:V;s.value&&M(s.value,$,X??void 0,!0)};function L(){s.value&&(s.value.dispose(),s.value=void 0),A=void 0}watch(()=>t.option,$=>{if(!$){A=void 0;return}f.value||s.value&&M(s.value,$)},{deep:!0}),watch([f,y],()=>{L(),R()},{deep:!0}),watch(g,$=>{var V;(V=s.value)==null||V.setTheme($||{})},{deep:!0}),watchEffect(()=>{t.group&&s.value&&(s.value.group=t.group)});const I=usePublicAPI(s);return useLoading(s,v,_),useAutoresize(s,d,o),onMounted(()=>{R()}),onBeforeUnmount(()=>{wcRegistered&&o.value?o.value.__dispose=L:L()}),a({setOption:D,root:o,chart:s,...I}),()=>h(TAG_NAME,{...T.value,...S,ref:o,class:["echarts",T.value.class]},E())}}),src_default=ECharts_default;const type="FeatureCollection",features=[{type:"Feature",id:"01",properties:{name:"Alabama",density:94.65},geometry:{type:"Polygon",coordinates:[[[-87.359296,35.00118],[-85.606675,34.984749],[-85.431413,34.124869],[-85.184951,32.859696],[-85.069935,32.580372],[-84.960397,32.421541],[-85.004212,32.322956],[-84.889196,32.262709],[-85.058981,32.13674],[-85.053504,32.01077],[-85.141136,31.840985],[-85.042551,31.539753],[-85.113751,31.27686],[-85.004212,31.003013],[-85.497137,30.997536],[-87.600282,30.997536],[-87.633143,30.86609],[-87.408589,30.674397],[-87.446927,30.510088],[-87.37025,30.427934],[-87.518128,30.280057],[-87.655051,30.247195],[-87.90699,30.411504],[-87.934375,30.657966],[-88.011052,30.685351],[-88.10416,30.499135],[-88.137022,30.318396],[-88.394438,30.367688],[-88.471115,31.895754],[-88.241084,33.796253],[-88.098683,34.891641],[-88.202745,34.995703],[-87.359296,35.00118]]]}},{type:"Feature",id:"02",properties:{name:"Alaska",density:1.264},geometry:{type:"MultiPolygon",coordinates:[[[[-131.602021,55.117982],[-131.569159,55.28229],[-131.355558,55.183705],[-131.38842,55.01392],[-131.645836,55.035827],[-131.602021,55.117982]]],[[[-131.832052,55.42469],[-131.645836,55.304197],[-131.749898,55.128935],[-131.832052,55.189182],[-131.832052,55.42469]]],[[[-132.976733,56.437924],[-132.735747,56.459832],[-132.631685,56.421493],[-132.664547,56.273616],[-132.878148,56.240754],[-133.069841,56.333862],[-132.976733,56.437924]]],[[[-133.595627,56.350293],[-133.162949,56.317431],[-133.05341,56.125739],[-132.620732,55.912138],[-132.472854,55.780691],[-132.4619,55.671152],[-132.357838,55.649245],[-132.341408,55.506844],[-132.166146,55.364444],[-132.144238,55.238474],[-132.029222,55.276813],[-131.97993,55.178228],[-131.958022,54.789365],[-132.029222,54.701734],[-132.308546,54.718165],[-132.385223,54.915335],[-132.483808,54.898904],[-132.686455,55.046781],[-132.746701,54.997489],[-132.916486,55.046781],[-132.889102,54.898904],[-132.73027,54.937242],[-132.626209,54.882473],[-132.675501,54.679826],[-132.867194,54.701734],[-133.157472,54.95915],[-133.239626,55.090597],[-133.223195,55.22752],[-133.453227,55.216566],[-133.453227,55.320628],[-133.277964,55.331582],[-133.102702,55.42469],[-133.17938,55.588998],[-133.387503,55.62186],[-133.420365,55.884753],[-133.497042,56.0162],[-133.639442,55.923092],[-133.694212,56.070969],[-133.546335,56.142169],[-133.666827,56.311955],[-133.595627,56.350293]]],[[[-133.738027,55.556137],[-133.546335,55.490413],[-133.414888,55.572568],[-133.283441,55.534229],[-133.420365,55.386352],[-133.633966,55.430167],[-133.738027,55.556137]]],[[[-133.907813,56.930849],[-134.050213,57.029434],[-133.885905,57.095157],[-133.343688,57.002049],[-133.102702,57.007526],[-132.932917,56.82131],[-132.620732,56.667956],[-132.653593,56.55294],[-132.817901,56.492694],[-133.042456,56.520078],[-133.201287,56.448878],[-133.420365,56.492694],[-133.66135,56.448878],[-133.710643,56.684386],[-133.688735,56.837741],[-133.869474,56.843218],[-133.907813,56.930849]]],[[[-134.115936,56.48174],[-134.25286,56.558417],[-134.400737,56.722725],[-134.417168,56.848695],[-134.296675,56.908941],[-134.170706,56.848695],[-134.143321,56.952757],[-133.748981,56.772017],[-133.710643,56.596755],[-133.847566,56.574848],[-133.935197,56.377678],[-133.836612,56.322908],[-133.957105,56.092877],[-134.110459,56.142169],[-134.132367,55.999769],[-134.230952,56.070969],[-134.291198,56.350293],[-134.115936,56.48174]]],[[[-134.636246,56.28457],[-134.669107,56.169554],[-134.806031,56.235277],[-135.178463,56.67891],[-135.413971,56.810356],[-135.331817,56.914418],[-135.424925,57.166357],[-135.687818,57.369004],[-135.419448,57.566174],[-135.298955,57.48402],[-135.063447,57.418296],[-134.849846,57.407343],[-134.844369,57.248511],[-134.636246,56.728202],[-134.636246,56.28457]]],[[[-134.712923,58.223407],[-134.373353,58.14673],[-134.176183,58.157683],[-134.187137,58.081006],[-133.902336,57.807159],[-134.099505,57.850975],[-134.148798,57.757867],[-133.935197,57.615466],[-133.869474,57.363527],[-134.083075,57.297804],[-134.154275,57.210173],[-134.499322,57.029434],[-134.603384,57.034911],[-134.6472,57.226604],[-134.575999,57.341619],[-134.608861,57.511404],[-134.729354,57.719528],[-134.707446,57.829067],[-134.784123,58.097437],[-134.91557,58.212453],[-134.953908,58.409623],[-134.712923,58.223407]]],[[[-135.857603,57.330665],[-135.715203,57.330665],[-135.567326,57.149926],[-135.633049,57.023957],[-135.857603,56.996572],[-135.824742,57.193742],[-135.857603,57.330665]]],[[[-136.279328,58.206976],[-135.978096,58.201499],[-135.780926,58.28913],[-135.496125,58.168637],[-135.64948,58.037191],[-135.59471,57.987898],[-135.45231,58.135776],[-135.107263,58.086483],[-134.91557,57.976944],[-135.025108,57.779775],[-134.937477,57.763344],[-134.822462,57.500451],[-135.085355,57.462112],[-135.572802,57.675713],[-135.556372,57.456635],[-135.709726,57.369004],[-135.890465,57.407343],[-136.000004,57.544266],[-136.208128,57.637374],[-136.366959,57.829067],[-136.569606,57.916698],[-136.558652,58.075529],[-136.421728,58.130299],[-136.377913,58.267222],[-136.279328,58.206976]]],[[[-147.079854,60.200582],[-147.501579,59.948643],[-147.53444,59.850058],[-147.874011,59.784335],[-147.80281,59.937689],[-147.435855,60.09652],[-147.205824,60.271782],[-147.079854,60.200582]]],[[[-147.561825,60.578491],[-147.616594,60.370367],[-147.758995,60.156767],[-147.956165,60.227967],[-147.791856,60.474429],[-147.561825,60.578491]]],[[[-147.786379,70.245291],[-147.682318,70.201475],[-147.162008,70.15766],[-146.888161,70.185044],[-146.510252,70.185044],[-146.099482,70.146706],[-145.858496,70.168614],[-145.622988,70.08646],[-145.195787,69.993352],[-144.620708,69.971444],[-144.461877,70.026213],[-144.078491,70.059075],[-143.914183,70.130275],[-143.497935,70.141229],[-143.503412,70.091936],[-143.25695,70.119321],[-142.747594,70.042644],[-142.402547,69.916674],[-142.079408,69.856428],[-142.008207,69.801659],[-141.712453,69.790705],[-141.433129,69.697597],[-141.378359,69.63735],[-141.208574,69.686643],[-141.00045,69.648304],[-141.00045,60.304644],[-140.53491,60.22249],[-140.474664,60.310121],[-139.987216,60.184151],[-139.696939,60.342983],[-139.088998,60.359413],[-139.198537,60.091043],[-139.045183,59.997935],[-138.700135,59.910304],[-138.623458,59.767904],[-137.604747,59.242118],[-137.445916,58.908024],[-137.265177,59.001132],[-136.827022,59.159963],[-136.580559,59.16544],[-136.465544,59.285933],[-136.476498,59.466672],[-136.301236,59.466672],[-136.25742,59.625503],[-135.945234,59.663842],[-135.479694,59.800766],[-135.025108,59.565257],[-135.068924,59.422857],[-134.959385,59.280456],[-134.701969,59.247595],[-134.378829,59.033994],[-134.400737,58.973748],[-134.25286,58.858732],[-133.842089,58.727285],[-133.173903,58.152206],[-133.075318,57.998852],[-132.867194,57.845498],[-132.560485,57.505928],[-132.253777,57.21565],[-132.368792,57.095157],[-132.05113,57.051341],[-132.127807,56.876079],[-131.870391,56.804879],[-131.837529,56.602232],[-131.580113,56.613186],[-131.087188,56.405062],[-130.78048,56.366724],[-130.621648,56.268139],[-130.468294,56.240754],[-130.424478,56.142169],[-130.101339,56.114785],[-130.002754,55.994292],[-130.150631,55.769737],[-130.128724,55.583521],[-129.986323,55.276813],[-130.095862,55.200136],[-130.336847,54.920812],[-130.687372,54.718165],[-130.785957,54.822227],[-130.917403,54.789365],[-131.010511,54.997489],[-130.983126,55.08512],[-131.092665,55.189182],[-130.862634,55.298721],[-130.928357,55.337059],[-131.158389,55.200136],[-131.284358,55.287767],[-131.426759,55.238474],[-131.843006,55.457552],[-131.700606,55.698537],[-131.963499,55.616383],[-131.974453,55.49589],[-132.182576,55.588998],[-132.226392,55.704014],[-132.083991,55.829984],[-132.127807,55.955953],[-132.324977,55.851892],[-132.522147,56.076446],[-132.642639,56.032631],[-132.719317,56.218847],[-132.527624,56.339339],[-132.341408,56.339339],[-132.396177,56.487217],[-132.297592,56.67891],[-132.450946,56.673433],[-132.768609,56.837741],[-132.993164,57.034911],[-133.51895,57.177311],[-133.507996,57.577128],[-133.677781,57.62642],[-133.639442,57.790728],[-133.814705,57.834544],[-134.072121,58.053622],[-134.143321,58.168637],[-134.586953,58.206976],[-135.074401,58.502731],[-135.282525,59.192825],[-135.38111,59.033994],[-135.337294,58.891593],[-135.140124,58.617746],[-135.189417,58.573931],[-135.05797,58.349376],[-135.085355,58.201499],[-135.277048,58.234361],[-135.430402,58.398669],[-135.633049,58.426053],[-135.91785,58.382238],[-135.912373,58.617746],[-136.087635,58.814916],[-136.246466,58.75467],[-136.876314,58.962794],[-136.931084,58.902547],[-136.586036,58.836824],[-136.317666,58.672516],[-136.213604,58.667039],[-136.180743,58.535592],[-136.043819,58.382238],[-136.388867,58.294607],[-136.591513,58.349376],[-136.59699,58.212453],[-136.859883,58.316515],[-136.947514,58.393192],[-137.111823,58.393192],[-137.566409,58.590362],[-137.900502,58.765624],[-137.933364,58.869686],[-138.11958,59.02304],[-138.634412,59.132579],[-138.919213,59.247595],[-139.417615,59.379041],[-139.746231,59.505011],[-139.718846,59.641934],[-139.625738,59.598119],[-139.5162,59.68575],[-139.625738,59.88292],[-139.488815,59.992458],[-139.554538,60.041751],[-139.801,59.833627],[-140.315833,59.696704],[-140.92925,59.745996],[-141.444083,59.871966],[-141.46599,59.970551],[-141.706976,59.948643],[-141.964392,60.019843],[-142.539471,60.085566],[-142.873564,60.091043],[-143.623905,60.036274],[-143.892275,59.997935],[-144.231845,60.140336],[-144.65357,60.206059],[-144.785016,60.29369],[-144.834309,60.441568],[-145.124586,60.430614],[-145.223171,60.299167],[-145.738004,60.474429],[-145.820158,60.551106],[-146.351421,60.408706],[-146.608837,60.238921],[-146.718376,60.397752],[-146.608837,60.485383],[-146.455483,60.463475],[-145.951604,60.578491],[-146.017328,60.666122],[-146.252836,60.622307],[-146.345944,60.737322],[-146.565022,60.753753],[-146.784099,61.044031],[-146.866253,60.972831],[-147.172962,60.934492],[-147.271547,60.972831],[-147.375609,60.879723],[-147.758995,60.912584],[-147.775426,60.808523],[-148.032842,60.781138],[-148.153334,60.819476],[-148.065703,61.005692],[-148.175242,61.000215],[-148.350504,60.803046],[-148.109519,60.737322],[-148.087611,60.594922],[-147.939734,60.441568],[-148.027365,60.277259],[-148.219058,60.332029],[-148.273827,60.249875],[-148.087611,60.217013],[-147.983549,59.997935],[-148.251919,59.95412],[-148.399797,59.997935],[-148.635305,59.937689],[-148.755798,59.986981],[-149.067984,59.981505],[-149.05703,60.063659],[-149.204907,60.008889],[-149.287061,59.904827],[-149.418508,59.997935],[-149.582816,59.866489],[-149.511616,59.806242],[-149.741647,59.729565],[-149.949771,59.718611],[-150.031925,59.61455],[-150.25648,59.521442],[-150.409834,59.554303],[-150.579619,59.444764],[-150.716543,59.450241],[-151.001343,59.225687],[-151.308052,59.209256],[-151.406637,59.280456],[-151.592853,59.159963],[-151.976239,59.253071],[-151.888608,59.422857],[-151.636669,59.483103],[-151.47236,59.472149],[-151.423068,59.537872],[-151.127313,59.669319],[-151.116359,59.778858],[-151.505222,59.63098],[-151.828361,59.718611],[-151.8667,59.778858],[-151.702392,60.030797],[-151.423068,60.211536],[-151.379252,60.359413],[-151.297098,60.386798],[-151.264237,60.545629],[-151.406637,60.720892],[-151.06159,60.786615],[-150.404357,61.038554],[-150.245526,60.939969],[-150.042879,60.912584],[-149.741647,61.016646],[-150.075741,61.15357],[-150.207187,61.257632],[-150.47008,61.246678],[-150.656296,61.29597],[-150.711066,61.252155],[-151.023251,61.180954],[-151.165652,61.044031],[-151.477837,61.011169],[-151.800977,60.852338],[-151.833838,60.748276],[-152.080301,60.693507],[-152.13507,60.578491],[-152.310332,60.507291],[-152.392486,60.304644],[-152.732057,60.173197],[-152.567748,60.069136],[-152.704672,59.915781],[-153.022334,59.888397],[-153.049719,59.691227],[-153.345474,59.620026],[-153.438582,59.702181],[-153.586459,59.548826],[-153.761721,59.543349],[-153.72886,59.433811],[-154.117723,59.368087],[-154.1944,59.066856],[-153.750768,59.050425],[-153.400243,58.968271],[-153.301658,58.869686],[-153.444059,58.710854],[-153.679567,58.612269],[-153.898645,58.606793],[-153.920553,58.519161],[-154.062953,58.4863],[-153.99723,58.376761],[-154.145107,58.212453],[-154.46277,58.059098],[-154.643509,58.059098],[-154.818771,58.004329],[-154.988556,58.015283],[-155.120003,57.955037],[-155.081664,57.872883],[-155.328126,57.829067],[-155.377419,57.708574],[-155.547204,57.785251],[-155.73342,57.549743],[-156.045606,57.566174],[-156.023698,57.440204],[-156.209914,57.473066],[-156.34136,57.418296],[-156.34136,57.248511],[-156.549484,56.985618],[-156.883577,56.952757],[-157.157424,56.832264],[-157.20124,56.766541],[-157.376502,56.859649],[-157.672257,56.607709],[-157.754411,56.67891],[-157.918719,56.657002],[-157.957058,56.514601],[-158.126843,56.459832],[-158.32949,56.48174],[-158.488321,56.339339],[-158.208997,56.295524],[-158.510229,55.977861],[-159.375585,55.873799],[-159.616571,55.594475],[-159.676817,55.654722],[-159.643955,55.829984],[-159.813741,55.857368],[-160.027341,55.791645],[-160.060203,55.720445],[-160.394296,55.605429],[-160.536697,55.473983],[-160.580512,55.567091],[-160.668143,55.457552],[-160.865313,55.528752],[-161.232268,55.358967],[-161.506115,55.364444],[-161.467776,55.49589],[-161.588269,55.62186],[-161.697808,55.517798],[-161.686854,55.408259],[-162.053809,55.074166],[-162.179779,55.15632],[-162.218117,55.03035],[-162.470057,55.052258],[-162.508395,55.249428],[-162.661749,55.293244],[-162.716519,55.222043],[-162.579595,55.134412],[-162.645319,54.997489],[-162.847965,54.926289],[-163.00132,55.079643],[-163.187536,55.090597],[-163.220397,55.03035],[-163.034181,54.942719],[-163.373752,54.800319],[-163.14372,54.76198],[-163.138243,54.696257],[-163.329936,54.74555],[-163.587352,54.614103],[-164.085754,54.61958],[-164.332216,54.531949],[-164.354124,54.466226],[-164.638925,54.389548],[-164.847049,54.416933],[-164.918249,54.603149],[-164.710125,54.663395],[-164.551294,54.88795],[-164.34317,54.893427],[-163.894061,55.041304],[-163.532583,55.046781],[-163.39566,54.904381],[-163.291598,55.008443],[-163.313505,55.128935],[-163.105382,55.183705],[-162.880827,55.183705],[-162.579595,55.446598],[-162.245502,55.682106],[-161.807347,55.89023],[-161.292514,55.983338],[-161.078914,55.939523],[-160.87079,55.999769],[-160.816021,55.912138],[-160.931036,55.813553],[-160.805067,55.736876],[-160.766728,55.857368],[-160.509312,55.868322],[-160.438112,55.791645],[-160.27928,55.76426],[-160.273803,55.857368],[-160.536697,55.939523],[-160.558604,55.994292],[-160.383342,56.251708],[-160.147834,56.399586],[-159.830171,56.541986],[-159.326293,56.667956],[-158.959338,56.848695],[-158.784076,56.782971],[-158.641675,56.810356],[-158.701922,56.925372],[-158.658106,57.034911],[-158.378782,57.264942],[-157.995396,57.41282],[-157.688688,57.609989],[-157.705118,57.719528],[-157.458656,58.497254],[-157.07527,58.705377],[-157.119086,58.869686],[-158.039212,58.634177],[-158.32949,58.661562],[-158.40069,58.760147],[-158.564998,58.803962],[-158.619768,58.913501],[-158.767645,58.864209],[-158.860753,58.694424],[-158.701922,58.480823],[-158.893615,58.387715],[-159.0634,58.420577],[-159.392016,58.760147],[-159.616571,58.929932],[-159.731586,58.929932],[-159.808264,58.803962],[-159.906848,58.782055],[-160.054726,58.886116],[-160.235465,58.902547],[-160.317619,59.072332],[-160.854359,58.88064],[-161.33633,58.743716],[-161.374669,58.667039],[-161.752577,58.552023],[-161.938793,58.656085],[-161.769008,58.776578],[-161.829255,59.061379],[-161.955224,59.36261],[-161.703285,59.48858],[-161.911409,59.740519],[-162.092148,59.88292],[-162.234548,60.091043],[-162.448149,60.178674],[-162.502918,59.997935],[-162.760334,59.959597],[-163.171105,59.844581],[-163.66403,59.795289],[-163.9324,59.806242],[-164.162431,59.866489],[-164.189816,60.02532],[-164.386986,60.074613],[-164.699171,60.29369],[-164.962064,60.337506],[-165.268773,60.578491],[-165.060649,60.68803],[-165.016834,60.890677],[-165.175665,60.846861],[-165.197573,60.972831],[-165.120896,61.076893],[-165.323543,61.170001],[-165.34545,61.071416],[-165.591913,61.109754],[-165.624774,61.279539],[-165.816467,61.301447],[-165.920529,61.416463],[-165.915052,61.558863],[-166.106745,61.49314],[-166.139607,61.630064],[-165.904098,61.662925],[-166.095791,61.81628],[-165.756221,61.827233],[-165.756221,62.013449],[-165.674067,62.139419],[-165.044219,62.539236],[-164.912772,62.659728],[-164.819664,62.637821],[-164.874433,62.807606],[-164.633448,63.097884],[-164.425324,63.212899],[-164.036462,63.262192],[-163.73523,63.212899],[-163.313505,63.037637],[-163.039658,63.059545],[-162.661749,63.22933],[-162.272887,63.486746],[-162.075717,63.514131],[-162.026424,63.448408],[-161.555408,63.448408],[-161.13916,63.503177],[-160.766728,63.771547],[-160.766728,63.837271],[-160.952944,64.08921],[-160.974852,64.237087],[-161.26513,64.395918],[-161.374669,64.532842],[-161.078914,64.494503],[-160.79959,64.609519],[-160.783159,64.719058],[-161.144637,64.921705],[-161.413007,64.762873],[-161.664946,64.790258],[-161.900455,64.702627],[-162.168825,64.680719],[-162.234548,64.620473],[-162.541257,64.532842],[-162.634365,64.384965],[-162.787719,64.324718],[-162.858919,64.49998],[-163.045135,64.538319],[-163.176582,64.401395],[-163.253259,64.467119],[-163.598306,64.565704],[-164.304832,64.560227],[-164.80871,64.450688],[-165.000403,64.434257],[-165.411174,64.49998],[-166.188899,64.576658],[-166.391546,64.636904],[-166.484654,64.735489],[-166.413454,64.872412],[-166.692778,64.987428],[-166.638008,65.113398],[-166.462746,65.179121],[-166.517516,65.337952],[-166.796839,65.337952],[-167.026871,65.381768],[-167.47598,65.414629],[-167.711489,65.496784],[-168.072967,65.578938],[-168.105828,65.682999],[-167.541703,65.819923],[-166.829701,66.049954],[-166.3313,66.186878],[-166.046499,66.110201],[-165.756221,66.09377],[-165.690498,66.203309],[-165.86576,66.21974],[-165.88219,66.312848],[-165.186619,66.466202],[-164.403417,66.581218],[-163.981692,66.592172],[-163.751661,66.553833],[-163.872153,66.389525],[-163.828338,66.274509],[-163.915969,66.192355],[-163.768091,66.060908],[-163.494244,66.082816],[-163.149197,66.060908],[-162.749381,66.088293],[-162.634365,66.039001],[-162.371472,66.028047],[-162.14144,66.077339],[-161.840208,66.02257],[-161.549931,66.241647],[-161.341807,66.252601],[-161.199406,66.208786],[-161.128206,66.334755],[-161.528023,66.395002],[-161.911409,66.345709],[-161.87307,66.510017],[-162.174302,66.68528],[-162.502918,66.740049],[-162.601503,66.89888],[-162.344087,66.937219],[-162.015471,66.778388],[-162.075717,66.652418],[-161.916886,66.553833],[-161.571838,66.438817],[-161.489684,66.55931],[-161.884024,66.718141],[-161.714239,67.002942],[-161.851162,67.052235],[-162.240025,66.991988],[-162.639842,67.008419],[-162.700088,67.057712],[-162.902735,67.008419],[-163.740707,67.128912],[-163.757138,67.254881],[-164.009077,67.534205],[-164.211724,67.638267],[-164.534863,67.725898],[-165.192096,67.966884],[-165.493328,68.059992],[-165.794559,68.081899],[-166.243668,68.246208],[-166.681824,68.339316],[-166.703731,68.372177],[-166.375115,68.42147],[-166.227238,68.574824],[-166.216284,68.881533],[-165.329019,68.859625],[-164.255539,68.930825],[-163.976215,68.985595],[-163.532583,69.138949],[-163.110859,69.374457],[-163.023228,69.609966],[-162.842489,69.812613],[-162.470057,69.982398],[-162.311225,70.108367],[-161.851162,70.311014],[-161.779962,70.256245],[-161.396576,70.239814],[-160.837928,70.343876],[-160.487404,70.453415],[-159.649432,70.792985],[-159.33177,70.809416],[-159.298908,70.760123],[-158.975769,70.798462],[-158.658106,70.787508],[-158.033735,70.831323],[-157.420318,70.979201],[-156.812377,71.285909],[-156.565915,71.351633],[-156.522099,71.296863],[-155.585543,71.170894],[-155.508865,71.083263],[-155.832005,70.968247],[-155.979882,70.96277],[-155.974405,70.809416],[-155.503388,70.858708],[-155.476004,70.940862],[-155.262403,71.017539],[-155.191203,70.973724],[-155.032372,71.148986],[-154.566832,70.990155],[-154.643509,70.869662],[-154.353231,70.8368],[-154.183446,70.7656],[-153.931507,70.880616],[-153.487874,70.886093],[-153.235935,70.924431],[-152.589656,70.886093],[-152.26104,70.842277],[-152.419871,70.606769],[-151.817408,70.546523],[-151.773592,70.486276],[-151.187559,70.382214],[-151.182082,70.431507],[-150.760358,70.49723],[-150.355064,70.491753],[-150.349588,70.436984],[-150.114079,70.431507],[-149.867617,70.508184],[-149.462323,70.519138],[-149.177522,70.486276],[-148.78866,70.404122],[-148.607921,70.420553],[-148.350504,70.305537],[-148.202627,70.349353],[-147.961642,70.316491],[-147.786379,70.245291]]],[[[-152.94018,58.026237],[-152.945657,57.982421],[-153.290705,58.048145],[-153.044242,58.305561],[-152.819688,58.327469],[-152.666333,58.562977],[-152.496548,58.354853],[-152.354148,58.426053],[-152.080301,58.311038],[-152.080301,58.152206],[-152.480117,58.130299],[-152.655379,58.059098],[-152.94018,58.026237]]],[[[-153.958891,57.538789],[-153.67409,57.670236],[-153.931507,57.69762],[-153.936983,57.812636],[-153.723383,57.889313],[-153.570028,57.834544],[-153.548121,57.719528],[-153.46049,57.796205],[-153.455013,57.96599],[-153.268797,57.889313],[-153.235935,57.998852],[-153.071627,57.933129],[-152.874457,57.933129],[-152.721103,57.993375],[-152.469163,57.889313],[-152.469163,57.599035],[-152.151501,57.620943],[-152.359625,57.42925],[-152.74301,57.505928],[-152.60061,57.379958],[-152.710149,57.275896],[-152.907319,57.325188],[-152.912796,57.128019],[-153.214027,57.073249],[-153.312612,56.991095],[-153.498828,57.067772],[-153.695998,56.859649],[-153.849352,56.837741],[-154.013661,56.744633],[-154.073907,56.969187],[-154.303938,56.848695],[-154.314892,56.919895],[-154.523016,56.991095],[-154.539447,57.193742],[-154.742094,57.275896],[-154.627078,57.511404],[-154.227261,57.659282],[-153.980799,57.648328],[-153.958891,57.538789]]],[[[-154.53397,56.602232],[-154.742094,56.399586],[-154.807817,56.432447],[-154.53397,56.602232]]],[[[-155.634835,55.923092],[-155.476004,55.912138],[-155.530773,55.704014],[-155.793666,55.731399],[-155.837482,55.802599],[-155.634835,55.923092]]],[[[-159.890418,55.28229],[-159.950664,55.068689],[-160.257373,54.893427],[-160.109495,55.161797],[-160.005433,55.134412],[-159.890418,55.28229]]],[[[-160.520266,55.358967],[-160.33405,55.358967],[-160.339527,55.249428],[-160.525743,55.128935],[-160.690051,55.211089],[-160.794113,55.134412],[-160.854359,55.320628],[-160.79959,55.380875],[-160.520266,55.358967]]],[[[-162.256456,54.981058],[-162.234548,54.893427],[-162.349564,54.838658],[-162.437195,54.931766],[-162.256456,54.981058]]],[[[-162.415287,63.634624],[-162.563165,63.536039],[-162.612457,63.62367],[-162.415287,63.634624]]],[[[-162.80415,54.488133],[-162.590549,54.449795],[-162.612457,54.367641],[-162.782242,54.373118],[-162.80415,54.488133]]],[[[-165.548097,54.29644],[-165.476897,54.181425],[-165.630251,54.132132],[-165.685021,54.252625],[-165.548097,54.29644]]],[[[-165.73979,54.15404],[-166.046499,54.044501],[-166.112222,54.121178],[-165.980775,54.219763],[-165.73979,54.15404]]],[[[-166.364161,60.359413],[-166.13413,60.397752],[-166.084837,60.326552],[-165.88219,60.342983],[-165.685021,60.277259],[-165.646682,59.992458],[-165.750744,59.89935],[-166.00816,59.844581],[-166.062929,59.745996],[-166.440838,59.855535],[-166.6161,59.850058],[-166.994009,59.992458],[-167.125456,59.992458],[-167.344534,60.074613],[-167.421211,60.206059],[-167.311672,60.238921],[-166.93924,60.206059],[-166.763978,60.310121],[-166.577762,60.321075],[-166.495608,60.392275],[-166.364161,60.359413]]],[[[-166.375115,54.01164],[-166.210807,53.934962],[-166.5449,53.748746],[-166.539423,53.715885],[-166.117699,53.852808],[-166.112222,53.776131],[-166.282007,53.683023],[-166.555854,53.622777],[-166.583239,53.529669],[-166.878994,53.431084],[-167.13641,53.425607],[-167.306195,53.332499],[-167.623857,53.250345],[-167.793643,53.337976],[-167.459549,53.442038],[-167.355487,53.425607],[-167.103548,53.513238],[-167.163794,53.611823],[-167.021394,53.715885],[-166.807793,53.666592],[-166.785886,53.732316],[-167.015917,53.754223],[-167.141887,53.825424],[-167.032348,53.945916],[-166.643485,54.017116],[-166.561331,53.880193],[-166.375115,54.01164]]],[[[-168.790446,53.157237],[-168.40706,53.34893],[-168.385152,53.431084],[-168.237275,53.524192],[-168.007243,53.568007],[-167.886751,53.518715],[-167.842935,53.387268],[-168.270136,53.244868],[-168.500168,53.036744],[-168.686384,52.965544],[-168.790446,53.157237]]],[[[-169.74891,52.894344],[-169.705095,52.795759],[-169.962511,52.790282],[-169.989896,52.856005],[-169.74891,52.894344]]],[[[-170.148727,57.221127],[-170.28565,57.128019],[-170.313035,57.221127],[-170.148727,57.221127]]],[[[-170.669036,52.697174],[-170.603313,52.604066],[-170.789529,52.538343],[-170.816914,52.636928],[-170.669036,52.697174]]],[[[-171.742517,63.716778],[-170.94836,63.5689],[-170.488297,63.69487],[-170.280174,63.683916],[-170.093958,63.612716],[-170.044665,63.492223],[-169.644848,63.4265],[-169.518879,63.366254],[-168.99857,63.338869],[-168.686384,63.295053],[-168.856169,63.147176],[-169.108108,63.180038],[-169.376478,63.152653],[-169.513402,63.08693],[-169.639372,62.939052],[-169.831064,63.075976],[-170.055619,63.169084],[-170.263743,63.180038],[-170.362328,63.2841],[-170.866206,63.415546],[-171.101715,63.421023],[-171.463193,63.306007],[-171.73704,63.366254],[-171.852055,63.486746],[-171.742517,63.716778]]],[[[-172.432611,52.390465],[-172.41618,52.275449],[-172.607873,52.253542],[-172.569535,52.352127],[-172.432611,52.390465]]],[[[-173.626584,52.14948],[-173.495138,52.105664],[-173.122706,52.111141],[-173.106275,52.07828],[-173.549907,52.028987],[-173.626584,52.14948]]],[[[-174.322156,52.280926],[-174.327632,52.379511],[-174.185232,52.41785],[-173.982585,52.319265],[-174.059262,52.226157],[-174.179755,52.231634],[-174.141417,52.127572],[-174.333109,52.116618],[-174.738403,52.007079],[-174.968435,52.039941],[-174.902711,52.116618],[-174.656249,52.105664],[-174.322156,52.280926]]],[[[-176.469116,51.853725],[-176.288377,51.870156],[-176.288377,51.744186],[-176.518409,51.760617],[-176.80321,51.61274],[-176.912748,51.80991],[-176.792256,51.815386],[-176.775825,51.963264],[-176.627947,51.968741],[-176.627947,51.859202],[-176.469116,51.853725]]],[[[-177.153734,51.946833],[-177.044195,51.897541],[-177.120872,51.727755],[-177.274226,51.678463],[-177.279703,51.782525],[-177.153734,51.946833]]],[[[-178.123152,51.919448],[-177.953367,51.913971],[-177.800013,51.793479],[-177.964321,51.651078],[-178.123152,51.919448]]],[[[-187.107557,52.992929],[-187.293773,52.927205],[-187.304726,52.823143],[-188.90491,52.762897],[-188.642017,52.927205],[-188.642017,53.003883],[-187.107557,52.992929]]]]}},{type:"Feature",id:"04",properties:{name:"Arizona",density:57.05},geometry:{type:"Polygon",coordinates:[[[-109.042503,37.000263],[-109.04798,31.331629],[-111.074448,31.331629],[-112.246513,31.704061],[-114.815198,32.492741],[-114.72209,32.717295],[-114.524921,32.755634],[-114.470151,32.843265],[-114.524921,33.029481],[-114.661844,33.034958],[-114.727567,33.40739],[-114.524921,33.54979],[-114.497536,33.697668],[-114.535874,33.933176],[-114.415382,34.108438],[-114.256551,34.174162],[-114.136058,34.305608],[-114.333228,34.448009],[-114.470151,34.710902],[-114.634459,34.87521],[-114.634459,35.00118],[-114.574213,35.138103],[-114.596121,35.324319],[-114.678275,35.516012],[-114.738521,36.102045],[-114.371566,36.140383],[-114.251074,36.01989],[-114.152489,36.025367],[-114.048427,36.195153],[-114.048427,37.000263],[-110.499369,37.00574],[-109.042503,37.000263]]]}},{type:"Feature",id:"05",properties:{name:"Arkansas",density:56.43},geometry:{type:"Polygon",coordinates:[[[-94.473842,36.501861],[-90.152536,36.496384],[-90.064905,36.304691],[-90.218259,36.184199],[-90.377091,35.997983],[-89.730812,35.997983],[-89.763673,35.811767],[-89.911551,35.756997],[-89.944412,35.603643],[-90.130628,35.439335],[-90.114197,35.198349],[-90.212782,35.023087],[-90.311367,34.995703],[-90.251121,34.908072],[-90.409952,34.831394],[-90.481152,34.661609],[-90.585214,34.617794],[-90.568783,34.420624],[-90.749522,34.365854],[-90.744046,34.300131],[-90.952169,34.135823],[-90.891923,34.026284],[-91.072662,33.867453],[-91.231493,33.560744],[-91.056231,33.429298],[-91.143862,33.347144],[-91.089093,33.13902],[-91.16577,33.002096],[-93.608485,33.018527],[-94.041164,33.018527],[-94.041164,33.54979],[-94.183564,33.593606],[-94.380734,33.544313],[-94.484796,33.637421],[-94.430026,35.395519],[-94.616242,36.501861],[-94.473842,36.501861]]]}},{type:"Feature",id:"06",properties:{name:"California",density:241.7},geometry:{type:"Polygon",coordinates:[[[-123.233256,42.006186],[-122.378853,42.011663],[-121.037003,41.995232],[-120.001861,41.995232],[-119.996384,40.264519],[-120.001861,38.999346],[-118.71478,38.101128],[-117.498899,37.21934],[-116.540435,36.501861],[-115.85034,35.970598],[-114.634459,35.00118],[-114.634459,34.87521],[-114.470151,34.710902],[-114.333228,34.448009],[-114.136058,34.305608],[-114.256551,34.174162],[-114.415382,34.108438],[-114.535874,33.933176],[-114.497536,33.697668],[-114.524921,33.54979],[-114.727567,33.40739],[-114.661844,33.034958],[-114.524921,33.029481],[-114.470151,32.843265],[-114.524921,32.755634],[-114.72209,32.717295],[-116.04751,32.624187],[-117.126467,32.536556],[-117.24696,32.668003],[-117.252437,32.876127],[-117.329114,33.122589],[-117.471515,33.297851],[-117.7837,33.538836],[-118.183517,33.763391],[-118.260194,33.703145],[-118.413548,33.741483],[-118.391641,33.840068],[-118.566903,34.042715],[-118.802411,33.998899],[-119.218659,34.146777],[-119.278905,34.26727],[-119.558229,34.415147],[-119.875891,34.40967],[-120.138784,34.475393],[-120.472878,34.448009],[-120.64814,34.579455],[-120.609801,34.858779],[-120.670048,34.902595],[-120.631709,35.099764],[-120.894602,35.247642],[-120.905556,35.450289],[-121.004141,35.461243],[-121.168449,35.636505],[-121.283465,35.674843],[-121.332757,35.784382],[-121.716143,36.195153],[-121.896882,36.315645],[-121.935221,36.638785],[-121.858544,36.6114],[-121.787344,36.803093],[-121.929744,36.978355],[-122.105006,36.956447],[-122.335038,37.115279],[-122.417192,37.241248],[-122.400761,37.361741],[-122.515777,37.520572],[-122.515777,37.783465],[-122.329561,37.783465],[-122.406238,38.15042],[-122.488392,38.112082],[-122.504823,37.931343],[-122.701993,37.893004],[-122.937501,38.029928],[-122.97584,38.265436],[-123.129194,38.451652],[-123.331841,38.566668],[-123.44138,38.698114],[-123.737134,38.95553],[-123.687842,39.032208],[-123.824765,39.366301],[-123.764519,39.552517],[-123.85215,39.831841],[-124.109566,40.105688],[-124.361506,40.259042],[-124.410798,40.439781],[-124.158859,40.877937],[-124.109566,41.025814],[-124.158859,41.14083],[-124.065751,41.442061],[-124.147905,41.715908],[-124.257444,41.781632],[-124.213628,42.000709],[-123.233256,42.006186]]]}},{type:"Feature",id:"08",properties:{name:"Colorado",density:49.33},geometry:{type:"Polygon",coordinates:[[[-107.919731,41.003906],[-105.728954,40.998429],[-104.053011,41.003906],[-102.053927,41.003906],[-102.053927,40.001626],[-102.042974,36.994786],[-103.001438,37.000263],[-104.337812,36.994786],[-106.868158,36.994786],[-107.421329,37.000263],[-109.042503,37.000263],[-109.042503,38.166851],[-109.058934,38.27639],[-109.053457,39.125316],[-109.04798,40.998429],[-107.919731,41.003906]]]}},{type:"Feature",id:"09",properties:{name:"Connecticut",density:739.1},geometry:{type:"Polygon",coordinates:[[[-73.053528,42.039048],[-71.799309,42.022617],[-71.799309,42.006186],[-71.799309,41.414677],[-71.859555,41.321569],[-71.947186,41.338],[-72.385341,41.261322],[-72.905651,41.28323],[-73.130205,41.146307],[-73.371191,41.102491],[-73.655992,40.987475],[-73.727192,41.102491],[-73.48073,41.21203],[-73.55193,41.294184],[-73.486206,42.050002],[-73.053528,42.039048]]]}},{type:"Feature",id:"10",properties:{name:"Delaware",density:464.3},geometry:{type:"Polygon",coordinates:[[[-75.414089,39.804456],[-75.507197,39.683964],[-75.611259,39.61824],[-75.589352,39.459409],[-75.441474,39.311532],[-75.403136,39.065069],[-75.189535,38.807653],[-75.09095,38.796699],[-75.047134,38.451652],[-75.693413,38.462606],[-75.786521,39.722302],[-75.616736,39.831841],[-75.414089,39.804456]]]}},{type:"Feature",id:"11",properties:{name:"District of Columbia",density:10065},geometry:{type:"Polygon",coordinates:[[[-77.035264,38.993869],[-76.909294,38.895284],[-77.040741,38.791222],[-77.117418,38.933623],[-77.035264,38.993869]]]}},{type:"Feature",id:"12",properties:{name:"Florida",density:353.4},geometry:{type:"Polygon",coordinates:[[[-85.497137,30.997536],[-85.004212,31.003013],[-84.867289,30.712735],[-83.498053,30.647012],[-82.216449,30.570335],[-82.167157,30.356734],[-82.046664,30.362211],[-82.002849,30.564858],[-82.041187,30.751074],[-81.948079,30.827751],[-81.718048,30.745597],[-81.444201,30.707258],[-81.383954,30.27458],[-81.257985,29.787132],[-80.967707,29.14633],[-80.524075,28.461713],[-80.589798,28.41242],[-80.56789,28.094758],[-80.381674,27.738757],[-80.091397,27.021277],[-80.03115,26.796723],[-80.036627,26.566691],[-80.146166,25.739673],[-80.239274,25.723243],[-80.337859,25.465826],[-80.304997,25.383672],[-80.49669,25.197456],[-80.573367,25.241272],[-80.759583,25.164595],[-81.077246,25.120779],[-81.170354,25.224841],[-81.126538,25.378195],[-81.351093,25.821827],[-81.526355,25.903982],[-81.679709,25.843735],[-81.800202,26.090198],[-81.833064,26.292844],[-82.041187,26.517399],[-82.09048,26.665276],[-82.057618,26.878877],[-82.172634,26.917216],[-82.145249,26.791246],[-82.249311,26.758384],[-82.566974,27.300601],[-82.692943,27.437525],[-82.391711,27.837342],[-82.588881,27.815434],[-82.720328,27.689464],[-82.851774,27.886634],[-82.676512,28.434328],[-82.643651,28.888914],[-82.764143,28.998453],[-82.802482,29.14633],[-82.994175,29.179192],[-83.218729,29.420177],[-83.399469,29.518762],[-83.410422,29.66664],[-83.536392,29.721409],[-83.640454,29.885717],[-84.02384,30.104795],[-84.357933,30.055502],[-84.341502,29.902148],[-84.451041,29.929533],[-84.867289,29.743317],[-85.310921,29.699501],[-85.299967,29.80904],[-85.404029,29.940487],[-85.924338,30.236241],[-86.29677,30.362211],[-86.630863,30.395073],[-86.910187,30.373165],[-87.518128,30.280057],[-87.37025,30.427934],[-87.446927,30.510088],[-87.408589,30.674397],[-87.633143,30.86609],[-87.600282,30.997536],[-85.497137,30.997536]]]}},{type:"Feature",id:"13",properties:{name:"Georgia",density:169.5},geometry:{type:"Polygon",coordinates:[[[-83.109191,35.00118],[-83.322791,34.787579],[-83.339222,34.683517],[-83.005129,34.469916],[-82.901067,34.486347],[-82.747713,34.26727],[-82.714851,34.152254],[-82.55602,33.94413],[-82.325988,33.81816],[-82.194542,33.631944],[-81.926172,33.462159],[-81.937125,33.347144],[-81.761863,33.160928],[-81.493493,33.007573],[-81.42777,32.843265],[-81.416816,32.629664],[-81.279893,32.558464],[-81.121061,32.290094],[-81.115584,32.120309],[-80.885553,32.032678],[-81.132015,31.693108],[-81.175831,31.517845],[-81.279893,31.364491],[-81.290846,31.20566],[-81.400385,31.13446],[-81.444201,30.707258],[-81.718048,30.745597],[-81.948079,30.827751],[-82.041187,30.751074],[-82.002849,30.564858],[-82.046664,30.362211],[-82.167157,30.356734],[-82.216449,30.570335],[-83.498053,30.647012],[-84.867289,30.712735],[-85.004212,31.003013],[-85.113751,31.27686],[-85.042551,31.539753],[-85.141136,31.840985],[-85.053504,32.01077],[-85.058981,32.13674],[-84.889196,32.262709],[-85.004212,32.322956],[-84.960397,32.421541],[-85.069935,32.580372],[-85.184951,32.859696],[-85.431413,34.124869],[-85.606675,34.984749],[-84.319594,34.990226],[-83.618546,34.984749],[-83.109191,35.00118]]]}},{type:"Feature",id:"15",properties:{name:"Hawaii",density:214.1},geometry:{type:"MultiPolygon",coordinates:[[[[-155.634835,18.948267],[-155.881297,19.035898],[-155.919636,19.123529],[-155.886774,19.348084],[-156.062036,19.73147],[-155.925113,19.857439],[-155.826528,20.032702],[-155.897728,20.147717],[-155.87582,20.26821],[-155.596496,20.12581],[-155.284311,20.021748],[-155.092618,19.868393],[-155.092618,19.736947],[-154.807817,19.523346],[-154.983079,19.348084],[-155.295265,19.26593],[-155.514342,19.134483],[-155.634835,18.948267]]],[[[-156.587823,21.029505],[-156.472807,20.892581],[-156.324929,20.952827],[-156.00179,20.793996],[-156.051082,20.651596],[-156.379699,20.580396],[-156.445422,20.60778],[-156.461853,20.783042],[-156.631638,20.821381],[-156.697361,20.919966],[-156.587823,21.029505]]],[[[-156.982162,21.210244],[-157.080747,21.106182],[-157.310779,21.106182],[-157.239579,21.221198],[-156.982162,21.210244]]],[[[-157.951581,21.697691],[-157.842042,21.462183],[-157.896811,21.325259],[-158.110412,21.303352],[-158.252813,21.582676],[-158.126843,21.588153],[-157.951581,21.697691]]],[[[-159.468693,22.228955],[-159.353678,22.218001],[-159.298908,22.113939],[-159.33177,21.966061],[-159.446786,21.872953],[-159.764448,21.987969],[-159.726109,22.152277],[-159.468693,22.228955]]]]}},{type:"Feature",id:"16",properties:{name:"Idaho",density:19.15},geometry:{type:"Polygon",coordinates:[[[-116.04751,49.000239],[-116.04751,47.976051],[-115.724371,47.696727],[-115.718894,47.42288],[-115.527201,47.302388],[-115.324554,47.258572],[-115.302646,47.187372],[-114.930214,46.919002],[-114.886399,46.809463],[-114.623506,46.705401],[-114.612552,46.639678],[-114.322274,46.645155],[-114.464674,46.272723],[-114.492059,46.037214],[-114.387997,45.88386],[-114.568736,45.774321],[-114.497536,45.670259],[-114.546828,45.560721],[-114.333228,45.456659],[-114.086765,45.593582],[-113.98818,45.703121],[-113.807441,45.604536],[-113.834826,45.522382],[-113.736241,45.330689],[-113.571933,45.128042],[-113.45144,45.056842],[-113.456917,44.865149],[-113.341901,44.782995],[-113.133778,44.772041],[-113.002331,44.448902],[-112.887315,44.394132],[-112.783254,44.48724],[-112.471068,44.481763],[-112.241036,44.569394],[-112.104113,44.520102],[-111.868605,44.563917],[-111.819312,44.509148],[-111.616665,44.547487],[-111.386634,44.75561],[-111.227803,44.580348],[-111.047063,44.476286],[-111.047063,42.000709],[-112.164359,41.995232],[-114.04295,41.995232],[-117.027882,42.000709],[-117.027882,43.830007],[-116.896436,44.158624],[-116.97859,44.240778],[-117.170283,44.257209],[-117.241483,44.394132],[-117.038836,44.750133],[-116.934774,44.782995],[-116.830713,44.930872],[-116.847143,45.02398],[-116.732128,45.144473],[-116.671881,45.319735],[-116.463758,45.61549],[-116.545912,45.752413],[-116.78142,45.823614],[-116.918344,45.993399],[-116.92382,46.168661],[-117.055267,46.343923],[-117.038836,46.426077],[-117.044313,47.762451],[-117.033359,49.000239],[-116.04751,49.000239]]]}},{type:"Feature",id:"17",properties:{name:"Illinois",density:231.5},geometry:{type:"Polygon",coordinates:[[[-90.639984,42.510065],[-88.788778,42.493634],[-87.802929,42.493634],[-87.83579,42.301941],[-87.682436,42.077386],[-87.523605,41.710431],[-87.529082,39.34987],[-87.63862,39.169131],[-87.512651,38.95553],[-87.49622,38.780268],[-87.62219,38.637868],[-87.655051,38.506421],[-87.83579,38.292821],[-87.950806,38.27639],[-87.923421,38.15042],[-88.000098,38.101128],[-88.060345,37.865619],[-88.027483,37.799896],[-88.15893,37.657496],[-88.065822,37.482234],[-88.476592,37.389126],[-88.514931,37.285064],[-88.421823,37.153617],[-88.547792,37.071463],[-88.914747,37.224817],[-89.029763,37.213863],[-89.183118,37.038601],[-89.133825,36.983832],[-89.292656,36.994786],[-89.517211,37.279587],[-89.435057,37.34531],[-89.517211,37.537003],[-89.517211,37.690357],[-89.84035,37.903958],[-89.949889,37.88205],[-90.059428,38.013497],[-90.355183,38.216144],[-90.349706,38.374975],[-90.179921,38.632391],[-90.207305,38.725499],[-90.10872,38.845992],[-90.251121,38.917192],[-90.470199,38.961007],[-90.585214,38.867899],[-90.661891,38.928146],[-90.727615,39.256762],[-91.061708,39.470363],[-91.368417,39.727779],[-91.494386,40.034488],[-91.50534,40.237135],[-91.417709,40.379535],[-91.401278,40.560274],[-91.121954,40.669813],[-91.09457,40.823167],[-90.963123,40.921752],[-90.946692,41.097014],[-91.111001,41.239415],[-91.045277,41.414677],[-90.656414,41.463969],[-90.344229,41.589939],[-90.311367,41.743293],[-90.179921,41.809016],[-90.141582,42.000709],[-90.168967,42.126679],[-90.393521,42.225264],[-90.420906,42.329326],[-90.639984,42.510065]]]}},{type:"Feature",id:"18",properties:{name:"Indiana",density:181.7},geometry:{type:"Polygon",coordinates:[[[-85.990061,41.759724],[-84.807042,41.759724],[-84.807042,41.694001],[-84.801565,40.500028],[-84.817996,39.103408],[-84.894673,39.059592],[-84.812519,38.785745],[-84.987781,38.780268],[-85.173997,38.68716],[-85.431413,38.730976],[-85.42046,38.533806],[-85.590245,38.451652],[-85.655968,38.325682],[-85.83123,38.27639],[-85.924338,38.024451],[-86.039354,37.958727],[-86.263908,38.051835],[-86.302247,38.166851],[-86.521325,38.040881],[-86.504894,37.931343],[-86.729448,37.893004],[-86.795172,37.991589],[-87.047111,37.893004],[-87.129265,37.788942],[-87.381204,37.93682],[-87.512651,37.903958],[-87.600282,37.975158],[-87.682436,37.903958],[-87.934375,37.893004],[-88.027483,37.799896],[-88.060345,37.865619],[-88.000098,38.101128],[-87.923421,38.15042],[-87.950806,38.27639],[-87.83579,38.292821],[-87.655051,38.506421],[-87.62219,38.637868],[-87.49622,38.780268],[-87.512651,38.95553],[-87.63862,39.169131],[-87.529082,39.34987],[-87.523605,41.710431],[-87.42502,41.644708],[-87.118311,41.644708],[-86.822556,41.759724],[-85.990061,41.759724]]]}},{type:"Feature",id:"19",properties:{name:"Iowa",density:54.81},geometry:{type:"Polygon",coordinates:[[[-91.368417,43.501391],[-91.215062,43.501391],[-91.204109,43.353514],[-91.056231,43.254929],[-91.176724,43.134436],[-91.143862,42.909881],[-91.067185,42.75105],[-90.711184,42.636034],[-90.639984,42.510065],[-90.420906,42.329326],[-90.393521,42.225264],[-90.168967,42.126679],[-90.141582,42.000709],[-90.179921,41.809016],[-90.311367,41.743293],[-90.344229,41.589939],[-90.656414,41.463969],[-91.045277,41.414677],[-91.111001,41.239415],[-90.946692,41.097014],[-90.963123,40.921752],[-91.09457,40.823167],[-91.121954,40.669813],[-91.401278,40.560274],[-91.417709,40.379535],[-91.527248,40.412397],[-91.729895,40.615043],[-91.833957,40.609566],[-93.257961,40.582182],[-94.632673,40.571228],[-95.7664,40.587659],[-95.881416,40.719105],[-95.826646,40.976521],[-95.925231,41.201076],[-95.919754,41.453015],[-96.095016,41.540646],[-96.122401,41.67757],[-96.062155,41.798063],[-96.127878,41.973325],[-96.264801,42.039048],[-96.44554,42.488157],[-96.631756,42.707235],[-96.544125,42.855112],[-96.511264,43.052282],[-96.434587,43.123482],[-96.560556,43.222067],[-96.527695,43.397329],[-96.582464,43.479483],[-96.451017,43.501391],[-91.368417,43.501391]]]}},{type:"Feature",id:"20",properties:{name:"Kansas",density:35.09},geometry:{type:"Polygon",coordinates:[[[-101.90605,40.001626],[-95.306337,40.001626],[-95.207752,39.908518],[-94.884612,39.831841],[-95.109167,39.541563],[-94.983197,39.442978],[-94.824366,39.20747],[-94.610765,39.158177],[-94.616242,37.000263],[-100.087706,37.000263],[-102.042974,36.994786],[-102.053927,40.001626],[-101.90605,40.001626]]]}},{type:"Feature",id:"21",properties:{name:"Kentucky",density:110},geometry:{type:"Polygon",coordinates:[[[-83.903347,38.769315],[-83.678792,38.632391],[-83.519961,38.703591],[-83.142052,38.626914],[-83.032514,38.725499],[-82.890113,38.758361],[-82.846298,38.588575],[-82.731282,38.561191],[-82.594358,38.424267],[-82.621743,38.123036],[-82.50125,37.931343],[-82.342419,37.783465],[-82.293127,37.668449],[-82.101434,37.553434],[-81.969987,37.537003],[-82.353373,37.268633],[-82.720328,37.120755],[-82.720328,37.044078],[-82.868205,36.978355],[-82.879159,36.890724],[-83.070852,36.852385],[-83.136575,36.742847],[-83.673316,36.600446],[-83.689746,36.584015],[-84.544149,36.594969],[-85.289013,36.627831],[-85.486183,36.616877],[-86.592525,36.655216],[-87.852221,36.633308],[-88.071299,36.677123],[-88.054868,36.496384],[-89.298133,36.507338],[-89.418626,36.496384],[-89.363857,36.622354],[-89.215979,36.578538],[-89.133825,36.983832],[-89.183118,37.038601],[-89.029763,37.213863],[-88.914747,37.224817],[-88.547792,37.071463],[-88.421823,37.153617],[-88.514931,37.285064],[-88.476592,37.389126],[-88.065822,37.482234],[-88.15893,37.657496],[-88.027483,37.799896],[-87.934375,37.893004],[-87.682436,37.903958],[-87.600282,37.975158],[-87.512651,37.903958],[-87.381204,37.93682],[-87.129265,37.788942],[-87.047111,37.893004],[-86.795172,37.991589],[-86.729448,37.893004],[-86.504894,37.931343],[-86.521325,38.040881],[-86.302247,38.166851],[-86.263908,38.051835],[-86.039354,37.958727],[-85.924338,38.024451],[-85.83123,38.27639],[-85.655968,38.325682],[-85.590245,38.451652],[-85.42046,38.533806],[-85.431413,38.730976],[-85.173997,38.68716],[-84.987781,38.780268],[-84.812519,38.785745],[-84.894673,39.059592],[-84.817996,39.103408],[-84.43461,39.103408],[-84.231963,38.895284],[-84.215533,38.807653],[-83.903347,38.769315]]]}},{type:"Feature",id:"22",properties:{name:"Louisiana",density:105},geometry:{type:"Polygon",coordinates:[[[-93.608485,33.018527],[-91.16577,33.002096],[-91.072662,32.887081],[-91.143862,32.843265],[-91.154816,32.640618],[-91.006939,32.514649],[-90.985031,32.218894],[-91.105524,31.988862],[-91.341032,31.846462],[-91.401278,31.621907],[-91.499863,31.643815],[-91.516294,31.27686],[-91.636787,31.265906],[-91.565587,31.068736],[-91.636787,30.997536],[-89.747242,30.997536],[-89.845827,30.66892],[-89.681519,30.449842],[-89.643181,30.285534],[-89.522688,30.181472],[-89.818443,30.044549],[-89.84035,29.945964],[-89.599365,29.88024],[-89.495303,30.039072],[-89.287179,29.88024],[-89.30361,29.754271],[-89.424103,29.699501],[-89.648657,29.748794],[-89.621273,29.655686],[-89.69795,29.513285],[-89.506257,29.387316],[-89.199548,29.348977],[-89.09001,29.2011],[-89.002379,29.179192],[-89.16121,29.009407],[-89.336472,29.042268],[-89.484349,29.217531],[-89.851304,29.310638],[-89.851304,29.480424],[-90.032043,29.425654],[-90.021089,29.283254],[-90.103244,29.151807],[-90.23469,29.129899],[-90.333275,29.277777],[-90.563307,29.283254],[-90.645461,29.129899],[-90.798815,29.086084],[-90.963123,29.179192],[-91.09457,29.190146],[-91.220539,29.436608],[-91.445094,29.546147],[-91.532725,29.529716],[-91.620356,29.73784],[-91.883249,29.710455],[-91.888726,29.836425],[-92.146142,29.715932],[-92.113281,29.622824],[-92.31045,29.535193],[-92.617159,29.579009],[-92.97316,29.715932],[-93.2251,29.776178],[-93.767317,29.726886],[-93.838517,29.688547],[-93.926148,29.787132],[-93.690639,30.143133],[-93.767317,30.334826],[-93.696116,30.438888],[-93.728978,30.575812],[-93.630393,30.679874],[-93.526331,30.93729],[-93.542762,31.15089],[-93.816609,31.556184],[-93.822086,31.775262],[-94.041164,31.994339],[-94.041164,33.018527],[-93.608485,33.018527]]]}},{type:"Feature",id:"23",properties:{name:"Maine",density:43.04},geometry:{type:"Polygon",coordinates:[[[-70.703921,43.057759],[-70.824413,43.128959],[-70.807983,43.227544],[-70.966814,43.34256],[-71.032537,44.657025],[-71.08183,45.303304],[-70.649151,45.440228],[-70.720352,45.511428],[-70.556043,45.664782],[-70.386258,45.735983],[-70.41912,45.796229],[-70.260289,45.889337],[-70.309581,46.064599],[-70.210996,46.327492],[-70.057642,46.415123],[-69.997395,46.694447],[-69.225147,47.461219],[-69.044408,47.428357],[-69.033454,47.242141],[-68.902007,47.176418],[-68.578868,47.285957],[-68.376221,47.285957],[-68.233821,47.357157],[-67.954497,47.198326],[-67.790188,47.066879],[-67.779235,45.944106],[-67.801142,45.675736],[-67.456095,45.604536],[-67.505388,45.48952],[-67.417757,45.379982],[-67.488957,45.281397],[-67.346556,45.128042],[-67.16034,45.160904],[-66.979601,44.804903],[-67.187725,44.646072],[-67.308218,44.706318],[-67.406803,44.596779],[-67.549203,44.624164],[-67.565634,44.531056],[-67.75185,44.54201],[-68.047605,44.328409],[-68.118805,44.476286],[-68.222867,44.48724],[-68.173574,44.328409],[-68.403606,44.251732],[-68.458375,44.377701],[-68.567914,44.311978],[-68.82533,44.311978],[-68.830807,44.459856],[-68.984161,44.426994],[-68.956777,44.322932],[-69.099177,44.103854],[-69.071793,44.043608],[-69.258008,43.923115],[-69.444224,43.966931],[-69.553763,43.840961],[-69.707118,43.82453],[-69.833087,43.720469],[-69.986442,43.742376],[-70.030257,43.851915],[-70.254812,43.676653],[-70.194565,43.567114],[-70.358873,43.528776],[-70.369827,43.435668],[-70.556043,43.320652],[-70.703921,43.057759]]]}},{type:"Feature",id:"24",properties:{name:"Maryland",density:596.3},geometry:{type:"MultiPolygon",coordinates:[[[[-75.994645,37.95325],[-76.016553,37.95325],[-76.043938,37.95325],[-75.994645,37.95325]]],[[[-79.477979,39.722302],[-75.786521,39.722302],[-75.693413,38.462606],[-75.047134,38.451652],[-75.244304,38.029928],[-75.397659,38.013497],[-75.671506,37.95325],[-75.885106,37.909435],[-75.879629,38.073743],[-75.961783,38.139466],[-75.846768,38.210667],[-76.000122,38.374975],[-76.049415,38.303775],[-76.257538,38.320205],[-76.328738,38.500944],[-76.263015,38.500944],[-76.257538,38.736453],[-76.191815,38.829561],[-76.279446,39.147223],[-76.169907,39.333439],[-76.000122,39.366301],[-75.972737,39.557994],[-76.098707,39.536086],[-76.104184,39.437501],[-76.367077,39.311532],[-76.443754,39.196516],[-76.460185,38.906238],[-76.55877,38.769315],[-76.514954,38.539283],[-76.383508,38.380452],[-76.399939,38.259959],[-76.317785,38.139466],[-76.3616,38.057312],[-76.591632,38.216144],[-76.920248,38.292821],[-77.018833,38.446175],[-77.205049,38.358544],[-77.276249,38.479037],[-77.128372,38.632391],[-77.040741,38.791222],[-76.909294,38.895284],[-77.035264,38.993869],[-77.117418,38.933623],[-77.248864,39.026731],[-77.456988,39.076023],[-77.456988,39.223901],[-77.566527,39.306055],[-77.719881,39.322485],[-77.834897,39.601809],[-78.004682,39.601809],[-78.174467,39.694917],[-78.267575,39.61824],[-78.431884,39.623717],[-78.470222,39.514178],[-78.765977,39.585379],[-78.963147,39.437501],[-79.094593,39.470363],[-79.291763,39.300578],[-79.488933,39.20747],[-79.477979,39.722302]]]]}},{type:"Feature",id:"25",properties:{name:"Massachusetts",density:840.2},geometry:{type:"Polygon",coordinates:[[[-70.917521,42.887974],[-70.818936,42.871543],[-70.780598,42.696281],[-70.824413,42.55388],[-70.983245,42.422434],[-70.988722,42.269079],[-70.769644,42.247172],[-70.638197,42.08834],[-70.660105,41.962371],[-70.550566,41.929509],[-70.539613,41.814493],[-70.260289,41.715908],[-69.937149,41.809016],[-70.008349,41.672093],[-70.484843,41.5516],[-70.660105,41.546123],[-70.764167,41.639231],[-70.928475,41.611847],[-70.933952,41.540646],[-71.120168,41.496831],[-71.196845,41.67757],[-71.22423,41.710431],[-71.328292,41.781632],[-71.383061,42.01714],[-71.530939,42.01714],[-71.799309,42.006186],[-71.799309,42.022617],[-73.053528,42.039048],[-73.486206,42.050002],[-73.508114,42.08834],[-73.267129,42.745573],[-72.456542,42.729142],[-71.29543,42.696281],[-71.185891,42.789389],[-70.917521,42.887974]]]}},{type:"Feature",id:"26",properties:{name:"Michigan",density:173.9},geometry:{type:"MultiPolygon",coordinates:[[[[-83.454238,41.732339],[-84.807042,41.694001],[-84.807042,41.759724],[-85.990061,41.759724],[-86.822556,41.759724],[-86.619909,41.891171],[-86.482986,42.115725],[-86.357016,42.252649],[-86.263908,42.444341],[-86.209139,42.718189],[-86.231047,43.013943],[-86.526801,43.594499],[-86.433693,43.813577],[-86.499417,44.07647],[-86.269385,44.34484],[-86.220093,44.569394],[-86.252954,44.689887],[-86.088646,44.73918],[-86.066738,44.903488],[-85.809322,44.947303],[-85.612152,45.128042],[-85.628583,44.766564],[-85.524521,44.750133],[-85.393075,44.930872],[-85.387598,45.237581],[-85.305444,45.314258],[-85.031597,45.363551],[-85.119228,45.577151],[-84.938489,45.75789],[-84.713934,45.768844],[-84.461995,45.653829],[-84.215533,45.637398],[-84.09504,45.494997],[-83.908824,45.484043],[-83.596638,45.352597],[-83.4871,45.358074],[-83.317314,45.144473],[-83.454238,45.029457],[-83.322791,44.88158],[-83.273499,44.711795],[-83.333745,44.339363],[-83.536392,44.246255],[-83.585684,44.054562],[-83.82667,43.988839],[-83.958116,43.758807],[-83.908824,43.671176],[-83.667839,43.589022],[-83.481623,43.714992],[-83.262545,43.972408],[-82.917498,44.070993],[-82.747713,43.994316],[-82.643651,43.851915],[-82.539589,43.435668],[-82.523158,43.227544],[-82.413619,42.975605],[-82.517681,42.614127],[-82.681989,42.559357],[-82.687466,42.690804],[-82.797005,42.652465],[-82.922975,42.351234],[-83.125621,42.236218],[-83.185868,42.006186],[-83.437807,41.814493],[-83.454238,41.732339]]],[[[-85.508091,45.730506],[-85.49166,45.610013],[-85.623106,45.588105],[-85.568337,45.75789],[-85.508091,45.730506]]],[[[-87.589328,45.095181],[-87.742682,45.199243],[-87.649574,45.341643],[-87.885083,45.363551],[-87.791975,45.500474],[-87.781021,45.675736],[-87.989145,45.796229],[-88.10416,45.922199],[-88.531362,46.020784],[-88.662808,45.987922],[-89.09001,46.135799],[-90.119674,46.338446],[-90.229213,46.508231],[-90.415429,46.568478],[-90.026566,46.672539],[-89.851304,46.793032],[-89.413149,46.842325],[-89.128348,46.990202],[-88.996902,46.995679],[-88.887363,47.099741],[-88.575177,47.247618],[-88.416346,47.373588],[-88.180837,47.455742],[-87.956283,47.384542],[-88.350623,47.077833],[-88.443731,46.973771],[-88.438254,46.787555],[-88.246561,46.929956],[-87.901513,46.908048],[-87.633143,46.809463],[-87.392158,46.535616],[-87.260711,46.486323],[-87.008772,46.530139],[-86.948526,46.469893],[-86.696587,46.437031],[-86.159846,46.667063],[-85.880522,46.68897],[-85.508091,46.678016],[-85.256151,46.754694],[-85.064458,46.760171],[-85.02612,46.480847],[-84.82895,46.442508],[-84.63178,46.486323],[-84.549626,46.4206],[-84.418179,46.502754],[-84.127902,46.530139],[-84.122425,46.179615],[-83.990978,46.031737],[-83.793808,45.993399],[-83.7719,46.091984],[-83.580208,46.091984],[-83.476146,45.987922],[-83.563777,45.911245],[-84.111471,45.976968],[-84.374364,45.933153],[-84.659165,46.053645],[-84.741319,45.944106],[-84.70298,45.850998],[-84.82895,45.872906],[-85.015166,46.00983],[-85.338305,46.091984],[-85.502614,46.097461],[-85.661445,45.966014],[-85.924338,45.933153],[-86.209139,45.960537],[-86.324155,45.905768],[-86.351539,45.796229],[-86.663725,45.703121],[-86.647294,45.834568],[-86.784218,45.861952],[-86.838987,45.725029],[-87.069019,45.719552],[-87.17308,45.659305],[-87.326435,45.423797],[-87.611236,45.122565],[-87.589328,45.095181]]],[[[-88.805209,47.976051],[-89.057148,47.850082],[-89.188594,47.833651],[-89.177641,47.937713],[-88.547792,48.173221],[-88.668285,48.008913],[-88.805209,47.976051]]]]}},{type:"Feature",id:"27",properties:{name:"Minnesota",density:67.14},geometry:{type:"Polygon",coordinates:[[[-92.014696,46.705401],[-92.091373,46.749217],[-92.29402,46.667063],[-92.29402,46.075553],[-92.354266,46.015307],[-92.639067,45.933153],[-92.869098,45.719552],[-92.885529,45.577151],[-92.770513,45.566198],[-92.644544,45.440228],[-92.75956,45.286874],[-92.737652,45.117088],[-92.808852,44.750133],[-92.545959,44.569394],[-92.337835,44.552964],[-92.233773,44.443425],[-91.927065,44.333886],[-91.877772,44.202439],[-91.592971,44.032654],[-91.43414,43.994316],[-91.242447,43.775238],[-91.269832,43.616407],[-91.215062,43.501391],[-91.368417,43.501391],[-96.451017,43.501391],[-96.451017,45.297827],[-96.681049,45.412843],[-96.856311,45.604536],[-96.582464,45.818137],[-96.560556,45.933153],[-96.598895,46.332969],[-96.719387,46.437031],[-96.801542,46.656109],[-96.785111,46.924479],[-96.823449,46.968294],[-96.856311,47.609096],[-97.053481,47.948667],[-97.130158,48.140359],[-97.16302,48.545653],[-97.097296,48.682577],[-97.228743,49.000239],[-95.152983,49.000239],[-95.152983,49.383625],[-94.955813,49.372671],[-94.824366,49.295994],[-94.69292,48.775685],[-94.588858,48.715438],[-94.260241,48.699007],[-94.221903,48.649715],[-93.838517,48.627807],[-93.794701,48.518268],[-93.466085,48.545653],[-93.466085,48.589469],[-93.208669,48.644238],[-92.984114,48.62233],[-92.726698,48.540176],[-92.655498,48.436114],[-92.50762,48.447068],[-92.370697,48.222514],[-92.304974,48.315622],[-92.053034,48.359437],[-92.009219,48.266329],[-91.713464,48.200606],[-91.713464,48.112975],[-91.565587,48.041775],[-91.264355,48.080113],[-91.083616,48.178698],[-90.837154,48.238944],[-90.749522,48.091067],[-90.579737,48.123929],[-90.377091,48.091067],[-90.141582,48.112975],[-89.873212,47.987005],[-89.615796,48.008913],[-89.637704,47.954144],[-89.971797,47.828174],[-90.437337,47.729589],[-90.738569,47.625527],[-91.171247,47.368111],[-91.357463,47.20928],[-91.642264,47.028541],[-92.091373,46.787555],[-92.014696,46.705401]]]}},{type:"Feature",id:"28",properties:{name:"Mississippi",density:63.5},geometry:{type:"Polygon",coordinates:[[[-88.471115,34.995703],[-88.202745,34.995703],[-88.098683,34.891641],[-88.241084,33.796253],[-88.471115,31.895754],[-88.394438,30.367688],[-88.503977,30.323872],[-88.744962,30.34578],[-88.843547,30.411504],[-89.084533,30.367688],[-89.418626,30.252672],[-89.522688,30.181472],[-89.643181,30.285534],[-89.681519,30.449842],[-89.845827,30.66892],[-89.747242,30.997536],[-91.636787,30.997536],[-91.565587,31.068736],[-91.636787,31.265906],[-91.516294,31.27686],[-91.499863,31.643815],[-91.401278,31.621907],[-91.341032,31.846462],[-91.105524,31.988862],[-90.985031,32.218894],[-91.006939,32.514649],[-91.154816,32.640618],[-91.143862,32.843265],[-91.072662,32.887081],[-91.16577,33.002096],[-91.089093,33.13902],[-91.143862,33.347144],[-91.056231,33.429298],[-91.231493,33.560744],[-91.072662,33.867453],[-90.891923,34.026284],[-90.952169,34.135823],[-90.744046,34.300131],[-90.749522,34.365854],[-90.568783,34.420624],[-90.585214,34.617794],[-90.481152,34.661609],[-90.409952,34.831394],[-90.251121,34.908072],[-90.311367,34.995703],[-88.471115,34.995703]]]}},{type:"Feature",id:"29",properties:{name:"Missouri",density:87.26},geometry:{type:"Polygon",coordinates:[[[-91.833957,40.609566],[-91.729895,40.615043],[-91.527248,40.412397],[-91.417709,40.379535],[-91.50534,40.237135],[-91.494386,40.034488],[-91.368417,39.727779],[-91.061708,39.470363],[-90.727615,39.256762],[-90.661891,38.928146],[-90.585214,38.867899],[-90.470199,38.961007],[-90.251121,38.917192],[-90.10872,38.845992],[-90.207305,38.725499],[-90.179921,38.632391],[-90.349706,38.374975],[-90.355183,38.216144],[-90.059428,38.013497],[-89.949889,37.88205],[-89.84035,37.903958],[-89.517211,37.690357],[-89.517211,37.537003],[-89.435057,37.34531],[-89.517211,37.279587],[-89.292656,36.994786],[-89.133825,36.983832],[-89.215979,36.578538],[-89.363857,36.622354],[-89.418626,36.496384],[-89.484349,36.496384],[-89.539119,36.496384],[-89.533642,36.249922],[-89.730812,35.997983],[-90.377091,35.997983],[-90.218259,36.184199],[-90.064905,36.304691],[-90.152536,36.496384],[-94.473842,36.501861],[-94.616242,36.501861],[-94.616242,37.000263],[-94.610765,39.158177],[-94.824366,39.20747],[-94.983197,39.442978],[-95.109167,39.541563],[-94.884612,39.831841],[-95.207752,39.908518],[-95.306337,40.001626],[-95.552799,40.264519],[-95.7664,40.587659],[-94.632673,40.571228],[-93.257961,40.582182],[-91.833957,40.609566]]]}},{type:"Feature",id:"30",properties:{name:"Montana",density:6.858},geometry:{type:"Polygon",coordinates:[[[-104.047534,49.000239],[-104.042057,47.861036],[-104.047534,45.944106],[-104.042057,44.996596],[-104.058488,44.996596],[-105.91517,45.002073],[-109.080842,45.002073],[-111.05254,45.002073],[-111.047063,44.476286],[-111.227803,44.580348],[-111.386634,44.75561],[-111.616665,44.547487],[-111.819312,44.509148],[-111.868605,44.563917],[-112.104113,44.520102],[-112.241036,44.569394],[-112.471068,44.481763],[-112.783254,44.48724],[-112.887315,44.394132],[-113.002331,44.448902],[-113.133778,44.772041],[-113.341901,44.782995],[-113.456917,44.865149],[-113.45144,45.056842],[-113.571933,45.128042],[-113.736241,45.330689],[-113.834826,45.522382],[-113.807441,45.604536],[-113.98818,45.703121],[-114.086765,45.593582],[-114.333228,45.456659],[-114.546828,45.560721],[-114.497536,45.670259],[-114.568736,45.774321],[-114.387997,45.88386],[-114.492059,46.037214],[-114.464674,46.272723],[-114.322274,46.645155],[-114.612552,46.639678],[-114.623506,46.705401],[-114.886399,46.809463],[-114.930214,46.919002],[-115.302646,47.187372],[-115.324554,47.258572],[-115.527201,47.302388],[-115.718894,47.42288],[-115.724371,47.696727],[-116.04751,47.976051],[-116.04751,49.000239],[-111.50165,48.994762],[-109.453274,49.000239],[-104.047534,49.000239]]]}},{type:"Feature",id:"31",properties:{name:"Nebraska",density:23.97},geometry:{type:"Polygon",coordinates:[[[-103.324578,43.002989],[-101.626726,42.997512],[-98.499393,42.997512],[-98.466531,42.94822],[-97.951699,42.767481],[-97.831206,42.866066],[-97.688806,42.844158],[-97.217789,42.844158],[-96.692003,42.657942],[-96.626279,42.515542],[-96.44554,42.488157],[-96.264801,42.039048],[-96.127878,41.973325],[-96.062155,41.798063],[-96.122401,41.67757],[-96.095016,41.540646],[-95.919754,41.453015],[-95.925231,41.201076],[-95.826646,40.976521],[-95.881416,40.719105],[-95.7664,40.587659],[-95.552799,40.264519],[-95.306337,40.001626],[-101.90605,40.001626],[-102.053927,40.001626],[-102.053927,41.003906],[-104.053011,41.003906],[-104.053011,43.002989],[-103.324578,43.002989]]]}},{type:"Feature",id:"32",properties:{name:"Nevada",density:24.8},geometry:{type:"Polygon",coordinates:[[[-117.027882,42.000709],[-114.04295,41.995232],[-114.048427,37.000263],[-114.048427,36.195153],[-114.152489,36.025367],[-114.251074,36.01989],[-114.371566,36.140383],[-114.738521,36.102045],[-114.678275,35.516012],[-114.596121,35.324319],[-114.574213,35.138103],[-114.634459,35.00118],[-115.85034,35.970598],[-116.540435,36.501861],[-117.498899,37.21934],[-118.71478,38.101128],[-120.001861,38.999346],[-119.996384,40.264519],[-120.001861,41.995232],[-118.698349,41.989755],[-117.027882,42.000709]]]}},{type:"Feature",id:"33",properties:{name:"New Hampshire",density:147},geometry:{type:"Polygon",coordinates:[[[-71.08183,45.303304],[-71.032537,44.657025],[-70.966814,43.34256],[-70.807983,43.227544],[-70.824413,43.128959],[-70.703921,43.057759],[-70.818936,42.871543],[-70.917521,42.887974],[-71.185891,42.789389],[-71.29543,42.696281],[-72.456542,42.729142],[-72.544173,42.80582],[-72.533219,42.953697],[-72.445588,43.008466],[-72.456542,43.150867],[-72.379864,43.572591],[-72.204602,43.769761],[-72.116971,43.994316],[-72.02934,44.07647],[-72.034817,44.322932],[-71.700724,44.41604],[-71.536416,44.585825],[-71.629524,44.750133],[-71.4926,44.914442],[-71.503554,45.013027],[-71.361154,45.270443],[-71.131122,45.243058],[-71.08183,45.303304]]]}},{type:"Feature",id:"34",properties:{name:"New Jersey",density:1189},geometry:{type:"Polygon",coordinates:[[[-74.236547,41.14083],[-73.902454,40.998429],[-74.022947,40.708151],[-74.187255,40.642428],[-74.274886,40.489074],[-74.001039,40.412397],[-73.979131,40.297381],[-74.099624,39.760641],[-74.411809,39.360824],[-74.614456,39.245808],[-74.795195,38.993869],[-74.888303,39.158177],[-75.178581,39.240331],[-75.534582,39.459409],[-75.55649,39.607286],[-75.561967,39.629194],[-75.507197,39.683964],[-75.414089,39.804456],[-75.145719,39.88661],[-75.129289,39.963288],[-74.82258,40.127596],[-74.773287,40.215227],[-75.058088,40.417874],[-75.069042,40.543843],[-75.195012,40.576705],[-75.205966,40.691721],[-75.052611,40.866983],[-75.134765,40.971045],[-74.882826,41.179168],[-74.828057,41.288707],[-74.69661,41.359907],[-74.236547,41.14083]]]}},{type:"Feature",id:"35",properties:{name:"New Mexico",density:17.16},geometry:{type:"Polygon",coordinates:[[[-107.421329,37.000263],[-106.868158,36.994786],[-104.337812,36.994786],[-103.001438,37.000263],[-103.001438,36.501861],[-103.039777,36.501861],[-103.045254,34.01533],[-103.067161,33.002096],[-103.067161,31.999816],[-106.616219,31.999816],[-106.643603,31.901231],[-106.528588,31.786216],[-108.210008,31.786216],[-108.210008,31.331629],[-109.04798,31.331629],[-109.042503,37.000263],[-107.421329,37.000263]]]}},{type:"Feature",id:"36",properties:{name:"New York",density:412.3},geometry:{type:"Polygon",coordinates:[[[-73.343806,45.013027],[-73.332852,44.804903],[-73.387622,44.618687],[-73.294514,44.437948],[-73.321898,44.246255],[-73.436914,44.043608],[-73.349283,43.769761],[-73.404052,43.687607],[-73.245221,43.523299],[-73.278083,42.833204],[-73.267129,42.745573],[-73.508114,42.08834],[-73.486206,42.050002],[-73.55193,41.294184],[-73.48073,41.21203],[-73.727192,41.102491],[-73.655992,40.987475],[-73.22879,40.905321],[-73.141159,40.965568],[-72.774204,40.965568],[-72.587988,40.998429],[-72.28128,41.157261],[-72.259372,41.042245],[-72.100541,40.992952],[-72.467496,40.845075],[-73.239744,40.625997],[-73.562884,40.582182],[-73.776484,40.593136],[-73.935316,40.543843],[-74.022947,40.708151],[-73.902454,40.998429],[-74.236547,41.14083],[-74.69661,41.359907],[-74.740426,41.431108],[-74.89378,41.436584],[-75.074519,41.60637],[-75.052611,41.754247],[-75.173104,41.869263],[-75.249781,41.863786],[-75.35932,42.000709],[-79.76278,42.000709],[-79.76278,42.252649],[-79.76278,42.269079],[-79.149363,42.55388],[-79.050778,42.690804],[-78.853608,42.783912],[-78.930285,42.953697],[-79.012439,42.986559],[-79.072686,43.260406],[-78.486653,43.375421],[-77.966344,43.369944],[-77.75822,43.34256],[-77.533665,43.233021],[-77.391265,43.276836],[-76.958587,43.271359],[-76.695693,43.34256],[-76.41637,43.523299],[-76.235631,43.528776],[-76.230154,43.802623],[-76.137046,43.961454],[-76.3616,44.070993],[-76.312308,44.196962],[-75.912491,44.366748],[-75.764614,44.514625],[-75.282643,44.848718],[-74.828057,45.018503],[-74.148916,44.991119],[-73.343806,45.013027]]]}},{type:"Feature",id:"37",properties:{name:"North Carolina",density:198.2},geometry:{type:"Polygon",coordinates:[[[-80.978661,36.562108],[-80.294043,36.545677],[-79.510841,36.5402],[-75.868676,36.551154],[-75.75366,36.151337],[-76.032984,36.189676],[-76.071322,36.140383],[-76.410893,36.080137],[-76.460185,36.025367],[-76.68474,36.008937],[-76.673786,35.937736],[-76.399939,35.987029],[-76.3616,35.943213],[-76.060368,35.992506],[-75.961783,35.899398],[-75.781044,35.937736],[-75.715321,35.696751],[-75.775568,35.581735],[-75.89606,35.570781],[-76.147999,35.324319],[-76.482093,35.313365],[-76.536862,35.14358],[-76.394462,34.973795],[-76.279446,34.940933],[-76.493047,34.661609],[-76.673786,34.694471],[-76.991448,34.667086],[-77.210526,34.60684],[-77.555573,34.415147],[-77.82942,34.163208],[-77.971821,33.845545],[-78.179944,33.916745],[-78.541422,33.851022],[-79.675149,34.80401],[-80.797922,34.820441],[-80.781491,34.935456],[-80.934845,35.105241],[-81.038907,35.044995],[-81.044384,35.149057],[-82.276696,35.198349],[-82.550543,35.160011],[-82.764143,35.066903],[-83.109191,35.00118],[-83.618546,34.984749],[-84.319594,34.990226],[-84.29221,35.225734],[-84.09504,35.247642],[-84.018363,35.41195],[-83.7719,35.559827],[-83.498053,35.565304],[-83.251591,35.718659],[-82.994175,35.773428],[-82.775097,35.997983],[-82.638174,36.063706],[-82.610789,35.965121],[-82.216449,36.156814],[-82.03571,36.118475],[-81.909741,36.304691],[-81.723525,36.353984],[-81.679709,36.589492],[-80.978661,36.562108]]]}},{type:"Feature",id:"38",properties:{name:"North Dakota",density:9.916},geometry:{type:"Polygon",coordinates:[[[-97.228743,49.000239],[-97.097296,48.682577],[-97.16302,48.545653],[-97.130158,48.140359],[-97.053481,47.948667],[-96.856311,47.609096],[-96.823449,46.968294],[-96.785111,46.924479],[-96.801542,46.656109],[-96.719387,46.437031],[-96.598895,46.332969],[-96.560556,45.933153],[-104.047534,45.944106],[-104.042057,47.861036],[-104.047534,49.000239],[-97.228743,49.000239]]]}},{type:"Feature",id:"39",properties:{name:"Ohio",density:281.9},geometry:{type:"Polygon",coordinates:[[[-80.518598,41.978802],[-80.518598,40.636951],[-80.666475,40.582182],[-80.595275,40.472643],[-80.600752,40.319289],[-80.737675,40.078303],[-80.830783,39.711348],[-81.219646,39.388209],[-81.345616,39.344393],[-81.455155,39.410117],[-81.57017,39.267716],[-81.685186,39.273193],[-81.811156,39.0815],[-81.783771,38.966484],[-81.887833,38.873376],[-82.03571,39.026731],[-82.221926,38.785745],[-82.172634,38.632391],[-82.293127,38.577622],[-82.331465,38.446175],[-82.594358,38.424267],[-82.731282,38.561191],[-82.846298,38.588575],[-82.890113,38.758361],[-83.032514,38.725499],[-83.142052,38.626914],[-83.519961,38.703591],[-83.678792,38.632391],[-83.903347,38.769315],[-84.215533,38.807653],[-84.231963,38.895284],[-84.43461,39.103408],[-84.817996,39.103408],[-84.801565,40.500028],[-84.807042,41.694001],[-83.454238,41.732339],[-83.065375,41.595416],[-82.933929,41.513262],[-82.835344,41.589939],[-82.616266,41.431108],[-82.479343,41.381815],[-82.013803,41.513262],[-81.739956,41.485877],[-81.444201,41.672093],[-81.011523,41.852832],[-80.518598,41.978802],[-80.518598,41.978802]]]}},{type:"Feature",id:"40",properties:{name:"Oklahoma",density:55.22},geometry:{type:"Polygon",coordinates:[[[-100.087706,37.000263],[-94.616242,37.000263],[-94.616242,36.501861],[-94.430026,35.395519],[-94.484796,33.637421],[-94.868182,33.74696],[-94.966767,33.861976],[-95.224183,33.960561],[-95.289906,33.87293],[-95.547322,33.878407],[-95.602092,33.933176],[-95.8376,33.834591],[-95.936185,33.889361],[-96.149786,33.840068],[-96.346956,33.686714],[-96.423633,33.774345],[-96.631756,33.845545],[-96.850834,33.845545],[-96.922034,33.960561],[-97.173974,33.736006],[-97.256128,33.861976],[-97.371143,33.823637],[-97.458774,33.905791],[-97.694283,33.982469],[-97.869545,33.851022],[-97.946222,33.987946],[-98.088623,34.004376],[-98.170777,34.113915],[-98.36247,34.157731],[-98.488439,34.064623],[-98.570593,34.146777],[-98.767763,34.135823],[-98.986841,34.223454],[-99.189488,34.2125],[-99.260688,34.404193],[-99.57835,34.415147],[-99.698843,34.382285],[-99.923398,34.573978],[-100.000075,34.563024],[-100.000075,36.501861],[-101.812942,36.501861],[-103.001438,36.501861],[-103.001438,37.000263],[-102.042974,36.994786],[-100.087706,37.000263]]]}},{type:"Feature",id:"41",properties:{name:"Oregon",density:40.33},geometry:{type:"Polygon",coordinates:[[[-123.211348,46.174138],[-123.11824,46.185092],[-122.904639,46.08103],[-122.811531,45.960537],[-122.762239,45.659305],[-122.247407,45.549767],[-121.809251,45.708598],[-121.535404,45.725029],[-121.217742,45.670259],[-121.18488,45.604536],[-120.637186,45.746937],[-120.505739,45.697644],[-120.209985,45.725029],[-119.963522,45.823614],[-119.525367,45.911245],[-119.125551,45.933153],[-118.988627,45.998876],[-116.918344,45.993399],[-116.78142,45.823614],[-116.545912,45.752413],[-116.463758,45.61549],[-116.671881,45.319735],[-116.732128,45.144473],[-116.847143,45.02398],[-116.830713,44.930872],[-116.934774,44.782995],[-117.038836,44.750133],[-117.241483,44.394132],[-117.170283,44.257209],[-116.97859,44.240778],[-116.896436,44.158624],[-117.027882,43.830007],[-117.027882,42.000709],[-118.698349,41.989755],[-120.001861,41.995232],[-121.037003,41.995232],[-122.378853,42.011663],[-123.233256,42.006186],[-124.213628,42.000709],[-124.356029,42.115725],[-124.432706,42.438865],[-124.416275,42.663419],[-124.553198,42.838681],[-124.454613,43.002989],[-124.383413,43.271359],[-124.235536,43.55616],[-124.169813,43.8081],[-124.060274,44.657025],[-124.076705,44.772041],[-123.97812,45.144473],[-123.939781,45.659305],[-123.994551,45.944106],[-123.945258,46.113892],[-123.545441,46.261769],[-123.370179,46.146753],[-123.211348,46.174138]]]}},{type:"Feature",id:"42",properties:{name:"Pennsylvania",density:284.3},geometry:{type:"Polygon",coordinates:[[[-79.76278,42.252649],[-79.76278,42.000709],[-75.35932,42.000709],[-75.249781,41.863786],[-75.173104,41.869263],[-75.052611,41.754247],[-75.074519,41.60637],[-74.89378,41.436584],[-74.740426,41.431108],[-74.69661,41.359907],[-74.828057,41.288707],[-74.882826,41.179168],[-75.134765,40.971045],[-75.052611,40.866983],[-75.205966,40.691721],[-75.195012,40.576705],[-75.069042,40.543843],[-75.058088,40.417874],[-74.773287,40.215227],[-74.82258,40.127596],[-75.129289,39.963288],[-75.145719,39.88661],[-75.414089,39.804456],[-75.616736,39.831841],[-75.786521,39.722302],[-79.477979,39.722302],[-80.518598,39.722302],[-80.518598,40.636951],[-80.518598,41.978802],[-80.518598,41.978802],[-80.332382,42.033571],[-79.76278,42.269079],[-79.76278,42.252649]]]}},{type:"Feature",id:"44",properties:{name:"Rhode Island",density:1006},geometry:{type:"MultiPolygon",coordinates:[[[[-71.196845,41.67757],[-71.120168,41.496831],[-71.317338,41.474923],[-71.196845,41.67757]]],[[[-71.530939,42.01714],[-71.383061,42.01714],[-71.328292,41.781632],[-71.22423,41.710431],[-71.344723,41.726862],[-71.448785,41.578985],[-71.481646,41.370861],[-71.859555,41.321569],[-71.799309,41.414677],[-71.799309,42.006186],[-71.530939,42.01714]]]]}},{type:"Feature",id:"45",properties:{name:"South Carolina",density:155.4},geometry:{type:"Polygon",coordinates:[[[-82.764143,35.066903],[-82.550543,35.160011],[-82.276696,35.198349],[-81.044384,35.149057],[-81.038907,35.044995],[-80.934845,35.105241],[-80.781491,34.935456],[-80.797922,34.820441],[-79.675149,34.80401],[-78.541422,33.851022],[-78.716684,33.80173],[-78.935762,33.637421],[-79.149363,33.380005],[-79.187701,33.171881],[-79.357487,33.007573],[-79.582041,33.007573],[-79.631334,32.887081],[-79.866842,32.755634],[-79.998289,32.613234],[-80.206412,32.552987],[-80.430967,32.399633],[-80.452875,32.328433],[-80.660998,32.246279],[-80.885553,32.032678],[-81.115584,32.120309],[-81.121061,32.290094],[-81.279893,32.558464],[-81.416816,32.629664],[-81.42777,32.843265],[-81.493493,33.007573],[-81.761863,33.160928],[-81.937125,33.347144],[-81.926172,33.462159],[-82.194542,33.631944],[-82.325988,33.81816],[-82.55602,33.94413],[-82.714851,34.152254],[-82.747713,34.26727],[-82.901067,34.486347],[-83.005129,34.469916],[-83.339222,34.683517],[-83.322791,34.787579],[-83.109191,35.00118],[-82.764143,35.066903]]]}},{type:"Feature",id:"46",properties:{name:"South Dakota",density:98.07},geometry:{type:"Polygon",coordinates:[[[-104.047534,45.944106],[-96.560556,45.933153],[-96.582464,45.818137],[-96.856311,45.604536],[-96.681049,45.412843],[-96.451017,45.297827],[-96.451017,43.501391],[-96.582464,43.479483],[-96.527695,43.397329],[-96.560556,43.222067],[-96.434587,43.123482],[-96.511264,43.052282],[-96.544125,42.855112],[-96.631756,42.707235],[-96.44554,42.488157],[-96.626279,42.515542],[-96.692003,42.657942],[-97.217789,42.844158],[-97.688806,42.844158],[-97.831206,42.866066],[-97.951699,42.767481],[-98.466531,42.94822],[-98.499393,42.997512],[-101.626726,42.997512],[-103.324578,43.002989],[-104.053011,43.002989],[-104.058488,44.996596],[-104.042057,44.996596],[-104.047534,45.944106]]]}},{type:"Feature",id:"47",properties:{name:"Tennessee",density:88.08},geometry:{type:"Polygon",coordinates:[[[-88.054868,36.496384],[-88.071299,36.677123],[-87.852221,36.633308],[-86.592525,36.655216],[-85.486183,36.616877],[-85.289013,36.627831],[-84.544149,36.594969],[-83.689746,36.584015],[-83.673316,36.600446],[-81.679709,36.589492],[-81.723525,36.353984],[-81.909741,36.304691],[-82.03571,36.118475],[-82.216449,36.156814],[-82.610789,35.965121],[-82.638174,36.063706],[-82.775097,35.997983],[-82.994175,35.773428],[-83.251591,35.718659],[-83.498053,35.565304],[-83.7719,35.559827],[-84.018363,35.41195],[-84.09504,35.247642],[-84.29221,35.225734],[-84.319594,34.990226],[-85.606675,34.984749],[-87.359296,35.00118],[-88.202745,34.995703],[-88.471115,34.995703],[-90.311367,34.995703],[-90.212782,35.023087],[-90.114197,35.198349],[-90.130628,35.439335],[-89.944412,35.603643],[-89.911551,35.756997],[-89.763673,35.811767],[-89.730812,35.997983],[-89.533642,36.249922],[-89.539119,36.496384],[-89.484349,36.496384],[-89.418626,36.496384],[-89.298133,36.507338],[-88.054868,36.496384]]]}},{type:"Feature",id:"48",properties:{name:"Texas",density:98.07},geometry:{type:"Polygon",coordinates:[[[-101.812942,36.501861],[-100.000075,36.501861],[-100.000075,34.563024],[-99.923398,34.573978],[-99.698843,34.382285],[-99.57835,34.415147],[-99.260688,34.404193],[-99.189488,34.2125],[-98.986841,34.223454],[-98.767763,34.135823],[-98.570593,34.146777],[-98.488439,34.064623],[-98.36247,34.157731],[-98.170777,34.113915],[-98.088623,34.004376],[-97.946222,33.987946],[-97.869545,33.851022],[-97.694283,33.982469],[-97.458774,33.905791],[-97.371143,33.823637],[-97.256128,33.861976],[-97.173974,33.736006],[-96.922034,33.960561],[-96.850834,33.845545],[-96.631756,33.845545],[-96.423633,33.774345],[-96.346956,33.686714],[-96.149786,33.840068],[-95.936185,33.889361],[-95.8376,33.834591],[-95.602092,33.933176],[-95.547322,33.878407],[-95.289906,33.87293],[-95.224183,33.960561],[-94.966767,33.861976],[-94.868182,33.74696],[-94.484796,33.637421],[-94.380734,33.544313],[-94.183564,33.593606],[-94.041164,33.54979],[-94.041164,33.018527],[-94.041164,31.994339],[-93.822086,31.775262],[-93.816609,31.556184],[-93.542762,31.15089],[-93.526331,30.93729],[-93.630393,30.679874],[-93.728978,30.575812],[-93.696116,30.438888],[-93.767317,30.334826],[-93.690639,30.143133],[-93.926148,29.787132],[-93.838517,29.688547],[-94.002825,29.68307],[-94.523134,29.546147],[-94.70935,29.622824],[-94.742212,29.787132],[-94.873659,29.672117],[-94.966767,29.699501],[-95.016059,29.557101],[-94.911997,29.496854],[-94.895566,29.310638],[-95.081782,29.113469],[-95.383014,28.867006],[-95.985477,28.604113],[-96.045724,28.647929],[-96.226463,28.582205],[-96.23194,28.642452],[-96.478402,28.598636],[-96.593418,28.724606],[-96.664618,28.697221],[-96.401725,28.439805],[-96.593418,28.357651],[-96.774157,28.406943],[-96.801542,28.226204],[-97.026096,28.039988],[-97.256128,27.694941],[-97.404005,27.333463],[-97.513544,27.360848],[-97.540929,27.229401],[-97.425913,27.262263],[-97.480682,26.99937],[-97.557359,26.988416],[-97.562836,26.840538],[-97.469728,26.758384],[-97.442344,26.457153],[-97.332805,26.353091],[-97.30542,26.161398],[-97.217789,25.991613],[-97.524498,25.887551],[-97.650467,26.018997],[-97.885976,26.06829],[-98.198161,26.057336],[-98.466531,26.221644],[-98.669178,26.238075],[-98.822533,26.369522],[-99.030656,26.413337],[-99.173057,26.539307],[-99.266165,26.840538],[-99.446904,27.021277],[-99.424996,27.174632],[-99.50715,27.33894],[-99.479765,27.48134],[-99.605735,27.640172],[-99.709797,27.656603],[-99.879582,27.799003],[-99.934351,27.979742],[-100.082229,28.14405],[-100.29583,28.280974],[-100.399891,28.582205],[-100.498476,28.66436],[-100.629923,28.905345],[-100.673738,29.102515],[-100.799708,29.244915],[-101.013309,29.370885],[-101.062601,29.458516],[-101.259771,29.535193],[-101.413125,29.754271],[-101.851281,29.803563],[-102.114174,29.792609],[-102.338728,29.869286],[-102.388021,29.765225],[-102.629006,29.732363],[-102.809745,29.524239],[-102.919284,29.190146],[-102.97953,29.184669],[-103.116454,28.987499],[-103.280762,28.982022],[-103.527224,29.135376],[-104.146119,29.381839],[-104.266611,29.513285],[-104.507597,29.639255],[-104.677382,29.924056],[-104.688336,30.181472],[-104.858121,30.389596],[-104.896459,30.570335],[-105.005998,30.685351],[-105.394861,30.855136],[-105.602985,31.085167],[-105.77277,31.167321],[-105.953509,31.364491],[-106.205448,31.468553],[-106.38071,31.731446],[-106.528588,31.786216],[-106.643603,31.901231],[-106.616219,31.999816],[-103.067161,31.999816],[-103.067161,33.002096],[-103.045254,34.01533],[-103.039777,36.501861],[-103.001438,36.501861],[-101.812942,36.501861]]]}},{type:"Feature",id:"49",properties:{name:"Utah",density:34.3},geometry:{type:"Polygon",coordinates:[[[-112.164359,41.995232],[-111.047063,42.000709],[-111.047063,40.998429],[-109.04798,40.998429],[-109.053457,39.125316],[-109.058934,38.27639],[-109.042503,38.166851],[-109.042503,37.000263],[-110.499369,37.00574],[-114.048427,37.000263],[-114.04295,41.995232],[-112.164359,41.995232]]]}},{type:"Feature",id:"50",properties:{name:"Vermont",density:67.73},geometry:{type:"Polygon",coordinates:[[[-71.503554,45.013027],[-71.4926,44.914442],[-71.629524,44.750133],[-71.536416,44.585825],[-71.700724,44.41604],[-72.034817,44.322932],[-72.02934,44.07647],[-72.116971,43.994316],[-72.204602,43.769761],[-72.379864,43.572591],[-72.456542,43.150867],[-72.445588,43.008466],[-72.533219,42.953697],[-72.544173,42.80582],[-72.456542,42.729142],[-73.267129,42.745573],[-73.278083,42.833204],[-73.245221,43.523299],[-73.404052,43.687607],[-73.349283,43.769761],[-73.436914,44.043608],[-73.321898,44.246255],[-73.294514,44.437948],[-73.387622,44.618687],[-73.332852,44.804903],[-73.343806,45.013027],[-72.308664,45.002073],[-71.503554,45.013027]]]}},{type:"Feature",id:"51",properties:{name:"Virginia",density:204.5},geometry:{type:"MultiPolygon",coordinates:[[[[-75.397659,38.013497],[-75.244304,38.029928],[-75.375751,37.860142],[-75.512674,37.799896],[-75.594828,37.569865],[-75.802952,37.197433],[-75.972737,37.120755],[-76.027507,37.257679],[-75.939876,37.564388],[-75.671506,37.95325],[-75.397659,38.013497]]],[[[-76.016553,37.95325],[-75.994645,37.95325],[-76.043938,37.95325],[-76.016553,37.95325]]],[[[-78.349729,39.464886],[-77.82942,39.130793],[-77.719881,39.322485],[-77.566527,39.306055],[-77.456988,39.223901],[-77.456988,39.076023],[-77.248864,39.026731],[-77.117418,38.933623],[-77.040741,38.791222],[-77.128372,38.632391],[-77.248864,38.588575],[-77.325542,38.446175],[-77.281726,38.342113],[-77.013356,38.374975],[-76.964064,38.216144],[-76.613539,38.15042],[-76.514954,38.024451],[-76.235631,37.887527],[-76.3616,37.608203],[-76.246584,37.389126],[-76.383508,37.285064],[-76.399939,37.159094],[-76.273969,37.082417],[-76.410893,36.961924],[-76.619016,37.120755],[-76.668309,37.065986],[-76.48757,36.95097],[-75.994645,36.923586],[-75.868676,36.551154],[-79.510841,36.5402],[-80.294043,36.545677],[-80.978661,36.562108],[-81.679709,36.589492],[-83.673316,36.600446],[-83.136575,36.742847],[-83.070852,36.852385],[-82.879159,36.890724],[-82.868205,36.978355],[-82.720328,37.044078],[-82.720328,37.120755],[-82.353373,37.268633],[-81.969987,37.537003],[-81.986418,37.454849],[-81.849494,37.285064],[-81.679709,37.20291],[-81.55374,37.208387],[-81.362047,37.339833],[-81.225123,37.235771],[-80.967707,37.290541],[-80.513121,37.482234],[-80.474782,37.421987],[-80.29952,37.509618],[-80.294043,37.690357],[-80.184505,37.849189],[-79.998289,37.997066],[-79.921611,38.177805],[-79.724442,38.364021],[-79.647764,38.594052],[-79.477979,38.457129],[-79.313671,38.413313],[-79.209609,38.495467],[-78.996008,38.851469],[-78.870039,38.763838],[-78.404499,39.169131],[-78.349729,39.464886]]]]}},{type:"Feature",id:"53",properties:{name:"Washington",density:102.6},geometry:{type:"MultiPolygon",coordinates:[[[[-117.033359,49.000239],[-117.044313,47.762451],[-117.038836,46.426077],[-117.055267,46.343923],[-116.92382,46.168661],[-116.918344,45.993399],[-118.988627,45.998876],[-119.125551,45.933153],[-119.525367,45.911245],[-119.963522,45.823614],[-120.209985,45.725029],[-120.505739,45.697644],[-120.637186,45.746937],[-121.18488,45.604536],[-121.217742,45.670259],[-121.535404,45.725029],[-121.809251,45.708598],[-122.247407,45.549767],[-122.762239,45.659305],[-122.811531,45.960537],[-122.904639,46.08103],[-123.11824,46.185092],[-123.211348,46.174138],[-123.370179,46.146753],[-123.545441,46.261769],[-123.72618,46.300108],[-123.874058,46.239861],[-124.065751,46.327492],[-124.027412,46.464416],[-123.895966,46.535616],[-124.098612,46.74374],[-124.235536,47.285957],[-124.31769,47.357157],[-124.427229,47.740543],[-124.624399,47.88842],[-124.706553,48.184175],[-124.597014,48.381345],[-124.394367,48.288237],[-123.983597,48.162267],[-123.704273,48.167744],[-123.424949,48.118452],[-123.162056,48.167744],[-123.036086,48.080113],[-122.800578,48.08559],[-122.636269,47.866512],[-122.515777,47.882943],[-122.493869,47.587189],[-122.422669,47.318818],[-122.324084,47.346203],[-122.422669,47.576235],[-122.395284,47.800789],[-122.230976,48.030821],[-122.362422,48.123929],[-122.373376,48.288237],[-122.471961,48.468976],[-122.422669,48.600422],[-122.488392,48.753777],[-122.647223,48.775685],[-122.795101,48.8907],[-122.756762,49.000239],[-117.033359,49.000239]]],[[[-122.718423,48.310145],[-122.586977,48.35396],[-122.608885,48.151313],[-122.767716,48.227991],[-122.718423,48.310145]]],[[[-123.025132,48.583992],[-122.915593,48.715438],[-122.767716,48.556607],[-122.811531,48.419683],[-123.041563,48.458022],[-123.025132,48.583992]]]]}},{type:"Feature",id:"54",properties:{name:"West Virginia",density:77.06},geometry:{type:"Polygon",coordinates:[[[-80.518598,40.636951],[-80.518598,39.722302],[-79.477979,39.722302],[-79.488933,39.20747],[-79.291763,39.300578],[-79.094593,39.470363],[-78.963147,39.437501],[-78.765977,39.585379],[-78.470222,39.514178],[-78.431884,39.623717],[-78.267575,39.61824],[-78.174467,39.694917],[-78.004682,39.601809],[-77.834897,39.601809],[-77.719881,39.322485],[-77.82942,39.130793],[-78.349729,39.464886],[-78.404499,39.169131],[-78.870039,38.763838],[-78.996008,38.851469],[-79.209609,38.495467],[-79.313671,38.413313],[-79.477979,38.457129],[-79.647764,38.594052],[-79.724442,38.364021],[-79.921611,38.177805],[-79.998289,37.997066],[-80.184505,37.849189],[-80.294043,37.690357],[-80.29952,37.509618],[-80.474782,37.421987],[-80.513121,37.482234],[-80.967707,37.290541],[-81.225123,37.235771],[-81.362047,37.339833],[-81.55374,37.208387],[-81.679709,37.20291],[-81.849494,37.285064],[-81.986418,37.454849],[-81.969987,37.537003],[-82.101434,37.553434],[-82.293127,37.668449],[-82.342419,37.783465],[-82.50125,37.931343],[-82.621743,38.123036],[-82.594358,38.424267],[-82.331465,38.446175],[-82.293127,38.577622],[-82.172634,38.632391],[-82.221926,38.785745],[-82.03571,39.026731],[-81.887833,38.873376],[-81.783771,38.966484],[-81.811156,39.0815],[-81.685186,39.273193],[-81.57017,39.267716],[-81.455155,39.410117],[-81.345616,39.344393],[-81.219646,39.388209],[-80.830783,39.711348],[-80.737675,40.078303],[-80.600752,40.319289],[-80.595275,40.472643],[-80.666475,40.582182],[-80.518598,40.636951]]]}},{type:"Feature",id:"55",properties:{name:"Wisconsin",density:105.2},geometry:{type:"Polygon",coordinates:[[[-90.415429,46.568478],[-90.229213,46.508231],[-90.119674,46.338446],[-89.09001,46.135799],[-88.662808,45.987922],[-88.531362,46.020784],[-88.10416,45.922199],[-87.989145,45.796229],[-87.781021,45.675736],[-87.791975,45.500474],[-87.885083,45.363551],[-87.649574,45.341643],[-87.742682,45.199243],[-87.589328,45.095181],[-87.627666,44.974688],[-87.819359,44.95278],[-87.983668,44.722749],[-88.043914,44.563917],[-87.928898,44.536533],[-87.775544,44.640595],[-87.611236,44.837764],[-87.403112,44.914442],[-87.238804,45.166381],[-87.03068,45.22115],[-87.047111,45.089704],[-87.189511,44.969211],[-87.468835,44.552964],[-87.545512,44.322932],[-87.540035,44.158624],[-87.644097,44.103854],[-87.737205,43.8793],[-87.704344,43.687607],[-87.791975,43.561637],[-87.912467,43.249452],[-87.885083,43.002989],[-87.76459,42.783912],[-87.802929,42.493634],[-88.788778,42.493634],[-90.639984,42.510065],[-90.711184,42.636034],[-91.067185,42.75105],[-91.143862,42.909881],[-91.176724,43.134436],[-91.056231,43.254929],[-91.204109,43.353514],[-91.215062,43.501391],[-91.269832,43.616407],[-91.242447,43.775238],[-91.43414,43.994316],[-91.592971,44.032654],[-91.877772,44.202439],[-91.927065,44.333886],[-92.233773,44.443425],[-92.337835,44.552964],[-92.545959,44.569394],[-92.808852,44.750133],[-92.737652,45.117088],[-92.75956,45.286874],[-92.644544,45.440228],[-92.770513,45.566198],[-92.885529,45.577151],[-92.869098,45.719552],[-92.639067,45.933153],[-92.354266,46.015307],[-92.29402,46.075553],[-92.29402,46.667063],[-92.091373,46.749217],[-92.014696,46.705401],[-91.790141,46.694447],[-91.09457,46.864232],[-90.837154,46.95734],[-90.749522,46.88614],[-90.886446,46.754694],[-90.55783,46.584908],[-90.415429,46.568478]]]}},{type:"Feature",id:"56",properties:{name:"Wyoming",density:5.851},geometry:{type:"Polygon",coordinates:[[[-109.080842,45.002073],[-105.91517,45.002073],[-104.058488,44.996596],[-104.053011,43.002989],[-104.053011,41.003906],[-105.728954,40.998429],[-107.919731,41.003906],[-109.04798,40.998429],[-111.047063,40.998429],[-111.047063,42.000709],[-111.047063,44.476286],[-111.05254,45.002073],[-109.080842,45.002073]]]}},{type:"Feature",id:"72",properties:{name:"Puerto Rico",density:1082},geometry:{type:"Polygon",coordinates:[[[-66.448338,17.984326],[-66.771478,18.006234],[-66.924832,17.929556],[-66.985078,17.973372],[-67.209633,17.956941],[-67.154863,18.19245],[-67.269879,18.362235],[-67.094617,18.515589],[-66.957694,18.488204],[-66.409999,18.488204],[-65.840398,18.433435],[-65.632274,18.367712],[-65.626797,18.203403],[-65.730859,18.186973],[-65.834921,18.017187],[-66.234737,17.929556],[-66.448338,17.984326]]]}}],usaJson={type,features},_export_sfc=(t,n)=>{const a=t.__vccOpts||t;for(const[r,o]of n)a[r]=o;return a},_hoisted_1$x={class:"usa-map-container"},_hoisted_2$v={class:"panel-header"},_hoisted_3$u={class:"panel-title"},_hoisted_4$t={class:"region-code"},_hoisted_5$r={class:"region-name"},_hoisted_6$r={class:"panel-stats"},_hoisted_7$q={class:"stat-row"},_hoisted_8$o={class:"stat-value"},_hoisted_9$k={class:"stat-number"},_hoisted_10$k={class:"stat-row"},_hoisted_11$i={class:"stat-value success"},_hoisted_12$i={class:"stat-number"},_hoisted_13$g={class:"stat-row"},_hoisted_14$g={class:"stat-value danger"},_hoisted_15$g={class:"stat-number"},_hoisted_16$g={class:"stat-row"},_hoisted_17$g={class:"progress-bar-container"},_hoisted_18$f={class:"progress-text"},_hoisted_19$e={class:"stat-row"},_hoisted_20$e={class:"progress-bar-container secondary"},_hoisted_21$d={class:"progress-text"},_hoisted_22$d={key:0,class:"global-stats"},_hoisted_23$c={class:"global-stat"},_hoisted_24$c={class:"global-value"},_hoisted_25$b={class:"global-stat"},_hoisted_26$a={class:"global-value"},_hoisted_27$a={key:1,class:"map-hint"},_sfc_main$A={__name:"USAMap",props:{data:{type:Array,default:()=>[]},primaryColor:{type:String,default:"#ff2a2a"},showGlobalStats:{type:Boolean,default:!0},showHint:{type:Boolean,default:!0}},emits:["stateClick","stateSelect","mapInteractionChange"],setup(t,{expose:n,emit:a}){use([install$8,install$7,install$c,install$9,install$5,install$1,install$4,install]),registerMap$1("usa",usaJson);const r=t,o=a,s=ref(null),l=ref(null),c=ref(window.innerWidth<=768),u=reactive({participants:0,survivors:0,eliminated:0,survivalRate:0,avgProgress:0}),d={Alabama:"AL-001",Alaska:"AK-002",Arizona:"AZ-003",Arkansas:"AR-004",California:"CA-005",Colorado:"CO-006",Connecticut:"CT-007",Delaware:"DE-008","District of Columbia":"DC-009",Florida:"FL-010",Georgia:"GA-011",Hawaii:"HI-012",Idaho:"ID-013",Illinois:"IL-014",Indiana:"IN-015",Iowa:"IA-016",Kansas:"KS-017",Kentucky:"KY-018",Louisiana:"LA-019",Maine:"ME-020",Maryland:"MD-021",Massachusetts:"MA-022",Michigan:"MI-023",Minnesota:"MN-024",Mississippi:"MS-025",Missouri:"MO-026",Montana:"MT-027",Nebraska:"NE-028",Nevada:"NV-029","New Hampshire":"NH-030","New Jersey":"NJ-031","New Mexico":"NM-032","New York":"NY-033","North Carolina":"NC-034","North Dakota":"ND-035",Ohio:"OH-036",Oklahoma:"OK-037",Oregon:"OR-038",Pennsylvania:"PA-039","Puerto Rico":"PR-040","Rhode Island":"RI-041","South Carolina":"SC-042","South Dakota":"SD-043",Tennessee:"TN-044",Texas:"TX-045",Utah:"UT-046",Vermont:"VT-047",Virginia:"VA-048",Washington:"WA-049","West Virginia":"WV-050",Wisconsin:"WI-051",Wyoming:"WY-052"},f={Alabama:[-86.9023,32.3182],Alaska:[-153.4937,64.2008],Arizona:[-111.0937,34.0489],Arkansas:[-91.8318,35.201],California:[-119.4179,36.7783],Colorado:[-105.3111,39.0598],Connecticut:[-72.7554,41.6032],Delaware:[-75.5277,38.9108],"District of Columbia":[-77.0369,38.9072],Florida:[-81.5158,27.6648],Georgia:[-82.9001,32.1656],Hawaii:[-155.5828,19.8968],Idaho:[-114.742,44.0682],Illinois:[-89.3985,40.6331],Indiana:[-86.1349,40.2672],Iowa:[-93.0977,41.878],Kansas:[-98.4842,39.0119],Kentucky:[-84.27,37.8393],Louisiana:[-91.9623,30.9843],Maine:[-69.4455,45.2538],Maryland:[-76.6413,39.0458],Massachusetts:[-71.3824,42.4072],Michigan:[-84.5555,44.3148],Minnesota:[-94.6859,46.7296],Mississippi:[-89.3985,32.3547],Missouri:[-91.8318,37.9643],Montana:[-110.3626,46.8797],Nebraska:[-99.9018,41.4925],Nevada:[-116.4194,38.8026],"New Hampshire":[-71.5724,43.1939],"New Jersey":[-74.4057,40.0583],"New Mexico":[-105.8701,34.5199],"New York":[-75.4999,43.2994],"North Carolina":[-79.0193,35.7596],"North Dakota":[-101.002,47.5515],Ohio:[-82.9071,40.4173],Oklahoma:[-97.0929,35.0078],Oregon:[-120.5542,43.8041],Pennsylvania:[-77.1945,41.2033],"Puerto Rico":[-66.5901,18.2208],"Rhode Island":[-71.4774,41.5801],"South Carolina":[-81.1637,33.8361],"South Dakota":[-99.9018,43.9695],Tennessee:[-86.5804,35.5175],Texas:[-99.9018,31.9686],Utah:[-111.0937,39.321],Vermont:[-72.5778,44.5588],Virginia:[-78.6569,37.4316],Washington:[-120.7401,47.7511],"West Virginia":[-80.4549,38.5976],Wisconsin:[-89.6165,43.7844],Wyoming:[-107.2903,43.076]},v=computed(()=>r.data.reduce((A,N)=>A+(N.participants||0),0)),_=computed(()=>r.data.filter(A=>A.participants>0).length);computed(()=>r.data.filter(A=>A.participants>0&&f[A.name]).map(A=>({name:A.name,value:[...f[A.name],A.participants],itemStyle:{color:"transparent"},label:{show:!0,formatter:()=>A.participants>=1e3?(A.participants/1e3).toFixed(1)+"K":A.participants.toString(),color:"rgba(255, 255, 255, 0.75)",fontSize:10,fontWeight:"bold",fontFamily:"Rajdhani, monospace",textShadowColor:"rgba(0, 0, 0, 0.9)",textShadowBlur:4}}))),computed(()=>r.data.filter(A=>A.participants>0&&f[A.name]).sort((A,N)=>N.participants-A.participants).slice(0,15).map(A=>({name:A.name,value:[...f[A.name],A.participants]})));const g=computed(()=>({animation:!1,tooltip:{show:!c.value,trigger:"item",backgroundColor:"rgba(10, 10, 15, 0.9)",borderColor:"rgba(255, 42, 42, 0.5)",borderWidth:1,padding:[8,12],textStyle:{color:"#fff",fontSize:12,fontFamily:"Rajdhani, Noto Sans SC, sans-serif"},formatter:A=>{if(A.componentType==="geo"||A.seriesType==="map"){const N=r.data.find(M=>M.name===A.name);return N&&N.participants>0?`<div style="font-weight:bold;color:#ff2a2a;margin-bottom:4px;">${A.name}</div>
                  <div>Participants: ${N.participants.toLocaleString()}</div>
                  <div style="color:#888;font-size:11px;margin-top:4px;">Click for details</div>`:`<div style="color:#666;">${A.name}</div><div style="color:#888;font-size:11px;">No data</div>`}return null}},visualMap:{show:!1,min:0,max:Math.max(...r.data.map(A=>A.participants||0),1e4),inRange:{color:["rgba(15, 20, 30, 0.7)","rgba(30, 25, 35, 0.7)","rgba(60, 30, 40, 0.75)","rgba(100, 35, 45, 0.8)","rgba(150, 40, 50, 0.85)","rgba(200, 45, 55, 0.9)","rgba(255, 50, 60, 0.95)"]}},geo:{map:"usa",roam:!1,zoom:c.value?2:2.5,center:[-97,39],aspectScale:.78,silent:!1,itemStyle:{areaColor:"rgba(25, 30, 50, 0.7)",borderColor:"rgba(255, 60, 60, 0.35)",borderWidth:1,shadowColor:"rgba(255, 42, 42, 0.15)",shadowBlur:3},emphasis:{disabled:!1,itemStyle:{areaColor:"rgba(255, 42, 42, 0.5)",borderColor:"#ff2a2a",borderWidth:2,shadowColor:"rgba(255, 42, 42, 0.4)",shadowBlur:5},label:{show:!0,color:"#fff",fontSize:14,fontWeight:"bold",fontFamily:"Rajdhani, sans-serif"}},select:{itemStyle:{areaColor:"rgba(255, 42, 42, 0.6)",borderColor:"#ff2a2a",borderWidth:3},label:{show:!0,color:"#fff",fontSize:14,fontWeight:"bold"}},label:{show:!1}},series:[{name:"Participants",type:"map",map:"usa",geoIndex:0,selectedMode:"single",data:r.data.map(A=>({name:A.name,value:A.participants||0}))}]}));function y(A,N,M=400){const R=u[A];if(Math.abs(N-R)<1){u[A]=N;return}const D=performance.now();function L(I){const $=I-D,V=Math.min($/M,1),H=1-Math.pow(1-V,3);u[A]=R+(N-R)*H,V<1&&requestAnimationFrame(L)}requestAnimationFrame(L)}function b(A){const N=r.data.find(M=>M.name===A);N&&N.participants>0&&(l.value={...N,code:d[A]||"XX-000"},y("participants",N.participants),y("survivors",N.survivors),y("eliminated",N.eliminated),y("survivalRate",N.survivalRate),y("avgProgress",N.avgProgress),o("stateSelect",N),o("mapInteractionChange",!0))}function T(A){var N;if(A.componentType==="geo"||A.seriesType==="map"){const M=A.name,R=r.data.find(D=>D.name===M);if(!R||!R.participants){C();return}if(((N=l.value)==null?void 0:N.name)===M){C();return}b(M),o("stateClick",{name:M})}else C()}function S(A){}function C(){l.value&&(l.value=null,s.value&&s.value.dispatchAction({type:"unselect",seriesIndex:0}),o("mapInteractionChange",!1))}function E(A){A.key==="Escape"&&C()}function x(){c.value=window.innerWidth<=768}return onMounted(()=>{document.addEventListener("keydown",E),window.addEventListener("resize",x)}),onUnmounted(()=>{document.removeEventListener("keydown",E),window.removeEventListener("resize",x)}),n({closePanel:C,selectState:b}),(A,N)=>(openBlock(),createElementBlock("div",_hoisted_1$x,[createVNode(unref(src_default),{ref_key:"chartRef",ref:s,class:"usa-map",option:g.value,autoresize:"",onClick:T,onMouseover:S},null,8,["option"]),createVNode(Transition,{name:"panel-slide"},{default:withCtx(()=>[l.value?(openBlock(),createElementBlock("div",{key:0,class:"state-panel",onClick:N[0]||(N[0]=withModifiers(()=>{},["stop"]))},[createBaseVNode("div",{class:"panel-close",onClick:C},[...N[1]||(N[1]=[createBaseVNode("span",null,"",-1)])]),createBaseVNode("div",_hoisted_2$v,[N[2]||(N[2]=createBaseVNode("div",{class:"panel-icon"},[createBaseVNode("span",{class:"icon-pulse"})],-1)),createBaseVNode("div",_hoisted_3$u,[createBaseVNode("span",_hoisted_4$t,"REGION "+toDisplayString(l.value.code),1),createBaseVNode("span",_hoisted_5$r,toDisplayString(l.value.name),1)])]),createBaseVNode("div",_hoisted_6$r,[createBaseVNode("div",_hoisted_7$q,[N[3]||(N[3]=createBaseVNode("span",{class:"stat-label"},"PARTICIPANTS / ",-1)),createBaseVNode("span",_hoisted_8$o,[createBaseVNode("span",_hoisted_9$k,toDisplayString(u.participants.toLocaleString()),1)])]),createBaseVNode("div",_hoisted_10$k,[N[4]||(N[4]=createBaseVNode("span",{class:"stat-label"},"SURVIVORS / ",-1)),createBaseVNode("span",_hoisted_11$i,[createBaseVNode("span",_hoisted_12$i,toDisplayString(u.survivors.toLocaleString()),1)])]),createBaseVNode("div",_hoisted_13$g,[N[5]||(N[5]=createBaseVNode("span",{class:"stat-label"},"ELIMINATED / ",-1)),createBaseVNode("span",_hoisted_14$g,[createBaseVNode("span",_hoisted_15$g,toDisplayString(u.eliminated.toLocaleString()),1)])]),createBaseVNode("div",_hoisted_16$g,[N[6]||(N[6]=createBaseVNode("span",{class:"stat-label"},"SURVIVAL RATE / ",-1)),createBaseVNode("div",_hoisted_17$g,[createBaseVNode("div",{class:"progress-bar",style:normalizeStyle$1({width:u.survivalRate+"%"})},null,4),createBaseVNode("span",_hoisted_18$f,toDisplayString(u.survivalRate.toFixed(1))+"%",1)])]),createBaseVNode("div",_hoisted_19$e,[N[7]||(N[7]=createBaseVNode("span",{class:"stat-label"},"AVG PROGRESS / ",-1)),createBaseVNode("div",_hoisted_20$e,[createBaseVNode("div",{class:"progress-bar",style:normalizeStyle$1({width:u.avgProgress+"%"})},null,4),createBaseVNode("span",_hoisted_21$d,toDisplayString(u.avgProgress.toFixed(1))+"%",1)])])]),N[8]||(N[8]=createBaseVNode("div",{class:"panel-footer"},[createBaseVNode("div",{class:"update-time"},[createBaseVNode("span",{class:"blink-dot"}),createTextVNode(" LIVE DATA //  ")])],-1))])):createCommentVNode("",!0)]),_:1}),t.showGlobalStats?(openBlock(),createElementBlock("div",_hoisted_22$d,[createBaseVNode("div",_hoisted_23$c,[N[9]||(N[9]=createBaseVNode("span",{class:"global-label"},"TOTAL PARTICIPANTS",-1)),createBaseVNode("span",_hoisted_24$c,toDisplayString(v.value.toLocaleString()),1)]),createBaseVNode("div",_hoisted_25$b,[N[10]||(N[10]=createBaseVNode("span",{class:"global-label"},"ACTIVE REGIONS",-1)),createBaseVNode("span",_hoisted_26$a,toDisplayString(_.value)+" / 50",1)])])):createCommentVNode("",!0),!l.value&&t.showHint?(openBlock(),createElementBlock("div",_hoisted_27$a,[...N[11]||(N[11]=[createBaseVNode("span",{class:"hint-icon"},null,-1),createTextVNode(" Click a state to view details ",-1)])])):createCommentVNode("",!0)]))}},USAMap=_export_sfc(_sfc_main$A,[["__scopeId","data-v-8acfd5a7"]]);function getAnnouncementConfig(){return{enabled:!1,blockStart:!1,title:"".replace(/\\n/g,`
`),content:" v1.2.0 \\n\\n\\n- 3\\n- \\n\\n".replace(/\\n/g,`
`)}}const _hoisted_1$w={class:"notice-header"},_hoisted_2$u={class:"notice-title"},_hoisted_3$t={class:"notice-body"},_hoisted_4$s={class:"notice-text"},_hoisted_5$q={class:"notice-footer"},_hoisted_6$q={key:0,class:"footer-quote"},_hoisted_7$p={key:1,class:"footer-quote"},_hoisted_8$n={class:"btn-text"},_sfc_main$z={__name:"AnnouncementModal",props:{title:{type:String,default:""},content:{type:String,default:""},blockStart:{type:Boolean,default:!1}},emits:["close"],setup(t,{emit:n}){const a=n;function r(){a("close")}function o(){a("close")}return(s,l)=>(openBlock(),createBlock(Teleport,{to:"body"},[createVNode(Transition,{name:"modal-fade"},{default:withCtx(()=>[createBaseVNode("div",{class:"announcement-overlay",onClick:o},[createBaseVNode("div",{class:normalizeClass(["announcement-modal",{"is-blocked":t.blockStart}]),onClick:l[0]||(l[0]=withModifiers(()=>{},["stop"]))},[l[3]||(l[3]=createBaseVNode("div",{class:"bg-grid"},null,-1)),l[4]||(l[4]=createBaseVNode("div",{class:"bg-noise"},null,-1)),l[5]||(l[5]=createBaseVNode("div",{class:"top-line"},null,-1)),createBaseVNode("div",_hoisted_1$w,[l[1]||(l[1]=createBaseVNode("div",{class:"notice-tag"},[createBaseVNode("span",{class:"tag-dot"}),createBaseVNode("span",{class:"tag-text"},"")],-1)),createBaseVNode("h3",_hoisted_2$u,toDisplayString(t.title),1)]),createBaseVNode("div",_hoisted_3$t,[createBaseVNode("p",_hoisted_4$s,toDisplayString(t.content),1)]),createBaseVNode("div",_hoisted_5$q,[t.blockStart?(openBlock(),createElementBlock("p",_hoisted_7$p,"")):(openBlock(),createElementBlock("p",_hoisted_6$q,"")),createBaseVNode("button",{class:normalizeClass(["notice-btn",{"btn-blocked":t.blockStart}]),onClick:r},[l[2]||(l[2]=createBaseVNode("span",{class:"btn-bg"},null,-1)),createBaseVNode("span",_hoisted_8$n,toDisplayString(t.blockStart?"":""),1)],2)])],2)])]),_:1})]))}},AnnouncementModal=_export_sfc(_sfc_main$z,[["__scopeId","data-v-ae1f2dee"]]),_hoisted_1$v={class:"top-bar-right"},_hoisted_2$t={class:"time-display"},_hoisted_3$s={class:"guide-particles"},_hoisted_4$r={class:"main-title"},_hoisted_5$p=["disabled"],_hoisted_6$p={class:"btn-text"},SWIPE_THRESHOLD=50,SWIPE_TIME_LIMIT=300,WHEEL_THRESHOLD=100,fullStatusText="SYSTEM ONLINE",_sfc_main$y={__name:"StageS00Background",setup(t){const n=useGameStore(),a=ref(null),r=ref(!1),o=ref(!1),s=ref(!1),l=ref(!1),c=ref(!1),u=ref(!1),d=ref(!1),f=ref(!1),v=ref([]),_=ref(!1),g=ref(!1),y=ref(!1),b=ref(!1),T=ref(!1),S=getAnnouncementConfig(),C=ref(!1),E=ref(!1);let x=0,A=0,N=null,M=0;const R=ref(""),D="".split(""),L=ref("");let I=null;const $=ref(!1),V=ref("INITIATE // ");function H(){const le=new Date;L.value=le.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})}async function X(){await z(100),o.value=!0,r.value=!0,await z(100),s.value=!0,l.value=!0,await z(100),c.value=!0,q(),await z(200),u.value=!0,d.value=!0,v.value=new Array(D.length).fill(!1);for(let le=0;le<D.length;le++)await z(60),v.value[le]=!0;await z(100),_.value=!0,await z(200),f.value=!0,await z(400),g.value=!0}function q(){let le=0;const pe=setInterval(()=>{le<fullStatusText.length?(R.value+=fullStatusText[le],le++):clearInterval(pe)},60)}function z(le){return new Promise(pe=>setTimeout(pe,le))}function G(le){y.value=le,le&&b.value&&!T.value&&setTimeout(()=>{T.value=!0,setTimeout(()=>{b.value=!1},1e3)},300)}function oe(le){x=le.touches[0].clientY,A=Date.now()}function ne(le){const pe=le.changedTouches[0].clientY,Te=Date.now(),U=x-pe;Te-A>SWIPE_TIME_LIMIT||(U>SWIPE_THRESHOLD&&!y.value?se():U<-SWIPE_THRESHOLD&&!y.value?y.value=!0:U>SWIPE_THRESHOLD&&y.value&&(a.value&&a.value.closePanel(),y.value=!1))}function ue(le){M+=le.deltaY,N&&clearTimeout(N),N=setTimeout(()=>{M=0},200),M>WHEEL_THRESHOLD&&!y.value?(y.value=!0,M=0):M<-WHEEL_THRESHOLD&&y.value&&(a.value&&a.value.closePanel(),y.value=!1,M=0)}function se(){$.value||S.blockStart&&!E.value||($.value=!0,g.value=!1,V.value="INITIALIZING...",setTimeout(()=>{V.value="LOADING...",setTimeout(()=>n.startGame(),500)},300))}function fe(){S.blockStart||(C.value=!1,E.value=!0)}function ae(le,pe){const Te=1e-4+Math.random()*2e-4,U=Math.floor(pe*Te),W=12+Math.random()*23,w=Math.floor(U*W/100),P=U-w,F=25+Math.random()*50;return{name:le,participants:U,survivors:w,eliminated:P,survivalRate:W,avgProgress:F}}const ve=ref(Object.entries({Alabama:5108,Alaska:733,Arizona:7431,Arkansas:3067,California:38965,Colorado:5877,Connecticut:3617,Delaware:1018,"District of Columbia":678,Florida:22610,Georgia:11019,Hawaii:1440,Idaho:1964,Illinois:12582,Indiana:6833,Iowa:3207,Kansas:2940,Kentucky:4526,Louisiana:4573,Maine:1395,Maryland:6180,Massachusetts:7001,Michigan:10037,Minnesota:5737,Mississippi:2940,Missouri:6196,Montana:1132,Nebraska:1978,Nevada:3194,"New Hampshire":1402,"New Jersey":9290,"New Mexico":2114,"New York":19571,"North Carolina":10835,"North Dakota":783,Ohio:11785,Oklahoma:4053,Oregon:4233,Pennsylvania:12972,"Puerto Rico":3221,"Rhode Island":1095,"South Carolina":5373,"South Dakota":919,Tennessee:7126,Texas:30503,Utah:3417,Vermont:647,Virginia:8683,Washington:7812,"West Virginia":1770,Wisconsin:5910,Wyoming:584}).map(([le,pe])=>ae(le,pe*1e3)));return onMounted(async()=>{H(),I=setInterval(H,1e3),X(),setTimeout(()=>{b.value=!0},1500),S.enabled&&setTimeout(()=>{C.value=!0},2e3),document.addEventListener("touchstart",oe,{passive:!0}),document.addEventListener("touchend",ne,{passive:!0}),document.addEventListener("wheel",ue,{passive:!0})}),onUnmounted(()=>{I&&clearInterval(I),N&&clearTimeout(N),document.removeEventListener("touchstart",oe),document.removeEventListener("touchend",ne),document.removeEventListener("wheel",ue)}),(le,pe)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["stage-container",{"is-ready":r.value}])},[createBaseVNode("div",{class:normalizeClass(["map-layer",{"map-visible":o.value}])},[createVNode(USAMap,{ref_key:"mapRef",ref:a,data:ve.value,"show-global-stats":!1,"show-hint":!1,onMapInteractionChange:G},null,8,["data"])],2),createBaseVNode("div",{class:normalizeClass(["atmosphere-layer",{"atmosphere-visible":s.value}])},[...pe[0]||(pe[0]=[createBaseVNode("div",{class:"scanlines"},null,-1),createBaseVNode("div",{class:"vignette"},null,-1)])],2),createBaseVNode("div",{class:normalizeClass(["gradient-overlay",{"gradient-visible":l.value}])},null,2),createBaseVNode("div",{class:normalizeClass(["top-bar",{"bar-visible":c.value}])},[pe[1]||(pe[1]=createBaseVNode("div",{class:"status-indicator"},[createBaseVNode("span",{class:"status-text"})],-1)),createBaseVNode("div",_hoisted_1$v,[createBaseVNode("div",_hoisted_2$t,toDisplayString(L.value),1)])],2),createBaseVNode("div",{class:normalizeClass(["map-guide",{"guide-visible":b.value&&!T.value,"guide-shatter":T.value}])},[createBaseVNode("div",_hoisted_3$s,[(openBlock(),createElementBlock(Fragment,null,renderList(12,Te=>createBaseVNode("span",{class:"particle",key:Te})),64))]),pe[2]||(pe[2]=createBaseVNode("div",{class:"guide-body"},[createBaseVNode("span",{class:"guide-line"}),createBaseVNode("span",{class:"guide-text"},""),createBaseVNode("span",{class:"guide-dot"})],-1))],2),createBaseVNode("div",{class:normalizeClass(["content-wrapper",{"content-visible":u.value}])},[createBaseVNode("div",{class:normalizeClass(["title-section",{"section-visible":d.value,"section-split":y.value}])},[pe[3]||(pe[3]=createBaseVNode("div",{class:"kicker"},[createBaseVNode("span",{class:"kicker-icon"}),createTextVNode("  ")],-1)),createBaseVNode("h1",_hoisted_4$r,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(D),(Te,U)=>(openBlock(),createElementBlock("span",{class:normalizeClass(["title-char",{"char-visible":v.value[U]}]),key:U},toDisplayString(Te),3))),128))]),createBaseVNode("div",{class:normalizeClass(["subtitle",{"subtitle-visible":_.value}])}," THE KILL LINE ",2)],2),createBaseVNode("div",{class:normalizeClass(["action-section",{"section-visible":f.value,"section-split":y.value}])},[pe[6]||(pe[6]=createBaseVNode("p",{class:"slogan"},"",-1)),createBaseVNode("button",{class:normalizeClass(["start-btn",{"btn-loading":$.value,"btn-pulse":g.value}]),onClick:se,disabled:$.value},[pe[4]||(pe[4]=createBaseVNode("span",{class:"btn-bg"},null,-1)),createBaseVNode("span",_hoisted_6$p,toDisplayString(V.value),1),pe[5]||(pe[5]=createBaseVNode("span",{class:"btn-arrow"},"",-1))],10,_hoisted_5$p),pe[7]||(pe[7]=createBaseVNode("div",{class:"disclaimer"},"  ",-1))],2)],2),createBaseVNode("div",{class:normalizeClass(["hud-elements",{"hud-visible":c.value}])},[...pe[8]||(pe[8]=[createStaticVNode('<div class="hud-corner hud-tl" data-v-75def0c5><svg viewBox="0 0 50 50" data-v-75def0c5><path d="M0 25 L0 0 L25 0" data-v-75def0c5></path></svg></div><div class="hud-corner hud-tr" data-v-75def0c5><svg viewBox="0 0 50 50" data-v-75def0c5><path d="M25 0 L50 0 L50 25" data-v-75def0c5></path></svg></div><div class="hud-corner hud-bl" data-v-75def0c5><svg viewBox="0 0 50 50" data-v-75def0c5><path d="M0 25 L0 50 L25 50" data-v-75def0c5></path></svg></div><div class="hud-corner hud-br" data-v-75def0c5><svg viewBox="0 0 50 50" data-v-75def0c5><path d="M25 50 L50 50 L50 25" data-v-75def0c5></path></svg></div>',4)])],2),C.value?(openBlock(),createBlock(AnnouncementModal,{key:0,title:unref(S).title,content:unref(S).content,"block-start":unref(S).blockStart,onClose:fe},null,8,["title","content","block-start"])):createCommentVNode("",!0)],2))}},StageS00Background=_export_sfc(_sfc_main$y,[["__scopeId","data-v-75def0c5"]]),_hoisted_1$u={class:"story-viewport"},_hoisted_2$s={class:"story-container",ref:"scrollContainer"},_hoisted_3$r={class:"content-padder"},_hoisted_4$q={key:0,class:"day-tag"},_hoisted_5$o={class:"text-content"},_hoisted_6$o={key:0,class:"cursor-blink"},_hoisted_7$o={class:"action-footer"},_hoisted_8$m={class:"btn-text"},_sfc_main$x={__name:"StageS01InnerStruggle",setup(t){const n=useGameStore(),a=ref(null),r=ref(!1),o=ref(!1),s=ref([]),l=ref(0),c=ref(!0);let u=null,d=null;const f=computed(()=>n.stageContent||{bg:"",button:"",lines:[]}),v=computed(()=>f.value.button||""),_=computed(()=>({backgroundImage:f.value.bg?`url(${f.value.bg})`:"none"}));onMounted(()=>{y()}),onUnmounted(()=>{g()});function g(){u&&clearTimeout(u),d&&clearTimeout(d)}function y(){const C=f.value.lines||[];let E=0;const x=()=>{if(o.value)return;if(E>=C.length){c.value=!1,setTimeout(()=>{r.value=!0},500);return}const A=C[E];s.value.push({day:A.day,text:""}),l.value=E,c.value=!0,T();let N=0;const M=A.text,R=()=>{if(!o.value)if(N<M.length){s.value[E].text+=M[N],N++;const D=Math.random()*30+30;u=setTimeout(R,D),N%5===0&&T()}else T(),E++,d=setTimeout(x,200)};R()};x()}function b(){if(r.value)return;o.value=!0,g(),c.value=!1;const C=f.value.lines||[];s.value=C.map(E=>({day:E.day,text:E.text})),r.value=!0,T()}function T(){nextTick(()=>{a.value&&a.value.scrollIntoView({behavior:"smooth",block:"end"})})}function S(){n.clickInnerStruggle()}return(C,E)=>(openBlock(),createElementBlock("div",{class:"story-screen",style:normalizeStyle$1(_.value)},[E[1]||(E[1]=createBaseVNode("div",{class:"overlay-gradient"},null,-1)),E[2]||(E[2]=createBaseVNode("div",{class:"vignette"},null,-1)),createBaseVNode("div",_hoisted_1$u,[createBaseVNode("div",_hoisted_2$s,[createBaseVNode("div",_hoisted_3$r,[(openBlock(!0),createElementBlock(Fragment,null,renderList(s.value,(x,A)=>(openBlock(),createElementBlock("div",{key:A,class:"story-line"},[x.day?(openBlock(),createElementBlock("span",_hoisted_4$q,toDisplayString(x.day),1)):createCommentVNode("",!0),createBaseVNode("p",_hoisted_5$o,[createTextVNode(toDisplayString(x.text),1),A===l.value&&c.value?(openBlock(),createElementBlock("span",_hoisted_6$o,"_")):createCommentVNode("",!0)])]))),128))]),createBaseVNode("div",{class:"scroll-anchor",ref_key:"scrollAnchor",ref:a},null,512)],512)]),createBaseVNode("div",_hoisted_7$o,[createVNode(Transition,{name:"fade-btn",mode:"out-in"},{default:withCtx(()=>[r.value?(openBlock(),createElementBlock("button",{key:0,class:"next-stage-btn",onClick:S},[createBaseVNode("span",_hoisted_8$m,toDisplayString(v.value),1),E[0]||(E[0]=createBaseVNode("div",{class:"btn-glitch"},null,-1))])):(openBlock(),createElementBlock("button",{key:1,class:"skip-btn",onClick:b}," [ SKIP SEQUENCE /  ] >> "))]),_:1})])],4))}},StageS01InnerStruggle=_export_sfc(_sfc_main$x,[["__scopeId","data-v-8de0f225"]]);function trackEvent(t,n={}){typeof window.plausible=="function"&&window.plausible(t,{props:n})}const Analytics={siteVisit:()=>trackEvent("site_visit"),randomIdentity:t=>trackEvent("random_identity",{archetype:t}),startGame:t=>trackEvent("start_game",{difficulty:t}),roundEnd:t=>trackEvent("round_end",{round:t}),killed:(t,n)=>trackEvent("killed",{round:t,cause:n}),gameComplete:t=>trackEvent("game_complete",{round:t}),playAgain:()=>trackEvent("play_again"),screenshotShare:()=>trackEvent("screenshot_share"),shareLink:()=>trackEvent("share_link")},_hoisted_1$t={class:"identity-reconstruction-container"},_hoisted_2$r={class:"phase-content"},_hoisted_3$q={class:"profile-header"},_hoisted_4$p={class:"profile-body"},_hoisted_5$n={class:"card-left"},_hoisted_6$n={class:"avatar"},_hoisted_7$n={class:"card-right"},_hoisted_8$l={class:"name"},_hoisted_9$j={class:"name-en"},_hoisted_10$j={class:"location"},_hoisted_11$h={class:"story-text intro-text"},_hoisted_12$h={class:"story-text"},_hoisted_13$f={class:"tag-list"},_hoisted_14$f={class:"mental-bars"},_hoisted_15$f={class:"mental-item"},_hoisted_16$f={class:"mental-bar"},_hoisted_17$f={class:"mental-desc"},_hoisted_18$e={class:"mental-item"},_hoisted_19$d={class:"mental-bar"},_hoisted_20$d={class:"mental-desc"},_hoisted_21$c={class:"stat-icon"},_hoisted_22$c={class:"stat-label"},_hoisted_23$b={class:"attr-help-content"},_hoisted_24$b={class:"attr-help-header"},_hoisted_25$a={class:"attr-help-list"},_hoisted_26$9={class:"help-icon"},_hoisted_27$9={class:"help-text"},_hoisted_28$9={class:"help-name"},_hoisted_29$8={class:"help-desc"},_sfc_main$w={__name:"StageS02ChoosePath",setup(t){const n=useGameStore(),a=ref(!1),r=ref(!0),o=ref(!1),s=ref(!1),l=ref(!1),c=ref(!1),u=ref(!1),d=ref(!1),f=ref(!1),v=ref(!1),_=[{key:"money",icon:"",name:"",desc:""},{key:"health",icon:"",name:"",desc:""},{key:"san",icon:"",name:"",desc:""},{key:"credit",icon:"",name:"",desc:""},{key:"luck",icon:"",name:"",desc:""}],g=[{name:"",nameEn:"John Miller",nickname:"",gender:"male",avatarEmoji:"",city:"",state:"",intro:"3565",slogan:"",description:"15",tags:["","",""],stress:85,hope:15,statMod:{health:-.25,san:-.15,credit:-.2,luck:-.2,money:-.15}},{name:"",nameEn:"Jos Ramirez",nickname:"",gender:"male",avatarEmoji:"",city:"",state:"",intro:"",slogan:"",description:"15",tags:["","",""],stress:90,hope:20,statMod:{health:-.3,san:-.2,credit:-.25,luck:-.2,money:-.2}},{name:"",nameEn:"Samuel Jones",nickname:"",gender:"male",avatarEmoji:"",city:"",state:"",intro:"3K",slogan:"",description:"3K",tags:["","",""],stress:75,hope:30,statMod:{health:.1,san:.05,credit:.1,luck:-.3,money:.05}},{name:"",nameEn:"Cletus Yeager",nickname:"",gender:"male",avatarEmoji:"",city:"",state:"",intro:"",slogan:"",description:"A",tags:["","",""],stress:80,hope:25,statMod:{health:-.1,san:-.15,credit:-.15,luck:-.1,money:-.2}},{name:"",nameEn:"Dave Jenkins",nickname:"",gender:"male",avatarEmoji:"",city:"",state:"",intro:"",slogan:"",description:"",tags:["","",""],stress:70,hope:35,statMod:{health:0,san:-.1,credit:.1,luck:-.1,money:0}},{name:"",nameEn:"Sarah Baker",nickname:"",gender:"female",avatarEmoji:"",city:"",state:"",intro:"",slogan:"",description:"12",tags:["","",""],stress:85,hope:30,statMod:{health:-.1,san:-.15,credit:-.1,luck:-.1,money:-.15}},{name:"",nameEn:"Michael Chen",nickname:"",gender:"male",avatarEmoji:"",city:"",state:"",intro:"300",slogan:"",description:"H1B",tags:["H1B","",""],stress:80,hope:30,statMod:{health:.1,san:-.1,credit:.15,luck:-.15,money:-.1}},{name:"",nameEn:"Jackson Brown",nickname:"",gender:"male",avatarEmoji:"",city:"",state:"",intro:"",slogan:"",description:"",tags:["","",""],stress:80,hope:20,statMod:{health:-.15,san:-.2,credit:-.1,luck:-.2,money:-.1}},{name:"",nameEn:"Emily Carter",nickname:"",gender:"female",avatarEmoji:"",city:"",state:"",intro:"",slogan:"",description:"20",tags:["20","",""],stress:75,hope:25,statMod:{health:.1,san:-.1,credit:-.25,luck:-.1,money:-.2}},{name:"",nameEn:"Brandon Reed",nickname:"",gender:"male",avatarEmoji:"",city:"",state:"",intro:"",slogan:"",description:"PTSDVA",tags:["","PTSD",""],stress:90,hope:15,statMod:{health:-.3,san:-.25,credit:-.2,luck:-.15,money:-.15}}],y=["","","","",""],b=["","","","",""];function T(I){return I[Math.floor(Math.random()*I.length)]}function S(I,$){return Math.floor(Math.random()*($-I+1))+I}function C(I,$,V){return Math.max($,Math.min(V,I))}function E(I,$,V){return I+($-I)*V}const x=reactive({name:"",nameEn:"",gender:"",avatarEmoji:"",city:"",state:"",intro:"",description:"",tags:[],stress:0,hope:0,stressDesc:"",hopeDesc:"",innerVoice:"",money:0,health:0,san:0,credit:0,luck:0,archetype:"",difficulty:0});function A(){const I=Math.pow(Math.random(),1.5);x.difficulty=I;const $=T(g);x.name=$.name,x.nameEn=$.nameEn,x.gender=$.gender,x.avatarEmoji=$.avatarEmoji,x.city=$.city,x.state=$.state,x.archetype=$.nickname,x.intro=$.intro,x.description=$.description,x.tags=[...$.tags],x.innerVoice=$.slogan;const V=(I-.5)*15;x.stress=C($.stress+S(-8,8)-V,40,95),x.hope=C($.hope+S(-8,8)+V,10,60),x.stressDesc=T(y),x.hopeDesc=T(b);const H=178,q=H+Math.random()*(182-H),z={san:40,health:20,credit:350,money:-4e3},G={san:1,health:.8,credit:.5,money:.01},oe={min:25,max:55},ue=((U,W,w,P)=>U*G.san+W*G.health+(w-300)*G.credit+P*G.money)(z.san,z.health,z.credit,z.money),se=q-ue;let fe={san:Math.random()+($.statMod.san||0)+I*.3,health:Math.random()+($.statMod.health||0)+I*.3,credit:Math.random()+($.statMod.credit||0)+I*.3,money:Math.random()+($.statMod.money||0)+I*.3};for(const U in fe)fe[U]=Math.max(.1,fe[U]);const ae=fe.san+fe.health+fe.credit+fe.money;for(const U in fe)fe[U]/=ae;const ie=Math.round(se*fe.san/G.san),ve=Math.round(se*fe.health/G.health),le=Math.round(se*fe.credit/G.credit),pe=Math.round(se*fe.money/G.money);x.san=z.san+ie,x.health=z.health+ve,x.credit=z.credit+le,x.money=z.money+pe;const Te=C(I+($.statMod.luck||0)+(Math.random()-.5)*.3,0,1);x.luck=Math.round(E(oe.min,oe.max,Te))}const N=computed(()=>{const I={san:1,health:.8,credit:.5,money:.01},$={san:30,health:15,credit:350,money:-4e3},V=(x.san-$.san)*I.san,H=(x.health-$.health)*I.health,X=(x.credit-$.credit)*I.credit,q=(x.money-$.money)*I.money,z={san:V,health:H,credit:X,money:q},G=(V+H+X+q)/4;function oe(ne){if(ne==="luck")return{arrow:"",arrowClass:""};const ue=z[ne];return ue>G+2?{arrow:"",arrowClass:"arrow-high"}:ue<G-2?{arrow:"",arrowClass:"arrow-low"}:{arrow:"-",arrowClass:"arrow-mid"}}return[{key:"money",icon:"",label:"",value:`$${x.money}`,valueClass:"gold",...oe("money")},{key:"health",icon:"",label:"",value:x.health,valueClass:"",...oe("health")},{key:"san",icon:"",label:"",value:x.san,valueClass:"",...oe("san")},{key:"credit",icon:"",label:"",value:x.credit,valueClass:"",...oe("credit")},{key:"luck",icon:"",label:"",value:x.luck,valueClass:"",arrow:"",arrowClass:""}]}),M=computed(()=>{const I=x.difficulty;return I<.2?"difficulty-hell":I<.4?"difficulty-hard":I<.6?"difficulty-normal":"difficulty-easy"});function R(){r.value=!0,o.value=!1,s.value=!1,l.value=!1,c.value=!1,u.value=!1,d.value=!1,f.value=!1,setTimeout(()=>{o.value=!0},500),setTimeout(()=>{s.value=!0},1e3),setTimeout(()=>{l.value=!0},1500),setTimeout(()=>{c.value=!0},2e3),setTimeout(()=>{r.value=!1,u.value=!0},2500),setTimeout(()=>{d.value=!0},3e3),setTimeout(()=>{f.value=!0},3300)}function D(){A(),R(),Analytics.randomIdentity(x.archetype)}onMounted(()=>{A(),setTimeout(()=>{a.value=!0,R()},300)});function L(){n.s.character={name:x.name,nameEn:x.nameEn,gender:x.gender,avatarEmoji:x.avatarEmoji,city:x.city,state:x.state,description:x.description,tags:[...x.tags],archetype:x.archetype,innerVoice:x.innerVoice},n.choosePath({id:"custom",name:x.name,stats:{money:x.money,health:x.health,san:x.san,credit:x.credit,luck:x.luck}});const I=x.difficulty<.2?"hell":x.difficulty<.4?"hard":x.difficulty<.6?"normal":"easy";Analytics.startGame(I),n.confirmIdentityAndStart()}return(I,$)=>(openBlock(),createElementBlock("div",_hoisted_1$t,[$[10]||($[10]=createBaseVNode("div",{class:"bg-effects"},[createBaseVNode("div",{class:"grid-overlay"}),createBaseVNode("div",{class:"noise-overlay"})],-1)),createBaseVNode("div",_hoisted_2$r,[createBaseVNode("div",{class:normalizeClass(["profile-window",{expanded:a.value}])},[createBaseVNode("div",_hoisted_3$q,[createBaseVNode("span",{class:normalizeClass(["scan-indicator",{scanning:r.value}])},[$[3]||($[3]=createBaseVNode("span",{class:"scan-dot"},null,-1)),createBaseVNode("span",null,toDisplayString(r.value?"...":""),1)],2),r.value?createCommentVNode("",!0):(openBlock(),createElementBlock("button",{key:0,class:"reroll-btn",onClick:D},"   "))]),createBaseVNode("div",_hoisted_4$p,[createBaseVNode("div",{class:normalizeClass(["scan-line",{active:r.value}])},null,2),createBaseVNode("div",{class:normalizeClass(["identity-card",{visible:o.value}])},[createBaseVNode("div",_hoisted_5$n,[createBaseVNode("div",_hoisted_6$n,toDisplayString(x.avatarEmoji),1)]),createBaseVNode("div",_hoisted_7$n,[createBaseVNode("h2",_hoisted_8$l,[createTextVNode(toDisplayString(x.name)+" ",1),createBaseVNode("span",_hoisted_9$j,toDisplayString(x.nameEn),1)]),createBaseVNode("p",_hoisted_10$j,[createBaseVNode("span",{class:normalizeClass(["archetype-badge",M.value])},toDisplayString(x.archetype),3),createTextVNode(" "+toDisplayString(x.city)+", "+toDisplayString(x.state),1)])])],2),createBaseVNode("div",{class:normalizeClass(["story-section",{visible:s.value}])},[$[4]||($[4]=createBaseVNode("div",{class:"section-title"},"",-1)),createBaseVNode("p",_hoisted_11$h,toDisplayString(x.intro),1)],2),createBaseVNode("div",{class:normalizeClass(["story-section",{visible:s.value}])},[$[5]||($[5]=createBaseVNode("div",{class:"section-title"},"",-1)),createBaseVNode("p",_hoisted_12$h,toDisplayString(x.description),1)],2),createBaseVNode("div",{class:normalizeClass(["situation-section",{visible:l.value}])},[createBaseVNode("div",_hoisted_13$f,[(openBlock(!0),createElementBlock(Fragment,null,renderList(x.tags,V=>(openBlock(),createElementBlock("span",{class:"tag",key:V},toDisplayString(V),1))),128))])],2),createBaseVNode("div",{class:normalizeClass(["mental-section",{visible:c.value}])},[$[8]||($[8]=createBaseVNode("div",{class:"section-title"},"",-1)),createBaseVNode("div",_hoisted_14$f,[createBaseVNode("div",_hoisted_15$f,[$[6]||($[6]=createBaseVNode("span",{class:"mental-label"},"",-1)),createBaseVNode("div",_hoisted_16$f,[createBaseVNode("div",{class:"mental-fill stress",style:normalizeStyle$1({width:x.stress+"%"})},null,4)]),createBaseVNode("span",_hoisted_17$f,toDisplayString(x.stressDesc),1)]),createBaseVNode("div",_hoisted_18$e,[$[7]||($[7]=createBaseVNode("span",{class:"mental-label"},"",-1)),createBaseVNode("div",_hoisted_19$d,[createBaseVNode("div",{class:"mental-fill hope",style:normalizeStyle$1({width:x.hope+"%"})},null,4)]),createBaseVNode("span",_hoisted_20$d,toDisplayString(x.hopeDesc),1)])])],2),createBaseVNode("div",{class:normalizeClass(["stats-grid",{visible:u.value}])},[(openBlock(!0),createElementBlock(Fragment,null,renderList(N.value,V=>(openBlock(),createElementBlock("div",{class:"stat-item",key:V.key},[createBaseVNode("span",_hoisted_21$c,toDisplayString(V.icon),1),createBaseVNode("span",{class:normalizeClass(["stat-value",V.valueClass])},toDisplayString(V.value),3),createBaseVNode("span",{class:normalizeClass(["stat-arrow",V.arrowClass])},toDisplayString(V.arrow),3),createBaseVNode("span",_hoisted_22$c,toDisplayString(V.label),1)]))),128))],2),createBaseVNode("p",{class:normalizeClass(["inner-voice",{visible:d.value}])},toDisplayString(x.innerVoice),3)]),createBaseVNode("div",{class:normalizeClass(["bottom-actions",{visible:f.value}])},[createBaseVNode("button",{class:"confirm-btn",onClick:L},""),createBaseVNode("button",{class:"attr-help-btn",onClick:$[0]||($[0]=V=>v.value=!0)},"   ")],2),(openBlock(),createBlock(Teleport,{to:"body"},[v.value?(openBlock(),createElementBlock("div",{key:0,class:"attr-help-modal",onClick:$[2]||($[2]=withModifiers(V=>v.value=!1,["self"]))},[createBaseVNode("div",_hoisted_23$b,[createBaseVNode("div",_hoisted_24$b,[$[9]||($[9]=createBaseVNode("span",null,"",-1)),createBaseVNode("button",{onClick:$[1]||($[1]=V=>v.value=!1)},"")]),createBaseVNode("div",_hoisted_25$a,[(openBlock(),createElementBlock(Fragment,null,renderList(_,V=>createBaseVNode("div",{class:"attr-help-item",key:V.key},[createBaseVNode("span",_hoisted_26$9,toDisplayString(V.icon),1),createBaseVNode("div",_hoisted_27$9,[createBaseVNode("span",_hoisted_28$9,toDisplayString(V.name),1),createBaseVNode("span",_hoisted_29$8,toDisplayString(V.desc),1)])])),64))])])])):createCommentVNode("",!0)]))],2)])]))}},StageS02ChoosePath=_export_sfc(_sfc_main$w,[["__scopeId","data-v-876c10c2"]]),_hoisted_1$s={class:"scene-wrapper"},_hoisted_2$q={class:"scene-title","data-text":"SCENE"},_hoisted_3$p={class:"monologue-box"},_hoisted_4$o={class:"monologue-text"},_sfc_main$v={__name:"StageS02bOpening",setup(t){const n=useGameStore(),a=ref(!1),r=ref(!1),o=ref(!1),s=computed(()=>n.stageContent),l=computed(()=>{var v;const d=((v=s.value)==null?void 0:v.scenes)||[];if(d.length===0)return{scene:"",monologue:"...",bg:null};(n.s.openingSceneIndex===void 0||n.s.openingSceneIndex===null)&&(n.s.openingSceneIndex=Math.floor(Math.random()*d.length));const f=n.s.openingSceneIndex%d.length;return d[f]}),c=computed(()=>{var f;const d=(f=l.value)==null?void 0:f.bg;return d?{backgroundImage:`url(${d})`}:{backgroundImage:"url(https://images.unsplash.com/photo-1545324418-cc1a3fa10c00?q=80&w=2670&auto=format&fit=crop)"}});onMounted(()=>{setTimeout(()=>{a.value=!0},500),setTimeout(()=>{r.value=!0},1500),setTimeout(()=>{o.value=!0},2e3)});function u(){n.enterS06()}return(d,f)=>(openBlock(),createElementBlock("div",{class:"opening-screen",style:normalizeStyle$1(c.value)},[f[6]||(f[6]=createBaseVNode("div",{class:"overlay-gradient"},null,-1)),f[7]||(f[7]=createBaseVNode("div",{class:"vignette"},null,-1)),createBaseVNode("div",{class:normalizeClass(["eyelid top",{open:a.value}])},null,2),createBaseVNode("div",{class:normalizeClass(["eyelid bottom",{open:a.value}])},null,2),createBaseVNode("div",{class:normalizeClass(["blur-layer",{clear:r.value}])},[createBaseVNode("div",{class:normalizeClass(["content-container",{visible:o.value}])},[f[5]||(f[5]=createStaticVNode('<div class="fui-header" data-v-84b0a956><div class="location-marker" data-v-84b0a956><span class="pulse-dot" data-v-84b0a956></span><span class="fui-label" data-v-84b0a956>CURRENT LOCATION // </span></div><div class="time-marker" data-v-84b0a956>DAY 1 // 06:00 AM</div></div>',1)),createBaseVNode("div",_hoisted_1$s,[createBaseVNode("h1",_hoisted_2$q,toDisplayString(l.value.scene),1),f[0]||(f[0]=createBaseVNode("div",{class:"scene-deco-line"},null,-1))]),createBaseVNode("div",_hoisted_3$p,[f[1]||(f[1]=createBaseVNode("div",{class:"quote-mark left"},'"',-1)),createBaseVNode("p",_hoisted_4$o,toDisplayString(l.value.monologue),1),f[2]||(f[2]=createBaseVNode("div",{class:"quote-mark right"},'"',-1))]),createBaseVNode("div",{class:"action-area"},[f[4]||(f[4]=createBaseVNode("div",{class:"action-hint"},"",-1)),createBaseVNode("button",{class:"wake-up-btn",onClick:u},[...f[3]||(f[3]=[createBaseVNode("div",{class:"btn-inner"},[createBaseVNode("span",{class:"main-text"},""),createBaseVNode("span",{class:"sub-text"},"SURVIVE OR DIE // ")],-1),createBaseVNode("div",{class:"btn-border"},null,-1)])])])],2)],2)],4))}},StageS02bOpening=_export_sfc(_sfc_main$v,[["__scopeId","data-v-84b0a956"]]),_hoisted_1$r={class:"story-viewport"},_hoisted_2$p={class:"story-container",ref:"scrollContainer"},_hoisted_3$o={class:"content-padder"},_hoisted_4$n={key:0,class:"day-tag"},_hoisted_5$m={class:"text-content"},_hoisted_6$m={key:0,class:"cursor-blink"},_hoisted_7$m={class:"action-footer"},_hoisted_8$k={class:"btn-text"},_sfc_main$u={__name:"StageS03Loading",setup(t){const n=useGameStore(),a=ref(null),r=ref(!1),o=ref(!1),s=ref([]),l=ref(0),c=ref(!0);let u=null,d=null;const f=computed(()=>{var A,N;const C=n.stageContent,E=n.s.pathId||"B";return((A=C==null?void 0:C.byPath)==null?void 0:A[E])||((N=C==null?void 0:C.byPath)==null?void 0:N.B)||{bg:"",button:"",lines:[]}}),v=computed(()=>f.value.button),_=computed(()=>({backgroundImage:`url(${f.value.bg})`}));onMounted(()=>{y()}),onUnmounted(()=>{g()});function g(){u&&clearTimeout(u),d&&clearTimeout(d)}function y(){const C=f.value.lines||[];let E=0;const x=()=>{if(o.value)return;if(E>=C.length){c.value=!1,setTimeout(()=>{r.value=!0},500);return}const A=C[E];s.value.push({day:A.day,text:""}),l.value=E,c.value=!0,T();let N=0;const M=A.text,R=()=>{if(!o.value)if(N<M.length){s.value[E].text+=M[N],N++;const D=Math.random()*30+30;u=setTimeout(R,D),N%5===0&&T()}else T(),E++,d=setTimeout(x,200)};R()};x()}function b(){if(r.value)return;o.value=!0,g(),c.value=!1;const C=f.value.lines||[];s.value=C.map(E=>({day:E.day,text:E.text})),r.value=!0,T()}function T(){nextTick(()=>{a.value&&a.value.scrollIntoView({behavior:"smooth",block:"end"})})}function S(){const C=setInterval(()=>{n.s.stage!=="S03"?clearInterval(C):n.nextLoadingLine()},10)}return(C,E)=>(openBlock(),createElementBlock("div",{class:"story-screen",style:normalizeStyle$1(_.value)},[E[1]||(E[1]=createBaseVNode("div",{class:"overlay-gradient"},null,-1)),E[2]||(E[2]=createBaseVNode("div",{class:"vignette"},null,-1)),createBaseVNode("div",_hoisted_1$r,[createBaseVNode("div",_hoisted_2$p,[createBaseVNode("div",_hoisted_3$o,[(openBlock(!0),createElementBlock(Fragment,null,renderList(s.value,(x,A)=>(openBlock(),createElementBlock("div",{key:A,class:"story-line"},[x.day?(openBlock(),createElementBlock("span",_hoisted_4$n,toDisplayString(x.day),1)):createCommentVNode("",!0),createBaseVNode("p",_hoisted_5$m,[createTextVNode(toDisplayString(x.text),1),A===l.value&&c.value?(openBlock(),createElementBlock("span",_hoisted_6$m,"_")):createCommentVNode("",!0)])]))),128))]),createBaseVNode("div",{class:"scroll-anchor",ref_key:"scrollAnchor",ref:a},null,512)],512)]),createBaseVNode("div",_hoisted_7$m,[createVNode(Transition,{name:"fade-btn",mode:"out-in"},{default:withCtx(()=>[r.value?(openBlock(),createElementBlock("button",{key:0,class:"next-stage-btn",onClick:S},[createBaseVNode("span",_hoisted_8$k,toDisplayString(v.value),1),E[0]||(E[0]=createBaseVNode("div",{class:"btn-glitch"},null,-1))])):(openBlock(),createElementBlock("button",{key:1,class:"skip-btn",onClick:b}," [ SKIP SEQUENCE /  ] >> "))]),_:1})])],4))}},StageS03Loading=_export_sfc(_sfc_main$u,[["__scopeId","data-v-2de9bf1f"]]),_hoisted_1$q={class:"scene-wrapper"},_hoisted_2$o={class:"scene-title","data-text":"SCENE"},_hoisted_3$n={class:"monologue-box"},_hoisted_4$m={class:"monologue-text"},_sfc_main$t={__name:"StageS04Opening",setup(t){const n=useGameStore(),a=ref(!1),r=ref(!1),o=ref(!1),s=computed(()=>n.stageContent),l=computed(()=>{var f,v;return((v=(f=s.value)==null?void 0:f.byPath)==null?void 0:v[n.s.pathId])||{scene:"",monologue:"..."}}),c={A:"https://images.unsplash.com/photo-1496568816309-51d7c20e3b21?q=80&w=2531&auto=format&fit=crop",B:"https://images.unsplash.com/photo-1440342359726-5918318239c8?q=80&w=2669&auto=format&fit=crop",C:"https://images.unsplash.com/photo-1504386106331-3e4e71712b38?q=80&w=2673&auto=format&fit=crop",D:"https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?q=80&w=2670&auto=format&fit=crop"},u=computed(()=>{const f=n.s.pathId||"B";return{backgroundImage:`url(${c[f]||c.B})`}});onMounted(()=>{setTimeout(()=>{a.value=!0},500),setTimeout(()=>{r.value=!0},1500),setTimeout(()=>{o.value=!0},2e3)});function d(){n.enterS06()}return(f,v)=>(openBlock(),createElementBlock("div",{class:"opening-screen",style:normalizeStyle$1(u.value)},[v[6]||(v[6]=createBaseVNode("div",{class:"overlay-gradient"},null,-1)),v[7]||(v[7]=createBaseVNode("div",{class:"vignette"},null,-1)),createBaseVNode("div",{class:normalizeClass(["eyelid top",{open:a.value}])},null,2),createBaseVNode("div",{class:normalizeClass(["eyelid bottom",{open:a.value}])},null,2),createBaseVNode("div",{class:normalizeClass(["blur-layer",{clear:r.value}])},[createBaseVNode("div",{class:normalizeClass(["content-container",{visible:o.value}])},[v[5]||(v[5]=createStaticVNode('<div class="fui-header" data-v-a63e4f11><div class="location-marker" data-v-a63e4f11><span class="pulse-dot" data-v-a63e4f11></span><span class="fui-label" data-v-a63e4f11>CURRENT LOCATION // </span></div><div class="time-marker" data-v-a63e4f11>DAY 1 // 06:00 AM</div></div>',1)),createBaseVNode("div",_hoisted_1$q,[createBaseVNode("h1",_hoisted_2$o,toDisplayString(l.value.scene),1),v[0]||(v[0]=createBaseVNode("div",{class:"scene-deco-line"},null,-1))]),createBaseVNode("div",_hoisted_3$n,[v[1]||(v[1]=createBaseVNode("div",{class:"quote-mark left"},"",-1)),createBaseVNode("p",_hoisted_4$m,toDisplayString(l.value.monologue),1),v[2]||(v[2]=createBaseVNode("div",{class:"quote-mark right"},"",-1))]),createBaseVNode("div",{class:"action-area"},[v[4]||(v[4]=createBaseVNode("div",{class:"action-hint"},"",-1)),createBaseVNode("button",{class:"wake-up-btn",onClick:d},[...v[3]||(v[3]=[createBaseVNode("div",{class:"btn-inner"},[createBaseVNode("span",{class:"main-text"},""),createBaseVNode("span",{class:"sub-text"},"SURVIVE OR DIE // ")],-1),createBaseVNode("div",{class:"btn-border"},null,-1)])])])],2)],2)],4))}},StageS04Opening=_export_sfc(_sfc_main$t,[["__scopeId","data-v-a63e4f11"]]),_hoisted_1$p={class:"loop-console-v2 tutorial-mode"},_sfc_main$s={__name:"StageS05Tutorial",setup(t){return(n,a)=>(openBlock(),createElementBlock("div",_hoisted_1$p,[...a[0]||(a[0]=[createStaticVNode('<div class="week-tracker" data-v-c6a8153a><div class="tracker-header" data-v-c6a8153a><span class="tracker-label" data-v-c6a8153a></span><div class="tracker-values" data-v-c6a8153a><span class="tracker-value" data-v-c6a8153a>MONTH 1 / 24</span></div></div><div class="tracker-progress" data-v-c6a8153a><div class="progress-bar" data-v-c6a8153a><div class="progress-fill" style="width:4.2%;" data-v-c6a8153a></div></div><span class="progress-percent" data-v-c6a8153a>4%</span></div></div><div class="action-matrix" data-v-c6a8153a><div class="section-header" data-v-c6a8153a> // SELECT ACTION</div><div class="action-groups" data-v-c6a8153a><div class="action-group" data-v-c6a8153a><div class="group-header" data-v-c6a8153a><span class="group-icon" data-v-c6a8153a>&gt;</span><span class="group-name" data-v-c6a8153a></span></div><div class="group-actions" data-v-c6a8153a><button class="action-card-v2" data-v-c6a8153a><div class="card-header" data-v-c6a8153a><span class="action-name" data-v-c6a8153a></span></div><div class="card-desc" data-v-c6a8153a></div></button><button class="action-card-v2" data-v-c6a8153a><div class="card-header" data-v-c6a8153a><span class="action-name" data-v-c6a8153a></span></div><div class="card-desc" data-v-c6a8153a></div></button></div></div><div class="action-group" data-v-c6a8153a><div class="group-header" data-v-c6a8153a><span class="group-icon" data-v-c6a8153a>~</span><span class="group-name" data-v-c6a8153a></span></div><div class="group-actions" data-v-c6a8153a><button class="action-card-v2 selected" data-v-c6a8153a><div class="card-header" data-v-c6a8153a><span class="action-name" data-v-c6a8153a></span></div><div class="card-desc" data-v-c6a8153a></div></button><button class="action-card-v2" data-v-c6a8153a><div class="card-header" data-v-c6a8153a><span class="action-name" data-v-c6a8153a></span></div><div class="card-desc" data-v-c6a8153a></div></button></div></div><div class="action-group" data-v-c6a8153a><div class="group-header" data-v-c6a8153a><span class="group-icon" data-v-c6a8153a>*</span><span class="group-name" data-v-c6a8153a></span></div><div class="group-actions" data-v-c6a8153a><button class="action-card-v2" data-v-c6a8153a><div class="card-header" data-v-c6a8153a><span class="action-name" data-v-c6a8153a></span></div><div class="card-desc" data-v-c6a8153a></div></button></div></div><div class="action-group" data-v-c6a8153a><div class="group-header" data-v-c6a8153a><span class="group-icon" data-v-c6a8153a>!</span><span class="group-name" data-v-c6a8153a></span></div><div class="group-actions" data-v-c6a8153a><button class="action-card-v2 disabled" data-v-c6a8153a><div class="card-header" data-v-c6a8153a><span class="action-name" data-v-c6a8153a></span></div><div class="card-desc" data-v-c6a8153a>...</div></button></div></div></div></div><div class="week-advance" data-v-c6a8153a><button class="advance-btn" data-v-c6a8153a><span class="btn-text" data-v-c6a8153a></span><span class="btn-arrow" data-v-c6a8153a>&gt;&gt;</span></button><div class="week-stats" data-v-c6a8153a>  0/6  </div></div>',3)])]))}},StageS05Tutorial=_export_sfc(_sfc_main$s,[["__scopeId","data-v-c6a8153a"]]),_hoisted_1$o={key:0,class:"action-header"},_hoisted_2$n={class:"action-label"},_hoisted_3$m={class:"narrative-section"},_hoisted_4$l={class:"narrative-text"},_hoisted_5$l={class:"typed-text"},_hoisted_6$l={class:"progress-footer"},_hoisted_7$l={class:"typing-hint"},_sfc_main$r={__name:"ActionProgressV2",props:{visible:{type:Boolean,default:!1},actionName:{type:String,default:""},inProgressText:{type:String,default:"..."},narratives:{type:Array,default:()=>[]},duration:{type:Number,default:4e3}},emits:["complete"],setup(t,{emit:n}){const a=t,r=n,o=ref(""),s=ref(!1),l=ref(0);let c=null,u=null;const d=computed(()=>a.narratives&&a.narratives.length>0?a.narratives.join(`

`):a.inProgressText),f=computed(()=>{const y=d.value.length;if(y===0)return 50;const b=a.duration-500;return Math.max(20,Math.min(80,b/y))});function v(){o.value="",l.value=0,s.value=!0,c=setInterval(()=>{l.value<d.value.length?(o.value+=d.value[l.value],l.value++):(_(),s.value=!1,u=setTimeout(()=>{a.visible&&r("complete")},5e3))},f.value)}function _(){c&&(clearInterval(c),c=null),u&&(clearTimeout(u),u=null)}function g(){_(),s.value?(o.value=d.value,s.value=!1,setTimeout(()=>r("complete"),200)):r("complete")}return watch(()=>a.visible,y=>{y?v():(_(),o.value="",l.value=0,s.value=!1)}),onMounted(()=>{a.visible&&v()}),onUnmounted(()=>{_()}),(y,b)=>t.visible?(openBlock(),createElementBlock("div",{key:0,class:"action-progress-overlay",onClick:g},[createBaseVNode("div",{class:"progress-container",onClick:b[0]||(b[0]=withModifiers(()=>{},["stop"]))},[t.actionName?(openBlock(),createElementBlock("div",_hoisted_1$o,[createBaseVNode("span",_hoisted_2$n,toDisplayString(t.actionName),1)])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_3$m,[createBaseVNode("p",_hoisted_4$l,[createBaseVNode("span",_hoisted_5$l,toDisplayString(o.value),1),createBaseVNode("span",{class:normalizeClass(["cursor",{blink:!s.value}])},"|",2)])]),createBaseVNode("div",_hoisted_6$l,[createBaseVNode("div",_hoisted_7$l,toDisplayString(s.value?"...":"5"),1),createBaseVNode("button",{class:"skip-btn",onClick:g},toDisplayString(s.value?" >>":" >>"),1)])])])):createCommentVNode("",!0)}},ActionProgressV2=_export_sfc(_sfc_main$r,[["__scopeId","data-v-933f12b8"]]),scriptRel="modulepreload",assetsURL=function(t){return"/"+t},seen={},__vitePreload=function(n,a,r){let o=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));o=Promise.allSettled(a.map(u=>{if(u=assetsURL(u),u in seen)return;seen[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const v=document.createElement("link");if(v.rel=d?"stylesheet":scriptRel,d||(v.as="script"),v.crossOrigin="",v.href=u,c&&v.setAttribute("nonce",c),document.head.appendChild(v),d)return new Promise((_,g)=>{v.addEventListener("load",_),v.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return o.then(l=>{for(const c of l||[])c.status==="rejected"&&s(c.reason);return n().catch(s)})},survivalFailures={month1_evicted:{round:1,type:"eviction",theme:"",phases:[{phase:1,icon:"",title:"",shortDesc:"",cause:"",narrative:`



`,tips:" HUD 2024  771,480 ",button:""},{phase:2,icon:"",title:"",shortDesc:"",cause:"/",narrative:`



`,tips:" HUD ",button:""},{phase:3,icon:"",title:"",shortDesc:"",cause:"",narrative:`



`,tips:"",button:""}]},month2_exposed_dead:{round:2,type:"medical_debt",theme:"",phases:[{phase:1,icon:"",title:"",shortDesc:"",cause:"",narrative:`

XXXXXX......

$2400`,tips:"1",button:""},{phase:2,icon:"",title:"",shortDesc:"",cause:"",narrative:` - 



`,tips:"",button:""},{phase:3,icon:"",title:"",shortDesc:"",cause:"",narrative:`



`,tips:"2700",button:""}]},month3_breakdown:{round:3,type:"transportation_crisis",theme:"",phases:[{phase:1,icon:"",title:"",shortDesc:"",cause:"",narrative:`



`,tips:"",button:""},{phase:2,icon:"",title:"",shortDesc:"",cause:"",narrative:`



`,tips:"",button:""},{phase:3,icon:"",title:"",shortDesc:"",cause:"",narrative:`



......`,tips:"",button:""}]},month4_caught:{round:4,type:"tax_crisis",theme:"",phases:[{phase:1,icon:"",title:"",shortDesc:"IRS",cause:"",narrative:`Internal Revenue Service



......`,tips:"IRS",button:""},{phase:2,icon:"",title:"",shortDesc:"",cause:"",narrative:`IRS

25%

`,tips:"IRSWage Garnishment",button:""},{phase:3,icon:"",title:"",shortDesc:"",cause:"",narrative:`



`,tips:"IRS",button:""}]},month5_exhausted:{round:5,type:"unemployment",theme:"",phases:[{phase:1,icon:"",title:"",shortDesc:"",cause:"ICE",narrative:"ICE",tips:"",button:""},{phase:2,icon:"",title:"",shortDesc:"",cause:"",narrative:"",tips:"26",button:""},{phase:3,icon:"",title:"",shortDesc:"",cause:"",narrative:"",tips:"",button:""}]},month6_broke:{round:6,type:"displacement",theme:"",phases:[{phase:1,icon:"",title:"",shortDesc:"",cause:"",narrative:`FORECLOSURE NOTICE

30

`,tips:"",button:""},{phase:2,icon:"",title:"",shortDesc:"",cause:"",narrative:`



`,tips:"",button:""},{phase:3,icon:"",title:"",shortDesc:"",cause:"",narrative:`



`,tips:"",button:""}]},month7_health_dead:{round:7,type:"health_crisis",theme:"",phases:[{phase:1,icon:"",title:"",shortDesc:"",cause:"",narrative:`107



`,tips:"1300",button:""},{phase:2,icon:"",title:"",shortDesc:"",cause:"",narrative:`



......`,tips:"",button:""},{phase:3,icon:"",title:"",shortDesc:"",cause:"",narrative:`



`,tips:"2000",button:""}]},month8_rejected:{round:8,type:"identity_theft",theme:"",phases:[{phase:1,icon:"",title:"",shortDesc:"",cause:"",narrative:`



`,tips:"200",button:""},{phase:2,icon:"",title:"",shortDesc:"",cause:"",narrative:`IRS......



`,tips:"",button:""},{phase:3,icon:"",title:"",shortDesc:"",cause:"",narrative:`



`,tips:"",button:""}]},month9_injury_dead:{round:9,type:"family_crisis",theme:"",phases:[{phase:1,icon:"",title:"",shortDesc:"",cause:"",narrative:`......



`,tips:"40%400",button:""},{phase:2,icon:"",title:"",shortDesc:"",cause:"",narrative:`



`,tips:"",button:""},{phase:3,icon:"",title:"",shortDesc:"",cause:"",narrative:`



`,tips:"",button:""}]},month10_meaning_dead:{round:10,type:"work_injury",theme:"",phases:[{phase:1,icon:"",title:"",shortDesc:"",cause:"",narrative:`



`,tips:"300",button:""},{phase:2,icon:"",title:"",shortDesc:"",cause:"",narrative:`



`,tips:"",button:""},{phase:3,icon:"",title:"",shortDesc:"",cause:"",narrative:`



`,tips:"",button:""}]},month11_collapse:{round:11,type:"holiday_crisis",theme:"",phases:[{phase:1,icon:"",title:"",shortDesc:"",cause:"",narrative:`



`,tips:"......",button:""},{phase:2,icon:"",title:"",shortDesc:"",cause:"",narrative:`



`,tips:"1/5",button:""},{phase:3,icon:"",title:"",shortDesc:"",cause:"",narrative:`



`,tips:"",button:""}]},month12_system_death:{round:12,type:"final_reckoning",theme:"",phases:[{phase:1,icon:"",title:"",shortDesc:"",cause:"",narrative:`12

......

`,tips:"",button:""},{phase:2,icon:"",title:"",shortDesc:"",cause:"",narrative:`



`,tips:"",button:""},{phase:3,icon:"",title:"",shortDesc:"",cause:"",narrative:`





`,tips:"42%",button:""}]},survival:{round:null,type:"survival",phases:[]}},endingsData={survivalFailures},ENDINGS$1=endingsData.survivalFailures;function getEndingByType(t){return ENDINGS$1[t]||null}function getEndingPhase(t,n){var r;const a=getEndingByType(t);if(!a)return null;if(n==="end"){const o=a.phases||[];return o[o.length-1]||null}return((r=a.phases)==null?void 0:r.find(o=>o.phase===n))||null}function getEndingPhaseCount(t){var a;const n=getEndingByType(t);return n&&((a=n.phases)==null?void 0:a.length)||0}function createEndingFlowState(t){return{type:t,currentPhase:1,choiceHistory:[],completed:!1}}function advanceEndingFlow(t,n){if(t.completed)return t;const a=getEndingPhaseCount(t.type);return t.choiceHistory.push({phase:t.currentPhase,choice:n}),t.currentPhase++,t.currentPhase>a&&(t.completed=!0),t}function getCurrentPhaseData(t){var r,o;const n=getEndingByType(t.type);if(!n)return null;if(t.completed){const s=(r=n.phases)==null?void 0:r[n.phases.length-1];return{isEnd:!0,phase:((o=n.phases)==null?void 0:o.length)||0,icon:(s==null?void 0:s.icon)||"",title:(s==null?void 0:s.title)||"",shortDesc:(s==null?void 0:s.shortDesc)||"",narrative:(s==null?void 0:s.narrative)||"",cause:(s==null?void 0:s.cause)||"",tips:(s==null?void 0:s.tips)||null,button:""}}const a=getEndingPhase(t.type,t.currentPhase);return a?{isEnd:!1,phase:t.currentPhase,icon:a.icon||"",title:a.title||null,shortDesc:a.shortDesc||null,narrative:a.narrative,cause:a.cause||null,tips:a.tips||null,button:a.button||"",choices:a.choices||[]}:null}function mapAttributeZeroToEnding(t){return{health:"generic_health_collapse",san:"generic_mental_breakdown",credit:"generic_identity_exposed",money:"generic_bankrupt"}[t]||"generic_health_collapse"}function getMonthlyEndingId(t){return{1:"month1_evicted",2:"month2_exposed_dead",3:"month3_breakdown",4:"month4_caught",5:"month5_exhausted",6:"month6_broke",7:"month7_health_dead",8:"month8_rejected",9:"month9_injury_dead",10:"month10_meaning_dead",11:"month11_collapse",12:"month12_system_death"}[t]||"generic_health_collapse"}function mapFailureTriggerToEnding(t,n={}){if(n.overrideEndingId)return n.overrideEndingId;const a={bankrupt:"generic_bankrupt",health_collapse:"generic_health_collapse",mental_breakdown:"generic_mental_breakdown",identity_exposed:"generic_identity_exposed",collapse:"generic_health_collapse",mission_fail:"generic_bankrupt",final_execution:"generic_bankrupt"};return a[t]?a[t]:n.round?getMonthlyEndingId(n.round):"generic_health_collapse"}const ENDINGS=[{id:"consumerist_martyr",type:"bankrupt",title:"",titleEn:"CONSUMERIST MARTYR",tagline:"",description:"",quote:"",icon:"",color:"#ff2a2a"},{id:"paycheck_juggler",type:"bankrupt",title:"",titleEn:"PAYCHECK JUGGLER",tagline:"",description:"9.80",quote:"",icon:"",color:"#fbbf24"},{id:"king_of_leeks",type:"bankrupt",title:"",titleEn:"KING OF LEEKS",tagline:"",description:"K",quote:"",icon:"",color:"#4ade80"},{id:"debt_slave",type:"bankrupt",title:"",titleEn:"DEBT SLAVE",tagline:"",description:"",quote:"",icon:"",color:"#4a5568"},{id:"996_warrior",type:"health",title:"",titleEn:"THE 996 WARRIOR",tagline:"",description:"ICUHR",quote:"",icon:"",color:"#34d399"},{id:"noodle_sommelier",type:"health",title:"",titleEn:"INSTANT NOODLE SOMMELIER",tagline:"",description:"",quote:"",icon:"",color:"#f59e0b"},{id:"chronic_collapse",type:"health",title:"",titleEn:"CHRONIC COLLAPSE",tagline:"",description:"",quote:"",icon:"",color:"#e11d48"},{id:"organ_failure",type:"health",title:"",titleEn:"ORGAN STRIKE",tagline:"",description:"",quote:"",icon:"",color:"#dc2626"},{id:"illegal_alien",type:"exposure",title:"",titleEn:"EXPIRED STATUS",tagline:"",description:"",quote:"",icon:"",color:"#60a5fa"},{id:"system_glitch",type:"exposure",title:"",titleEn:"SYSTEM GLITCH",tagline:"404 LIFE NOT FOUND",description:" Error",quote:"",icon:"",color:"#a78bfa"},{id:"deportation_express",type:"exposure",title:"",titleEn:"FORCED DEPARTURE",tagline:"",description:"30",quote:"",icon:"",color:"#6366f1"},{id:"big_data_prey",type:"exposure",title:"",titleEn:"BIG DATA PREY",tagline:"",description:"",quote:"",icon:"",color:"#22d3ee"},{id:"reality_denier",type:"sanity",title:"",titleEn:"REALITY DENIER",tagline:"",description:"",quote:"",icon:"",color:"#e879f9"},{id:"dissociation",type:"sanity",title:"",titleEn:"THE DISSOCIATED",tagline:"",description:"",quote:"",icon:"",color:"#a3a3a3"},{id:"nihilist",type:"sanity",title:"",titleEn:"THE NIHILIST",tagline:"",description:"",quote:"",icon:"",color:"#171717"},{id:"trauma_overflow",type:"sanity",title:"",titleEn:"TRAUMA OVERFLOW",tagline:"",description:"",quote:"",icon:"",color:"#c084fc"},{id:"cascade_collapse",type:"cascade_collapse",title:"",titleEn:"CASCADE COLLAPSE",tagline:"",description:"",quote:"",icon:"",color:"#1e1e1e"},{id:"total_system_failure",type:"cascade_collapse",title:"",titleEn:"TOTAL SYSTEM FAILURE",tagline:"",description:"",quote:"Error: Life.exe has stopped responding.",icon:"",color:"#0ea5e9"},{id:"american_dreamer",type:"choice",title:"",titleEn:"AMERICAN DREAMER",tagline:"",description:"0.5",quote:"",icon:"",color:"#f43f5e"},{id:"high_roller",type:"choice",title:"",titleEn:"THE HIGH ROLLER",tagline:"",description:"",quote:"",icon:"",color:"#fbbf24"},{id:"final_exit",type:"choice",title:"",titleEn:"THE FINAL EXIT",tagline:"",description:"",quote:"",icon:"",color:"#525252"},{id:"npc",type:"default",title:"",titleEn:"THE NPC",tagline:"",description:"404 Name Not Found",quote:"",icon:"",color:"#94a3b8"},{id:"donut_god",type:"bankrupt",title:"",titleEn:"DONUT GOD",tagline:"",description:"",quote:"",icon:"",color:"#f59e0b"},{id:"north_american_jungler",type:"health",title:"",titleEn:"NA JUNGLER",tagline:"",description:"",quote:"",icon:"",color:"#22c55e"},{id:"electronic_pet_death",type:"default",title:"",titleEn:"PET DIED",tagline:"",description:"''''''''",quote:"",icon:"",color:"#ec4899"},{id:"california_warlord",type:"choice",title:"",titleEn:"CALIFORNIA WARLORD",tagline:"",description:"",quote:"",icon:"",color:"#7c3aed"},{id:"short_lived_species",type:"health",title:"",titleEn:"SHORT-LIVED SPECIES",tagline:"",description:"",quote:"",icon:"",color:"#dc2626"},{id:"zero_dollar_shopper",type:"exposure",title:"",titleEn:"ZERO DOLLAR SHOPPER",tagline:"",description:"''",quote:"",icon:"",color:"#ef4444"},{id:"sanhe_god_usa",type:"sanity",title:"",titleEn:"SANHE GOD USA",tagline:"",description:"",quote:"",icon:"",color:"#6b7280"},{id:"medical_assassin_victim",type:"health",title:"",titleEn:"MEDICAL ASSASSIN VICTIM",tagline:"155600",description:"",quote:"",icon:"",color:"#0891b2"},{id:"live_begging_streamer",type:"choice",title:"",titleEn:"BEGGING STREAMER",tagline:"",description:"''",quote:"",icon:"",color:"#f43f5e"},{id:"silky_walker",type:"exposure",title:"",titleEn:"VISA TRAP VICTIM",tagline:"",description:"''H1BOPT",quote:"",icon:"",color:"#3b82f6"},{id:"utility_bill_death",type:"utility_bill",title:"",titleEn:"UTILITY MARTYR",tagline:"AI",description:"2439AI",quote:"AIAI",icon:"",color:"#f59e0b"},{id:"property_tax_death",type:"property_tax",title:"",titleEn:"LANDOWNER TO VAGRANT",tagline:"",description:"",quote:"",icon:"",color:"#78716c"},{id:"insurance_lapse_death",type:"insurance_lapse",title:"",titleEn:"COVERAGE GAP VICTIM",tagline:"",description:"",quote:"",icon:"",color:"#6366f1"},{id:"bill_tsunami_death",type:"bill_tsunami",title:"",titleEn:"BILL TSUNAMI VICTIM",tagline:"",description:"",quote:"",icon:"",color:"#0ea5e9"},{id:"medical_bill_death",type:"medical_bill",title:"",titleEn:"MEDICAL BILL VICTIM",tagline:"",description:"$193,000",quote:"",icon:"",color:"#dc2626"},{id:"insurance_denial_death",type:"insurance_denial",title:"",titleEn:"DENIAL VICTIM",tagline:"",description:"",quote:"",icon:"",color:"#b91c1c"},{id:"ambulance_fear_death",type:"ambulance_fear",title:"",titleEn:"AMBULANCE PHOBIC",tagline:"$3000",description:"911$3,000",quote:"",icon:"",color:"#ef4444"},{id:"fish_antibiotics_death",type:"fish_antibiotics",title:"",titleEn:"FISH MOX SURVIVOR",tagline:"",description:"$2,500$14.99$2,485",quote:"",icon:"",color:"#14b8a6"},{id:"painkiller_slide_death",type:"painkiller_slide",title:"",titleEn:"PAINKILLER SLIDER",tagline:"",description:"",quote:"",icon:"",color:"#8b5cf6"},{id:"credit_collapse_death",type:"credit_collapse",title:"",titleEn:"CREDIT BANKRUPT",tagline:"350",description:"",quote:"0=",icon:"",color:"#1f2937"},{id:"payday_loan_death",type:"payday_loan",title:"",titleEn:"PAYDAY PRISONER",tagline:"$200$3,800",description:"500%$200$3,800",quote:"",icon:"",color:"#ca8a04"},{id:"rental_rejection_death",type:"rental_rejection",title:"",titleEn:"RENTAL REJECT",tagline:"",description:"",quote:"",icon:"",color:"#64748b"},{id:"job_rejection_death",type:"job_rejection",title:"",titleEn:"CREDIT SCREENED OUT",tagline:"",description:"HR",quote:"",icon:"",color:"#475569"},{id:"no_address_death",type:"no_address",title:"",titleEn:"ADDRESSLESS GHOST",tagline:"",description:"404",quote:"",icon:"",color:"#9ca3af"},{id:"homeless_final_death",type:"homeless_final",title:"",titleEn:"HOMELESS TERMINUS",tagline:"",description:"",quote:"",icon:"",color:"#78716c"},{id:"identity_theft_death",type:"identity_theft",title:"",titleEn:"IDENTITY STOLEN",tagline:"",description:"",quote:"",icon:"",color:"#7c3aed"},{id:"gig_economy_death",type:"gig_economy",title:"",titleEn:"GIG WORKER BURNOUT",tagline:"",description:"",quote:"",icon:"",color:"#f97316"},{id:"tip_dependent_death",type:"tip_dependent",title:"$2.13",titleEn:"$2.13 STARVER",tagline:"",description:"$2.1360",quote:"$2.13",icon:"",color:"#f43f5e"},{id:"rich_neighbor_death",type:"rich_neighbor",title:"",titleEn:"GENTRIFICATION CASUALTY",tagline:"",description:"",quote:"",icon:"",color:"#84cc16"},{id:"workplace_injury_death",type:"workplace_injury",title:"",titleEn:"UNDOCUMENTED INJURED",tagline:"$500",description:"$500",quote:"$500",icon:"",color:"#ea580c"},{id:"american_dream_death",type:"american_dream",title:"",titleEn:"AMERICAN DREAMER AWOKEN",tagline:"",description:"$20,000$50",quote:"",icon:"",color:"#1d4ed8"},{id:"thanksgiving_death",type:"thanksgiving",title:"",titleEn:"THANKSGIVING GHOST",tagline:"",description:"",quote:"",icon:"",color:"#92400e"},{id:"black_friday_death",type:"black_friday",title:"",titleEn:"BLACK FRIDAY TRAMPLED",tagline:"$301",description:"$99",quote:"",icon:"",color:"#171717"},{id:"christmas_death",type:"christmas",title:"",titleEn:"CHRISTMAS ALONE",tagline:"Merry Christmas",description:"$299$47",quote:"",icon:"",color:"#166534"}],ENDING_MODIFIERS={betrayer:{id:"betrayer",name:"",nameEn:"THE BETRAYER",condition:t=>{var n;return(((n=t.deepStats)==null?void 0:n.betrayalCount)||0)>=1},description:"",icon:"",modifyDescription:t=>t+" "},judas:{id:"judas",name:"",nameEn:"JUDAS",condition:t=>{var n;return(((n=t.deepStats)==null?void 0:n.betrayalCount)||0)>=3},description:"",icon:"",modifyDescription:t=>t+" "},martyr:{id:"martyr",name:"",nameEn:"THE MARTYR",condition:t=>{var n;return(((n=t.deepStats)==null?void 0:n.moralCorrosion)||0)<10},description:"",icon:"",modifyDescription:t=>""+t},pure_soul:{id:"pure_soul",name:"",nameEn:"PURE SOUL",condition:t=>{var n,a;return(((n=t.deepStats)==null?void 0:n.moralCorrosion)||0)===0&&(((a=t.deepStats)==null?void 0:a.betrayalCount)||0)===0},description:"",icon:"",modifyDescription:t=>""+t},fallen:{id:"fallen",name:"",nameEn:"THE FALLEN",condition:t=>{var n;return(((n=t.deepStats)==null?void 0:n.moralCorrosion)||0)>70},description:"",icon:"",modifyDescription:t=>t+" "},addict:{id:"addict",name:"",nameEn:"THE ADDICT",condition:t=>{const n=t.addictions||{};return Object.values(n).some(a=>a>=70)},description:"",icon:"",modifyDescription:t=>t+" "},gambler:{id:"gambler",name:"",nameEn:"THE GAMBLER",condition:t=>{var n;return(((n=t.addictions)==null?void 0:n.gambling)||0)>=50},description:"",icon:"",modifyDescription:t=>t+" "},alcoholic:{id:"alcoholic",name:"",nameEn:"THE ALCOHOLIC",condition:t=>{var n;return(((n=t.addictions)==null?void 0:n.alcohol)||0)>=50},description:"",icon:"",modifyDescription:t=>t+" "},friend_killer:{id:"friend_killer",name:"",nameEn:"FRIEND KILLER",condition:t=>{const n=t.npcs||{};return Object.values(n).filter(r=>r.fate==="deported"||r.fate==="dead"||r.fate==="betrayed").length>=2},description:"",icon:"",modifyDescription:t=>t+" "},lonely:{id:"lonely",name:"",nameEn:"THE LONELY",condition:t=>{const n=t.npcs||{};return Object.values(n).filter(r=>r.trust>20&&r.fate!=="deported"&&r.fate!=="dead").length===0},description:"",icon:"",modifyDescription:t=>t+" "},beloved:{id:"beloved",name:"",nameEn:"THE BELOVED",condition:t=>{const n=t.npcs||{};return Object.values(n).filter(r=>r.trust>=70).length>=2},description:"",icon:"",modifyDescription:t=>""+t},survivor:{id:"survivor",name:"",nameEn:"THE SURVIVOR",condition:t=>{var n;return((n=t.loop)==null?void 0:n.month)>=10},description:"",icon:"",modifyDescription:t=>""+t},flash:{id:"flash",name:"",nameEn:"FLASH IN THE PAN",condition:t=>{var n;return((n=t.loop)==null?void 0:n.month)<=3},description:"",icon:"",modifyDescription:t=>t+" "},criminal:{id:"criminal",name:"",nameEn:"THE CRIMINAL",condition:t=>{var n,a;return(((a=(n=t.deepStats)==null?void 0:n.criminalRecord)==null?void 0:a.length)||0)>=3},description:"",icon:"",modifyDescription:t=>t+" "}},SPECIAL_ENDINGS=[{id:"saint_in_hell",title:"",titleEn:"SAINT IN HELL",tagline:"",description:"",quote:"",icon:"",color:"#ffd700",condition:(t,n)=>{var a,r,o;return(((a=t.deepStats)==null?void 0:a.moralCorrosion)||0)<5&&(((r=t.deepStats)==null?void 0:r.betrayalCount)||0)===0&&((o=t.loop)==null?void 0:o.month)>=8}},{id:"monster",title:"",titleEn:"THE MONSTER",tagline:"",description:"",quote:"",icon:"",color:"#1a1a1a",condition:(t,n)=>{var a,r;return(((a=t.deepStats)==null?void 0:a.moralCorrosion)||0)>80&&(((r=t.deepStats)==null?void 0:r.betrayalCount)||0)>=2}},{id:"sacrifice",title:"",titleEn:"THE SACRIFICE",tagline:"",description:"",quote:"",icon:"",color:"#ffcccb",condition:(t,n)=>{var o;const a=t.npcs||{};return Object.values(a).some(s=>s.fate==="escaped")&&(((o=t.deepStats)==null?void 0:o.moralCorrosion)||0)<30}},{id:"addicted_death",title:"",titleEn:"FATAL DOSE",tagline:"",description:"",quote:"",icon:"",color:"#9333ea",condition:(t,n)=>{const a=t.addictions||{};return Math.max(...Object.values(a),0)>=90}},{id:"karma",title:"",titleEn:"KARMA",tagline:"",description:"",quote:"",icon:"",color:"#854d0e",condition:(t,n)=>{var a,r,o;return(((r=(a=t.deepStats)==null?void 0:a.criminalRecord)==null?void 0:r.length)||0)>=5&&(((o=t.timeDebts)==null?void 0:o.length)||0)>=3}},{id:"all_alone",title:"",titleEn:"ALL ALONE",tagline:"",description:"",quote:"",icon:"",color:"#374151",condition:(t,n)=>{var o;const a=t.npcs||{};return!Object.values(a).some(s=>s.trust>30)&&((o=t.loop)==null?void 0:o.month)>=6}},{id:"system_rebellion",title:"",titleEn:"SYSTEM REBEL",tagline:"",description:"",quote:"",icon:"",color:"#dc2626",condition:(t,n)=>{var a;return n==="exposure"&&(((a=t.deepStats)==null?void 0:a.moralCorrosion)||0)<20}},{id:"golden_instructor",title:"",titleEn:"SURVIVAL MASTER",tagline:"",description:"",quote:"",icon:"",color:"#fbbf24",condition:(t,n)=>{var a,r;return(((a=t.loop)==null?void 0:a.month)||0)>=10&&(t.money||0)<50&&(((r=t.deepStats)==null?void 0:r.moralCorrosion)||0)>40}},{id:"dream_chaser_ended",title:"",titleEn:"DREAMER OFFLINE",tagline:"",description:"",quote:"",icon:"",color:"#8b5cf6",condition:(t,n)=>{var a,r;return(((a=t.loop)==null?void 0:a.month)||0)<=4&&(((r=t.deepStats)==null?void 0:r.moralCorrosion)||0)<15&&n!=="choice"}}];function getEnding(t,n){var l,c;const a={baseEnding:null,specialEnding:null,modifiers:[],finalTitle:"",finalDescription:"",moralScore:100-(((l=n==null?void 0:n.deepStats)==null?void 0:l.moralCorrosion)||0),survivalMonths:((c=n==null?void 0:n.loop)==null?void 0:c.month)||0},r=SPECIAL_ENDINGS.filter(u=>u.condition(n,t));if(r.length>0&&Math.random()<.4){const u=Math.floor(Math.random()*r.length);a.specialEnding=r[u]}a.baseEnding=getBaseEndingByType(t,n);const o=[];for(const[u,d]of Object.entries(ENDING_MODIFIERS))d.condition(n)&&o.push(d);for(let u=o.length-1;u>0;u--){const d=Math.floor(Math.random()*(u+1));[o[u],o[d]]=[o[d],o[u]]}if(a.modifiers=o,a.specialEnding&&Math.random()<.5)a.finalTitle=a.specialEnding.title,a.finalDescription=a.specialEnding.description;else{const u=a.modifiers.slice(0,Math.random()<.5?1:2),d=u.map(v=>v.name);d.length>0&&Math.random()<.7?a.finalTitle=`${d.join("")}${a.baseEnding.title}`:a.finalTitle=a.baseEnding.title;let f=a.baseEnding.description;for(const v of u)f=v.modifyDescription(f);a.finalDescription=f}return a}function getBaseEndingByType(t,n){var s,l,c,u;const r={health:"health",sanity:"sanity",exposure:"exposure",bankrupt:"bankrupt",money:"bankrupt",cascade_collapse:"cascade_collapse",choice:"choice",killline:"cascade_collapse"}[t]||t;let o=ENDINGS.filter(d=>d.type===r);if(r==="health"&&(n!=null&&n.deepStats)){if(Math.max(((s=n.deepStats.organFailure)==null?void 0:s.liver)||0,((l=n.deepStats.organFailure)==null?void 0:l.spine)||0,((c=n.deepStats.organFailure)==null?void 0:c.heart)||0)>60){const f=o.find(v=>v.id==="organ_failure");if(f)return f}if((n.deepStats.chronicDamage||0)>50){const f=o.find(v=>v.id==="chronic_collapse");if(f)return f}}if(r==="sanity"&&(n!=null&&n.deepStats)){if((n.deepStats.dissociationLevel||0)>=4){const d=o.find(f=>f.id==="dissociation");if(d)return d}if((((u=n.deepStats.traumaStack)==null?void 0:u.length)||0)>=5){const d=o.find(f=>f.id==="trauma_overflow");if(d)return d}}if(o.length>0){const d=Math.floor(Math.random()*o.length);return o[d]}return ENDINGS.find(d=>d.id==="npc")}function getEndingStats(t){var n,a,r,o,s,l,c;return{survivalMonths:((n=t==null?void 0:t.loop)==null?void 0:n.month)||0,survivalWeeks:((a=t==null?void 0:t.loop)==null?void 0:a.month)||0,moralScore:100-(((r=t==null?void 0:t.deepStats)==null?void 0:r.moralCorrosion)||0),betrayalCount:((o=t==null?void 0:t.deepStats)==null?void 0:o.betrayalCount)||0,criminalRecords:((l=(s=t==null?void 0:t.deepStats)==null?void 0:s.criminalRecord)==null?void 0:l.length)||0,addictionPeak:Math.max(...Object.values((t==null?void 0:t.addictions)||{}),0),npcsSaved:Object.values((t==null?void 0:t.npcs)||{}).filter(u=>u.fate==="escaped").length,npcsLost:Object.values((t==null?void 0:t.npcs)||{}).filter(u=>u.fate==="deported"||u.fate==="dead"||u.fate==="betrayed").length,subsystemsCollapsed:t!=null&&t.subsystems?Object.values(t.subsystems).filter(u=>u.collapsed).length:0,debtsUnpaid:((c=t==null?void 0:t.timeDebts)==null?void 0:c.filter(u=>!u.paid).length)||0}}const PERSONALITY_DESCRIPTIONS={KILL:{name:"",slogan:""},KILO:{name:"",slogan:"996007"},KILI:{name:"",slogan:""},KOLL:{name:"",slogan:""},OILL:{name:"",slogan:""},OILO:{name:"",slogan:""},OOLI:{name:"",slogan:""},OOLL:{name:"",slogan:""},KILI:{name:"",slogan:""},KOLL:{name:"",slogan:""},default:{name:"",slogan:""}};function calculatePersonality(t){var C,E,x;const n=(t==null?void 0:t.health)??50,a=(t==null?void 0:t.sanity)??50,r=(t==null?void 0:t.exposure)??0,o=((C=t==null?void 0:t.deepStats)==null?void 0:C.moralCorrosion)??0,s=((E=t==null?void 0:t.deepStats)==null?void 0:E.betrayalCount)??0,l=((x=t==null?void 0:t.loop)==null?void 0:x.month)??1,c=(A,N)=>Math.random()<.3?N:A,u=l>=6?"K":"O",d=c(u,u==="K"?"O":"K"),f=r>50?"O":"I",v=c(f,f==="I"?"O":"I"),_=o>30||s>0?"L":"O",g=c(_,_==="L"?"O":"L"),y=n>30||a>30?"L":"O",b=c(y,y==="L"?"O":"L"),T=d+v+g+b,S=PERSONALITY_DESCRIPTIONS[T]||PERSONALITY_DESCRIPTIONS.default;return{type:T,...S,breakdown:{K:{letter:d,meaning:d==="K"?"":""},I:{letter:v,meaning:v==="I"?"":""},L1:{letter:g,meaning:g==="L"?"":""},L2:{letter:b,meaning:b==="L"?"":""}}}}const GRADE_COMMENTS={S:["","","",""],A:["","","",""],B:["","","",""],C:["","","",""],D:["","","",""],F:["","","","",""]};function getGradeComment(t){const n=GRADE_COMMENTS[t]||GRADE_COMMENTS.F;return n[Math.floor(Math.random()*n.length)]}function calculateGrade(t,n){const a=["F","D","C","B","A","S"];for(let r=n.length-1;r>=0;r--)if(t>=n[r])return a[r];return"F"}function calculateAbilityRadar(t,n){var N,M,R;const a=((N=t==null?void 0:t.loop)==null?void 0:N.month)??1;t==null||t.health;const r=(t==null?void 0:t.sanity)??0,o=((M=t==null?void 0:t.deepStats)==null?void 0:M.moralCorrosion)??0,s=(t==null?void 0:t.money)??0,l=((R=t==null?void 0:t.deepStats)==null?void 0:R.betrayalCount)??0,c=(D,L=0,I=100)=>{const $=Math.floor(Math.random()*41)-20;return Math.max(L,Math.min(I,D+$))},u=a*8,d=c(u),f=calculateGrade(d,[10,25,40,55,75,90]),v=100-o,_=c(v),g=calculateGrade(_,[0,20,40,60,80,95]),b=c(r),T=calculateGrade(b,[0,20,40,60,80,95]),S=20+Math.floor(Math.random()*70),C=calculateGrade(S,[0,20,40,60,80,95]);let E=30;s<0&&(E+=25),s<-500&&(E+=15),a<6&&(E+=15),l>0&&(E-=10),o<20&&(E+=15);const x=c(E),A=calculateGrade(x,[0,20,40,60,80,95]);return{survival:{grade:f,comment:getGradeComment(f),value:d},moral:{grade:g,comment:getGradeComment(g),value:_},mental:{grade:T,comment:getGradeComment(T),value:b},theory:{grade:C,comment:getGradeComment(C),value:S},leek:{grade:A,comment:getGradeComment(A),value:x,isLeek:!0}}}function calculateRankings(t){var y,b;const n=((y=t==null?void 0:t.loop)==null?void 0:y.month)??1,a=((b=t==null?void 0:t.deepStats)==null?void 0:b.moralCorrosion)??0;t==null||t.money;const r=20+Math.min(75,n*6.25),o=Math.floor(Math.random()*10)-5,s=Math.min(99,Math.max(15,Math.floor(r+o))),l=Math.floor((100-a)*.5),c=Math.min(99,Math.max(5,l+Math.floor(Math.random()*50))),u=15+Math.floor(Math.random()*80),d=20+Math.floor(Math.random()*75),f=[` ${s}% `,` ${s}% `,` ${s}% `],v=[` ${c}% `,` ${c}% `,` ${c}% `],_=[` ${u}% `,` ${u}% `,` ${u}% `],g=[` ${d}% `,` ${d}% `,` ${d}% `];return{survival:{percent:s,text:f[Math.floor(Math.random()*f.length)]},moral:{percent:c,text:v[Math.floor(Math.random()*v.length)]},leek:{percent:u,text:_[Math.floor(Math.random()*_.length)]},show:{percent:d,text:g[Math.floor(Math.random()*g.length)]}}}const RARITY_LEVELS={UR:{name:"UR",nameZh:"",color:"#ffd700",bgColor:"linear-gradient(135deg, #ffd700, #ff8c00)"},SSR:{name:"SSR",nameZh:"",color:"#ff6b6b",bgColor:"linear-gradient(135deg, #ff6b6b, #ee5a24)"},SR:{name:"SR",nameZh:"",color:"#a78bfa",bgColor:"linear-gradient(135deg, #a78bfa, #7c3aed)"},R:{name:"R",nameZh:"",color:"#60a5fa",bgColor:"linear-gradient(135deg, #60a5fa, #3b82f6)"},N:{name:"N",nameZh:"",color:"#94a3b8",bgColor:"linear-gradient(135deg, #94a3b8, #64748b)"}};function calculateRarity(t,n){var o;const a=Math.random();if(t.specialEnding)return["saint_in_hell","monster"].includes(t.specialEnding.id)?a<.8?{...RARITY_LEVELS.UR,percent:"0.5%"}:{...RARITY_LEVELS.SSR,percent:"3.2%"}:a<.1?{...RARITY_LEVELS.UR,percent:"0.5%"}:a<.7?{...RARITY_LEVELS.SSR,percent:"3.2%"}:{...RARITY_LEVELS.SR,percent:"8.7%"};const r=((o=t.modifiers)==null?void 0:o.length)||0;return r>=2?a<.15?{...RARITY_LEVELS.SSR,percent:"3.2%"}:a<.55?{...RARITY_LEVELS.SR,percent:"8.7%"}:a<.95?{...RARITY_LEVELS.R,percent:"23.4%"}:{...RARITY_LEVELS.N,percent:"64.2%"}:r>=1?a<.05?{...RARITY_LEVELS.SSR,percent:"3.2%"}:a<.2?{...RARITY_LEVELS.SR,percent:"8.7%"}:a<.7?{...RARITY_LEVELS.R,percent:"23.4%"}:{...RARITY_LEVELS.N,percent:"64.2%"}:a<.02?{...RARITY_LEVELS.SSR,percent:"3.2%"}:a<.1?{...RARITY_LEVELS.SR,percent:"8.7%"}:a<.4?{...RARITY_LEVELS.R,percent:"23.4%"}:{...RARITY_LEVELS.N,percent:"64.2%"}}const EPITAPH_TEMPLATES=[{condition:t=>{var n;return(((n=t==null?void 0:t.deepStats)==null?void 0:n.moralCorrosion)??0)<20},templates:[`
  
{month}

 
`,`
 

""`,`

`]},{condition:t=>{var n;return(((n=t==null?void 0:t.deepStats)==null?void 0:n.betrayalCount)??0)>=2},templates:[`


 `,`

`]},{condition:t=>{var n;return(((n=t==null?void 0:t.loop)==null?void 0:n.month)??0)>=10},templates:[`
{month}


`,` 
{month}
`]},{condition:t=>((t==null?void 0:t.money)??0)<-1e3,templates:[`
 \${debt}


""`,`

`]},{condition:()=>!0,templates:[`
  
{month}

  `,`
404 Name Not Found

  `,` #{id}


""`]}];function generateEpitaph(t,n){var c;const a=((c=t==null?void 0:t.loop)==null?void 0:c.month)??1,r=(t==null?void 0:t.money)??0,o=(t==null?void 0:t.pathId)||Math.random().toString(36).substring(2,8).toUpperCase();let s=[];for(const u of EPITAPH_TEMPLATES)u.condition(t)&&(s=s.concat(u.templates));return s.length===0&&(s=EPITAPH_TEMPLATES[EPITAPH_TEMPLATES.length-1].templates),s[Math.floor(Math.random()*s.length)].replace(/{month}/g,a).replace(/{debt}/g,Math.abs(r).toLocaleString()).replace(/{id}/g,o)}function inferDeathTypeFromState(t){var l;const n=(t==null?void 0:t.health)??50,a=(t==null?void 0:t.money)??0,r=((l=t==null?void 0:t.attributes)==null?void 0:l.credit)??500,o=(t==null?void 0:t.sanity)??50;if(n<=0)return"health";if(a<-3e3)return"bankrupt";if(r<300)return"exposure";if(o<=0)return"sanity";const s=Math.min(n,o,r/10,(a+5e3)/50);return s===n?"health":s===o?"sanity":s===r/10?"exposure":s===(a+5e3)/50?"bankrupt":"health"}function generateTranscript(t,n){var _,g,y,b,T,S,C;const a=inferDeathTypeFromState(n),r=getEnding(a,n),o=getEndingStats(n),s=calculatePersonality(n),l=calculateAbilityRadar(n),c=calculateRankings(n),u=calculateRarity(r),d=generateEpitaph(n),f=r.specialEnding?r.specialEnding.title:((_=r.baseEnding)==null?void 0:_.title)||"",v=r.specialEnding?r.specialEnding.tagline:((g=r.baseEnding)==null?void 0:g.tagline)||"";return{id:(n==null?void 0:n.pathId)||Math.random().toString(36).substring(2,8).toUpperCase(),month:((y=n==null?void 0:n.loop)==null?void 0:y.month)??1,money:(n==null?void 0:n.money)??0,personality:s,rankings:c,abilities:l,death:{cause:f,tagline:v,icon:((b=r.specialEnding)==null?void 0:b.icon)||((T=r.baseEnding)==null?void 0:T.icon)||"",color:((S=r.specialEnding)==null?void 0:S.color)||((C=r.baseEnding)==null?void 0:C.color)||"#ff2a2a",description:r.finalDescription},rarity:u,epitaph:d,ending:r,stats:o}}function generateShareText(t){const{personality:n,rankings:a,abilities:r,death:o,rarity:s,epitaph:l,month:c,money:u}=t;return` 

 : ${n.type}${n.name}
"${n.slogan}"

 ${a.survival.text}
 ${a.leek.text}

 
 ${r.survival.grade} |  ${r.moral.grade} |  ${r.mental.grade}
: ${r.leek.grade}+ (${r.leek.comment})

 : ${o.cause} [${s.name}]
${c} | ${u>=0?"":""}$${Math.abs(u).toLocaleString()}

 
${l.split(`
`).slice(0,3).join(`
`)}

# #USKillLine`}var browser={},canPromise$1=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},qrcode={},utils$1={};let toSJISFunction;const CODEWORDS_COUNT=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];utils$1.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17};utils$1.getSymbolTotalCodewords=function(n){return CODEWORDS_COUNT[n]};utils$1.getBCHDigit=function(t){let n=0;for(;t!==0;)n++,t>>>=1;return n};utils$1.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');toSJISFunction=n};utils$1.isKanjiModeEnabled=function(){return typeof toSJISFunction<"u"};utils$1.toSJIS=function(n){return toSJISFunction(n)};var errorCorrectionLevel={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function n(a){if(typeof a!="string")throw new Error("Param is not a string");switch(a.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+a)}}t.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},t.from=function(r,o){if(t.isValid(r))return r;try{return n(r)}catch{return o}}})(errorCorrectionLevel);function BitBuffer$1(){this.buffer=[],this.length=0}BitBuffer$1.prototype={get:function(t){const n=Math.floor(t/8);return(this.buffer[n]>>>7-t%8&1)===1},put:function(t,n){for(let a=0;a<n;a++)this.putBit((t>>>n-a-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const n=Math.floor(this.length/8);this.buffer.length<=n&&this.buffer.push(0),t&&(this.buffer[n]|=128>>>this.length%8),this.length++}};var bitBuffer=BitBuffer$1;function BitMatrix$1(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}BitMatrix$1.prototype.set=function(t,n,a,r){const o=t*this.size+n;this.data[o]=a,r&&(this.reservedBit[o]=!0)};BitMatrix$1.prototype.get=function(t,n){return this.data[t*this.size+n]};BitMatrix$1.prototype.xor=function(t,n,a){this.data[t*this.size+n]^=a};BitMatrix$1.prototype.isReserved=function(t,n){return this.reservedBit[t*this.size+n]};var bitMatrix=BitMatrix$1,alignmentPattern={};(function(t){const n=utils$1.getSymbolSize;t.getRowColCoords=function(r){if(r===1)return[];const o=Math.floor(r/7)+2,s=n(r),l=s===145?26:Math.ceil((s-13)/(2*o-2))*2,c=[s-7];for(let u=1;u<o-1;u++)c[u]=c[u-1]-l;return c.push(6),c.reverse()},t.getPositions=function(r){const o=[],s=t.getRowColCoords(r),l=s.length;for(let c=0;c<l;c++)for(let u=0;u<l;u++)c===0&&u===0||c===0&&u===l-1||c===l-1&&u===0||o.push([s[c],s[u]]);return o}})(alignmentPattern);var finderPattern={};const getSymbolSize=utils$1.getSymbolSize,FINDER_PATTERN_SIZE=7;finderPattern.getPositions=function(n){const a=getSymbolSize(n);return[[0,0],[a-FINDER_PATTERN_SIZE,0],[0,a-FINDER_PATTERN_SIZE]]};var maskPattern={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const n={N1:3,N2:3,N3:40,N4:10};t.isValid=function(o){return o!=null&&o!==""&&!isNaN(o)&&o>=0&&o<=7},t.from=function(o){return t.isValid(o)?parseInt(o,10):void 0},t.getPenaltyN1=function(o){const s=o.size;let l=0,c=0,u=0,d=null,f=null;for(let v=0;v<s;v++){c=u=0,d=f=null;for(let _=0;_<s;_++){let g=o.get(v,_);g===d?c++:(c>=5&&(l+=n.N1+(c-5)),d=g,c=1),g=o.get(_,v),g===f?u++:(u>=5&&(l+=n.N1+(u-5)),f=g,u=1)}c>=5&&(l+=n.N1+(c-5)),u>=5&&(l+=n.N1+(u-5))}return l},t.getPenaltyN2=function(o){const s=o.size;let l=0;for(let c=0;c<s-1;c++)for(let u=0;u<s-1;u++){const d=o.get(c,u)+o.get(c,u+1)+o.get(c+1,u)+o.get(c+1,u+1);(d===4||d===0)&&l++}return l*n.N2},t.getPenaltyN3=function(o){const s=o.size;let l=0,c=0,u=0;for(let d=0;d<s;d++){c=u=0;for(let f=0;f<s;f++)c=c<<1&2047|o.get(d,f),f>=10&&(c===1488||c===93)&&l++,u=u<<1&2047|o.get(f,d),f>=10&&(u===1488||u===93)&&l++}return l*n.N3},t.getPenaltyN4=function(o){let s=0;const l=o.data.length;for(let u=0;u<l;u++)s+=o.data[u];return Math.abs(Math.ceil(s*100/l/5)-10)*n.N4};function a(r,o,s){switch(r){case t.Patterns.PATTERN000:return(o+s)%2===0;case t.Patterns.PATTERN001:return o%2===0;case t.Patterns.PATTERN010:return s%3===0;case t.Patterns.PATTERN011:return(o+s)%3===0;case t.Patterns.PATTERN100:return(Math.floor(o/2)+Math.floor(s/3))%2===0;case t.Patterns.PATTERN101:return o*s%2+o*s%3===0;case t.Patterns.PATTERN110:return(o*s%2+o*s%3)%2===0;case t.Patterns.PATTERN111:return(o*s%3+(o+s)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}t.applyMask=function(o,s){const l=s.size;for(let c=0;c<l;c++)for(let u=0;u<l;u++)s.isReserved(u,c)||s.xor(u,c,a(o,u,c))},t.getBestMask=function(o,s){const l=Object.keys(t.Patterns).length;let c=0,u=1/0;for(let d=0;d<l;d++){s(d),t.applyMask(d,o);const f=t.getPenaltyN1(o)+t.getPenaltyN2(o)+t.getPenaltyN3(o)+t.getPenaltyN4(o);t.applyMask(d,o),f<u&&(u=f,c=d)}return c}})(maskPattern);var errorCorrectionCode={};const ECLevel$1=errorCorrectionLevel,EC_BLOCKS_TABLE=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],EC_CODEWORDS_TABLE=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];errorCorrectionCode.getBlocksCount=function(n,a){switch(a){case ECLevel$1.L:return EC_BLOCKS_TABLE[(n-1)*4+0];case ECLevel$1.M:return EC_BLOCKS_TABLE[(n-1)*4+1];case ECLevel$1.Q:return EC_BLOCKS_TABLE[(n-1)*4+2];case ECLevel$1.H:return EC_BLOCKS_TABLE[(n-1)*4+3];default:return}};errorCorrectionCode.getTotalCodewordsCount=function(n,a){switch(a){case ECLevel$1.L:return EC_CODEWORDS_TABLE[(n-1)*4+0];case ECLevel$1.M:return EC_CODEWORDS_TABLE[(n-1)*4+1];case ECLevel$1.Q:return EC_CODEWORDS_TABLE[(n-1)*4+2];case ECLevel$1.H:return EC_CODEWORDS_TABLE[(n-1)*4+3];default:return}};var polynomial={},galoisField={};const EXP_TABLE=new Uint8Array(512),LOG_TABLE=new Uint8Array(256);(function(){let n=1;for(let a=0;a<255;a++)EXP_TABLE[a]=n,LOG_TABLE[n]=a,n<<=1,n&256&&(n^=285);for(let a=255;a<512;a++)EXP_TABLE[a]=EXP_TABLE[a-255]})();galoisField.log=function(n){if(n<1)throw new Error("log("+n+")");return LOG_TABLE[n]};galoisField.exp=function(n){return EXP_TABLE[n]};galoisField.mul=function(n,a){return n===0||a===0?0:EXP_TABLE[LOG_TABLE[n]+LOG_TABLE[a]]};(function(t){const n=galoisField;t.mul=function(r,o){const s=new Uint8Array(r.length+o.length-1);for(let l=0;l<r.length;l++)for(let c=0;c<o.length;c++)s[l+c]^=n.mul(r[l],o[c]);return s},t.mod=function(r,o){let s=new Uint8Array(r);for(;s.length-o.length>=0;){const l=s[0];for(let u=0;u<o.length;u++)s[u]^=n.mul(o[u],l);let c=0;for(;c<s.length&&s[c]===0;)c++;s=s.slice(c)}return s},t.generateECPolynomial=function(r){let o=new Uint8Array([1]);for(let s=0;s<r;s++)o=t.mul(o,new Uint8Array([1,n.exp(s)]));return o}})(polynomial);const Polynomial=polynomial;function ReedSolomonEncoder$1(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}ReedSolomonEncoder$1.prototype.initialize=function(n){this.degree=n,this.genPoly=Polynomial.generateECPolynomial(this.degree)};ReedSolomonEncoder$1.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");const a=new Uint8Array(n.length+this.degree);a.set(n);const r=Polynomial.mod(a,this.genPoly),o=this.degree-r.length;if(o>0){const s=new Uint8Array(this.degree);return s.set(r,o),s}return r};var reedSolomonEncoder=ReedSolomonEncoder$1,version={},mode={},versionCheck={};versionCheck.isValid=function(n){return!isNaN(n)&&n>=1&&n<=40};var regex={};const numeric="[0-9]+",alphanumeric="[A-Z $%*+\\-./:]+";let kanji="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";kanji=kanji.replace(/u/g,"\\u");const byte="(?:(?![A-Z0-9 $%*+\\-./:]|"+kanji+`)(?:.|[\r
]))+`;regex.KANJI=new RegExp(kanji,"g");regex.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");regex.BYTE=new RegExp(byte,"g");regex.NUMERIC=new RegExp(numeric,"g");regex.ALPHANUMERIC=new RegExp(alphanumeric,"g");const TEST_KANJI=new RegExp("^"+kanji+"$"),TEST_NUMERIC=new RegExp("^"+numeric+"$"),TEST_ALPHANUMERIC=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");regex.testKanji=function(n){return TEST_KANJI.test(n)};regex.testNumeric=function(n){return TEST_NUMERIC.test(n)};regex.testAlphanumeric=function(n){return TEST_ALPHANUMERIC.test(n)};(function(t){const n=versionCheck,a=regex;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(s,l){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!n.isValid(l))throw new Error("Invalid version: "+l);return l>=1&&l<10?s.ccBits[0]:l<27?s.ccBits[1]:s.ccBits[2]},t.getBestModeForData=function(s){return a.testNumeric(s)?t.NUMERIC:a.testAlphanumeric(s)?t.ALPHANUMERIC:a.testKanji(s)?t.KANJI:t.BYTE},t.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},t.isValid=function(s){return s&&s.bit&&s.ccBits};function r(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+o)}}t.from=function(s,l){if(t.isValid(s))return s;try{return r(s)}catch{return l}}})(mode);(function(t){const n=utils$1,a=errorCorrectionCode,r=errorCorrectionLevel,o=mode,s=versionCheck,l=7973,c=n.getBCHDigit(l);function u(_,g,y){for(let b=1;b<=40;b++)if(g<=t.getCapacity(b,y,_))return b}function d(_,g){return o.getCharCountIndicator(_,g)+4}function f(_,g){let y=0;return _.forEach(function(b){const T=d(b.mode,g);y+=T+b.getBitsLength()}),y}function v(_,g){for(let y=1;y<=40;y++)if(f(_,y)<=t.getCapacity(y,g,o.MIXED))return y}t.from=function(g,y){return s.isValid(g)?parseInt(g,10):y},t.getCapacity=function(g,y,b){if(!s.isValid(g))throw new Error("Invalid QR Code version");typeof b>"u"&&(b=o.BYTE);const T=n.getSymbolTotalCodewords(g),S=a.getTotalCodewordsCount(g,y),C=(T-S)*8;if(b===o.MIXED)return C;const E=C-d(b,g);switch(b){case o.NUMERIC:return Math.floor(E/10*3);case o.ALPHANUMERIC:return Math.floor(E/11*2);case o.KANJI:return Math.floor(E/13);case o.BYTE:default:return Math.floor(E/8)}},t.getBestVersionForData=function(g,y){let b;const T=r.from(y,r.M);if(Array.isArray(g)){if(g.length>1)return v(g,T);if(g.length===0)return 1;b=g[0]}else b=g;return u(b.mode,b.getLength(),T)},t.getEncodedBits=function(g){if(!s.isValid(g)||g<7)throw new Error("Invalid QR Code version");let y=g<<12;for(;n.getBCHDigit(y)-c>=0;)y^=l<<n.getBCHDigit(y)-c;return g<<12|y}})(version);var formatInfo={};const Utils$3=utils$1,G15=1335,G15_MASK=21522,G15_BCH=Utils$3.getBCHDigit(G15);formatInfo.getEncodedBits=function(n,a){const r=n.bit<<3|a;let o=r<<10;for(;Utils$3.getBCHDigit(o)-G15_BCH>=0;)o^=G15<<Utils$3.getBCHDigit(o)-G15_BCH;return(r<<10|o)^G15_MASK};var segments={};const Mode$4=mode;function NumericData(t){this.mode=Mode$4.NUMERIC,this.data=t.toString()}NumericData.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)};NumericData.prototype.getLength=function(){return this.data.length};NumericData.prototype.getBitsLength=function(){return NumericData.getBitsLength(this.data.length)};NumericData.prototype.write=function(n){let a,r,o;for(a=0;a+3<=this.data.length;a+=3)r=this.data.substr(a,3),o=parseInt(r,10),n.put(o,10);const s=this.data.length-a;s>0&&(r=this.data.substr(a),o=parseInt(r,10),n.put(o,s*3+1))};var numericData=NumericData;const Mode$3=mode,ALPHA_NUM_CHARS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function AlphanumericData(t){this.mode=Mode$3.ALPHANUMERIC,this.data=t}AlphanumericData.getBitsLength=function(n){return 11*Math.floor(n/2)+6*(n%2)};AlphanumericData.prototype.getLength=function(){return this.data.length};AlphanumericData.prototype.getBitsLength=function(){return AlphanumericData.getBitsLength(this.data.length)};AlphanumericData.prototype.write=function(n){let a;for(a=0;a+2<=this.data.length;a+=2){let r=ALPHA_NUM_CHARS.indexOf(this.data[a])*45;r+=ALPHA_NUM_CHARS.indexOf(this.data[a+1]),n.put(r,11)}this.data.length%2&&n.put(ALPHA_NUM_CHARS.indexOf(this.data[a]),6)};var alphanumericData=AlphanumericData;const Mode$2=mode;function ByteData(t){this.mode=Mode$2.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}ByteData.getBitsLength=function(n){return n*8};ByteData.prototype.getLength=function(){return this.data.length};ByteData.prototype.getBitsLength=function(){return ByteData.getBitsLength(this.data.length)};ByteData.prototype.write=function(t){for(let n=0,a=this.data.length;n<a;n++)t.put(this.data[n],8)};var byteData=ByteData;const Mode$1=mode,Utils$2=utils$1;function KanjiData(t){this.mode=Mode$1.KANJI,this.data=t}KanjiData.getBitsLength=function(n){return n*13};KanjiData.prototype.getLength=function(){return this.data.length};KanjiData.prototype.getBitsLength=function(){return KanjiData.getBitsLength(this.data.length)};KanjiData.prototype.write=function(t){let n;for(n=0;n<this.data.length;n++){let a=Utils$2.toSJIS(this.data[n]);if(a>=33088&&a<=40956)a-=33088;else if(a>=57408&&a<=60351)a-=49472;else throw new Error("Invalid SJIS character: "+this.data[n]+`
Make sure your charset is UTF-8`);a=(a>>>8&255)*192+(a&255),t.put(a,13)}};var kanjiData=KanjiData,dijkstra={exports:{}};(function(t){var n={single_source_shortest_paths:function(a,r,o){var s={},l={};l[r]=0;var c=n.PriorityQueue.make();c.push(r,0);for(var u,d,f,v,_,g,y,b,T;!c.empty();){u=c.pop(),d=u.value,v=u.cost,_=a[d]||{};for(f in _)_.hasOwnProperty(f)&&(g=_[f],y=v+g,b=l[f],T=typeof l[f]>"u",(T||b>y)&&(l[f]=y,c.push(f,y),s[f]=d))}if(typeof o<"u"&&typeof l[o]>"u"){var S=["Could not find a path from ",r," to ",o,"."].join("");throw new Error(S)}return s},extract_shortest_path_from_predecessor_list:function(a,r){for(var o=[],s=r;s;)o.push(s),a[s],s=a[s];return o.reverse(),o},find_path:function(a,r,o){var s=n.single_source_shortest_paths(a,r,o);return n.extract_shortest_path_from_predecessor_list(s,o)},PriorityQueue:{make:function(a){var r=n.PriorityQueue,o={},s;a=a||{};for(s in r)r.hasOwnProperty(s)&&(o[s]=r[s]);return o.queue=[],o.sorter=a.sorter||r.default_sorter,o},default_sorter:function(a,r){return a.cost-r.cost},push:function(a,r){var o={value:a,cost:r};this.queue.push(o),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=n})(dijkstra);var dijkstraExports=dijkstra.exports;(function(t){const n=mode,a=numericData,r=alphanumericData,o=byteData,s=kanjiData,l=regex,c=utils$1,u=dijkstraExports;function d(S){return unescape(encodeURIComponent(S)).length}function f(S,C,E){const x=[];let A;for(;(A=S.exec(E))!==null;)x.push({data:A[0],index:A.index,mode:C,length:A[0].length});return x}function v(S){const C=f(l.NUMERIC,n.NUMERIC,S),E=f(l.ALPHANUMERIC,n.ALPHANUMERIC,S);let x,A;return c.isKanjiModeEnabled()?(x=f(l.BYTE,n.BYTE,S),A=f(l.KANJI,n.KANJI,S)):(x=f(l.BYTE_KANJI,n.BYTE,S),A=[]),C.concat(E,x,A).sort(function(M,R){return M.index-R.index}).map(function(M){return{data:M.data,mode:M.mode,length:M.length}})}function _(S,C){switch(C){case n.NUMERIC:return a.getBitsLength(S);case n.ALPHANUMERIC:return r.getBitsLength(S);case n.KANJI:return s.getBitsLength(S);case n.BYTE:return o.getBitsLength(S)}}function g(S){return S.reduce(function(C,E){const x=C.length-1>=0?C[C.length-1]:null;return x&&x.mode===E.mode?(C[C.length-1].data+=E.data,C):(C.push(E),C)},[])}function y(S){const C=[];for(let E=0;E<S.length;E++){const x=S[E];switch(x.mode){case n.NUMERIC:C.push([x,{data:x.data,mode:n.ALPHANUMERIC,length:x.length},{data:x.data,mode:n.BYTE,length:x.length}]);break;case n.ALPHANUMERIC:C.push([x,{data:x.data,mode:n.BYTE,length:x.length}]);break;case n.KANJI:C.push([x,{data:x.data,mode:n.BYTE,length:d(x.data)}]);break;case n.BYTE:C.push([{data:x.data,mode:n.BYTE,length:d(x.data)}])}}return C}function b(S,C){const E={},x={start:{}};let A=["start"];for(let N=0;N<S.length;N++){const M=S[N],R=[];for(let D=0;D<M.length;D++){const L=M[D],I=""+N+D;R.push(I),E[I]={node:L,lastCount:0},x[I]={};for(let $=0;$<A.length;$++){const V=A[$];E[V]&&E[V].node.mode===L.mode?(x[V][I]=_(E[V].lastCount+L.length,L.mode)-_(E[V].lastCount,L.mode),E[V].lastCount+=L.length):(E[V]&&(E[V].lastCount=L.length),x[V][I]=_(L.length,L.mode)+4+n.getCharCountIndicator(L.mode,C))}}A=R}for(let N=0;N<A.length;N++)x[A[N]].end=0;return{map:x,table:E}}function T(S,C){let E;const x=n.getBestModeForData(S);if(E=n.from(C,x),E!==n.BYTE&&E.bit<x.bit)throw new Error('"'+S+'" cannot be encoded with mode '+n.toString(E)+`.
 Suggested mode is: `+n.toString(x));switch(E===n.KANJI&&!c.isKanjiModeEnabled()&&(E=n.BYTE),E){case n.NUMERIC:return new a(S);case n.ALPHANUMERIC:return new r(S);case n.KANJI:return new s(S);case n.BYTE:return new o(S)}}t.fromArray=function(C){return C.reduce(function(E,x){return typeof x=="string"?E.push(T(x,null)):x.data&&E.push(T(x.data,x.mode)),E},[])},t.fromString=function(C,E){const x=v(C,c.isKanjiModeEnabled()),A=y(x),N=b(A,E),M=u.find_path(N.map,"start","end"),R=[];for(let D=1;D<M.length-1;D++)R.push(N.table[M[D]].node);return t.fromArray(g(R))},t.rawSplit=function(C){return t.fromArray(v(C,c.isKanjiModeEnabled()))}})(segments);const Utils$1=utils$1,ECLevel=errorCorrectionLevel,BitBuffer=bitBuffer,BitMatrix=bitMatrix,AlignmentPattern=alignmentPattern,FinderPattern=finderPattern,MaskPattern=maskPattern,ECCode=errorCorrectionCode,ReedSolomonEncoder=reedSolomonEncoder,Version=version,FormatInfo=formatInfo,Mode=mode,Segments=segments;function setupFinderPattern(t,n){const a=t.size,r=FinderPattern.getPositions(n);for(let o=0;o<r.length;o++){const s=r[o][0],l=r[o][1];for(let c=-1;c<=7;c++)if(!(s+c<=-1||a<=s+c))for(let u=-1;u<=7;u++)l+u<=-1||a<=l+u||(c>=0&&c<=6&&(u===0||u===6)||u>=0&&u<=6&&(c===0||c===6)||c>=2&&c<=4&&u>=2&&u<=4?t.set(s+c,l+u,!0,!0):t.set(s+c,l+u,!1,!0))}}function setupTimingPattern(t){const n=t.size;for(let a=8;a<n-8;a++){const r=a%2===0;t.set(a,6,r,!0),t.set(6,a,r,!0)}}function setupAlignmentPattern(t,n){const a=AlignmentPattern.getPositions(n);for(let r=0;r<a.length;r++){const o=a[r][0],s=a[r][1];for(let l=-2;l<=2;l++)for(let c=-2;c<=2;c++)l===-2||l===2||c===-2||c===2||l===0&&c===0?t.set(o+l,s+c,!0,!0):t.set(o+l,s+c,!1,!0)}}function setupVersionInfo(t,n){const a=t.size,r=Version.getEncodedBits(n);let o,s,l;for(let c=0;c<18;c++)o=Math.floor(c/3),s=c%3+a-8-3,l=(r>>c&1)===1,t.set(o,s,l,!0),t.set(s,o,l,!0)}function setupFormatInfo(t,n,a){const r=t.size,o=FormatInfo.getEncodedBits(n,a);let s,l;for(s=0;s<15;s++)l=(o>>s&1)===1,s<6?t.set(s,8,l,!0):s<8?t.set(s+1,8,l,!0):t.set(r-15+s,8,l,!0),s<8?t.set(8,r-s-1,l,!0):s<9?t.set(8,15-s-1+1,l,!0):t.set(8,15-s-1,l,!0);t.set(r-8,8,1,!0)}function setupData(t,n){const a=t.size;let r=-1,o=a-1,s=7,l=0;for(let c=a-1;c>0;c-=2)for(c===6&&c--;;){for(let u=0;u<2;u++)if(!t.isReserved(o,c-u)){let d=!1;l<n.length&&(d=(n[l]>>>s&1)===1),t.set(o,c-u,d),s--,s===-1&&(l++,s=7)}if(o+=r,o<0||a<=o){o-=r,r=-r;break}}}function createData(t,n,a){const r=new BitBuffer;a.forEach(function(u){r.put(u.mode.bit,4),r.put(u.getLength(),Mode.getCharCountIndicator(u.mode,t)),u.write(r)});const o=Utils$1.getSymbolTotalCodewords(t),s=ECCode.getTotalCodewordsCount(t,n),l=(o-s)*8;for(r.getLengthInBits()+4<=l&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);const c=(l-r.getLengthInBits())/8;for(let u=0;u<c;u++)r.put(u%2?17:236,8);return createCodewords(r,t,n)}function createCodewords(t,n,a){const r=Utils$1.getSymbolTotalCodewords(n),o=ECCode.getTotalCodewordsCount(n,a),s=r-o,l=ECCode.getBlocksCount(n,a),c=r%l,u=l-c,d=Math.floor(r/l),f=Math.floor(s/l),v=f+1,_=d-f,g=new ReedSolomonEncoder(_);let y=0;const b=new Array(l),T=new Array(l);let S=0;const C=new Uint8Array(t.buffer);for(let M=0;M<l;M++){const R=M<u?f:v;b[M]=C.slice(y,y+R),T[M]=g.encode(b[M]),y+=R,S=Math.max(S,R)}const E=new Uint8Array(r);let x=0,A,N;for(A=0;A<S;A++)for(N=0;N<l;N++)A<b[N].length&&(E[x++]=b[N][A]);for(A=0;A<_;A++)for(N=0;N<l;N++)E[x++]=T[N][A];return E}function createSymbol(t,n,a,r){let o;if(Array.isArray(t))o=Segments.fromArray(t);else if(typeof t=="string"){let d=n;if(!d){const f=Segments.rawSplit(t);d=Version.getBestVersionForData(f,a)}o=Segments.fromString(t,d||40)}else throw new Error("Invalid data");const s=Version.getBestVersionForData(o,a);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!n)n=s;else if(n<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const l=createData(n,a,o),c=Utils$1.getSymbolSize(n),u=new BitMatrix(c);return setupFinderPattern(u,n),setupTimingPattern(u),setupAlignmentPattern(u,n),setupFormatInfo(u,a,0),n>=7&&setupVersionInfo(u,n),setupData(u,l),isNaN(r)&&(r=MaskPattern.getBestMask(u,setupFormatInfo.bind(null,u,a))),MaskPattern.applyMask(r,u),setupFormatInfo(u,a,r),{modules:u,version:n,errorCorrectionLevel:a,maskPattern:r,segments:o}}qrcode.create=function(n,a){if(typeof n>"u"||n==="")throw new Error("No input text");let r=ECLevel.M,o,s;return typeof a<"u"&&(r=ECLevel.from(a.errorCorrectionLevel,ECLevel.M),o=Version.from(a.version),s=MaskPattern.from(a.maskPattern),a.toSJISFunc&&Utils$1.setToSJISFunction(a.toSJISFunc)),createSymbol(n,o,r,s)};var canvas={},utils={};(function(t){function n(a){if(typeof a=="number"&&(a=a.toString()),typeof a!="string")throw new Error("Color should be defined as hex string");let r=a.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+a);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(s){return[s,s]}))),r.length===6&&r.push("F","F");const o=parseInt(r.join(""),16);return{r:o>>24&255,g:o>>16&255,b:o>>8&255,a:o&255,hex:"#"+r.slice(0,6).join("")}}t.getOptions=function(r){r||(r={}),r.color||(r.color={});const o=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,s=r.width&&r.width>=21?r.width:void 0,l=r.scale||4;return{width:s,scale:s?4:l,margin:o,color:{dark:n(r.color.dark||"#000000ff"),light:n(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},t.getScale=function(r,o){return o.width&&o.width>=r+o.margin*2?o.width/(r+o.margin*2):o.scale},t.getImageWidth=function(r,o){const s=t.getScale(r,o);return Math.floor((r+o.margin*2)*s)},t.qrToImageData=function(r,o,s){const l=o.modules.size,c=o.modules.data,u=t.getScale(l,s),d=Math.floor((l+s.margin*2)*u),f=s.margin*u,v=[s.color.light,s.color.dark];for(let _=0;_<d;_++)for(let g=0;g<d;g++){let y=(_*d+g)*4,b=s.color.light;if(_>=f&&g>=f&&_<d-f&&g<d-f){const T=Math.floor((_-f)/u),S=Math.floor((g-f)/u);b=v[c[T*l+S]?1:0]}r[y++]=b.r,r[y++]=b.g,r[y++]=b.b,r[y]=b.a}}})(utils);(function(t){const n=utils;function a(o,s,l){o.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=l,s.width=l,s.style.height=l+"px",s.style.width=l+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(s,l,c){let u=c,d=l;typeof u>"u"&&(!l||!l.getContext)&&(u=l,l=void 0),l||(d=r()),u=n.getOptions(u);const f=n.getImageWidth(s.modules.size,u),v=d.getContext("2d"),_=v.createImageData(f,f);return n.qrToImageData(_.data,s,u),a(v,d,f),v.putImageData(_,0,0),d},t.renderToDataURL=function(s,l,c){let u=c;typeof u>"u"&&(!l||!l.getContext)&&(u=l,l=void 0),u||(u={});const d=t.render(s,l,u),f=u.type||"image/png",v=u.rendererOpts||{};return d.toDataURL(f,v.quality)}})(canvas);var svgTag={};const Utils=utils;function getColorAttrib(t,n){const a=t.a/255,r=n+'="'+t.hex+'"';return a<1?r+" "+n+'-opacity="'+a.toFixed(2).slice(1)+'"':r}function svgCmd(t,n,a){let r=t+n;return typeof a<"u"&&(r+=" "+a),r}function qrToPath(t,n,a){let r="",o=0,s=!1,l=0;for(let c=0;c<t.length;c++){const u=Math.floor(c%n),d=Math.floor(c/n);!u&&!s&&(s=!0),t[c]?(l++,c>0&&u>0&&t[c-1]||(r+=s?svgCmd("M",u+a,.5+d+a):svgCmd("m",o,0),o=0,s=!1),u+1<n&&t[c+1]||(r+=svgCmd("h",l),l=0)):o++}return r}svgTag.render=function(n,a,r){const o=Utils.getOptions(a),s=n.modules.size,l=n.modules.data,c=s+o.margin*2,u=o.color.light.a?"<path "+getColorAttrib(o.color.light,"fill")+' d="M0 0h'+c+"v"+c+'H0z"/>':"",d="<path "+getColorAttrib(o.color.dark,"stroke")+' d="'+qrToPath(l,s,o.margin)+'"/>',f='viewBox="0 0 '+c+" "+c+'"',_='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+f+' shape-rendering="crispEdges">'+u+d+`</svg>
`;return typeof r=="function"&&r(null,_),_};const canPromise=canPromise$1,QRCode=qrcode,CanvasRenderer=canvas,SvgRenderer=svgTag;function renderCanvas(t,n,a,r,o){const s=[].slice.call(arguments,1),l=s.length,c=typeof s[l-1]=="function";if(!c&&!canPromise())throw new Error("Callback required as last argument");if(c){if(l<2)throw new Error("Too few arguments provided");l===2?(o=a,a=n,n=r=void 0):l===3&&(n.getContext&&typeof o>"u"?(o=r,r=void 0):(o=r,r=a,a=n,n=void 0))}else{if(l<1)throw new Error("Too few arguments provided");return l===1?(a=n,n=r=void 0):l===2&&!n.getContext&&(r=a,a=n,n=void 0),new Promise(function(u,d){try{const f=QRCode.create(a,r);u(t(f,n,r))}catch(f){d(f)}})}try{const u=QRCode.create(a,r);o(null,t(u,n,r))}catch(u){o(u)}}browser.create=QRCode.create;browser.toCanvas=renderCanvas.bind(null,CanvasRenderer.render);browser.toDataURL=renderCanvas.bind(null,CanvasRenderer.renderToDataURL);browser.toString=renderCanvas.bind(null,function(t,n,a){return SvgRenderer.render(t,a)});const _hoisted_1$n={class:"ending-overlay"},_hoisted_2$m={class:"ending-header"},_hoisted_3$l={class:"header-main"},_hoisted_4$k={class:"ending-icon"},_hoisted_5$k={class:"header-info"},_hoisted_6$k={class:"ending-title"},_hoisted_7$k={key:0,class:"ending-short-desc"},_hoisted_8$j={key:0,class:"phase-indicator"},_hoisted_9$i={key:0,class:"cause-tag"},_hoisted_10$i={class:"cause-text"},_hoisted_11$g={class:"ending-narrative"},_hoisted_12$g={key:1,class:"ending-choices"},_hoisted_13$e=["onClick"],_hoisted_14$e={class:"choice-radio"},_hoisted_15$e={class:"choice-content"},_hoisted_16$e={class:"choice-label"},_hoisted_17$e={key:0,class:"choice-reason"},_hoisted_18$d={key:2,class:"ending-actions"},_hoisted_19$c={key:"final",class:"transcript-container"},_hoisted_20$c={class:"card-header"},_hoisted_21$b={class:"qr-wrap"},_hoisted_22$b={class:"card-body"},_hoisted_23$a={class:"title-summary-section"},_hoisted_24$a={class:"ending-title-wrapper"},_hoisted_25$9={class:"ending-title"},_hoisted_26$8={class:"title-icon"},_hoisted_27$8={class:"title-text"},_hoisted_28$8={class:"title-description"},_hoisted_29$7={class:"survival-report"},_hoisted_30$7={key:0},_hoisted_31$7={key:1},_hoisted_32$6={class:"highlight-text"},_hoisted_33$6={class:"highlight-text"},_hoisted_34$6={class:"stats-grid"},_hoisted_35$3={class:"stat-item"},_hoisted_36$3={class:"stat-value"},_hoisted_37$3={class:"stat-item"},_hoisted_38$3={class:"stat-value"},_hoisted_39$3={class:"stat-item"},_hoisted_40$3={class:"stat-value"},_hoisted_41$3={class:"stat-item"},_hoisted_42$3={class:"stat-value"},_hoisted_43$3={class:"death-row"},_hoisted_44$3={class:"death-icon"},_hoisted_45$3={class:"death-info"},_hoisted_46$3={class:"death-title"},_hoisted_47$3={class:"death-tag"},_hoisted_48$3={class:"death-desc"},_hoisted_49$3={key:1,class:"death-section survival-section"},_hoisted_50$3={class:"roast-bar"},_hoisted_51$3={class:"collection-row"},_hoisted_52$3={class:"collection-header-inline"},_hoisted_53$3={class:"label-icon"},_hoisted_54$3={class:"section-label-inline"},_hoisted_55$3={class:"label-badge"},_hoisted_56$3={key:0,class:"collection-slots"},_hoisted_57$3=["src","alt"],_hoisted_58$3={key:1},_hoisted_59$2={key:1,class:"collection-empty-hint"},_hoisted_60$2={class:"action-bar"},_hoisted_61$2={key:0,class:"toast"},_hoisted_62$2={key:0,class:"collection-overlay"},_hoisted_63$2={class:"collection-modal"},_hoisted_64$2={class:"collection-modal-header"},_hoisted_65$2={class:"modal-title"},_hoisted_66$2={class:"victory-title-section"},_hoisted_67$2={class:"victory-title-row"},_hoisted_68$2={class:"victory-icon"},_hoisted_69$2={class:"victory-title-info"},_hoisted_70$2={class:"victory-title-text"},_hoisted_71$2={class:"victory-title-desc"},_hoisted_72$2={class:"collection-section-full"},_hoisted_73$2={class:"collection-header"},_hoisted_74$2={class:"collection-count"},_hoisted_75$2={key:0,class:"collection-grid-full"},_hoisted_76$2=["src","alt"],_hoisted_77$2={key:1,class:"item-icon"},_hoisted_78$2={class:"item-info"},_hoisted_79$2={class:"item-name"},_hoisted_80$2={class:"item-price"},_hoisted_81$1={key:1,class:"collection-empty-full"},_hoisted_82$1={key:0,class:"bonus-section-full"},_hoisted_83$1={class:"bonus-icon"},_hoisted_84$1={class:"bonus-info"},_hoisted_85$1={class:"bonus-name"},_hoisted_86$1={class:"bonus-desc"},SHARE_URL$1="http://us-killline.com/",_sfc_main$q={__name:"EndingFlowModal",props:{endingType:{type:String,required:!0},endingFlow:{type:Object,required:!0},deathInfo:{type:Object,default:null},stats:{type:Object,default:()=>({})}},emits:["advance","restart"],setup(t,{emit:n}){use([install,install$a,install$5]);const a=!1,r=useGameStore(),o=t,s=n,l=ref(null),c=ref(null),u=ref(""),d=ref(null),f=ref(!1),v=computed(()=>getEndingByType(o.endingType)),_=computed(()=>{var U;return((U=v.value)==null?void 0:U.title)||""}),g=computed(()=>getEndingPhaseCount(o.endingType)),y=computed(()=>g.value>0),b=computed(()=>o.endingType==="survival"),T=computed(()=>{var U;return((U=r.getVictoryTitle)==null?void 0:U.call(r))||{title:"",description:"",icon:""}}),S=computed(()=>{var U;return((U=r.getCollectedItems)==null?void 0:U.call(r))||[]}),C=computed(()=>{var U;return((U=r.getCollectionStats)==null?void 0:U.call(r))||{collected:0,total:12,percentage:0}}),E=computed(()=>{var U;return((U=r.getCollectionBonuses)==null?void 0:U.call(r))||[]}),x=computed(()=>{var U;return((U=r.getAllCollectionSlots)==null?void 0:U.call(r))||[]}),A=computed(()=>x.value.filter(U=>U.purchased)),N=computed(()=>{var U,W,w;return((U=o.deathInfo)==null?void 0:U.money)??((w=(W=r.s)==null?void 0:W.v3)==null?void 0:w.money)??0}),M=computed(()=>{var U,W,w,P,F;return((W=(U=o.deathInfo)==null?void 0:U.attributes)==null?void 0:W.health)??((F=(P=(w=r.s)==null?void 0:w.v3)==null?void 0:P.attributes)==null?void 0:F.health)??0}),R=computed(()=>{var U,W,w,P,F;return((W=(U=o.deathInfo)==null?void 0:U.attributes)==null?void 0:W.credit)??((F=(P=(w=r.s)==null?void 0:w.v3)==null?void 0:P.attributes)==null?void 0:F.credit)??0});function D(U){return{common:"#9ca3af",rare:"#3b82f6",epic:"#a855f7",legendary:"#f59e0b"}[U]||"#9ca3af"}const L=computed(()=>o.endingFlow?getCurrentPhaseData(o.endingFlow):null),I=computed(()=>{var U;return((U=o.endingFlow)==null?void 0:U.completed)||!y.value}),$=computed(()=>{var U;return((U=L.value)==null?void 0:U.title)||_.value}),V=computed(()=>{var W;return(((W=L.value)==null?void 0:W.narrative)||"").split(`
`).filter(w=>w.trim())});function H(U){U.disabled||s("advance",U.id)}function X(){s("advance","next")}computed(()=>{var W,w;if(!((w=(W=d.value)==null?void 0:W.personality)!=null&&w.breakdown))return[];const U=d.value.personality.breakdown;return[{letter:U.K.letter,label:U.K.letter==="K"?" Kapital":" Opt-out",desc:U.K.letter==="K"?"996":""},{letter:U.I.letter,label:U.I.letter==="I"?" Incognito":" Manifest",desc:U.I.letter==="I"?"":""},{letter:U.L1.letter,label:U.L1.letter==="L"?" Lucre":" Loyal",desc:U.L1.letter==="L"?"":""},{letter:U.L2.letter,label:U.L2.letter==="L"?" Life":" Lethargy",desc:U.L2.letter==="L"?"":""}]});const q=[" "," "," "," "],z=[" "," "," "];computed(()=>{var w,P,F,Y,K;if(b.value)return" ";if((((w=d.value)==null?void 0:w.month)||1)<=1){const j=(((F=(P=d.value)==null?void 0:P.id)==null?void 0:F.charCodeAt(0))||0)%z.length;return z[j]}const W=(((K=(Y=d.value)==null?void 0:Y.id)==null?void 0:K.charCodeAt(0))||0)%q.length;return q[W]});const G=["","","","","","","","","","","GDP",""];computed(()=>{var W,w;const U=(((w=(W=d.value)==null?void 0:W.id)==null?void 0:w.charCodeAt(0))||0)%G.length;return G[U]});const oe=["","","","","","","","","","","","","",""],ne=["","","","","","",""],ue=computed(()=>{var w,P,F,Y,K,j,J;const U=((w=d.value)==null?void 0:w.month)||1;if(b.value)return"";if(U<=1){const ee=(((F=(P=d.value)==null?void 0:P.id)==null?void 0:F.charCodeAt(0))||0)%ne.length;return ne[ee]}const W=((((K=(Y=d.value)==null?void 0:Y.id)==null?void 0:K.charCodeAt(0))||0)+(((J=(j=d.value)==null?void 0:j.id)==null?void 0:J.charCodeAt(1))||0))%oe.length;return oe[W]}),se=[" "," "," "," "],fe=computed(()=>{var W,w;const U=(((w=(W=d.value)==null?void 0:W.id)==null?void 0:w.charCodeAt(2))||0)%se.length;return b.value?" ":se[U]});computed(()=>{var W,w,P,F,Y;if(!((W=d.value)!=null&&W.abilities))return{backgroundColor:"transparent"};const U=d.value.abilities;return{backgroundColor:"transparent",radar:{indicator:[{name:"",max:100},{name:"",max:100},{name:"",max:100},{name:"",max:100}],shape:"polygon",radius:"75%",splitNumber:2,splitLine:{lineStyle:{color:"rgba(255,255,255,0.1)"}},splitArea:{show:!1},axisLine:{lineStyle:{color:"rgba(255,255,255,0.1)"}}},series:[{type:"radar",data:[{value:[((w=U.survival)==null?void 0:w.value)||0,((P=U.moral)==null?void 0:P.value)||0,((F=U.mental)==null?void 0:F.value)||0,((Y=U.theory)==null?void 0:Y.value)||0],symbol:"none",lineStyle:{color:"#ff6b6b",width:2},areaStyle:{color:"rgba(255,107,107,0.4)"}}]}]}});function ae(){var w,P,F,Y,K,j,J,ee,te,Z,he,re,de,ge,_e,be,me;const U=(w=r.s)==null?void 0:w.v3,W={pathId:((P=o.deathInfo)==null?void 0:P.id)||Math.random().toString(36).substring(2,8).toUpperCase(),loop:{month:((F=o.deathInfo)==null?void 0:F.round)??(U==null?void 0:U.currentRound)??((Y=o.stats)==null?void 0:Y.roundsCompleted)??1},money:((K=o.deathInfo)==null?void 0:K.money)??(U==null?void 0:U.money)??0,health:((J=(j=o.deathInfo)==null?void 0:j.attributes)==null?void 0:J.health)??((ee=U==null?void 0:U.attributes)==null?void 0:ee.health)??50,sanity:((Z=(te=o.deathInfo)==null?void 0:te.attributes)==null?void 0:Z.san)??((he=U==null?void 0:U.attributes)==null?void 0:he.san)??50,attributes:{credit:((de=(re=o.deathInfo)==null?void 0:re.attributes)==null?void 0:de.credit)??((ge=U==null?void 0:U.attributes)==null?void 0:ge.credit)??500},exposure:100-(((be=(_e=o.deathInfo)==null?void 0:_e.attributes)==null?void 0:be.credit)??((me=U==null?void 0:U.attributes)==null?void 0:me.credit)??50),deepStats:{moralCorrosion:0,betrayalCount:0}};d.value=generateTranscript(o.endingType,W)}function ie(U){u.value=U,setTimeout(()=>u.value="",2e3)}function ve(){var F,Y,K,j;Analytics.shareLink();const U=((F=d.value)==null?void 0:F.month)||1,W=((K=(Y=d.value)==null?void 0:Y.death)==null?void 0:K.cause)||"";let w="";if(b.value){const J=["12","1299%",""];w=J[Math.floor(Math.random()*J.length)]}else if(U<=1){const J=[`1${W}`,"1","1",`1${W}`];w=J[Math.floor(Math.random()*J.length)]}else if(U<=3){const J=[`${U}${W}`,`${U}${W}`,`${U}`];w=J[Math.floor(Math.random()*J.length)]}else if(U<=6){const J=[`${U}${W}`,`${U}`,`${U}${W}`];w=J[Math.floor(Math.random()*J.length)]}else{const J=[`${U}${W}`,`${U}${W}`,`${U}`];w=J[Math.floor(Math.random()*J.length)]}const P=`${w}

${SHARE_URL$1}`;(j=navigator.clipboard)==null||j.writeText(P).then(()=>ie("")).catch(()=>{prompt(":",P)})}function le(U=20){c.value?browser.toCanvas(c.value,SHARE_URL$1,{width:64,margin:1,color:{dark:"#000000",light:"#00000000"}}):U>0&&setTimeout(()=>le(U-1),100)}onMounted(()=>{I.value&&nextTick(()=>{setTimeout(le,300)})});function pe(){var j,J,ee,te,Z,he;const U=((j=r.s)==null?void 0:j.fullGameLog)||((J=r.s)==null?void 0:J.feed)||[];if(U.length===0){ie("");return}const W=b.value?"":((te=(ee=d.value)==null?void 0:ee.death)==null?void 0:te.cause)||"",w=`========================================
 - 
: ${new Date().toLocaleString("zh-CN")}
: ${W}
: ${((Z=d.value)==null?void 0:Z.month)||1}
: $${((he=d.value)==null?void 0:he.money)||0}
: ${U.length} 
========================================

`,P=U.map(re=>{const de=new Date(re.at).toLocaleString("zh-CN"),ge=re.kind?`[${re.kind}]`:"";return`${de} ${ge} ${re.text}`}).join(`
`),F=w+P,Y=new Blob([F],{type:"text/plain;charset=utf-8"}),K=document.createElement("a");K.download=`USKillline_Log_${Date.now()}.txt`,K.href=URL.createObjectURL(Y),K.click(),URL.revokeObjectURL(K.href),ie("")}function Te(){Analytics.playAgain(),s("restart")}return watch(I,async U=>{U&&(ae(),await nextTick(),le())},{immediate:!0}),(U,W)=>(openBlock(),createElementBlock("div",_hoisted_1$n,[createVNode(Transition,{name:"phase-fade",mode:"out-in"},{default:withCtx(()=>{var w,P,F,Y,K,j,J,ee,te,Z,he,re,de,ge,_e,be,me,Ae,Ce,Me;return[!I.value&&L.value?(openBlock(),createElementBlock("div",{key:L.value.phase,class:"ending-modal phase-content"},[createBaseVNode("header",_hoisted_2$m,[createBaseVNode("div",_hoisted_3$l,[createBaseVNode("span",_hoisted_4$k,toDisplayString(L.value.icon||""),1),createBaseVNode("div",_hoisted_5$k,[createBaseVNode("span",_hoisted_6$k,toDisplayString(L.value.title||$.value),1),L.value.shortDesc?(openBlock(),createElementBlock("span",_hoisted_7$k,toDisplayString(L.value.shortDesc),1)):createCommentVNode("",!0)])]),y.value?(openBlock(),createElementBlock("span",_hoisted_8$j,toDisplayString(L.value.phase)+"/"+toDisplayString(g.value),1)):createCommentVNode("",!0)]),L.value.cause?(openBlock(),createElementBlock("div",_hoisted_9$i,[W[1]||(W[1]=createBaseVNode("span",{class:"cause-label"},"",-1)),createBaseVNode("span",_hoisted_10$i,toDisplayString(L.value.cause),1)])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_11$g,[(openBlock(!0),createElementBlock(Fragment,null,renderList(V.value,(Ee,De)=>(openBlock(),createElementBlock("p",{key:De,class:"narrative-line"},toDisplayString(Ee),1))),128))]),(w=L.value.choices)!=null&&w.length?(openBlock(),createElementBlock("div",_hoisted_12$g,[(openBlock(!0),createElementBlock(Fragment,null,renderList(L.value.choices,Ee=>(openBlock(),createElementBlock("div",{key:Ee.id,class:normalizeClass(["choice-option",{disabled:Ee.disabled,enabled:!Ee.disabled}]),onClick:De=>H(Ee)},[createBaseVNode("span",_hoisted_14$e,toDisplayString(Ee.disabled?"":""),1),createBaseVNode("div",_hoisted_15$e,[createBaseVNode("span",_hoisted_16$e,toDisplayString(Ee.label),1),Ee.disabled&&Ee.reason?(openBlock(),createElementBlock("span",_hoisted_17$e,toDisplayString(Ee.reason),1)):createCommentVNode("",!0)])],10,_hoisted_13$e))),128))])):createCommentVNode("",!0),(P=L.value.choices)!=null&&P.length?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_18$d,[createBaseVNode("button",{class:"action-button",onClick:X},toDisplayString(L.value.button||""),1)]))])):I.value?(openBlock(),createElementBlock("div",_hoisted_19$c,[createBaseVNode("div",{class:"transcript-card",ref_key:"cardRef",ref:l},[createBaseVNode("div",_hoisted_20$c,[W[3]||(W[3]=createBaseVNode("div",{class:"header-left-col"},[createBaseVNode("div",{class:"game-title"},[createBaseVNode("span",{class:"title-icon"},""),createTextVNode("  ")]),createBaseVNode("div",{class:"game-subtitle"},"  "),createBaseVNode("span",{class:"site-url"},"us-killline.com")],-1)),createBaseVNode("div",_hoisted_21$b,[W[2]||(W[2]=createBaseVNode("span",{class:"qr-label"},[createTextVNode(""),createBaseVNode("br"),createTextVNode("")],-1)),createBaseVNode("canvas",{ref_key:"qrCanvas",ref:c,class:"qr-code"},null,512)])]),createBaseVNode("div",_hoisted_22$b,[createBaseVNode("div",_hoisted_23$a,[createBaseVNode("div",{class:normalizeClass(["status-stamp",b.value?"survived":"terminated"])},toDisplayString(b.value?"":""),3),createBaseVNode("div",_hoisted_24$a,[createBaseVNode("div",_hoisted_25$9,[createBaseVNode("span",_hoisted_26$8,toDisplayString(b.value?T.value.icon:((Y=(F=d.value)==null?void 0:F.personality)==null?void 0:Y.icon)||""),1),createBaseVNode("span",_hoisted_27$8,toDisplayString(b.value?T.value.title:((j=(K=d.value)==null?void 0:K.personality)==null?void 0:j.name)||""),1)]),createBaseVNode("div",_hoisted_28$8,toDisplayString(b.value?" 1% ":"..."),1)]),createBaseVNode("div",_hoisted_29$7,[W[4]||(W[4]=createBaseVNode("span",{class:"label-icon"},"",-1)),W[5]||(W[5]=createBaseVNode("span",{class:"section-label-inline"},"",-1)),b.value?(openBlock(),createElementBlock("span",_hoisted_30$7," ")):(openBlock(),createElementBlock("span",_hoisted_31$7," ")),createBaseVNode("span",_hoisted_32$6,toDisplayString((J=d.value)==null?void 0:J.month)+"",1),W[6]||(W[6]=createBaseVNode("span",null," ",-1)),createBaseVNode("span",_hoisted_33$6,toDisplayString(((Z=(te=(ee=d.value)==null?void 0:ee.rankings)==null?void 0:te.survival)==null?void 0:Z.percent)||0)+"%",1),W[7]||(W[7]=createBaseVNode("span",null," ",-1))]),createBaseVNode("div",_hoisted_34$6,[createBaseVNode("div",_hoisted_35$3,[W[8]||(W[8]=createBaseVNode("span",{class:"stat-icon"},"",-1)),createBaseVNode("span",_hoisted_36$3,"$"+toDisplayString(N.value),1),W[9]||(W[9]=createBaseVNode("span",{class:"stat-label"},"",-1))]),createBaseVNode("div",_hoisted_37$3,[W[10]||(W[10]=createBaseVNode("span",{class:"stat-icon"},"",-1)),createBaseVNode("span",_hoisted_38$3,toDisplayString(M.value),1),W[11]||(W[11]=createBaseVNode("span",{class:"stat-label"},"",-1))]),createBaseVNode("div",_hoisted_39$3,[W[12]||(W[12]=createBaseVNode("span",{class:"stat-icon"},"",-1)),createBaseVNode("span",_hoisted_40$3,toDisplayString(R.value),1),W[13]||(W[13]=createBaseVNode("span",{class:"stat-label"},"",-1))]),createBaseVNode("div",_hoisted_41$3,[W[14]||(W[14]=createBaseVNode("span",{class:"stat-icon"},"",-1)),createBaseVNode("span",_hoisted_42$3,toDisplayString(C.value.collected),1),W[15]||(W[15]=createBaseVNode("span",{class:"stat-label"},"",-1))])])]),b.value?(openBlock(),createElementBlock("div",_hoisted_49$3,[...W[17]||(W[17]=[createBaseVNode("div",{class:"death-row"},[createBaseVNode("span",{class:"death-icon"},""),createBaseVNode("div",{class:"death-info"},[createBaseVNode("span",{class:"death-title"},[createBaseVNode("span",{class:"section-label-inline"},""),createTextVNode("  ")]),createBaseVNode("span",{class:"death-tag"},'""')])],-1),createBaseVNode("div",{class:"death-desc"},"  ",-1)])])):(openBlock(),createElementBlock("div",{key:0,class:"death-section",style:normalizeStyle$1({"--accent":(re=(he=d.value)==null?void 0:he.death)==null?void 0:re.color})},[createBaseVNode("div",_hoisted_43$3,[createBaseVNode("span",_hoisted_44$3,toDisplayString((ge=(de=d.value)==null?void 0:de.death)==null?void 0:ge.icon),1),createBaseVNode("div",_hoisted_45$3,[createBaseVNode("span",_hoisted_46$3,[W[16]||(W[16]=createBaseVNode("span",{class:"section-label-inline"},"",-1)),createTextVNode(" "+toDisplayString((be=(_e=d.value)==null?void 0:_e.death)==null?void 0:be.cause),1)]),createBaseVNode("span",_hoisted_47$3,'"'+toDisplayString((Ae=(me=d.value)==null?void 0:me.death)==null?void 0:Ae.tagline)+'"',1)])]),createBaseVNode("div",_hoisted_48$3,toDisplayString((Me=(Ce=d.value)==null?void 0:Ce.death)==null?void 0:Me.description),1)],4)),createBaseVNode("div",_hoisted_50$3,toDisplayString(ue.value),1),createBaseVNode("div",_hoisted_51$3,[createBaseVNode("div",_hoisted_52$3,[createBaseVNode("span",_hoisted_53$3,toDisplayString(b.value?"":""),1),createBaseVNode("span",_hoisted_54$3,toDisplayString(b.value?"":""),1),createBaseVNode("span",_hoisted_55$3,toDisplayString(C.value.collected)+"/12",1)]),A.value.length>0?(openBlock(),createElementBlock("div",_hoisted_56$3,[(openBlock(!0),createElementBlock(Fragment,null,renderList(A.value,(Ee,De)=>(openBlock(),createElementBlock("div",{key:De,class:"slot filled",style:normalizeStyle$1({borderColor:D(Ee.rarity)})},[Ee.image?(openBlock(),createElementBlock("img",{key:0,src:Ee.image,alt:Ee.name,class:"slot-img"},null,8,_hoisted_57$3)):(openBlock(),createElementBlock("span",_hoisted_58$3,toDisplayString(Ee.icon),1))],4))),128))])):(openBlock(),createElementBlock("div",_hoisted_59$2,"  "))])])],512),createBaseVNode("div",_hoisted_60$2,[createBaseVNode("button",{class:"btn btn-primary",onClick:ve},"   "),unref(a)?(openBlock(),createElementBlock("button",{key:0,class:"btn",onClick:pe},"   ")):createCommentVNode("",!0),createBaseVNode("button",{class:"btn",onClick:Te},toDisplayString(fe.value),1)]),createVNode(Transition,{name:"toast"},{default:withCtx(()=>[u.value?(openBlock(),createElementBlock("div",_hoisted_61$2," "+toDisplayString(u.value),1)):createCommentVNode("",!0)]),_:1})])):createCommentVNode("",!0)]}),_:1}),createVNode(Transition,{name:"slide-up"},{default:withCtx(()=>[f.value?(openBlock(),createElementBlock("div",_hoisted_62$2,[createBaseVNode("div",_hoisted_63$2,[createBaseVNode("header",_hoisted_64$2,[createBaseVNode("span",{class:"back-btn",onClick:W[0]||(W[0]=w=>f.value=!1)}," "),createBaseVNode("span",_hoisted_65$2,toDisplayString(b.value?"":""),1),W[18]||(W[18]=createBaseVNode("span",{class:"placeholder"},null,-1))]),createBaseVNode("div",_hoisted_66$2,[createBaseVNode("div",_hoisted_67$2,[createBaseVNode("span",_hoisted_68$2,toDisplayString(T.value.icon),1),createBaseVNode("div",_hoisted_69$2,[createBaseVNode("span",_hoisted_70$2,toDisplayString(T.value.title),1),createBaseVNode("span",_hoisted_71$2,'"'+toDisplayString(T.value.description)+'"',1)])])]),createBaseVNode("div",_hoisted_72$2,[createBaseVNode("div",_hoisted_73$2,[W[19]||(W[19]=createBaseVNode("span",{class:"collection-label"}," ",-1)),createBaseVNode("span",_hoisted_74$2,toDisplayString(C.value.collected)+"/"+toDisplayString(C.value.total),1)]),S.value.length>0?(openBlock(),createElementBlock("div",_hoisted_75$2,[(openBlock(!0),createElementBlock(Fragment,null,renderList(S.value,w=>(openBlock(),createElementBlock("div",{key:w.id,class:"collection-item-full",style:normalizeStyle$1({borderColor:w.rarityColor})},[w.image?(openBlock(),createElementBlock("img",{key:0,src:w.image,alt:w.name,class:"item-thumb"},null,8,_hoisted_76$2)):(openBlock(),createElementBlock("span",_hoisted_77$2,toDisplayString(w.icon),1)),createBaseVNode("div",_hoisted_78$2,[createBaseVNode("span",_hoisted_79$2,toDisplayString(w.name),1),createBaseVNode("span",_hoisted_80$2,"$"+toDisplayString(w.price),1)])],4))),128))])):(openBlock(),createElementBlock("div",_hoisted_81$1,[...W[20]||(W[20]=[createBaseVNode("span",{class:"empty-icon"},"",-1),createBaseVNode("p",null,"",-1),createBaseVNode("p",{class:"empty-comment"},"...",-1)])]))]),E.value.length>0?(openBlock(),createElementBlock("div",_hoisted_82$1,[W[21]||(W[21]=createBaseVNode("div",{class:"bonus-label"}," ",-1)),(openBlock(!0),createElementBlock(Fragment,null,renderList(E.value,w=>(openBlock(),createElementBlock("div",{key:w.id,class:"bonus-item-full"},[createBaseVNode("span",_hoisted_83$1,toDisplayString(w.icon),1),createBaseVNode("div",_hoisted_84$1,[createBaseVNode("span",_hoisted_85$1,toDisplayString(w.name),1),createBaseVNode("span",_hoisted_86$1,toDisplayString(w.description),1)])]))),128))])):createCommentVNode("",!0)])])):createCommentVNode("",!0)]),_:1})]))}},EndingFlowModal=_export_sfc(_sfc_main$q,[["__scopeId","data-v-f84baa24"]]),_hoisted_1$m={key:0,class:"victory-overlay"},_hoisted_2$l={class:"victory-container"},_hoisted_3$k={key:"phase1",class:"victory-phase survival-phase"},_hoisted_4$j={class:"survival-content"},_hoisted_5$j={class:"survival-stats"},_hoisted_6$j={class:"stat-item"},_hoisted_7$j={class:"stat-value"},_hoisted_8$i={class:"stat-item"},_hoisted_9$h={class:"stat-value"},_hoisted_10$h={key:"phase2",class:"victory-phase collection-phase"},_hoisted_11$f={key:0,class:"collection-showcase"},_hoisted_12$f={class:"item-icon"},_hoisted_13$d={class:"item-details"},_hoisted_14$d={class:"item-name"},_hoisted_15$d={class:"item-flavor"},_hoisted_16$d={class:"item-price"},_hoisted_17$d={key:1,class:"empty-collection"},_hoisted_18$c={class:"collection-summary"},_hoisted_19$b={class:"summary-text"},_hoisted_20$b={class:"summary-cost"},_hoisted_21$a={key:"phase3",class:"victory-phase title-phase"},_hoisted_22$a={class:"title-ceremony"},_hoisted_23$9={class:"title-reveal"},_hoisted_24$9={class:"title-icon"},_hoisted_25$8={class:"title-name"},_hoisted_26$7={class:"title-desc"},_hoisted_27$7={key:0,class:"achievements"},_hoisted_28$7={class:"achievement-icon"},_hoisted_29$6={class:"achievement-info"},_hoisted_30$6={class:"achievement-name"},_hoisted_31$6={class:"achievement-desc"},_sfc_main$p={__name:"VictoryModal",props:{visible:{type:Boolean,default:!1},deathInfo:{type:Object,default:null}},emits:["restart","show-share"],setup(t,{emit:n}){const a=t,r=n,o=useGameStore(),s=ref(1),l=computed(()=>{var y;return((y=o.getVictoryTitle)==null?void 0:y.call(o))||{title:"",description:"",icon:""}}),c=computed(()=>{var y;return((y=o.getCollectedItems)==null?void 0:y.call(o))||[]}),u=computed(()=>{var y;return((y=o.getCollectionStats)==null?void 0:y.call(o))||{collected:0,total:12,percentage:0}}),d=computed(()=>{var y;return((y=o.getCollectionBonuses)==null?void 0:y.call(o))||[]}),f=computed(()=>{var y,b,T;return((y=a.deathInfo)==null?void 0:y.money)||((T=(b=o.s)==null?void 0:b.v3)==null?void 0:T.money)||0}),v=computed(()=>{var y,b,T,S,C;return((b=(y=a.deathInfo)==null?void 0:y.attributes)==null?void 0:b.health)||((C=(S=(T=o.s)==null?void 0:T.v3)==null?void 0:S.attributes)==null?void 0:C.health)||0}),_=computed(()=>c.value.reduce((y,b)=>y+(b.price||0),0));function g(){s.value<3?s.value++:s.value===3&&r("show-share")}return(y,b)=>(openBlock(),createBlock(Teleport,{to:"body"},[t.visible?(openBlock(),createElementBlock("div",_hoisted_1$m,[createBaseVNode("div",_hoisted_2$l,[createVNode(Transition,{name:"victory-phase",mode:"out-in"},{default:withCtx(()=>[s.value===1?(openBlock(),createElementBlock("div",_hoisted_3$k,[b[10]||(b[10]=createBaseVNode("div",{class:"survival-glow"},null,-1)),createBaseVNode("div",_hoisted_4$j,[b[6]||(b[6]=createBaseVNode("div",{class:"day-counter"},"DAY 366",-1)),b[7]||(b[7]=createBaseVNode("h1",{class:"survival-title"},"YOU SURVIVED",-1)),b[8]||(b[8]=createBaseVNode("p",{class:"survival-subtitle"},"",-1)),b[9]||(b[9]=createBaseVNode("div",{class:"survival-quote"},[createBaseVNode("p",null,""),createBaseVNode("p",null,""),createBaseVNode("p",{class:"highlight"},"...")],-1)),createBaseVNode("div",_hoisted_5$j,[b[2]||(b[2]=createBaseVNode("div",{class:"stat-item"},[createBaseVNode("span",{class:"stat-value"},"12"),createBaseVNode("span",{class:"stat-label"},"")],-1)),b[3]||(b[3]=createBaseVNode("div",{class:"stat-divider"},null,-1)),createBaseVNode("div",_hoisted_6$j,[createBaseVNode("span",_hoisted_7$j,"$"+toDisplayString(f.value),1),b[0]||(b[0]=createBaseVNode("span",{class:"stat-label"},"",-1))]),b[4]||(b[4]=createBaseVNode("div",{class:"stat-divider"},null,-1)),createBaseVNode("div",_hoisted_8$i,[createBaseVNode("span",_hoisted_9$h,toDisplayString(v.value),1),b[1]||(b[1]=createBaseVNode("span",{class:"stat-label"},"",-1))])]),createBaseVNode("button",{class:"next-btn",onClick:g},[...b[5]||(b[5]=[createBaseVNode("span",null,"",-1),createBaseVNode("span",{class:"arrow"},"",-1)])])])])):s.value===2?(openBlock(),createElementBlock("div",_hoisted_10$h,[b[13]||(b[13]=createBaseVNode("div",{class:"phase-header"},[createBaseVNode("span",{class:"phase-icon"},""),createBaseVNode("h2",{class:"phase-title"},""),createBaseVNode("p",{class:"phase-subtitle"},'""')],-1)),c.value.length>0?(openBlock(),createElementBlock("div",_hoisted_11$f,[(openBlock(!0),createElementBlock(Fragment,null,renderList(c.value,(T,S)=>(openBlock(),createElementBlock("div",{key:T.id,class:normalizeClass(["showcase-item",T.rarity]),style:normalizeStyle$1({animationDelay:S*.1+"s"})},[createBaseVNode("span",_hoisted_12$f,toDisplayString(T.icon),1),createBaseVNode("div",_hoisted_13$d,[createBaseVNode("span",_hoisted_14$d,toDisplayString(T.name),1),createBaseVNode("span",_hoisted_15$d,'"'+toDisplayString(T.flavor)+'"',1)]),createBaseVNode("span",_hoisted_16$d,"$"+toDisplayString(T.price),1)],6))),128))])):(openBlock(),createElementBlock("div",_hoisted_17$d,[...b[11]||(b[11]=[createBaseVNode("span",{class:"empty-icon"},"",-1),createBaseVNode("p",{class:"empty-title"},"",-1),createBaseVNode("p",{class:"empty-text"},"",-1),createBaseVNode("p",{class:"empty-comment"},"...",-1)])])),createBaseVNode("div",_hoisted_18$c,[createBaseVNode("span",_hoisted_19$b," "+toDisplayString(u.value.collected)+"/"+toDisplayString(u.value.total)+" ",1),createBaseVNode("span",_hoisted_20$b," $"+toDisplayString(_.value),1)]),createBaseVNode("button",{class:"next-btn",onClick:g},[...b[12]||(b[12]=[createBaseVNode("span",null,"",-1),createBaseVNode("span",{class:"arrow"},"",-1)])])])):s.value===3?(openBlock(),createElementBlock("div",_hoisted_21$a,[createBaseVNode("div",_hoisted_22$a,[b[15]||(b[15]=createBaseVNode("div",{class:"ceremony-badge"},"",-1)),b[16]||(b[16]=createBaseVNode("div",{class:"ceremony-label"},"",-1)),createBaseVNode("div",_hoisted_23$9,[createBaseVNode("span",_hoisted_24$9,toDisplayString(l.value.icon),1),createBaseVNode("h2",_hoisted_25$8,toDisplayString(l.value.title),1),createBaseVNode("p",_hoisted_26$7,'"'+toDisplayString(l.value.description)+'"',1)]),d.value.length>0?(openBlock(),createElementBlock("div",_hoisted_27$7,[b[14]||(b[14]=createBaseVNode("div",{class:"achievements-label"},"",-1)),(openBlock(!0),createElementBlock(Fragment,null,renderList(d.value,T=>(openBlock(),createElementBlock("div",{key:T.id,class:"achievement-item"},[createBaseVNode("span",_hoisted_28$7,toDisplayString(T.icon),1),createBaseVNode("div",_hoisted_29$6,[createBaseVNode("span",_hoisted_30$6,toDisplayString(T.name),1),createBaseVNode("span",_hoisted_31$6,toDisplayString(T.description),1)])]))),128))])):createCommentVNode("",!0)]),createBaseVNode("button",{class:"next-btn",onClick:g},[...b[17]||(b[17]=[createBaseVNode("span",null,"",-1),createBaseVNode("span",{class:"arrow"},"",-1)])])])):createCommentVNode("",!0)]),_:1})])])):createCommentVNode("",!0)]))}},VictoryModal=_export_sfc(_sfc_main$p,[["__scopeId","data-v-4082bbf8"]]),_hoisted_1$l={class:"opening-modal"},_hoisted_2$k={class:"opening-header"},_hoisted_3$j={class:"round-badge"},_hoisted_4$i={class:"round-num"},_hoisted_5$i={class:"header-text"},_hoisted_6$i={class:"mission-name"},_hoisted_7$i={class:"mission-theme"},_hoisted_8$h={class:"opening-narrative"},_hoisted_9$g={class:"narrative-content"},_hoisted_10$g={class:"opening-actions"},_sfc_main$o={__name:"RoundOpeningModal",props:{visible:{type:Boolean,default:!1},currentRound:{type:Number,default:1},missionName:{type:String,default:""},missionTheme:{type:String,default:""},openingNarrative:{type:String,default:""},failurePreview:{type:String,default:""},rumor:{type:String,default:""}},emits:["close","start"],setup(t){const n=t,a=computed(()=>n.openingNarrative?n.openingNarrative.split(`
`).filter(r=>r.trim()):[]);return(r,o)=>(openBlock(),createBlock(Transition,{name:"modal-fade"},{default:withCtx(()=>[t.visible?(openBlock(),createElementBlock("div",{key:0,class:"opening-overlay",onClick:o[1]||(o[1]=withModifiers(s=>r.$emit("close"),["self"]))},[createBaseVNode("div",_hoisted_1$l,[createBaseVNode("header",_hoisted_2$k,[createBaseVNode("div",_hoisted_3$j,[createBaseVNode("span",_hoisted_4$i,toDisplayString(t.currentRound),1),o[2]||(o[2]=createBaseVNode("span",{class:"round-label"},"",-1))]),createBaseVNode("div",_hoisted_5$i,[createBaseVNode("h2",_hoisted_6$i,toDisplayString(t.missionName),1),createBaseVNode("span",_hoisted_7$i,toDisplayString(t.missionTheme),1)])]),createBaseVNode("div",_hoisted_8$h,[createBaseVNode("div",_hoisted_9$g,[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.value,(s,l)=>(openBlock(),createElementBlock("p",{key:l,class:"narrative-line"},toDisplayString(s),1))),128))])]),createBaseVNode("div",_hoisted_10$g,[createBaseVNode("button",{class:"action-btn primary",onClick:o[0]||(o[0]=s=>r.$emit("start"))},[...o[3]||(o[3]=[createBaseVNode("span",{class:"btn-text"},"",-1),createBaseVNode("span",{class:"btn-arrow"},">>",-1)])])])])])):createCommentVNode("",!0)]),_:1}))}},RoundOpeningModal=_export_sfc(_sfc_main$o,[["__scopeId","data-v-34111bac"]]),_hoisted_1$k={class:"result-modal"},_hoisted_2$j={class:"result-header"},_hoisted_3$i={class:"behavior-icon"},_hoisted_4$h={class:"header-text"},_hoisted_5$h={class:"behavior-name"},_hoisted_6$h={key:0,class:"result-narrative"},_hoisted_7$h={class:"narrative-text"},_hoisted_8$g={key:1,class:"result-costs"},_hoisted_9$f={class:"effects-grid"},_hoisted_10$f={class:"effect-icon"},_hoisted_11$e={class:"effect-value"},_hoisted_12$e={key:2,class:"result-effects"},_hoisted_13$c={class:"effects-grid"},_hoisted_14$c={class:"effect-icon"},_hoisted_15$c={class:"effect-value"},_hoisted_16$c={class:"event-content"},_hoisted_17$c={key:0,class:"event-desc"},_hoisted_18$b={class:"event-content"},_hoisted_19$a={key:0,class:"event-desc"},_hoisted_20$a={class:"result-actions"},_sfc_main$n={__name:"BehaviorResultModal",props:{visible:{type:Boolean,default:!1},behaviorName:{type:String,default:""},behaviorIcon:{type:String,default:""},behaviorCategory:{type:String,default:"work"},narrative:{type:String,default:""},effects:{type:Object,default:()=>({})},costs:{type:Object,default:()=>({})},critTriggered:{type:Boolean,default:!1},riskTriggered:{type:Boolean,default:!1},critBonus:{type:String,default:""},riskPenalty:{type:String,default:""}},emits:["continue"],setup(t){const n=t,a={money:"",health:"",san:"",credit:"",luck:"",risk_resist:""},r=computed(()=>n.behaviorCategory==="danger"?"":n.critTriggered?"!":n.riskTriggered?"":""),o=computed(()=>n.costs&&Object.keys(n.costs).length>0),s=computed(()=>n.effects&&Object.keys(n.effects).length>0),l=computed(()=>{if(!n.costs)return[];const u={money:"",health:"",san:"SAN",credit:""};return Object.entries(n.costs).filter(([d,f])=>f!==0&&f!==void 0).map(([d,f])=>{const v=d==="money"?`-$${Math.abs(f)}`:`${f}`;return{key:d,icon:a[d]||"",name:u[d]||d,value:f,displayValue:v}})}),c=computed(()=>{if(!n.effects)return[];const u={money:"",health:"",san:"SAN",credit:"",luck:"",risk_resist:""};return Object.entries(n.effects).filter(([d,f])=>f!==0&&f!==void 0).map(([d,f])=>{const v=f>0,_=d==="money"?`${v?"+":"-"}$${Math.abs(f)}`:`${v?"+":""}${f}`;return{key:d,icon:a[d]||"",name:u[d]||d,value:f,displayValue:_,type:v?"positive":"negative"}})});return(u,d)=>(openBlock(),createBlock(Transition,{name:"result-fade"},{default:withCtx(()=>[t.visible?(openBlock(),createElementBlock("div",{key:0,class:"result-overlay",onClick:d[1]||(d[1]=withModifiers(f=>u.$emit("continue"),["self"]))},[createBaseVNode("div",_hoisted_1$k,[createBaseVNode("header",_hoisted_2$j,[createBaseVNode("span",_hoisted_3$i,toDisplayString(t.behaviorIcon),1),createBaseVNode("div",_hoisted_4$h,[createBaseVNode("h2",_hoisted_5$h,toDisplayString(t.behaviorName),1),createBaseVNode("span",{class:normalizeClass(["behavior-status",{danger:t.behaviorCategory==="danger"}])},toDisplayString(r.value),3)])]),t.narrative?(openBlock(),createElementBlock("div",_hoisted_6$h,[createBaseVNode("p",_hoisted_7$h,'"'+toDisplayString(t.narrative)+'"',1)])):createCommentVNode("",!0),o.value?(openBlock(),createElementBlock("div",_hoisted_8$g,[d[2]||(d[2]=createBaseVNode("div",{class:"section-label"},"",-1)),createBaseVNode("div",_hoisted_9$f,[(openBlock(!0),createElementBlock(Fragment,null,renderList(l.value,f=>(openBlock(),createElementBlock("div",{key:f.key,class:"effect-item negative"},[createBaseVNode("span",_hoisted_10$f,toDisplayString(f.icon),1),createBaseVNode("span",_hoisted_11$e,toDisplayString(f.displayValue),1)]))),128))])])):createCommentVNode("",!0),s.value?(openBlock(),createElementBlock("div",_hoisted_12$e,[d[3]||(d[3]=createBaseVNode("div",{class:"section-label"},"",-1)),createBaseVNode("div",_hoisted_13$c,[(openBlock(!0),createElementBlock(Fragment,null,renderList(c.value,f=>(openBlock(),createElementBlock("div",{key:f.key,class:normalizeClass(["effect-item",f.type])},[createBaseVNode("span",_hoisted_14$c,toDisplayString(f.icon),1),createBaseVNode("span",_hoisted_15$c,toDisplayString(f.displayValue),1)],2))),128))])])):createCommentVNode("",!0),t.critTriggered?(openBlock(),createElementBlock("div",{key:3,class:normalizeClass(["special-event","crit"])},[d[5]||(d[5]=createBaseVNode("span",{class:"event-icon"},"",-1)),createBaseVNode("div",_hoisted_16$c,[d[4]||(d[4]=createBaseVNode("span",{class:"event-label"},"!",-1)),t.critBonus?(openBlock(),createElementBlock("span",_hoisted_17$c," "+toDisplayString(t.critBonus),1)):createCommentVNode("",!0)])])):createCommentVNode("",!0),t.riskTriggered?(openBlock(),createElementBlock("div",{key:4,class:normalizeClass(["special-event","risk"])},[d[7]||(d[7]=createBaseVNode("span",{class:"event-icon"},"",-1)),createBaseVNode("div",_hoisted_18$b,[d[6]||(d[6]=createBaseVNode("span",{class:"event-label"},"!",-1)),t.riskPenalty?(openBlock(),createElementBlock("span",_hoisted_19$a," "+toDisplayString(t.riskPenalty),1)):createCommentVNode("",!0)])])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_20$a,[createBaseVNode("button",{class:"action-btn primary",onClick:d[0]||(d[0]=f=>u.$emit("continue"))},[...d[8]||(d[8]=[createBaseVNode("span",{class:"btn-text"},"",-1),createBaseVNode("span",{class:"btn-arrow"},">>",-1)])])])])])):createCommentVNode("",!0)]),_:1}))}},BehaviorResultModal=_export_sfc(_sfc_main$n,[["__scopeId","data-v-70a1bc9d"]]),_hoisted_1$j={class:"choice-header"},_hoisted_2$i={class:"header-badge"},_hoisted_3$h={key:0,class:"escape-hint"},_hoisted_4$g={class:"hint-text"},_hoisted_5$g={key:1,class:"choice-narrative"},_hoisted_6$g={class:"choice-options"},_hoisted_7$g=["onClick"],_hoisted_8$f={class:"choice-radio"},_hoisted_9$e={class:"choice-content"},_hoisted_10$e={class:"choice-label"},_hoisted_11$d={key:0,class:"choice-desc"},_hoisted_12$d={key:1,class:"choice-reason"},_sfc_main$m={__name:"SettlementChoiceModal",props:{visible:{type:Boolean,default:!1},currentRound:{type:Number,default:1},narrative:{type:String,default:""},choices:{type:Array,default:()=>[]},playerState:{type:Object,default:()=>({money:0,attributes:{}})},escapeHint:{type:String,default:"..."}},emits:["select"],setup(t,{emit:n}){const a=t,r=n,o=ref(!1),s=ref(!1);watch(()=>a.visible,v=>{v&&(s.value=!1)});function l(){o.value=!0,s.value=!0,setTimeout(()=>{o.value=!1},500)}const c=computed(()=>a.narrative?a.narrative.split(`
`).filter(v=>v.trim()):[]);function u(v){var _;if(!v.requires||v.requires.length===0)return!0;for(const g of v.requires)if(g.type==="money"){if((a.playerState.money||0)<g.value)return!1}else if(g.type==="stat"&&(((_=a.playerState.attributes)==null?void 0:_[g.stat])||0)<g.value)return!1;return!0}function d(v){var _;if(!v.requires)return"";for(const g of v.requires)if(g.type==="money"){if((a.playerState.money||0)<g.value)return` $${g.value} (: $${a.playerState.money||0})`}else if(g.type==="stat"){const y=((_=a.playerState.attributes)==null?void 0:_[g.stat])||0,b={health:"",san:"SAN",credit:"",luck:""};if(y<g.value)return` ${b[g.stat]||g.stat} >= ${g.value} (: ${y})`}return""}function f(v){u(v)&&r("select",v)}return(v,_)=>(openBlock(),createBlock(Transition,{name:"choice-fade"},{default:withCtx(()=>[t.visible?(openBlock(),createElementBlock("div",{key:0,class:"choice-overlay",onClick:withModifiers(l,["self"])},[createBaseVNode("div",{class:normalizeClass(["choice-modal",{shake:o.value}])},[createBaseVNode("header",_hoisted_1$j,[createBaseVNode("span",_hoisted_2$i," "+toDisplayString(t.currentRound)+"   ",1),createBaseVNode("button",{class:"fake-close-btn",onClick:l,title:""},[..._[0]||(_[0]=[createBaseVNode("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[createBaseVNode("path",{d:"M1 1L13 13M1 13L13 1",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"})],-1)])])]),s.value?(openBlock(),createElementBlock("div",_hoisted_3$h,[_[1]||(_[1]=createBaseVNode("span",{class:"hint-icon"},"",-1)),createBaseVNode("span",_hoisted_4$g,toDisplayString(t.escapeHint||"..."),1)])):createCommentVNode("",!0),t.narrative?(openBlock(),createElementBlock("div",_hoisted_5$g,[(openBlock(!0),createElementBlock(Fragment,null,renderList(c.value,(g,y)=>(openBlock(),createElementBlock("p",{key:y,class:"narrative-line"},toDisplayString(g),1))),128))])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_6$g,[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.choices,g=>(openBlock(),createElementBlock("div",{key:g.id,class:normalizeClass(["choice-option",{enabled:u(g),disabled:!u(g)}]),onClick:y=>f(g)},[createBaseVNode("span",_hoisted_8$f,toDisplayString(u(g)?"":""),1),createBaseVNode("div",_hoisted_9$e,[createBaseVNode("span",_hoisted_10$e,toDisplayString(g.label),1),g.description?(openBlock(),createElementBlock("span",_hoisted_11$d,toDisplayString(g.description),1)):createCommentVNode("",!0),u(g)?createCommentVNode("",!0):(openBlock(),createElementBlock("span",_hoisted_12$d,toDisplayString(d(g)),1))])],10,_hoisted_7$g))),128))])],2)])):createCommentVNode("",!0)]),_:1}))}},SettlementChoiceModal=_export_sfc(_sfc_main$m,[["__scopeId","data-v-e4e967d7"]]),_hoisted_1$i={class:"number-value"},_sfc_main$l={__name:"AnimatedNumber",props:{value:{type:Number,required:!0},prefix:{type:String,default:""},suffix:{type:String,default:""}},setup(t){const n=t,a=ref(!1),r=ref(0),o=ref(null);let s=null;return onMounted(()=>{o.value=n.value}),watch(()=>n.value,l=>{if(o.value===null){o.value=l;return}const c=l-o.value;c!==0&&(r.value=c,a.value=!0,s&&clearTimeout(s),s=setTimeout(()=>{a.value=!1},1200)),o.value=l},{flush:"post"}),(l,c)=>(openBlock(),createElementBlock("span",{class:normalizeClass(["animated-number",{changing:a.value,increase:r.value>0,decrease:r.value<0}])},[createBaseVNode("span",_hoisted_1$i,toDisplayString(t.prefix)+toDisplayString(t.value)+toDisplayString(t.suffix),1),a.value?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(["delta-indicator",r.value>0?"increase":"decrease"])},toDisplayString(r.value>0?"+":"")+toDisplayString(r.value),3)):createCommentVNode("",!0)],2))}},AnimatedNumber=_export_sfc(_sfc_main$l,[["__scopeId","data-v-395cfd5d"]]),_hoisted_1$h={class:"panel-header"},_hoisted_2$h={key:0,class:"changed-badge"},_hoisted_3$g={class:"housing-list"},_hoisted_4$f=["onClick"],_hoisted_5$f={class:"housing-header"},_hoisted_6$f={class:"housing-icon"},_hoisted_7$f={class:"housing-info"},_hoisted_8$e={class:"housing-name"},_hoisted_9$d={key:0,class:"housing-expense"},_hoisted_10$d={key:1,class:"housing-expense free"},_hoisted_11$c={key:0,class:"current-badge"},_hoisted_12$c={class:"housing-desc"},_hoisted_13$b={class:"housing-effects"},_hoisted_14$b={class:"effect-item san-max"},_hoisted_15$b={class:"effect-item cost"},_hoisted_16$b={key:0,class:"housing-status"},_hoisted_17$b={key:0,class:"status-warning"},_hoisted_18$a={key:1,class:"status-warning"},_hoisted_19$9={class:"panel-footer"},_hoisted_20$9={class:"footer-info"},_hoisted_21$9={class:"money-info"},_hoisted_22$9={class:"money-value"},_hoisted_23$8={class:"confirm-content"},_hoisted_24$8={class:"confirm-housing"},_hoisted_25$7={class:"confirm-icon"},_hoisted_26$6={class:"confirm-info"},_hoisted_27$6={class:"confirm-name"},_hoisted_28$6={class:"confirm-expense"},_hoisted_29$5={class:"confirm-desc"},_hoisted_30$5={class:"confirm-effects"},_hoisted_31$5={class:"effect-item san-max"},_hoisted_32$5={class:"effect-item cost"},_hoisted_33$5={key:0,class:"inner-thought"},_hoisted_34$5={class:"thought-text"},_sfc_main$k={__name:"HousingPanel",props:{housingOptions:{type:Array,default:()=>[]},currentHousing:{type:Object,default:null},playerMoney:{type:Number,default:0},hasChangedThisRound:{type:Boolean,default:!1}},emits:["select","close"],setup(t,{emit:n}){const a=n,r=ref(null),o=ref(null);function s(d){return{1:"",2:"",3:""}[d]||""}function l(d){d.canSwitch&&(r.value=d,o.value=d.id)}function c(){r.value=null,o.value=null}function u(){r.value&&(a("select",r.value.id,r.value.innerThought),r.value=null,o.value=null)}return(d,f)=>(openBlock(),createElementBlock("div",{class:"housing-panel",onClick:f[1]||(f[1]=withModifiers(()=>{},["stop"]))},[r.value?(openBlock(),createElementBlock(Fragment,{key:1},[createBaseVNode("div",{class:"panel-header"},[f[4]||(f[4]=createBaseVNode("h4",{class:"panel-title"},"",-1)),createBaseVNode("button",{class:"panel-close",onClick:c},"")]),createBaseVNode("div",_hoisted_23$8,[createBaseVNode("div",_hoisted_24$8,[createBaseVNode("span",_hoisted_25$7,toDisplayString(s(r.value.id)),1),createBaseVNode("div",_hoisted_26$6,[createBaseVNode("span",_hoisted_27$6,toDisplayString(r.value.name),1),createBaseVNode("span",_hoisted_28$6,"$"+toDisplayString(r.value.monthlyExpense)+"/",1)])]),createBaseVNode("p",_hoisted_29$5,toDisplayString(r.value.description),1),createBaseVNode("div",_hoisted_30$5,[createBaseVNode("span",_hoisted_31$5,"  SAN "+toDisplayString(r.value.sanMax||100),1),createBaseVNode("span",_hoisted_32$5,"   $"+toDisplayString(r.value.cost||r.value.monthlyExpense||0),1)]),r.value.flavorText?(openBlock(),createElementBlock("div",_hoisted_33$5,[f[5]||(f[5]=createBaseVNode("span",{class:"thought-icon"},"",-1)),createBaseVNode("p",_hoisted_34$5,toDisplayString(r.value.flavorText),1)])):createCommentVNode("",!0)]),createBaseVNode("div",{class:"confirm-actions"},[createBaseVNode("button",{class:"btn-cancel",onClick:c},""),createBaseVNode("button",{class:"btn-confirm",onClick:u},"")])],64)):(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("div",_hoisted_1$h,[f[2]||(f[2]=createBaseVNode("h4",{class:"panel-title"},"",-1)),t.hasChangedThisRound?(openBlock(),createElementBlock("div",_hoisted_2$h,"")):createCommentVNode("",!0),createBaseVNode("button",{class:"panel-close",onClick:f[0]||(f[0]=v=>d.$emit("close"))},"")]),createBaseVNode("div",_hoisted_3$g,[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.housingOptions,v=>(openBlock(),createElementBlock("div",{key:v.id,class:normalizeClass(["housing-option",{current:v.isCurrent,disabled:!v.canSwitch&&!v.isCurrent,selected:v.id===o.value}]),onClick:_=>l(v)},[createBaseVNode("div",_hoisted_5$f,[createBaseVNode("span",_hoisted_6$f,toDisplayString(s(v.id)),1),createBaseVNode("div",_hoisted_7$f,[createBaseVNode("span",_hoisted_8$e,toDisplayString(v.name),1),v.monthlyExpense>0?(openBlock(),createElementBlock("span",_hoisted_9$d," $"+toDisplayString(v.monthlyExpense)+"/ ",1)):(openBlock(),createElementBlock("span",_hoisted_10$d,""))]),v.isCurrent?(openBlock(),createElementBlock("span",_hoisted_11$c,"")):createCommentVNode("",!0)]),createBaseVNode("p",_hoisted_12$c,toDisplayString(v.description),1),createBaseVNode("div",_hoisted_13$b,[createBaseVNode("span",_hoisted_14$b,"  SAN "+toDisplayString(v.sanMax||100),1),createBaseVNode("span",_hoisted_15$b,"  $"+toDisplayString(v.cost||v.monthlyExpense||0)+"/ ",1)]),v.isCurrent?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_16$b,[v.canAfford?t.hasChangedThisRound?(openBlock(),createElementBlock("span",_hoisted_18$a,"")):createCommentVNode("",!0):(openBlock(),createElementBlock("span",_hoisted_17$b,""))]))],10,_hoisted_4$f))),128))]),createBaseVNode("div",_hoisted_19$9,[createBaseVNode("div",_hoisted_20$9,[createBaseVNode("div",_hoisted_21$9,[f[3]||(f[3]=createBaseVNode("span",{class:"money-label"},"",-1)),createBaseVNode("span",_hoisted_22$9,"$"+toDisplayString(t.playerMoney),1)])])])],64))]))}},HousingPanel=_export_sfc(_sfc_main$k,[["__scopeId","data-v-faf39dcf"]]),_hoisted_1$g={class:"panel-header"},_hoisted_2$g={class:"food-list"},_hoisted_3$f=["onClick"],_hoisted_4$e={class:"food-header"},_hoisted_5$e={class:"food-icon"},_hoisted_6$e={class:"food-info"},_hoisted_7$e={class:"food-name"},_hoisted_8$d={key:0,class:"food-cost"},_hoisted_9$c={key:1,class:"food-cost free"},_hoisted_10$c={key:0,class:"current-badge"},_hoisted_11$b={class:"food-desc"},_hoisted_12$b={class:"food-effects"},_hoisted_13$a={key:0,class:"food-status"},_hoisted_14$a={class:"confirm-content"},_hoisted_15$a={class:"confirm-strategy"},_hoisted_16$a={class:"confirm-icon"},_hoisted_17$a={class:"confirm-info"},_hoisted_18$9={class:"confirm-name"},_hoisted_19$8={key:0,class:"confirm-cost"},_hoisted_20$8={key:1,class:"confirm-cost free"},_hoisted_21$8={class:"confirm-desc"},_hoisted_22$8={class:"confirm-effects"},_hoisted_23$7={key:0,class:"inner-thought"},_hoisted_24$7={class:"thought-text"},_sfc_main$j={__name:"FoodPanel",props:{foodItems:{type:Array,default:()=>[]},hasChosen:{type:Boolean,default:!1},currentStrategy:{type:Object,default:null}},emits:["select","close"],setup(t,{emit:n}){const a=n,r=ref(null);function o(u){return{diet_1:"",diet_2:"",diet_3:"",instant_noodles:"",street_food:"",home_cooking:"",restaurant_meal:"",dumpster_diving:"",church_meal:""}[u]||null}function s(u){(u.canSelect||u.isCurrent)&&(r.value=u)}function l(){r.value=null}function c(){r.value&&(a("select",r.value.id,r.value.innerThought),r.value=null)}return(u,d)=>{var f,v,_,g;return openBlock(),createElementBlock("div",{class:"food-panel",onClick:d[1]||(d[1]=withModifiers(()=>{},["stop"]))},[r.value?(openBlock(),createElementBlock(Fragment,{key:1},[createBaseVNode("div",{class:"panel-header"},[d[5]||(d[5]=createBaseVNode("h4",{class:"panel-title"},"",-1)),createBaseVNode("button",{class:"panel-close",onClick:l},"")]),createBaseVNode("div",_hoisted_14$a,[createBaseVNode("div",_hoisted_15$a,[createBaseVNode("span",_hoisted_16$a,toDisplayString(o(r.value.id)||r.value.icon),1),createBaseVNode("div",_hoisted_17$a,[createBaseVNode("span",_hoisted_18$9,toDisplayString(r.value.name),1),r.value.moneyCost?(openBlock(),createElementBlock("span",_hoisted_19$8,"$"+toDisplayString(r.value.moneyCost)+"/",1)):(openBlock(),createElementBlock("span",_hoisted_20$8,""))])]),createBaseVNode("p",_hoisted_21$8,toDisplayString(r.value.description),1),createBaseVNode("div",_hoisted_22$8,[createBaseVNode("span",{class:normalizeClass(["effect-item",{positive:((f=r.value.effects)==null?void 0:f.health)>0,negative:((v=r.value.effects)==null?void 0:v.health)<0}])},"   "+toDisplayString(((_=r.value.effects)==null?void 0:_.health)>0?"+":"")+toDisplayString(((g=r.value.effects)==null?void 0:g.health)||0)+"/ ",3)]),r.value.flavorText?(openBlock(),createElementBlock("div",_hoisted_23$7,[d[6]||(d[6]=createBaseVNode("span",{class:"thought-icon"},"",-1)),createBaseVNode("p",_hoisted_24$7,toDisplayString(r.value.flavorText),1)])):createCommentVNode("",!0)]),createBaseVNode("div",{class:"confirm-actions"},[createBaseVNode("button",{class:"btn-cancel",onClick:l},""),createBaseVNode("button",{class:"btn-confirm",onClick:c},"")])],64)):(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("div",_hoisted_1$g,[d[2]||(d[2]=createBaseVNode("h4",{class:"panel-title"},"",-1)),createBaseVNode("div",{class:normalizeClass(["strategy-status",{chosen:t.hasChosen}])},toDisplayString(t.hasChosen?"":""),3),createBaseVNode("button",{class:"panel-close",onClick:d[0]||(d[0]=y=>u.$emit("close"))},"")]),createBaseVNode("div",_hoisted_2$g,[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.foodItems,y=>{var b,T,S,C;return openBlock(),createElementBlock("div",{key:y.id,class:normalizeClass(["food-option",{current:y.isCurrent,disabled:!y.canSelect&&!y.isCurrent}]),onClick:E=>s(y)},[createBaseVNode("div",_hoisted_4$e,[createBaseVNode("span",_hoisted_5$e,toDisplayString(o(y.id)||y.icon),1),createBaseVNode("div",_hoisted_6$e,[createBaseVNode("span",_hoisted_7$e,toDisplayString(y.name),1),y.moneyCost?(openBlock(),createElementBlock("span",_hoisted_8$d,"$"+toDisplayString(y.moneyCost)+"/",1)):(openBlock(),createElementBlock("span",_hoisted_9$c,""))]),y.isCurrent?(openBlock(),createElementBlock("span",_hoisted_10$c,"")):createCommentVNode("",!0)]),createBaseVNode("p",_hoisted_11$b,toDisplayString(y.description),1),createBaseVNode("div",_hoisted_12$b,[createBaseVNode("span",{class:normalizeClass(["effect-item",{positive:((b=y.effects)==null?void 0:b.health)>0,negative:((T=y.effects)==null?void 0:T.health)<0}])},"  "+toDisplayString(((S=y.effects)==null?void 0:S.health)>0?"+":"")+toDisplayString(((C=y.effects)==null?void 0:C.health)||0)+"/ ",3)]),!y.canAfford&&!y.isCurrent?(openBlock(),createElementBlock("div",_hoisted_13$a,[...d[3]||(d[3]=[createBaseVNode("span",{class:"status-warning"},"",-1)])])):createCommentVNode("",!0)],10,_hoisted_3$f)}),128))]),d[4]||(d[4]=createBaseVNode("div",{class:"panel-tip"},[createBaseVNode("span",{class:"tip-icon"},""),createBaseVNode("span",{class:"tip-text"},"")],-1))],64))])}}},FoodPanel=_export_sfc(_sfc_main$j,[["__scopeId","data-v-57db3992"]]),_hoisted_1$f={class:"status-bar"},_hoisted_2$f={class:"status-icon"},_hoisted_3$e={class:"status-text"},_hoisted_4$d={class:"status-arrow"},_hoisted_5$d={class:"status-icon"},_hoisted_6$d={class:"status-text"},_hoisted_7$d={class:"status-arrow"},_sfc_main$i={__name:"StatusBar",props:{housingOptions:{type:Array,default:()=>[]},currentHousing:{type:Object,default:null},foodItems:{type:Array,default:()=>[]},hasChosen:{type:Boolean,default:!1},currentStrategy:{type:Object,default:null},playerMoney:{type:Number,default:0},hasChangedHousingThisRound:{type:Boolean,default:!1}},emits:["switch-housing","select-strategy"],setup(t,{emit:n}){const a=t,r=n,o=ref(!1),s=ref(!1),l=ref(!1),c=ref(!1),u=computed(()=>{var C;return{1:"",2:"",3:""}[(C=a.currentHousing)==null?void 0:C.id]||""}),d=computed(()=>{if(!a.currentHousing)return"";const S=a.currentHousing;return S.monthlyExpense>0?`${S.name} $${S.monthlyExpense}/`:S.name}),f=computed(()=>a.currentStrategy?{diet_1:"",diet_2:"",diet_3:"",instant_noodles:"",street_food:"",home_cooking:"",restaurant_meal:"",dumpster_diving:"",church_meal:""}[a.currentStrategy.id]||"":""),v=computed(()=>a.currentStrategy?a.currentStrategy.name:"");function _(){s.value=!1,o.value=!o.value,o.value&&(l.value=!0)}function g(){o.value=!1,s.value=!s.value,s.value&&(c.value=!0)}function y(){o.value=!1,s.value=!1}function b(S){r("switch-housing",S),o.value=!1}function T(S){r("select-strategy",S),s.value=!1}return(S,C)=>(openBlock(),createElementBlock("div",_hoisted_1$f,[createBaseVNode("div",{class:normalizeClass(["status-item housing",{active:o.value,confirmed:l.value}]),onClick:_},[createBaseVNode("span",_hoisted_2$f,toDisplayString(u.value),1),createBaseVNode("span",_hoisted_3$e,toDisplayString(d.value),1),createBaseVNode("span",_hoisted_4$d,toDisplayString(o.value?"":""),1)],2),createBaseVNode("div",{class:normalizeClass(["status-item food",{active:s.value,confirmed:t.hasChosen||c.value}]),onClick:g},[createBaseVNode("span",_hoisted_5$d,toDisplayString(f.value),1),createBaseVNode("span",_hoisted_6$d,toDisplayString(v.value),1),createBaseVNode("span",_hoisted_7$d,toDisplayString(s.value?"":""),1)],2),createVNode(Transition,{name:"panel-slide"},{default:withCtx(()=>[o.value?(openBlock(),createBlock(HousingPanel,{key:0,"housing-options":t.housingOptions,"current-housing":t.currentHousing,"player-money":t.playerMoney,"has-changed-this-round":t.hasChangedHousingThisRound,onSelect:b,onClose:C[0]||(C[0]=E=>o.value=!1)},null,8,["housing-options","current-housing","player-money","has-changed-this-round"])):createCommentVNode("",!0)]),_:1}),createVNode(Transition,{name:"panel-slide"},{default:withCtx(()=>[s.value?(openBlock(),createBlock(FoodPanel,{key:0,"food-items":t.foodItems,"has-chosen":t.hasChosen,"current-strategy":t.currentStrategy,onSelect:T,onClose:C[1]||(C[1]=E=>s.value=!1)},null,8,["food-items","has-chosen","current-strategy"])):createCommentVNode("",!0)]),_:1}),o.value||s.value?(openBlock(),createElementBlock("div",{key:0,class:"panel-backdrop",onClick:y})):createCommentVNode("",!0)]))}},StatusBar=_export_sfc(_sfc_main$i,[["__scopeId","data-v-d3e8db35"]]),_hoisted_1$e={class:"survival-modal"},_hoisted_2$e={class:"survival-header"},_hoisted_3$d={class:"header-icon"},_hoisted_4$c={class:"header-text"},_hoisted_5$c={class:"header-title"},_hoisted_6$c={class:"header-sub"},_hoisted_7$c={class:"survival-content"},_hoisted_8$c={class:"section-icon"},_hoisted_9$b={class:"section-body"},_hoisted_10$b={class:"section-title"},_hoisted_11$a={class:"section-desc"},_hoisted_12$a={key:0,class:"section-effects"},_hoisted_13$9={class:"section-icon"},_hoisted_14$9={class:"section-body"},_hoisted_15$9={class:"section-title"},_hoisted_16$9={class:"section-desc"},_hoisted_17$9={key:0,class:"section-effects"},_hoisted_18$8={key:1,class:"summary-bar"},_sfc_main$h={__name:"SurvivalCheckModal",props:{visible:{type:Boolean,default:!1},foodData:{type:Object,default:()=>({hasStrategy:!1,strategy:null,effects:{}})},housingData:{type:Object,default:()=>({housing:null,effects:{},rentPaid:0,rentFailed:!1})}},emits:["confirm"],setup(t,{emit:n}){const a=t,r=n,o={health:"",san:"SAN",sanMax:"SAN",credit:"",luck:"",money:""},s=computed(()=>{var y;return a.housingData.isExposed?"":!a.foodData.hasStrategy&&((y=a.housingData.housing)==null?void 0:y.id)==="1"?"":!a.foodData.hasStrategy||a.housingData.rentFailed?"":""}),l=computed(()=>{var y;return a.housingData.isExposed?"":!a.foodData.hasStrategy&&((y=a.housingData.housing)==null?void 0:y.id)==="1"?"":a.foodData.hasStrategy?a.housingData.rentFailed?"":"":""}),c=computed(()=>{var E;const y=a.foodData,b=f(y.effects||{});if(!y.hasStrategy)return{type:"danger",icon:"",title:"",desc:"...",effects:b};const T=y.strategy;if(!T)return{type:"neutral",icon:"",title:"",desc:"",effects:b};(E=y.effects)!=null&&E.health;let S="neutral",C=T.flavorText||"";return T.id==="diet_1"?(S="warning",C="..."):T.id==="diet_2"?(S="neutral",C=""):T.id==="diet_3"&&(S="good",C=""),{type:S,icon:T.icon||"",title:T.name||"",desc:C,effects:b}}),u=computed(()=>{const y=a.housingData,b=f(y.effects||{});if(y.isExposed)return{type:"danger",icon:"",title:"",desc:y.exposureDesc||"...",effects:b};if(y.rentFailed)return{type:"danger",icon:"",title:"",desc:"...",effects:b};const T=y.housing;if(!T)return{type:"neutral",icon:"",title:"",desc:"",effects:b};const C={1:{type:"danger",icon:"",desc:"..."},2:{type:"warning",icon:"",desc:""},3:{type:"good",icon:"",desc:""}}[T.id]||{type:"neutral",icon:"",desc:""};let E=T.name||"",x=C.desc;return y.isFirstRound&&(x+=""),{type:C.type,icon:C.icon,title:E,desc:x,effects:b}}),d=computed(()=>{var T;if(a.housingData.isExposed)return"...";const y=!a.foodData.hasStrategy,b=((T=a.housingData.housing)==null?void 0:T.id)==="1"||a.housingData.rentFailed;return y&&b?"...":y?"...":b?"...":""});function f(y){const b=[];for(const[T,S]of Object.entries(y))(S!==0||T==="sanMax")&&(T==="sanMax"?b.push({key:T,label:o[T]||T,value:S,isAbsolute:!0}):T==="money"?b.push({key:T,label:o[T]||T,value:S,isCost:!0}):b.push({key:T,label:o[T]||T,value:S}));return b}function v(y){return y.isCost?"cost":y.isAbsolute?y.value>=130?"positive":y.value<=100?"negative":"neutral":y.value>0?"positive":"negative"}function _(y){return y.isAbsolute?y.value:y.isCost?y.value<0?`-$${Math.abs(y.value)}`:`+$${y.value}`:y.value>0?`+${y.value}`:`${y.value}`}function g(){r("confirm")}return(y,b)=>(openBlock(),createBlock(Transition,{name:"modal-fade"},{default:withCtx(()=>[t.visible?(openBlock(),createElementBlock("div",{key:0,class:"survival-overlay",onClick:withModifiers(g,["self"])},[createBaseVNode("div",_hoisted_1$e,[createBaseVNode("header",_hoisted_2$e,[createBaseVNode("div",_hoisted_3$d,toDisplayString(s.value),1),createBaseVNode("div",_hoisted_4$c,[createBaseVNode("h2",_hoisted_5$c,toDisplayString(l.value),1),createBaseVNode("span",_hoisted_6$c,toDisplayString(t.housingData.isExposed?"":""),1)])]),createBaseVNode("div",_hoisted_7$c,[t.housingData.isExposed?createCommentVNode("",!0):(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["check-section",c.value.type])},[createBaseVNode("div",_hoisted_8$c,toDisplayString(c.value.icon),1),createBaseVNode("div",_hoisted_9$b,[createBaseVNode("div",_hoisted_10$b,toDisplayString(c.value.title),1),createBaseVNode("div",_hoisted_11$a,toDisplayString(c.value.desc),1),c.value.effects.length?(openBlock(),createElementBlock("div",_hoisted_12$a,[(openBlock(!0),createElementBlock(Fragment,null,renderList(c.value.effects,(T,S)=>(openBlock(),createElementBlock("span",{key:S,class:normalizeClass(["effect-tag",v(T)])},toDisplayString(T.label)+" "+toDisplayString(_(T)),3))),128))])):createCommentVNode("",!0)])],2)),createBaseVNode("div",{class:normalizeClass(["check-section",u.value.type])},[createBaseVNode("div",_hoisted_13$9,toDisplayString(u.value.icon),1),createBaseVNode("div",_hoisted_14$9,[createBaseVNode("div",_hoisted_15$9,toDisplayString(u.value.title),1),createBaseVNode("div",_hoisted_16$9,toDisplayString(u.value.desc),1),u.value.effects.length?(openBlock(),createElementBlock("div",_hoisted_17$9,[(openBlock(!0),createElementBlock(Fragment,null,renderList(u.value.effects,(T,S)=>(openBlock(),createElementBlock("span",{key:S,class:normalizeClass(["effect-tag",v(T)])},toDisplayString(T.label)+" "+toDisplayString(_(T)),3))),128))])):createCommentVNode("",!0)])],2),d.value?(openBlock(),createElementBlock("div",_hoisted_18$8,toDisplayString(d.value),1)):createCommentVNode("",!0)]),createBaseVNode("div",{class:"survival-actions"},[createBaseVNode("button",{class:"confirm-btn",onClick:g},"  ")])])])):createCommentVNode("",!0)]),_:1}))}},SurvivalCheckModal=_export_sfc(_sfc_main$h,[["__scopeId","data-v-5bce1111"]]),_hoisted_1$d={class:"report-modal"},_hoisted_2$d={class:"report-header"},_hoisted_3$c={class:"header-text"},_hoisted_4$b={class:"header-title"},_hoisted_5$b={class:"report-content"},_hoisted_6$b={class:"report-section"},_hoisted_7$b={class:"section-body"},_hoisted_8$b={class:"action-summary"},_hoisted_9$a={class:"highlight"},_hoisted_10$a={key:0,class:"action-list"},_hoisted_11$9={key:1,class:"action-empty"},_hoisted_12$9={class:"report-section"},_hoisted_13$8={class:"section-body"},_hoisted_14$8={class:"finance-row"},_hoisted_15$8={key:0,class:"finance-item income"},_hoisted_16$8={class:"finance-value"},_hoisted_17$8={key:1,class:"finance-item expense"},_hoisted_18$7={class:"finance-value"},_hoisted_19$7={key:0,class:"finance-details"},_hoisted_20$7={key:0,class:"detail-row"},_hoisted_21$7={class:"detail-label"},_hoisted_22$7={class:"detail-cost"},_hoisted_23$6={key:1,class:"detail-row"},_hoisted_24$6={class:"detail-label"},_hoisted_25$6={class:"detail-cost"},_hoisted_26$5={key:2,class:"detail-row"},_hoisted_27$5={class:"detail-label"},_hoisted_28$5={key:0,class:"report-section"},_hoisted_29$4={class:"section-body"},_hoisted_30$4={class:"attr-changes"},_hoisted_31$4={class:"attr-icon"},_hoisted_32$4={class:"attr-name"},_hoisted_33$4={class:"attr-values"},_hoisted_34$4={class:"attr-delta"},_sfc_main$g={__name:"MonthlyReportModal",props:{visible:{type:Boolean,default:!1},round:{type:Number,default:1},behaviors:{type:Array,default:()=>[]},behaviorCount:{type:Number,default:0},financials:{type:Object,default:()=>({income:0,expense:0,net:0})},attributeChanges:{type:Array,default:()=>[]},foodStrategy:{type:Object,default:null},housing:{type:Object,default:null}},emits:["confirm"],setup(t,{emit:n}){const a=t,r=n,o=computed(()=>{var d;const u=a.foodStrategy;return u&&(u.moneyCost||((d=u.cost)==null?void 0:d.money))||0}),s=computed(()=>{const u=a.housing;return u&&(u.cost||u.monthlyExpense)||0}),l=computed(()=>a.attributeChanges.filter(u=>u.delta!==0));function c(){r("confirm")}return(u,d)=>(openBlock(),createBlock(Transition,{name:"modal-fade"},{default:withCtx(()=>{var f,v,_;return[t.visible?(openBlock(),createElementBlock("div",{key:0,class:"report-overlay",onClick:withModifiers(c,["self"])},[createBaseVNode("div",_hoisted_1$d,[createBaseVNode("header",_hoisted_2$d,[d[1]||(d[1]=createBaseVNode("div",{class:"header-icon"},"",-1)),createBaseVNode("div",_hoisted_3$c,[createBaseVNode("h2",_hoisted_4$b," "+toDisplayString(t.round)+" ",1),d[0]||(d[0]=createBaseVNode("span",{class:"header-sub"},"",-1))])]),createBaseVNode("div",_hoisted_5$b,[createBaseVNode("div",_hoisted_6$b,[d[4]||(d[4]=createBaseVNode("div",{class:"section-header"},[createBaseVNode("span",{class:"section-icon"},""),createBaseVNode("span",{class:"section-title"},"")],-1)),createBaseVNode("div",_hoisted_7$b,[createBaseVNode("div",_hoisted_8$b,[d[2]||(d[2]=createTextVNode("  ",-1)),createBaseVNode("span",_hoisted_9$a,toDisplayString(t.behaviorCount),1),d[3]||(d[3]=createTextVNode("  ",-1))]),t.behaviors.length>0?(openBlock(),createElementBlock("div",_hoisted_10$a,[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.behaviors,(g,y)=>(openBlock(),createElementBlock("span",{key:y,class:normalizeClass(["action-tag",g.category])},toDisplayString(g.name),3))),128))])):(openBlock(),createElementBlock("div",_hoisted_11$9,"  "))])]),createBaseVNode("div",_hoisted_12$9,[d[11]||(d[11]=createBaseVNode("div",{class:"section-header"},[createBaseVNode("span",{class:"section-icon"},""),createBaseVNode("span",{class:"section-title"},"")],-1)),createBaseVNode("div",_hoisted_13$8,[createBaseVNode("div",_hoisted_14$8,[t.financials.income>0?(openBlock(),createElementBlock("div",_hoisted_15$8,[d[5]||(d[5]=createBaseVNode("span",{class:"finance-label"},"",-1)),createBaseVNode("span",_hoisted_16$8,"+$"+toDisplayString(t.financials.income),1)])):createCommentVNode("",!0),t.financials.expense>0?(openBlock(),createElementBlock("div",_hoisted_17$8,[d[6]||(d[6]=createBaseVNode("span",{class:"finance-label"},"",-1)),createBaseVNode("span",_hoisted_18$7,"-$"+toDisplayString(t.financials.expense),1)])):createCommentVNode("",!0)]),t.foodStrategy||t.housing?(openBlock(),createElementBlock("div",_hoisted_19$7,[o.value>0?(openBlock(),createElementBlock("div",_hoisted_20$7,[d[7]||(d[7]=createBaseVNode("span",{class:"detail-icon"},"",-1)),createBaseVNode("span",_hoisted_21$7,toDisplayString(((f=t.foodStrategy)==null?void 0:f.name)||""),1),createBaseVNode("span",_hoisted_22$7,"-$"+toDisplayString(o.value),1)])):createCommentVNode("",!0),s.value>0?(openBlock(),createElementBlock("div",_hoisted_23$6,[d[8]||(d[8]=createBaseVNode("span",{class:"detail-icon"},"",-1)),createBaseVNode("span",_hoisted_24$6,toDisplayString(((v=t.housing)==null?void 0:v.name)||""),1),createBaseVNode("span",_hoisted_25$6,"-$"+toDisplayString(s.value),1)])):createCommentVNode("",!0),s.value===0&&t.housing?(openBlock(),createElementBlock("div",_hoisted_26$5,[d[9]||(d[9]=createBaseVNode("span",{class:"detail-icon"},"",-1)),createBaseVNode("span",_hoisted_27$5,toDisplayString(((_=t.housing)==null?void 0:_.name)||""),1),d[10]||(d[10]=createBaseVNode("span",{class:"detail-cost free"},"",-1))])):createCommentVNode("",!0)])):createCommentVNode("",!0),createBaseVNode("div",{class:normalizeClass(["finance-net",{positive:t.financials.net>=0,negative:t.financials.net<0}])}," : "+toDisplayString(t.financials.net>=0?"+":"")+"$"+toDisplayString(t.financials.net),3)])]),l.value.length>0?(openBlock(),createElementBlock("div",_hoisted_28$5,[d[12]||(d[12]=createBaseVNode("div",{class:"section-header"},[createBaseVNode("span",{class:"section-icon"},""),createBaseVNode("span",{class:"section-title"},"")],-1)),createBaseVNode("div",_hoisted_29$4,[createBaseVNode("div",_hoisted_30$4,[(openBlock(!0),createElementBlock(Fragment,null,renderList(l.value,g=>(openBlock(),createElementBlock("div",{key:g.id,class:normalizeClass(["attr-change-row",{positive:g.delta>0,negative:g.delta<0&&g.id==="health",neutral:g.delta<0&&g.id!=="health"}])},[createBaseVNode("span",_hoisted_31$4,toDisplayString(g.icon),1),createBaseVNode("span",_hoisted_32$4,toDisplayString(g.name),1),createBaseVNode("span",_hoisted_33$4,toDisplayString(g.oldValue)+"  "+toDisplayString(g.newValue),1),createBaseVNode("span",_hoisted_34$4,toDisplayString(g.delta>0?"+":"")+toDisplayString(g.delta),1)],2))),128))])])])):createCommentVNode("",!0)]),createBaseVNode("div",{class:"report-actions"},[createBaseVNode("button",{class:"confirm-btn",onClick:c},"   ")])])])):createCommentVNode("",!0)]}),_:1}))}},MonthlyReportModal=_export_sfc(_sfc_main$g,[["__scopeId","data-v-4f44ad5f"]]),_hoisted_1$c={class:"consequences-modal"},_hoisted_2$c={class:"consequences-header"},_hoisted_3$b={class:"header-icon"},_hoisted_4$a={class:"header-text"},_hoisted_5$a={class:"header-title"},_hoisted_6$a={class:"consequences-content"},_hoisted_7$a={class:"card-icon"},_hoisted_8$a={class:"card-body"},_hoisted_9$9={class:"card-title"},_hoisted_10$9={class:"card-desc"},_hoisted_11$8={key:0,class:"card-effects"},_hoisted_12$8={key:0,class:"summary-hint"},_sfc_main$f={__name:"ConsequencesModal",props:{visible:{type:Boolean,default:!1},round:{type:Number,default:1},consequences:{type:Array,default:()=>[]}},emits:["confirm"],setup(t,{emit:n}){const a=t,r=n,o={health:"",san:"SAN",sanMax:"SAN",credit:"",luck:"",money:""};function s(g){return o[g]||g}function l(g){return g?Object.values(g).some(y=>y!==0):!1}function c(g,y){return g==="sanMax"?y:g==="money"?y>0?`+$${y}`:`-$${Math.abs(y)}`:y>0?`+${y}`:`${y}`}function u(g,y){return g==="sanMax"?y>=130?"positive":"neutral":g==="money"?y<0?"cost":"positive":g==="health"?y>0?"positive":"negative":y>0?"positive":"neutral"}const d=computed(()=>{const g=a.consequences.some(b=>b.severity==="danger"),y=a.consequences.some(b=>b.severity==="warning");return g?"":y?"":""}),f=computed(()=>a.consequences.some(y=>y.severity==="danger")?"":""),v=computed(()=>{const g=a.consequences.some(b=>b.type==="food"&&b.severity==="danger"),y=a.consequences.some(b=>b.type==="housing"&&b.severity==="danger");return g&&y?"...":g?"...":y?"...":""});function _(){r("confirm")}return(g,y)=>(openBlock(),createBlock(Transition,{name:"modal-fade"},{default:withCtx(()=>[t.visible?(openBlock(),createElementBlock("div",{key:0,class:"consequences-overlay",onClick:withModifiers(_,["self"])},[createBaseVNode("div",_hoisted_1$c,[createBaseVNode("header",_hoisted_2$c,[createBaseVNode("div",_hoisted_3$b,toDisplayString(d.value),1),createBaseVNode("div",_hoisted_4$a,[createBaseVNode("h2",_hoisted_5$a,toDisplayString(f.value),1),y[0]||(y[0]=createBaseVNode("span",{class:"header-sub"},"",-1))])]),createBaseVNode("div",_hoisted_6$a,[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.consequences,(b,T)=>(openBlock(),createElementBlock("div",{key:T,class:normalizeClass(["consequence-card",b.severity])},[createBaseVNode("div",_hoisted_7$a,toDisplayString(b.icon),1),createBaseVNode("div",_hoisted_8$a,[createBaseVNode("div",_hoisted_9$9,toDisplayString(b.title),1),createBaseVNode("div",_hoisted_10$9,toDisplayString(b.description),1),l(b.effects)?(openBlock(),createElementBlock("div",_hoisted_11$8,[(openBlock(!0),createElementBlock(Fragment,null,renderList(b.effects,(S,C)=>(openBlock(),createElementBlock(Fragment,{key:C},[S!==0?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(["effect-tag",u(C,S)])},toDisplayString(s(C))+" "+toDisplayString(c(C,S)),3)):createCommentVNode("",!0)],64))),128))])):createCommentVNode("",!0)])],2))),128)),v.value?(openBlock(),createElementBlock("div",_hoisted_12$8,toDisplayString(v.value),1)):createCommentVNode("",!0)]),createBaseVNode("div",{class:"consequences-actions"},[createBaseVNode("button",{class:"confirm-btn",onClick:_},"")])])])):createCommentVNode("",!0)]),_:1}))}},ConsequencesModal=_export_sfc(_sfc_main$f,[["__scopeId","data-v-915beac9"]]),_hoisted_1$b={class:"unlocks-modal"},_hoisted_2$b={class:"unlocks-header"},_hoisted_3$a={class:"header-text"},_hoisted_4$9={class:"header-sub"},_hoisted_5$9={class:"unlocks-content"},_hoisted_6$9={class:"unlocks-grid"},_hoisted_7$9={class:"item-icon"},_hoisted_8$9={class:"item-name"},_sfc_main$e={__name:"UnlocksModal",props:{visible:{type:Boolean,default:!1},round:{type:Number,default:1},unlocks:{type:Array,default:()=>[]}},emits:["confirm"],setup(t,{emit:n}){const a=n,r={earn:"",moneyToHealth:"",heal:"",healthToMoney:"",credit:"",gamble:"",special:"",work:"",rest:"",social:"",risk:""};function o(l){return r[l]||""}function s(){a("confirm")}return(l,c)=>(openBlock(),createBlock(Transition,{name:"modal-fade"},{default:withCtx(()=>[t.visible?(openBlock(),createElementBlock("div",{key:0,class:"unlocks-overlay",onClick:withModifiers(s,["self"])},[createBaseVNode("div",_hoisted_1$b,[createBaseVNode("header",_hoisted_2$b,[c[1]||(c[1]=createBaseVNode("div",{class:"header-icon"},"",-1)),createBaseVNode("div",_hoisted_3$a,[c[0]||(c[0]=createBaseVNode("h2",{class:"header-title"},"",-1)),createBaseVNode("span",_hoisted_4$9," "+toDisplayString(t.unlocks.length)+" ",1)])]),createBaseVNode("div",_hoisted_5$9,[createBaseVNode("div",_hoisted_6$9,[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.unlocks,u=>(openBlock(),createElementBlock("div",{key:u.id,class:normalizeClass(["unlock-item",u.category])},[createBaseVNode("span",_hoisted_7$9,toDisplayString(u.icon||o(u.category)),1),createBaseVNode("span",_hoisted_8$9,toDisplayString(u.name),1)],2))),128))])]),createBaseVNode("div",{class:"unlocks-actions"},[createBaseVNode("button",{class:"confirm-btn",onClick:s},"  ")])])])):createCommentVNode("",!0)]),_:1}))}},UnlocksModal=_export_sfc(_sfc_main$e,[["__scopeId","data-v-60023307"]]),_hoisted_1$a={class:"header-icon"},_hoisted_2$a={class:"header-text"},_hoisted_3$9={class:"header-title"},_hoisted_4$8={key:0,class:"header-sub"},_hoisted_5$8={key:1,class:"header-sub"},_hoisted_6$8={key:0,class:"escape-hint"},_hoisted_7$8={class:"hint-text"},_hoisted_8$8={class:"killline-narrative"},_hoisted_9$8={class:"killline-choices"},_hoisted_10$8=["onClick"],_hoisted_11$7={class:"card-body"},_hoisted_12$7={class:"card-header"},_hoisted_13$7={class:"card-title"},_hoisted_14$7={class:"card-desc"},_hoisted_15$7={class:"choice-cost-bar"},_hoisted_16$7={class:"cost-items"},_hoisted_17$7={class:"cost-icon"},_hoisted_18$6={class:"cost-value"},_hoisted_19$6={key:0,class:"killline-rumor"},_hoisted_20$6={class:"rumor-text"},_hoisted_21$6={class:"events-content"},_hoisted_22$6={key:0,class:"event-card lucky",style:{animationDelay:"0s"}},_hoisted_23$5={class:"card-body"},_hoisted_24$5={class:"card-header"},_hoisted_25$5={class:"card-title"},_hoisted_26$4={class:"card-desc"},_hoisted_27$4={key:0,class:"card-effects"},_hoisted_28$4={class:"card-body"},_hoisted_29$3={class:"card-header"},_hoisted_30$3={class:"card-title"},_hoisted_31$3={class:"card-badge risk"},_hoisted_32$3={class:"card-desc"},_hoisted_33$3={key:0,class:"card-effects"},_hoisted_34$3={key:2,class:"no-events"},_sfc_main$d={__name:"MonthlyEventsModal",props:{visible:{type:Boolean,default:!1},round:{type:Number,default:1},luckyEvent:{type:Object,default:null},riskEvent:{type:Object,default:null},mode:{type:String,default:"random"},killLineEvent:{type:Object,default:null},killWarnings:{type:Object,default:()=>({})}},emits:["confirm","select"],setup(t,{emit:n}){const a=t,r=n,o=ref(!1),s=ref(!1),l=ref(0),c=["...","","","","",""],u=computed(()=>{const E=Math.min(l.value,c.length-1);return c[E]});watch(()=>a.visible,E=>{E&&(s.value=!1,l.value=0)});function d(){a.mode!=="killline"?S():f()}function f(){o.value=!0,s.value=!0,l.value++,setTimeout(()=>{o.value=!1},500)}const v={health:"",san:"",credit:"",luck:"",money:""},_=computed(()=>{if(!a.riskEvent)return"";const E=a.riskEvent.effects||{},x=Object.values(E).reduce((A,N)=>A+(N<0?Math.abs(N):0),0);return x>=25?"":x>=15?"":""}),g=computed(()=>{var E;return(E=a.killLineEvent)!=null&&E.eventNarrative?a.killLineEvent.eventNarrative.split(`
`).filter(x=>x.trim()):[]}),y=ref([]);watch(()=>[a.visible,a.killLineEvent],([E,x])=>{if(E&&(x!=null&&x.choices)){const A=[...x.choices];for(let N=A.length-1;N>0;N--){const M=Math.floor(Math.random()*(N+1));[A[N],A[M]]=[A[M],A[N]]}y.value=A}},{immediate:!0});function b(E,x){return E==="money"?`-$${x.toLocaleString()}`:`-${x}`}function T(E){return v[E]||E}function S(){r("confirm")}function C(E){r("select",E)}return(E,x)=>(openBlock(),createBlock(Transition,{name:"modal-fade"},{default:withCtx(()=>{var A,N;return[t.visible?(openBlock(),createElementBlock("div",{key:0,class:"events-overlay",onClick:withModifiers(d,["self"])},[createBaseVNode("div",{class:normalizeClass(["events-modal",{"killline-mode":t.mode==="killline",shake:o.value}])},[createBaseVNode("header",{class:normalizeClass(["events-header",{"killline-header":t.mode==="killline"}])},[createBaseVNode("div",_hoisted_1$a,toDisplayString(t.mode==="killline"?"":""),1),createBaseVNode("div",_hoisted_2$a,[createBaseVNode("h2",_hoisted_3$9,toDisplayString(t.mode==="killline"?(A=t.killLineEvent)==null?void 0:A.roundName:""),1),t.mode==="killline"?(openBlock(),createElementBlock("span",_hoisted_4$8," "+toDisplayString(t.round)+" ",1)):(openBlock(),createElementBlock("span",_hoisted_5$8,""))]),t.mode==="killline"?(openBlock(),createElementBlock("button",{key:0,class:"fake-close-btn",onClick:f,title:""},[...x[0]||(x[0]=[createBaseVNode("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[createBaseVNode("path",{d:"M1 1L13 13M1 13L13 1",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"})],-1)])])):createCommentVNode("",!0)],2),t.mode==="killline"&&s.value?(openBlock(),createElementBlock("div",_hoisted_6$8,[x[1]||(x[1]=createBaseVNode("span",{class:"hint-icon"},"",-1)),createBaseVNode("span",_hoisted_7$8,toDisplayString(u.value),1)])):createCommentVNode("",!0),t.mode==="killline"?(openBlock(),createElementBlock(Fragment,{key:1},[createBaseVNode("div",_hoisted_8$8,[(openBlock(!0),createElementBlock(Fragment,null,renderList(g.value,(M,R)=>(openBlock(),createElementBlock("p",{key:R,class:"narrative-line"},toDisplayString(M),1))),128))]),createBaseVNode("div",_hoisted_9$8,[(openBlock(!0),createElementBlock(Fragment,null,renderList(y.value,M=>(openBlock(),createElementBlock("div",{key:M.id,class:"event-card choice-card",onClick:R=>C(M)},[createBaseVNode("div",_hoisted_11$7,[createBaseVNode("div",_hoisted_12$7,[createBaseVNode("span",_hoisted_13$7,toDisplayString(M.label),1)]),createBaseVNode("div",_hoisted_14$7,toDisplayString(M.description),1),createBaseVNode("div",_hoisted_15$7,[x[2]||(x[2]=createBaseVNode("span",{class:"cost-label"},"",-1)),createBaseVNode("div",_hoisted_16$7,[(openBlock(!0),createElementBlock(Fragment,null,renderList(M.calculatedCost||{},(R,D)=>(openBlock(),createElementBlock("span",{key:D,class:normalizeClass(["cost-item","cost-"+D])},[createBaseVNode("span",_hoisted_17$7,toDisplayString(T(D)),1),createBaseVNode("span",_hoisted_18$6,toDisplayString(b(D,R)),1)],2))),128))])])])],8,_hoisted_10$8))),128))]),(N=t.killLineEvent)!=null&&N.rumor?(openBlock(),createElementBlock("div",_hoisted_19$6,[x[3]||(x[3]=createBaseVNode("div",{class:"rumor-icon"},"",-1)),createBaseVNode("div",_hoisted_20$6,toDisplayString(t.killLineEvent.rumor),1)])):createCommentVNode("",!0)],64)):(openBlock(),createElementBlock(Fragment,{key:2},[createBaseVNode("div",_hoisted_21$6,[t.luckyEvent?(openBlock(),createElementBlock("div",_hoisted_22$6,[x[5]||(x[5]=createBaseVNode("div",{class:"card-icon"},"",-1)),createBaseVNode("div",_hoisted_23$5,[createBaseVNode("div",_hoisted_24$5,[createBaseVNode("span",_hoisted_25$5,toDisplayString(t.luckyEvent.name),1),x[4]||(x[4]=createBaseVNode("span",{class:"card-badge lucky"},"",-1))]),createBaseVNode("div",_hoisted_26$4,toDisplayString(t.luckyEvent.description),1),t.luckyEvent.effects?(openBlock(),createElementBlock("div",_hoisted_27$4,[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.luckyEvent.effects,(M,R)=>(openBlock(),createElementBlock("span",{key:R,class:"effect-tag positive"},toDisplayString(T(R))+" "+toDisplayString(M>0?"+":"")+toDisplayString(M),1))),128))])):createCommentVNode("",!0)])])):createCommentVNode("",!0),t.riskEvent?(openBlock(),createElementBlock("div",{key:1,class:"event-card risk",style:normalizeStyle$1({animationDelay:t.luckyEvent?"0.15s":"0s"})},[x[6]||(x[6]=createBaseVNode("div",{class:"card-icon"},"",-1)),createBaseVNode("div",_hoisted_28$4,[createBaseVNode("div",_hoisted_29$3,[createBaseVNode("span",_hoisted_30$3,toDisplayString(t.riskEvent.name),1),createBaseVNode("span",_hoisted_31$3,toDisplayString(_.value),1)]),createBaseVNode("div",_hoisted_32$3,toDisplayString(t.riskEvent.description),1),t.riskEvent.effects?(openBlock(),createElementBlock("div",_hoisted_33$3,[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.riskEvent.effects,(M,R)=>(openBlock(),createElementBlock("span",{key:R,class:"effect-tag negative"},toDisplayString(T(R))+" "+toDisplayString(M>0?"+":"")+toDisplayString(M),1))),128))])):createCommentVNode("",!0)])],4)):createCommentVNode("",!0),!t.luckyEvent&&!t.riskEvent?(openBlock(),createElementBlock("div",_hoisted_34$3,[...x[7]||(x[7]=[createBaseVNode("div",{class:"no-events-icon"},"",-1),createBaseVNode("div",{class:"no-events-text"},"",-1),createBaseVNode("div",{class:"no-events-sub"},"",-1)])])):createCommentVNode("",!0)]),createBaseVNode("div",{class:"events-actions"},[createBaseVNode("button",{class:"confirm-btn",onClick:S},"  ")])],64))],2)])):createCommentVNode("",!0)]}),_:1}))}},MonthlyEventsModal=_export_sfc(_sfc_main$d,[["__scopeId","data-v-843e15e3"]]),_hoisted_1$9={class:"confirm-modal"},_hoisted_2$9={class:"confirm-header"},_hoisted_3$8={class:"behavior-icon"},_hoisted_4$7={class:"header-text"},_hoisted_5$7={class:"behavior-name"},_hoisted_6$7={class:"behavior-description"},_hoisted_7$7={key:0,class:"behavior-quote"},_hoisted_8$7={key:1,class:"cost-requirement"},_hoisted_9$7={class:"cost-items"},_hoisted_10$7={key:0,class:"cost-item"},_hoisted_11$6={class:"cost-need"},_hoisted_12$6={key:1,class:"cost-item"},_hoisted_13$6={class:"cost-need"},_hoisted_14$6={key:2,class:"cost-item"},_hoisted_15$6={class:"cost-need"},_hoisted_16$6={class:"confirm-actions"},_hoisted_17$6={key:0,class:"insufficient-hint"},_sfc_main$c={__name:"BehaviorConfirmModal",props:{visible:{type:Boolean,default:!1},behavior:{type:Object,default:null},currentSan:{type:Number,default:0},currentMoney:{type:Number,default:0},currentHealth:{type:Number,default:0}},emits:["cancel","execute"],setup(t,{emit:n}){const a=t,r=n,o=computed(()=>{var S;return((S=a.behavior)==null?void 0:S.sanCost)||0}),s=computed(()=>{var S;return((S=a.behavior)==null?void 0:S.moneyCost)||0}),l=computed(()=>{var S;return((S=a.behavior)==null?void 0:S.healthCost)||0}),c=computed(()=>o.value>0||s.value>0||l.value>0),u=computed(()=>o.value<=0||a.currentSan>=o.value),d=computed(()=>s.value<=0||a.currentMoney>=s.value),f=computed(()=>l.value<=0||a.currentHealth>=l.value),v=computed(()=>u.value&&d.value&&f.value),_=computed(()=>{const S=[];return u.value||S.push("SAN"),d.value||S.push(""),f.value||S.push(""),S.join("")+""}),g=ref(!1);let y=null;function b(){r("cancel")}function T(){if(!v.value){g.value=!0,y&&clearTimeout(y),y=setTimeout(()=>{g.value=!1},2e3);return}r("execute")}return watch(()=>a.visible,S=>{S||(g.value=!1,y&&(clearTimeout(y),y=null))}),(S,C)=>(openBlock(),createBlock(Teleport,{to:"body"},[createVNode(Transition,{name:"confirm-fade"},{default:withCtx(()=>{var E,x,A,N,M;return[t.visible?(openBlock(),createElementBlock("div",{key:0,class:"confirm-overlay",onClick:withModifiers(b,["self"])},[createBaseVNode("div",_hoisted_1$9,[createBaseVNode("div",_hoisted_2$9,[createBaseVNode("span",_hoisted_3$8,toDisplayString((E=t.behavior)==null?void 0:E.icon),1),createBaseVNode("div",_hoisted_4$7,[createBaseVNode("h3",_hoisted_5$7,toDisplayString((x=t.behavior)==null?void 0:x.name),1)])]),createBaseVNode("div",_hoisted_6$7,[createBaseVNode("p",null,toDisplayString((A=t.behavior)==null?void 0:A.description),1)]),(N=t.behavior)!=null&&N.quote?(openBlock(),createElementBlock("div",_hoisted_7$7,[createBaseVNode("span",null,'"'+toDisplayString((M=t.behavior)==null?void 0:M.quote)+'"',1)])):createCommentVNode("",!0),c.value?(openBlock(),createElementBlock("div",_hoisted_8$7,[C[6]||(C[6]=createBaseVNode("div",{class:"cost-label"},"",-1)),createBaseVNode("div",_hoisted_9$7,[o.value>0?(openBlock(),createElementBlock("div",_hoisted_10$7,[C[0]||(C[0]=createBaseVNode("span",{class:"cost-icon"},"",-1)),createBaseVNode("span",_hoisted_11$6,"-"+toDisplayString(o.value),1),C[1]||(C[1]=createBaseVNode("span",{class:"cost-divider"},"/",-1)),createBaseVNode("span",{class:normalizeClass(["cost-current",{insufficient:!u.value}])},toDisplayString(t.currentSan),3)])):createCommentVNode("",!0),s.value>0?(openBlock(),createElementBlock("div",_hoisted_12$6,[C[2]||(C[2]=createBaseVNode("span",{class:"cost-icon"},"",-1)),createBaseVNode("span",_hoisted_13$6,"-"+toDisplayString(s.value),1),C[3]||(C[3]=createBaseVNode("span",{class:"cost-divider"},"/",-1)),createBaseVNode("span",{class:normalizeClass(["cost-current",{insufficient:!d.value}])},toDisplayString(t.currentMoney),3)])):createCommentVNode("",!0),l.value>0?(openBlock(),createElementBlock("div",_hoisted_14$6,[C[4]||(C[4]=createBaseVNode("span",{class:"cost-icon"},"",-1)),createBaseVNode("span",_hoisted_15$6,"-"+toDisplayString(l.value),1),C[5]||(C[5]=createBaseVNode("span",{class:"cost-divider"},"/",-1)),createBaseVNode("span",{class:normalizeClass(["cost-current",{insufficient:!f.value}])},toDisplayString(t.currentHealth),3)])):createCommentVNode("",!0)])])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_16$6,[createBaseVNode("button",{class:"btn-cancel",onClick:b},""),createBaseVNode("button",{class:normalizeClass(["btn-execute",{disabled:!v.value}]),onClick:T},"  ",2)]),createVNode(Transition,{name:"hint-fade"},{default:withCtx(()=>[g.value?(openBlock(),createElementBlock("div",_hoisted_17$6,toDisplayString(_.value),1)):createCommentVNode("",!0)]),_:1})])])):createCommentVNode("",!0)]}),_:1})]))}},BehaviorConfirmModal=_export_sfc(_sfc_main$c,[["__scopeId","data-v-57d193cc"]]),_hoisted_1$8={class:"shop-modal"},_hoisted_2$8={class:"shop-header"},_hoisted_3$7={class:"shop-title-row"},_hoisted_4$6={class:"shop-title"},_hoisted_5$6={key:0,class:"shop-content"},_hoisted_6$6={class:"item-top"},_hoisted_7$6={class:"item-icon-wrap"},_hoisted_8$6=["src","alt"],_hoisted_9$6={key:1,class:"item-icon"},_hoisted_10$6={class:"item-meta"},_hoisted_11$5={class:"item-name"},_hoisted_12$5={class:"item-price"},_hoisted_13$5={class:"price-value"},_hoisted_14$5={class:"item-info"},_hoisted_15$5={class:"item-desc"},_hoisted_16$5={class:"item-flavor"},_hoisted_17$5={class:"shop-actions"},_hoisted_18$5={key:0,class:"action-btn owned",disabled:""},_hoisted_19$5={key:1,class:"action-btn cant-afford",disabled:""},_hoisted_20$5={key:1,class:"shop-empty"},_hoisted_21$5={class:"collection-grid-section"},_hoisted_22$5={class:"collection-header"},_hoisted_23$4={class:"collection-count"},_hoisted_24$4={class:"collection-grid"},_hoisted_25$4=["title"],_hoisted_26$3=["src","alt"],_hoisted_27$3={key:1,class:"slot-icon"},_hoisted_28$3={key:2,class:"slot-number"},_sfc_main$b={__name:"ShopModal",props:{visible:{type:Boolean,default:!1}},emits:["close","purchase"],setup(t,{emit:n}){const a=t,r=n,o=useGameStore(),s=computed(()=>{var f,v;return((v=(f=o.s)==null?void 0:f.v3)==null?void 0:v.currentRound)||1}),l=computed(()=>{var f;return((f=o.getShopItemForRound)==null?void 0:f.call(o))||null}),c=computed(()=>{var f;return((f=o.getCollectionStats)==null?void 0:f.call(o))||{collected:0,total:12,percentage:0}});computed(()=>{var f;return((f=o.getCollectedItems)==null?void 0:f.call(o))||[]});const u=computed(()=>{var f;return((f=o.getAllCollectionSlots)==null?void 0:f.call(o))||[]});watch(()=>a.visible,f=>{var v;f&&((v=o.markShopViewed)==null||v.call(o))});function d(){var v;if(!l.value)return;const f=(v=o.purchaseShopItem)==null?void 0:v.call(o,l.value.id);f!=null&&f.success&&r("purchase",l.value)}return(f,v)=>(openBlock(),createBlock(Teleport,{to:"body"},[createVNode(Transition,{name:"shop-fade"},{default:withCtx(()=>[t.visible?(openBlock(),createElementBlock("div",{key:0,class:"shop-overlay",onClick:v[1]||(v[1]=withModifiers(_=>f.$emit("close"),["self"]))},[createBaseVNode("div",_hoisted_1$8,[createBaseVNode("div",_hoisted_2$8,[createBaseVNode("div",_hoisted_3$7,[v[2]||(v[2]=createBaseVNode("span",{class:"shop-icon"},"",-1)),createBaseVNode("h2",_hoisted_4$6,""+toDisplayString(s.value)+"",1)]),createBaseVNode("button",{class:"shop-close",onClick:v[0]||(v[0]=_=>f.$emit("close"))},"")]),l.value?(openBlock(),createElementBlock("div",_hoisted_5$6,[createBaseVNode("div",{class:normalizeClass(["item-card",l.value.rarity])},[createBaseVNode("div",_hoisted_6$6,[createBaseVNode("div",_hoisted_7$6,[l.value.image?(openBlock(),createElementBlock("img",{key:0,src:l.value.image,alt:l.value.name,class:"item-image"},null,8,_hoisted_8$6)):(openBlock(),createElementBlock("span",_hoisted_9$6,toDisplayString(l.value.icon),1))]),createBaseVNode("div",_hoisted_10$6,[createBaseVNode("h3",_hoisted_11$5,toDisplayString(l.value.name),1),createBaseVNode("span",{class:"rarity-badge",style:normalizeStyle$1({background:l.value.rarityColor})},toDisplayString(l.value.rarityName),5),createBaseVNode("div",_hoisted_12$5,[v[3]||(v[3]=createBaseVNode("span",{class:"price-icon"},"",-1)),createBaseVNode("span",_hoisted_13$5,"$"+toDisplayString(l.value.price),1)])])]),createBaseVNode("div",_hoisted_14$5,[createBaseVNode("p",_hoisted_15$5,toDisplayString(l.value.description),1),createBaseVNode("p",_hoisted_16$5,'"'+toDisplayString(l.value.flavor)+'"',1)])],2),createBaseVNode("div",_hoisted_17$5,[l.value.isPurchased?(openBlock(),createElementBlock("button",_hoisted_18$5,"   ")):l.value.canAfford?(openBlock(),createElementBlock("button",{key:2,class:"action-btn buy",onClick:d},"  ")):(openBlock(),createElementBlock("button",_hoisted_19$5,"   "))])])):(openBlock(),createElementBlock("div",_hoisted_20$5,[...v[4]||(v[4]=[createBaseVNode("span",{class:"empty-icon"},"",-1),createBaseVNode("p",null,"",-1)])])),createBaseVNode("div",_hoisted_21$5,[createBaseVNode("div",_hoisted_22$5,[v[5]||(v[5]=createBaseVNode("span",{class:"collection-icon"},"",-1)),v[6]||(v[6]=createBaseVNode("span",{class:"collection-title"},"",-1)),createBaseVNode("span",_hoisted_23$4,toDisplayString(c.value.collected)+"/"+toDisplayString(c.value.total),1)]),createBaseVNode("div",_hoisted_24$4,[(openBlock(!0),createElementBlock(Fragment,null,renderList(u.value,_=>(openBlock(),createElementBlock("div",{key:_.round,class:normalizeClass(["collection-slot",{"has-item":_.purchased,[_.rarity]:_.purchased}]),title:_.purchased?_.name:`${_.round}`},[_.purchased&&_.image?(openBlock(),createElementBlock("img",{key:0,src:_.image,alt:_.name,class:"slot-image"},null,8,_hoisted_26$3)):_.purchased?(openBlock(),createElementBlock("span",_hoisted_27$3,toDisplayString(_.icon),1)):(openBlock(),createElementBlock("span",_hoisted_28$3,toDisplayString(_.round),1))],10,_hoisted_25$4))),128))])])])])):createCommentVNode("",!0)]),_:1})]))}},ShopModal=_export_sfc(_sfc_main$b,[["__scopeId","data-v-be675ca4"]]),debuffs$1={weak:{id:"weak",name:"",description:"",icon:"",perRound:{health:-2},clearCondition:{type:"consecutive_threshold",target:"health",value:30,consecutiveRounds:2}},mental_fatigue:{id:"mental_fatigue",name:"",description:"",icon:"",sanCostMultiplier:1.2,clearCondition:{type:"threshold",target:"san",value:25}},credit_warning:{id:"credit_warning",name:"",description:"",icon:"",clearCondition:{type:"threshold",target:"credit",value:580}}},missions=[{round:1,month:"January",name:"",theme:" ",difficulty:1,damage:70,openingNarrative:`11



APP

















`,rumor:{title:"",content:`



















`}},{round:2,month:"February",name:"",theme:" ",difficulty:1,damage:70,openingNarrative:`











WebMD







...







`,rumor:{title:"",content:`















deductible

`}},{round:3,month:"March",name:"",theme:" ",difficulty:2,damage:80,openingNarrative:`























`,rumor:{title:"",content:`



$2000



$2500





vs











`}},{round:4,month:"April",name:"",theme:" ",difficulty:2,damage:85,openingNarrative:`Tax Season

TurboTax













IRS





415







`,rumor:{title:"IRS",content:`



IRS



++



IRS

VenmoPayPalZelle$600



tax planning







`}},{round:5,month:"May",name:"",theme:"",difficulty:2,damage:90,openingNarrative:`

ICE 

ICE



`,rumor:{title:"",content:"ICE "}},{round:6,month:"June",name:"",theme:" ",difficulty:2,damage:60,openingNarrative:`



5



















Zillow



`,rumor:{title:"",content:`



























`}},{round:7,month:"July",name:"",theme:" ",difficulty:3,damage:90,openingNarrative:`























`,rumor:{title:"",content:`



Day 1: 

Day 2: 200%

Day 3: 

Day 4: 

Day 5: 

Day 6: 

Day 7: 





ICU

A.  B. 





`}},{round:8,month:"August",name:"",theme:" ",difficulty:3,damage:95,openingNarrative:`





























`,rumor:{title:"SSN",content:`



1. SSNIRS
2. 
3. 
4. 



SSN







SSN

`}},{round:9,month:"September",name:"",theme:" ",difficulty:4,damage:100,openingNarrative:`

























`,rumor:{title:"",content:`

























`}},{round:10,month:"October",name:"",theme:" ",difficulty:4,damage:105,openingNarrative:`













Worker's Compensation





At-will employment







`,rumor:{title:"",content:`









1.  2.  3.  4.  5.  6.  7. 









at-will employment`}},{round:11,month:"November",name:"",theme:" ",difficulty:4,damage:110,openingNarrative:`

































`,rumor:{title:"",content:`























`}},{round:12,month:"December",name:"",theme:" ",difficulty:5,damage:115,openingNarrative:`





Happy New Year

app





































`,rumor:{title:"",content:`Reddit2024



365survivelive [2]

 [1.5]

 [1.2]



 []











[]`}}],roundConfig=[{round:1},{round:2},{round:3},{round:4},{round:5},{round:6},{round:7},{round:8},{round:9},{round:10},{round:11},{round:12}],missionsData={debuffs:debuffs$1,missions,roundConfig},ATTRIBUTES={health:{id:"health",name:"",description:"",flavorText:"",icon:"",min:0,max:1/0,color:"#e74c3c",dangerLine:25,zeroTrigger:null},san:{id:"san",name:"SAN",description:"SAN",flavorText:"",icon:"",min:0,max:100,color:"#9b59b6",dangerLine:25,zeroTrigger:null},credit:{id:"credit",name:"",description:"-8400+/350+/300+/300",flavorText:"",icon:"",min:0,max:1/0,color:"#3498db",dangerLine:300,decayPerRound:constants.creditDecay,zeroTrigger:null},luck:{id:"luck",name:"",description:"",flavorText:"",icon:"",min:0,max:100,color:"#2ecc71"}},DERIVED_ATTRIBUTES$1={risk_resist:{id:"risk_resist",name:"",icon:"",color:"#e67e22",formula:"0.35 * health + 0.35 * san + 0.15 * (credit/8.5) + 0.15 * luck",calculate:t=>Math.round(.35*(t.health||0)+.35*(t.san||0)+.15*((t.credit||0)/8.5)+.15*(t.luck||0))},survivalIndex:{id:"survivalIndex",name:"",formula:"(health + san) / 2",calculate:t=>Math.round((t.health+t.san)/2)}};function calculateFormula(formula,state){if(typeof formula=="number")return formula;if(!formula||typeof formula!="string")return 0;let expr=formula.replace(/health/g,state.health||0).replace(/san/g,state.san||0).replace(/credit/g,state.credit||0).replace(/luck/g,state.luck||0).replace(/money/g,state.money||0);try{if(/^[\d\s+\-*/().]+$/.test(expr))return Math.round(eval(expr))}catch(t){console.warn("Formula calculation error:",formula,t)}return 0}function calculateRiskResist$1(t){return DERIVED_ATTRIBUTES$1.risk_resist.calculate(t)}function calculateLuckModifier(t,n){const a=(t-50)/10*.05;return Math.max(0,Math.min(1,n+a))}function checkBehaviorRestriction(t,n){return t<n?{disabled:!0,reason:`SAN ( ${n} ${t})`}:{disabled:!1,reason:null}}function checkCreditZeroPenalty(t){return t<=0?{sanPenalty:-20,forceHousingDowngrade:!0,lockBehaviors:["work_skilled","work_delivery"],narrative:""}:null}function createInitialAttributeState(t="normal"){const n=constants.initialStats[t]||constants.initialStats.normal;return{health:n.health,san:n.san,credit:n.credit,luck:50,money:n.money}}function clampAttribute(t,n){const a=ATTRIBUTES[n];return a?Math.max(a.min,Math.min(a.max,t)):t}function getAttributeStatus$1(t,n){const a=ATTRIBUTES[t];if(!a)return{level:"unknown",text:""};const r=a.dangerLine||20;return t==="credit"?n<=0?{level:"critical",text:"",color:"#e74c3c"}:n<300?{level:"danger",text:"",color:"#e74c3c"}:n<350?{level:"normal",text:"",color:"#f39c12"}:n<=400?{level:"good",text:"",color:"#27ae60"}:{level:"excellent",text:"",color:"#2ecc71"}:n<=r?{level:"critical",text:"",color:"#e74c3c"}:n<=40?{level:"low",text:"",color:"#e67e22"}:n<=60?{level:"normal",text:"",color:"#f39c12"}:n<=80?{level:"good",text:"",color:"#27ae60"}:{level:"excellent",text:"",color:"#2ecc71"}}function formatAttributeValue(t,n){return Math.round(n).toString()}const ATTRIBUTE_IDS=Object.keys(ATTRIBUTES),DEBUFFS$1=missionsData.debuffs||{};function getDebuffById$1(t){return DEBUFFS$1[t]||null}function convertMission(t,n){return{round:t.round,name:t.name,theme:t.theme,difficulty:t.difficulty,openingNarrative:t.openingNarrative,rumor:t.rumor||null,roundConfig:n}}const MISSIONS=missionsData.missions.map((t,n)=>{var r;const a=((r=missionsData.roundConfig)==null?void 0:r[n])||{};return convertMission(t,a)}),ROUND_CONFIG_MAP={};for(const t of missionsData.roundConfig||[])ROUND_CONFIG_MAP[t.round]=t;function getMissionByRound(t){return MISSIONS.find(n=>n.round===t)||null}function getRoundConfig(t){return ROUND_CONFIG_MAP[t]||{round:t}}const ATTR_NAMES={health:"",san:"SAN",credit:"",luck:"",money:"",risk_resist:""};function checkSingleCondition(t,n){var c,u;const{target:a,value:r,op:o}=t;let s;a==="money"?s=n.money||0:a==="heat"?s=((c=n.attributes)==null?void 0:c.heat)||0:s=((u=n.attributes)==null?void 0:u[a])||0;let l=!1;switch(o){case"gte":l=s>=r;break;case"lte":l=s<=r;break;case"gt":l=s>r;break;case"lt":l=s<r;break;case"eq":l=s===r;break;default:l=s>=r}return{met:l,current:s,target:r}}function checkObjective(t,n){var d;if(!t)return{met:!0,current:null,target:null};const{type:a,target:r,value:o,conditions:s,formula:l,primary:c,secondary:u}=t;switch(a){case"money":return{met:n.money>=o,current:n.money,target:o,label:`  $${o}`};case"stat":const f=((d=n.attributes)==null?void 0:d[r])||0;return{met:f>=o,current:f,target:o,label:`${ATTR_NAMES[r]||r}  ${o}`};case"action":if(r==="gray"){const y=n.grayActionsCount||0;return{met:y>=o,current:y,target:o,label:` ${o} `}}return{met:!0,current:0,target:o};case"composite":if(!s||!Array.isArray(s))return{met:!0,current:null,target:null};const v=s.map(y=>{const b=checkSingleCondition(y,n);return{target:y.target,met:b.met,current:b.current,required:y.value}});return{met:v.every(y=>y.met),results:v,label:s.map(y=>`${ATTR_NAMES[y.target]||y.target}  ${y.value}`).join("  ")};case"primary_secondary":return checkPrimarySecondary(c,u,n);case"derived":const g=DERIVED_ATTRIBUTES$1[r];if(g&&g.calculate){const y=g.calculate(n.attributes);return{met:y>=o,current:y,target:o,label:`${g.name}  ${o}`}}return{met:!1,current:0,target:o};default:return{met:!0,current:null,target:null}}}function checkPrimarySecondary(t,n,a){const r=checkSingleCondition(t,a),o=t.value,s=t.graceThreshold||.8,l=Math.floor(o*s);let c="passed",u=0;r.met?c="passed":r.current>=l?(c="grace",t.target==="money"&&(u=o-r.current)):c="failed";const d=(n||[]).map(g=>{const y=checkSingleCondition(g,a);return{target:g.target,met:y.met,current:y.current,required:g.value,penalty:g.penalty,debuff:g.debuff}}),f=d.filter(g=>!g.met),v=`${ATTR_NAMES[t.target]||t.target}  ${o}`,_=(n||[]).map(g=>`${ATTR_NAMES[g.target]||g.target}  ${g.value}`);return{type:"primary_secondary",met:c!=="failed",primaryStatus:c,primary:{...r,target:t.target,value:o,graceThreshold:s,graceMinValue:l,gracePenalty:t.gracePenalty},secondary:d,failedSecondary:f,debt:u,label:v,secondaryLabels:_,fullLabel:[v,..._].join(" + ")}}function checkMissionRequirements(t,n){if(!t||!t.objective)return{passed:!0,results:null};const a=checkObjective(t.objective,n);if(a.type==="primary_secondary"){const{primaryStatus:o,failedSecondary:s,debt:l,primary:c}=a;return o==="failed"?{passed:!1,results:a,failureReason:c.target,graceTriggered:!1}:o==="grace"?{passed:!0,results:a,graceTriggered:!0,debt:l,gracePenalty:c.gracePenalty,graceNarrative:t.graceNarrative,failedSecondary:s}:{passed:!0,results:a,graceTriggered:!1,failedSecondary:s}}const r=a.met;if(t.objective.type==="composite"&&!r){let o=null;const s=t.objective.conditions||[];for(const l of s)if(!checkSingleCondition(l,n).met){o=l.target;break}return{passed:!1,results:a,failureReason:o}}return{passed:r,results:a}}function applyRoundEndEffects(t,n){return{}}const TOTAL_ROUNDS=12,MAX_DEBUFFS=3,ATTRIBUTE_DEFINITIONS={health:{id:"health",name:"",icon:"",color:"#e74c3c",min:0,max:1/0,thresholds:{critical:25,warning:50},zeroTrigger:{type:"death",deathType:"health_collapse",deathName:""},description:"",getEffectText:t=>t<=25?"":t<=50?"":t<=75?"":""},san:{id:"san",name:"SAN",icon:"",color:"#9b59b6",min:0,max:100,thresholds:{critical:25,warning:50},zeroTrigger:{type:"exhaustion",deathType:"mental_breakdown",deathName:""},description:"SANSANSAN",getEffectText:t=>t<=25?"":t<=50?"":t<=75?"":""},credit:{id:"credit",name:"",icon:"",color:"#3498db",min:0,max:1/0,thresholds:{critical:300,warning:350},zeroTrigger:null,description:"-8SAN-20",getEffectText:t=>t<=0?"":t<300?"":t<350?"":t<=400?"":""},luck:{id:"luck",name:"",icon:"",color:"#2ecc71",min:0,max:100,thresholds:{critical:null,warning:null},description:"",getEffectText:t=>` ${Math.round(t/2)}%`}},DERIVED_ATTRIBUTES={risk_resist:{id:"risk_resist",name:"",icon:"",color:"#16a085",min:0,max:100,thresholds:{critical:30,warning:50},description:"(35%)SAN(35%)(15%)(15%)",formula:{health:.35,san:.35,credit:.15,luck:.15},getEffectText:t=>t<30?"":t<50?"":t<70?"":""}},MONEY_CONFIG={id:"money",name:"",icon:"",color:"#f1c40f",description:"",getEffectText:t=>t<0?"":t<500?"":t<2e3?"":""},ATTRIBUTE_DISPLAY_ORDER=["health","san","credit","luck"];function calculateRiskResist(t){const n=DERIVED_ATTRIBUTES.risk_resist.formula,a=Math.round(n.health*(t.health||0)+n.san*(t.san||0)+n.credit*((t.credit||0)/8.5)+n.luck*(t.luck||0));return Math.max(0,Math.min(100,a))}function getAttributeStatus(t,n){const a=ATTRIBUTE_DEFINITIONS[t]||DERIVED_ATTRIBUTES[t];if(!a||!a.thresholds)return"normal";const{critical:r,warning:o}=a.thresholds;return r!==null&&n<=r?"critical":o!==null&&n<=o?"warning":n>=75?"good":"normal"}function getAttributeDisplayInfo(t,n){var o;const a=ATTRIBUTE_DEFINITIONS[t]||DERIVED_ATTRIBUTES[t];if(!a)return null;let r;return a.max===1/0||!a.max?r=Math.max(0,n):t==="credit"?r=Math.max(0,Math.min(100,n/8.5)):r=Math.max(0,Math.min(100,n)),{id:a.id,name:a.name,icon:a.icon,color:a.color,value:n,percent:r,max:a.max===1/0?null:a.max||100,status:getAttributeStatus(t,n),description:a.description,effectText:((o=a.getEffectText)==null?void 0:o.call(a,n))||""}}function getAttributeDisplayList(t){return ATTRIBUTE_DISPLAY_ORDER.map(n=>{const a=t[n]||0;return getAttributeDisplayInfo(n,a)})}function getAttributeTipData(t,n,a){var s,l;if(t==="money")return{icon:MONEY_CONFIG.icon,name:MONEY_CONFIG.name,value:`$${n}`,desc:MONEY_CONFIG.description,effect:MONEY_CONFIG.getEffectText(n)};if(t==="credit"){const c=ATTRIBUTE_DEFINITIONS.credit;return{icon:c.icon,name:c.name,value:`${n}`,desc:c.description,effect:((s=c.getEffectText)==null?void 0:s.call(c,n))||"",detail:`
400+  | 350-400 
300-350  | 300 `}}const r=ATTRIBUTE_DEFINITIONS[t]||DERIVED_ATTRIBUTES[t];if(!r)return null;const o=`${n}`;return{icon:r.icon,name:r.name,value:o,desc:r.description,effect:((l=r.getEffectText)==null?void 0:l.call(r,n))||""}}const _hoisted_1$7={class:"char-modal"},_hoisted_2$7={class:"char-modal-header"},_hoisted_3$6={class:"char-modal-content"},_hoisted_4$5={class:"char-avatar-large"},_hoisted_5$5=["src"],_hoisted_6$5={class:"char-badge"},_hoisted_7$5={class:"char-modal-name"},_hoisted_8$5={class:"char-modal-bio"},_hoisted_9$5={class:"char-modal-traits"},_hoisted_10$5={class:"month-bar"},_hoisted_11$4={class:"month-left"},_hoisted_12$4={class:"month-title"},_hoisted_13$4={class:"month-sub"},_hoisted_14$4={class:"month-progress"},_hoisted_15$4={class:"main-content"},_hoisted_16$4={class:"side-panel left-panel"},_hoisted_17$4={class:"char-avatar"},_hoisted_18$4=["src"],_hoisted_19$4={class:"char-info"},_hoisted_20$4={class:"char-name"},_hoisted_21$4={class:"char-role"},_hoisted_22$4={class:"resource-section"},_hoisted_23$3={class:"core-stats"},_hoisted_24$3={class:"core-bar"},_hoisted_25$3={class:"core-value"},_hoisted_26$2={class:"core-stat money"},_hoisted_27$2={class:"core-money-value"},_hoisted_28$2={class:"attrs-section"},_hoisted_29$2={class:"attr-list"},_hoisted_30$2=["onClick"],_hoisted_31$2={class:"attr-icon"},_hoisted_32$2={class:"attr-name"},_hoisted_33$2={class:"attr-bar"},_hoisted_34$2={class:"attr-val"},_hoisted_35$2={class:"center-area"},_hoisted_36$2={class:"attr-tip-header"},_hoisted_37$2={class:"attr-tip-icon"},_hoisted_38$2={class:"attr-tip-name"},_hoisted_39$2={class:"attr-tip-value"},_hoisted_40$2={class:"attr-tip-desc"},_hoisted_41$2={key:0,class:"attr-tip-effect"},_hoisted_42$2={class:"effect-text"},_hoisted_43$2={key:1,class:"attr-tip-detail"},_hoisted_44$2={class:"detail-text"},_hoisted_45$2={key:0,class:"mobile-status-tab-content"},_hoisted_46$2={class:"status-row player-core-row"},_hoisted_47$2={class:"player-avatar-wrap"},_hoisted_48$2=["src"],_hoisted_49$2={class:"player-text"},_hoisted_50$2={class:"player-name"},_hoisted_51$2={class:"player-role"},_hoisted_52$2={class:"core-value"},_hoisted_53$2={class:"risk-bar"},_hoisted_54$2={class:"core-value"},_hoisted_55$2={class:"mobile-attrs-row"},_hoisted_56$2=["onClick"],_hoisted_57$2={class:"attr-icon"},_hoisted_58$2={class:"attr-val"},_hoisted_59$1={class:"mobile-context-row"},_hoisted_60$1={class:"context-icon"},_hoisted_61$1={class:"context-icon"},_hoisted_62$1={class:"context-icon"},_hoisted_63$1={class:"context-modal-header"},_hoisted_64$1={class:"modal-title"},_hoisted_65$1={key:0,class:"context-modal-body mission-body"},_hoisted_66$1={class:"mission-desc"},_hoisted_67$1={key:1,class:"context-modal-body"},_hoisted_68$1={key:2,class:"context-modal-body"},_hoisted_69$1={class:"time-mission-wrapper desktop-only"},_hoisted_70$1={class:"mission-bar"},_hoisted_71$1={class:"mission-title"},_hoisted_72$1={class:"expand-icon"},_hoisted_73$1={class:"mission-expand"},_hoisted_74$1={key:0,class:"mission-desc"},_hoisted_75$1={class:"game-main"},_hoisted_76$1={key:0,class:"action-area"},_hoisted_77$1={class:"category-nav"},_hoisted_78$1=["onClick"],_hoisted_79$1={class:"cat-icon"},_hoisted_80$1={class:"cat-label"},_hoisted_81={key:0,class:"cat-badge"},_hoisted_82={class:"behavior-grid"},_hoisted_83=["onClick"],_hoisted_84={class:"behavior-header"},_hoisted_85={class:"behavior-icon"},_hoisted_86={class:"behavior-name"},_hoisted_87={class:"behavior-desc"},_hoisted_88={key:0,class:"behavior-effects"},_hoisted_89={key:1,class:"behavior-lock"},_hoisted_90={class:"lock-content"},_hoisted_91={class:"lock-reason"},_hoisted_92={key:0,class:"empty-hint"},_hoisted_93={key:1,class:"wait-screen"},_hoisted_94={class:"wait-icon"},_hoisted_95={class:"wait-text"},_hoisted_96={key:2,class:"gameover-overlay"},_hoisted_97={class:"gameover-card"},_hoisted_98={class:"gameover-icon"},_hoisted_99={class:"gameover-title"},_hoisted_100={class:"gameover-stats"},_hoisted_101={class:"gstat"},_hoisted_102={class:"gstat-val"},_hoisted_103={class:"gstat"},_hoisted_104={class:"gstat-val"},_hoisted_105={class:"gstat"},_hoisted_106={class:"gstat-val"},_hoisted_107={key:2,class:"action-footer"},_hoisted_108={key:0,class:"btn-badge"},_hoisted_109={key:0,class:"btn-badge new-badge"},_hoisted_110={class:"side-panel right-panel"},_hoisted_111={class:"log-panel"},_hoisted_112={class:"log-scroll"},_hoisted_113={class:"log-time"},_hoisted_114={class:"log-text"},_hoisted_115={key:0,class:"log-empty"},_hoisted_116={class:"log-header"},_hoisted_117={class:"log-scroll"},_hoisted_118={class:"log-time"},_hoisted_119={class:"log-text"},_hoisted_120={key:0,class:"log-empty"},_hoisted_121={class:"rumor-icon"},_hoisted_122={class:"rumor-marquee"},_hoisted_123={class:"rumor-scroll-text"},_hoisted_124={class:"rumor-modal"},_hoisted_125={class:"rumor-modal-header"},_hoisted_126={class:"rumor-modal-title"},_hoisted_127={class:"rumor-modal-body"},_hoisted_128=["innerHTML"],_hoisted_129={key:0,class:"devtools-panel"},_hoisted_130={class:"devtools-header"},_hoisted_131={class:"devtools-content"},_hoisted_132={class:"devtools-section"},_hoisted_133={class:"devtools-round-btns"},_hoisted_134=["onClick"],_hoisted_135={class:"devtools-section"},_hoisted_136={class:"devtools-attr-list"},_hoisted_137={class:"devtools-attr-row"},_hoisted_138={class:"devtools-attr-controls"},_hoisted_139=["value"],_hoisted_140={class:"devtools-attr-row"},_hoisted_141={class:"devtools-attr-controls"},_hoisted_142=["value"],_hoisted_143={class:"devtools-attr-row"},_hoisted_144={class:"devtools-attr-controls"},_hoisted_145=["value"],_hoisted_146={class:"devtools-attr-row"},_hoisted_147={class:"devtools-attr-controls"},_hoisted_148=["value"],_hoisted_149={class:"devtools-attr-row"},_hoisted_150={class:"devtools-attr-controls"},_hoisted_151=["value"],_hoisted_152={class:"devtools-attr-row"},_hoisted_153={class:"devtools-attr-controls"},_hoisted_154=["value"],_hoisted_155={class:"devtools-attr-row"},_hoisted_156={class:"devtools-attr-controls"},_hoisted_157=["value"],_hoisted_158={key:0,class:"toast toast-warning"},_sfc_main$a={__name:"StageS06LoopV3",setup(t){const n=useGameStore(),a=!1,r=ref(!1),o=ref(""),s=ref([]),l=ref(!1),c=ref("earn"),u=ref(!1),d=ref(!1),f=ref(!1),v=ref(!1),_=ref(null);function g(O){_.value=O}const y=ref(!1),b=ref({icon:"",name:"",value:"",desc:"",effect:""}),T=ref(!1),S=ref(!1),C=ref(null),E=ref(new Set),x=ref(!1),A=ref(null),N=ref(!1),M=ref(null),R=ref(!1),D=ref(!1),L=ref({foodData:null,housingData:null}),I=ref(!1),$=ref(null),V=ref(!1),H=ref(null),X=ref(!1),q=ref(null),z=ref(!1),G=ref(null),oe=ref(!1),ne=ref(null),ue=ref(!1),se=ref("");let fe=null;function ae(O,B=2e3){fe&&clearTimeout(fe),se.value=O,fe=setTimeout(()=>{se.value=""},B)}const ie=ref(!1),ve=ref(new Set),le=computed(()=>{const O=n.s.character;return O&&O.name?{name:O.name,role:O.archetype||"",seed:O.name,avatar:O.gender==="male"?"male":"female",bio:O.description||"",traits:O.tags||[],gender:O.gender,city:O.city,state:O.state,avatarEmoji:O.avatarEmoji,innerVoice:O.innerVoice}:{name:"",role:"",seed:"default",avatar:"default",bio:"",traits:["",""]}}),pe=computed(()=>`https://api.dicebear.com/7.x/notionists/svg?seed=${le.value.seed}&backgroundColor=transparent`),Te=computed(()=>{var B;return(((B=LOOP_CONFIG.v3)==null?void 0:B.roundTitles)||{})[Y.value]||`${Y.value}`}),U=ref(!1),W=ref({money:0,attributes:{}});function w(){const O=n.s.v3||{};W.value={money:O.money||0,attributes:{...O.attributes||{}}},U.value=!0}function P(){U.value=!1}const F=computed(()=>n.s.v3||{}),Y=computed(()=>F.value.currentRound||1),K=computed(()=>F.value.roundPhase||"action"),j=computed(()=>U.value?W.value.money:F.value.money||0),J=computed(()=>F.value.gameEnded||!1),ee=computed(()=>F.value.endType||null),te=computed(()=>F.value.stats||{}),Z=ref(!1),he=computed(()=>F.value.endingFlow||null),re=computed(()=>F.value.deathInfo||null),de=computed(()=>{var O,B;return((O=re.value)==null?void 0:O.endingId)||((B=re.value)==null?void 0:B.type)||(ee.value==="victory"?"survival":"generic_bankrupt")}),ge=computed(()=>K.value==="ending"&&he.value);function _e(){return U.value?W.value.attributes:F.value.attributes||{}}const be=computed(()=>{const B=_e().health||0;return B<=20?"critical":B<=40?"warning":"healthy"}),me=computed(()=>{const O=_e();return calculateRiskResist(O)}),Ae=computed(()=>{const O=_e();return getAttributeDisplayList(O).map(B=>({id:B.id,icon:B.icon,label:B.name,value:B.value,percent:B.percent,color:B.color,status:B.status==="critical"||B.status==="warning"?"low":"",desc:B.description}))}),Ce=computed(()=>{var O,B;return((B=(O=n.getV3CurrentRound)==null?void 0:O.call(n))==null?void 0:B.mission)||null}),Me=["","","","","","","",""],Ee=computed(()=>{const O=Y.value||1;return Me[O%Me.length]}),De=computed(()=>{var O;return((O=n.getV3MissionStatus)==null?void 0:O.call(n))||null});computed(()=>{const O=De.value;return!O||!O.results?{met:0,total:1}:{met:O.passed?1:0,total:1}});const ze=computed(()=>{var O;return((O=n.getHousingOptions)==null?void 0:O.call(n))||[]}),Ne=computed(()=>{var O;return((O=n.getCurrentHousing)==null?void 0:O.call(n))||null}),$e=computed(()=>{var O;return((O=n.hasChangedHousingThisRound)==null?void 0:O.call(n))||!1}),Ye=computed(()=>{var O;return((O=n.getAvailableFoods)==null?void 0:O.call(n))||[]}),We=computed(()=>{var O;return((O=n.hasChosenStrategy)==null?void 0:O.call(n))||!1}),ot=computed(()=>{var O;return((O=n.getCurrentStrategy)==null?void 0:O.call(n))||null});function ft(O){var ce;const B=(ce=n.switchHousing)==null?void 0:ce.call(n,O);B!=null&&B.success&&nextTick(()=>{He()})}function ht(O){var ce;const B=parseInt(O.replace("diet_",""),10);if(!isNaN(B)){const ye=(ce=n.setDietLevel)==null?void 0:ce.call(n,B);ye!=null&&ye.success}}const pt=computed(()=>{var O;return((O=n.getV3BehaviorsByCategory)==null?void 0:O.call(n))||{}}),st=computed(()=>[{id:"earn",icon:"",name:""},{id:"moneyToHealth",icon:"",name:""},{id:"heal",icon:"",name:""},{id:"healthToMoney",icon:"",name:""},{id:"credit",icon:"",name:""},{id:"gamble",icon:"",name:""},{id:"special",icon:"",name:""}].map(B=>({...B,count:(pt.value[B.id]||[]).filter(ce=>ce.unlocked).length}))),vt=computed(()=>[...pt.value[c.value]||[]].sort((B,ce)=>{const ye=xe=>xe.unlocked?xe.canExecute?0:1:2;return ye(B)-ye(ce)})),Xe=computed(()=>[...n.s.feed||[]].reverse().slice(0,30)),gt=computed(()=>Math.min((n.s.feed||[]).length,99)),hn=computed(()=>{var O;return((O=n.hasNewShopItem)==null?void 0:O.call(n))||!1});function mt(O){const B=new Date(O);return`${String(B.getHours()).padStart(2,"0")}:${String(B.getMinutes()).padStart(2,"0")}`}function _t(O){return O.icon||""}function pn(O){if(O==="money")return MONEY_CONFIG.icon;const B=ATTRIBUTE_DEFINITIONS[O];return B?B.icon:O}function Ze(O){const B=F.value.attributes||{};let ce;O==="money"?ce=j.value:O==="risk_resist"?ce=me.value:ce=B[O]||0;const ye=getAttributeTipData(O,ce);ye&&(b.value=ye,y.value=!0)}let Ue=null,Je=null;async function vn(O){if(O.id==="SP03"&&(u.value=!0),!!O.unlocked){if(!O.canExecute){const ce=(O.executeReasons||[]).filter(ye=>!ye.includes("SAN")&&!ye.includes(""));if(ce.length>0){ae(ce[0]);return}}ne.value=O,oe.value=!0}}function gn(){oe.value=!1,ne.value=null}function mn(O){ae(`: ${O.name}`)}function _n(){var B;const O=ne.value;if(oe.value=!1,ne.value=null,!((B=n.canV3Act)!=null&&B.call(n))){ae("");return}o.value=O.name,s.value=[O.actionNarrative||O.description],r.value=!0,Je=O.id}function yn(){var O,B;if(r.value=!1,o.value="",s.value=[],Je){w();const ce=(O=n.executeV3Behavior)==null?void 0:O.call(n,Je);Ue=ce,Je=null,ce!=null&&ce.success&&((B=ce.result)!=null&&B.narrative)&&(s.value=[ce.result.narrative])}Ue!=null&&Ue.success&&(An(Ue),Ue=null)}function bn(){Sn()||ct()}function Sn(){var ce,ye,xe;const O=(ce=n.getKillLineEvent)==null?void 0:ce.call(n);if(!O||(ye=n.hasKillLineEventApplied)!=null&&ye.call(n))return!1;const B={};for(const ke of O.choices){const Ie=(xe=n.checkKillLineChoice)==null?void 0:xe.call(n,ke);Ie!=null&&Ie.willKill&&(B[ke.id]=Ie.warnings)}return G.value={mode:"killline",round:n.s.v3.currentRound,killLineEvent:O,killWarnings:B},z.value=!0,!0}function ct(){var ce,ye,xe,ke;const O=(ce=n.endV3ActionPhase)==null?void 0:ce.call(n);if(!(O!=null&&O.success))return;(ye=n.hasMonthlyExpensesDeducted)!=null&&ye.call(n)||(xe=n.deductMonthlyExpenses)==null||xe.call(n),nextTick(()=>{He()});const B=(ke=n.executeV3Settlement)==null?void 0:ke.call(n);B!=null&&B.requiresChoice||B!=null&&B.success&&(B!=null&&B.passed)&&Tt()}function Tn(){var O;(O=n.confirmV3Settlement)==null||O.call(n)}function Cn(){var O;(O=n.resetV3State)==null||O.call(n)}function En(O){var B;(B=n.advanceV3EndingFlow)==null||B.call(n,O)}function yt(){var O;Z.value=!1,n.reset(),(O=n.resetV3State)==null||O.call(n)}function xn(){var O,B;if(D.value=!1,F.value.survivalCheckFailed){(O=n.triggerSurvivalCheckDeath)==null||O.call(n);return}if(ut){ut=!1;const ce=getMissionByRound(Y.value);ce&&n.triggerV3MissionFailure&&n.triggerV3MissionFailure(ce,{failurePreview:"...",failureReason:"money"});return}(B=n.applySurvivalCheckEffects)==null||B.call(n),nextTick(()=>{He()}),ve.value.add(Y.value),setTimeout(()=>{E.value.has(Y.value)||Qe()},200)}function Qe(){const O=Ce.value;O&&(C.value={round:Y.value,missionName:O.name||"",missionTheme:O.theme||"",openingNarrative:O.openingNarrative||"",failurePreview:O.failurePreview||"",objective:O.objective||null},S.value=!0)}function bt(){var O;S.value=!1,E.value.add(Y.value),Y.value>1&&!((O=n.hasSurvivalCheckApplied)!=null&&O.call(n))?setTimeout(()=>{Ct()},200):Y.value===1?setTimeout(()=>{R.value=!0},200):setTimeout(()=>{it()},200)}function St(){R.value=!1,setTimeout(()=>{it()},200)}function An(O){if(!O||!O.result)return;const{behavior:B,effects:ce,costs:ye,narrative:xe,critTriggered:ke,riskTriggered:Ie}=O.result;let Ke="",qe="";if(ke&&ce){const Le=[];for(const[Oe,Ve]of Object.entries(ce))Ve>0&&(Oe==="money"?Le.push(`$${Ve}`):Le.push(`${Oe} +${Ve}`));Ke=Le.join(", ")}if(Ie&&ce){const Le=[];for(const[Oe,Ve]of Object.entries(ce))Ve<0&&(Oe==="money"?Le.push(`$${Math.abs(Ve)}`):Le.push(`${Oe} ${Ve}`));qe=Le.join(", ")}A.value={behaviorName:(B==null?void 0:B.name)||"",behaviorIcon:(B==null?void 0:B.icon)||_t({icon:B==null?void 0:B.icon}),behaviorCategory:(B==null?void 0:B.category)||"heal",narrative:xe||"",effects:ce||{},costs:ye||{},critTriggered:ke,riskTriggered:Ie,critBonus:Ke,riskPenalty:qe},x.value=!0}function kn(){var O,B,ce;if(console.log("[onBehaviorResultContinue] Called"),console.log("[onBehaviorResultContinue] pendingDeathTrigger:",Nn),console.log("[onBehaviorResultContinue] pendingSurvivalCheckCard:",nt),console.log("[onBehaviorResultContinue] pendingSettlementAfterChoice:",et),x.value=!1,A.value=null,P(),He(),at){console.log("[onBehaviorResultContinue] Processing kill line result");const ye=at;if(at=null,ye.isKill){(O=n.triggerKillLineDeath)==null||O.call(n,ye.killAttribute,ye.narrative);return}setTimeout(()=>{ct()},300);return}if(nt){console.log("[onBehaviorResultContinue] Survival check failed, triggering death flow directly"),nt=!1,dt=null,(B=n.triggerSurvivalCheckDeath)==null||B.call(n);return}if(et){if(et=!1,F.value.rentFailedThisRound){ut=!0;const ye=(ce=n.getCurrentHousing)==null?void 0:ce.call(n);L.value={foodData:{hasStrategy:!0,strategy:null,effects:{}},housingData:{housing:ye,rentFailed:!0,rentPaid:0,effects:{health:-10,san:-15,stealth:-5}}},D.value=!0;return}ct()}}let et=!1,ut=!1,nt=!1,dt=null,Nn=!1,at=null;function Mn(O){var ce;console.log("[onSettlementChoiceSelect] Selected choice:",O.id);const B=(ce=n.executeV3SettlementChoice)==null?void 0:ce.call(n,O.id);if(console.log("[onSettlementChoiceSelect] Result:",B),B!=null&&B.success){if(N.value=!1,nextTick(()=>{He()}),console.log("[onSettlementChoiceSelect] survivalOutcome:",B.survivalOutcome),B.survivalOutcome==="death"){console.log("[onSettlementChoiceSelect] Death detected! Setting pendingSurvivalCheckCard"),nt=!0,dt=B.survivalCheckFailure,console.log("[onSettlementChoiceSelect] pendingSurvivalCheckData:",dt),A.value={behaviorName:O.label,behaviorIcon:"",behaviorCategory:"special",narrative:B.resultNarrative||"",effects:B.effects||{},critTriggered:!1,riskTriggered:!1,critBonus:"",riskPenalty:""},x.value=!0;return}A.value={behaviorName:O.label,behaviorIcon:B.survivalOutcome==="marked"?"":"",behaviorCategory:B.survivalOutcome==="marked"?"warning":"special",narrative:B.resultNarrative||"",effects:B.effects||{},critTriggered:!1,riskTriggered:!1,critBonus:"",riskPenalty:""},x.value=!0,et=!0}}function He(){var O;(O=n._consumeAttributeChanges)==null||O.call(n)}function Tt(){var B,ce;const O=(B=n.getMonthlyReportData)==null?void 0:B.call(n);if(!O){(ce=n.confirmV3Settlement)==null||ce.call(n);return}Analytics.roundEnd(O.round),$.value=O,I.value=!0}function Bn(){var O;I.value=!1,$.value=null,(O=n.confirmV3Settlement)==null||O.call(n)}function Ct(){var B;const O=(B=n.getConsequencesData)==null?void 0:B.call(n);return!O||!O.consequences||O.consequences.length===0?(it(),!1):(H.value=O,V.value=!0,!0)}function wn(){var O;V.value=!1,H.value=null,(O=n.applySurvivalCheckEffects)==null||O.call(n),nextTick(()=>{He()}),setTimeout(()=>{it()},200)}function it(){var B;const O=(B=n.getUnlocksData)==null?void 0:B.call(n);return!O||!O.hasUnlocks?(setTimeout(()=>{Et()},200),!1):(q.value=O,X.value=!0,!0)}function Rn(){var O;X.value=!1,(O=n.clearAllPendingUnlocks)==null||O.call(n),q.value=null,setTimeout(()=>{Et()},200)}function Et(){var B,ce;if((B=n.hasMonthlyEventsApplied)!=null&&B.call(n))return!1;const O=(ce=n.getMonthlyEventsData)==null?void 0:ce.call(n);return!O||Y.value===1?!1:(G.value={mode:"random",...O},z.value=!0,!0)}function $n(){var O;z.value=!1,(O=n.applyMonthlyEventsEffects)==null||O.call(n),nextTick(()=>{He()}),G.value=null}function Dn(O){var ye;z.value=!1;const B=(ye=n.executeKillLineChoice)==null?void 0:ye.call(n,O.id);if(!(B!=null&&B.success)){console.error("Kill line choice failed:",B==null?void 0:B.error),G.value=null;return}const ce={};if(B.costs)for(const[xe,ke]of Object.entries(B.costs))ce[xe]=-ke;if(B.bonusEffects)for(const[xe,ke]of Object.entries(B.bonusEffects))ce[xe]=(ce[xe]||0)+ke;A.value={behaviorName:O.label,behaviorIcon:B.isKill?"":"",behaviorCategory:"special",narrative:B.narrative||"",effects:ce,critTriggered:!1,riskTriggered:B.isKill,critBonus:"",riskPenalty:B.isKill?"":""},x.value=!0,at=B,G.value=null}function In(O){var B;n.s.v3&&(n.s.v3.currentRound=O,n.s.v3.roundPhase="action",n.s.v3.gameEnded=!1,n.s.v3.endType=null,n.s.v3.endingFlow=null,n.s.v3.deathInfo=null,n.s.v3.roundBehaviors=[],n.s.v3.survivalCheckApplied=!1,E.value.clear(),ve.value.clear(),(B=n.save)==null||B.call(n),console.log(`[DevTools]  ${O} `))}function Ge(O,B){var ye;const ce=parseInt(B,10);isNaN(ce)||((ye=n.setV3Attribute)==null||ye.call(n,O,ce),console.log(`[DevTools]  ${O} = ${ce}`))}function we(O,B){var ce;(ce=n.modifyV3Attribute)==null||ce.call(n,O,B,"[DevTools]"),console.log(`[DevTools]  ${O} ${B>0?"+":""}${B}`)}function Ln(){var O;(O=n.resetV3State)==null||O.call(n),E.value.clear(),ve.value.clear(),I.value=!1,V.value=!1,X.value=!1,z.value=!1,$.value=null,H.value=null,q.value=null,G.value=null,console.log("[DevTools] ")}function Vn(){var O,B,ce,ye,xe,ke;(O=n.setV3Attribute)==null||O.call(n,"health",100),(B=n.setV3Attribute)==null||B.call(n,"san",100),(ce=n.setV3Attribute)==null||ce.call(n,"stealth",100),(ye=n.setV3Attribute)==null||ye.call(n,"stamina",100),(xe=n.setV3Attribute)==null||xe.call(n,"luck",100),(ke=n.setV3Attribute)==null||ke.call(n,"money",5e3),console.log("[DevTools] ")}function Pn(){var O;(O=n.modifyV3Attribute)==null||O.call(n,"money",1e3,"[DevTools]"),console.log("[DevTools]  +1000")}function On(){var O,B;((O=n.s.v3)==null?void 0:O.roundPhase)==="action"&&((B=n.endV3ActionPhase)==null||B.call(n),console.log("[DevTools] "))}const xt=ref(!1);function At(){f.value=!1,nextTick(()=>{K.value==="action"&&!E.value.has(Y.value)&&Qe()})}return onMounted(()=>{var O;(O=n.initV3State)==null||O.call(n),st.value.length>0&&(c.value=st.value[0].id),nextTick(()=>{var B;if(Y.value===1&&!xt.value){f.value=!0,xt.value=!0;return}K.value==="action"&&(E.value.has(Y.value)?Y.value>1&&!((B=n.hasSurvivalCheckApplied)!=null&&B.call(n))&&Ct():Qe())})}),watch(K,O=>{var B;if(O==="settlement"){const ce=(B=n.executeV3Settlement)==null?void 0:B.call(n);if(ce!=null&&ce.requiresChoice)return;ce!=null&&ce.success&&(ce!=null&&ce.passed)&&Tt()}}),watch(Y,(O,B)=>{O!==B&&K.value==="action"&&setTimeout(()=>{E.value.has(O)||Qe()},300)}),(O,B)=>{var ce,ye,xe,ke,Ie,Ke,qe,Le,Oe,Ve,kt,Nt,Mt,Bt,wt,Rt,$t,Dt,It,Lt,Vt,Pt,Ot,Ft,Ht,Gt,Ut,zt,Yt,Wt,Kt,qt,jt,Xt,Zt,Jt,Qt,en,tn,nn,an,rn,on,sn,ln,cn,un,dn;return openBlock(),createElementBlock("div",{class:normalizeClass(["v3-game",{"game-ended":J.value}])},[createVNode(ActionProgressV2,{visible:r.value,"action-name":o.value,narratives:s.value,duration:3e3,onComplete:yn},null,8,["visible","action-name","narratives"]),ge.value&&ee.value==="victory"&&!Z.value?(openBlock(),createBlock(VictoryModal,{key:0,visible:!0,"death-info":re.value,onShowShare:B[0]||(B[0]=Q=>Z.value=!0),onRestart:yt},null,8,["death-info"])):createCommentVNode("",!0),ge.value&&(ee.value!=="victory"||Z.value)?(openBlock(),createBlock(EndingFlowModal,{key:1,"ending-type":de.value,"ending-flow":he.value,"death-info":re.value,stats:te.value,onAdvance:En,onRestart:yt},null,8,["ending-type","ending-flow","death-info","stats"])):createCommentVNode("",!0),createVNode(SurvivalCheckModal,{visible:D.value,"food-data":L.value.foodData,"housing-data":L.value.housingData,onConfirm:xn},null,8,["visible","food-data","housing-data"]),createVNode(RoundOpeningModal,{visible:S.value,"current-round":((ce=C.value)==null?void 0:ce.round)||Y.value,"mission-name":((ye=C.value)==null?void 0:ye.missionName)||"","mission-theme":((xe=C.value)==null?void 0:xe.missionTheme)||"","opening-narrative":((ke=C.value)==null?void 0:ke.openingNarrative)||"","failure-preview":((Ie=C.value)==null?void 0:Ie.failurePreview)||"",objective:((Ke=C.value)==null?void 0:Ke.objective)||null,onStart:bt,onClose:bt},null,8,["visible","current-round","mission-name","mission-theme","opening-narrative","failure-preview","objective"]),createVNode(BehaviorResultModal,{visible:x.value,"behavior-name":((qe=A.value)==null?void 0:qe.behaviorName)||"","behavior-icon":((Le=A.value)==null?void 0:Le.behaviorIcon)||"","behavior-category":((Oe=A.value)==null?void 0:Oe.behaviorCategory)||"heal",narrative:((Ve=A.value)==null?void 0:Ve.narrative)||"",effects:((kt=A.value)==null?void 0:kt.effects)||{},costs:((Nt=A.value)==null?void 0:Nt.costs)||{},"crit-triggered":((Mt=A.value)==null?void 0:Mt.critTriggered)||!1,"risk-triggered":((Bt=A.value)==null?void 0:Bt.riskTriggered)||!1,"crit-bonus":((wt=A.value)==null?void 0:wt.critBonus)||"","risk-penalty":((Rt=A.value)==null?void 0:Rt.riskPenalty)||"",onContinue:kn},null,8,["visible","behavior-name","behavior-icon","behavior-category","narrative","effects","costs","crit-triggered","risk-triggered","crit-bonus","risk-penalty"]),createVNode(BehaviorConfirmModal,{visible:oe.value,behavior:ne.value,"current-san":(($t=F.value.attributes)==null?void 0:$t.san)||0,"current-money":F.value.money||0,"current-health":((Dt=F.value.attributes)==null?void 0:Dt.health)||0,onCancel:gn,onExecute:_n},null,8,["visible","behavior","current-san","current-money","current-health"]),createVNode(ShopModal,{visible:ue.value,onClose:B[1]||(B[1]=Q=>ue.value=!1),onPurchase:mn},null,8,["visible"]),createVNode(SettlementChoiceModal,{visible:N.value,"current-round":((It=M.value)==null?void 0:It.round)||Y.value,narrative:((Lt=M.value)==null?void 0:Lt.narrative)||"",choices:((Vt=M.value)==null?void 0:Vt.choices)||[],"player-state":((Pt=M.value)==null?void 0:Pt.playerState)||{money:0,attributes:{}},"escape-hint":((Ot=M.value)==null?void 0:Ot.escapeHint)||"",onSelect:Mn},null,8,["visible","current-round","narrative","choices","player-state","escape-hint"]),createVNode(MonthlyReportModal,{visible:I.value,round:((Ft=$.value)==null?void 0:Ft.round)||Y.value,behaviors:((Ht=$.value)==null?void 0:Ht.behaviors)||[],"behavior-count":((Gt=$.value)==null?void 0:Gt.behaviorCount)||0,financials:((Ut=$.value)==null?void 0:Ut.financials)||{income:0,expense:0,net:0},"attribute-changes":((zt=$.value)==null?void 0:zt.attributeChanges)||[],"food-strategy":(Yt=$.value)==null?void 0:Yt.foodStrategy,housing:(Wt=$.value)==null?void 0:Wt.housing,onConfirm:Bn},null,8,["visible","round","behaviors","behavior-count","financials","attribute-changes","food-strategy","housing"]),createVNode(ConsequencesModal,{visible:V.value,round:((Kt=H.value)==null?void 0:Kt.round)||Y.value,consequences:((qt=H.value)==null?void 0:qt.consequences)||[],onConfirm:wn},null,8,["visible","round","consequences"]),createVNode(UnlocksModal,{visible:X.value,round:((jt=q.value)==null?void 0:jt.round)||Y.value,unlocks:((Xt=q.value)==null?void 0:Xt.unlocks)||[],onConfirm:Rn},null,8,["visible","round","unlocks"]),createVNode(MonthlyEventsModal,{visible:z.value,round:((Zt=G.value)==null?void 0:Zt.round)||Y.value,mode:((Jt=G.value)==null?void 0:Jt.mode)||"random","lucky-event":((Qt=G.value)==null?void 0:Qt.luckyEvent)||null,"risk-event":((en=G.value)==null?void 0:en.riskEvent)||null,"kill-line-event":((tn=G.value)==null?void 0:tn.killLineEvent)||null,"kill-warnings":((nn=G.value)==null?void 0:nn.killWarnings)||{},onConfirm:$n,onSelect:Dn},null,8,["visible","round","mode","lucky-event","risk-event","kill-line-event","kill-warnings"]),f.value?(openBlock(),createElementBlock("div",{key:2,class:"modal-overlay",onClick:withModifiers(At,["self"])},[createBaseVNode("div",{class:"guide-modal"},[createBaseVNode("div",{class:"guide-header"},[B[53]||(B[53]=createBaseVNode("h3",null,"",-1)),createBaseVNode("button",{class:"modal-close",onClick:At},"")]),B[54]||(B[54]=createStaticVNode('<div class="guide-content" data-v-1d37cf50><section class="guide-section" data-v-1d37cf50><h4 data-v-1d37cf50> </h4><p data-v-1d37cf50> &quot;&quot; ... </p><p class="guide-highlight" data-v-1d37cf50><strong data-v-1d37cf50>12</strong>&quot;&quot;  </p></section><section class="guide-section guide-quickstart" data-v-1d37cf50><h4 data-v-1d37cf50> </h4><div class="quickstart-steps" data-v-1d37cf50><div class="quickstart-step" data-v-1d37cf50><span class="step-num" data-v-1d37cf50>1</span><span class="step-text" data-v-1d37cf50></span></div><div class="quickstart-step" data-v-1d37cf50><span class="step-num" data-v-1d37cf50>2</span><span class="step-text" data-v-1d37cf50></span></div><div class="quickstart-step" data-v-1d37cf50><span class="step-num" data-v-1d37cf50>3</span><span class="step-text" data-v-1d37cf50>12</span></div></div></section><section class="guide-section" data-v-1d37cf50><h4 data-v-1d37cf50> </h4><div class="attr-explain" data-v-1d37cf50><div class="attr-item" data-v-1d37cf50><span class="attr-icon" data-v-1d37cf50></span><div class="attr-info" data-v-1d37cf50><strong data-v-1d37cf50></strong><p data-v-1d37cf50></p></div></div><div class="attr-item" data-v-1d37cf50><span class="attr-icon" data-v-1d37cf50></span><div class="attr-info" data-v-1d37cf50><strong data-v-1d37cf50>SAN</strong><p data-v-1d37cf50>SAN</p></div></div><div class="attr-item" data-v-1d37cf50><span class="attr-icon" data-v-1d37cf50></span><div class="attr-info" data-v-1d37cf50><strong data-v-1d37cf50></strong><p data-v-1d37cf50> -8400+350-400300-350<strong style="color:#e74c3c;" data-v-1d37cf50>300</strong></p></div></div><div class="attr-item" data-v-1d37cf50><span class="attr-icon" data-v-1d37cf50></span><div class="attr-info" data-v-1d37cf50><strong data-v-1d37cf50></strong><p data-v-1d37cf50></p></div></div><div class="attr-item" data-v-1d37cf50><span class="attr-icon" data-v-1d37cf50></span><div class="attr-info" data-v-1d37cf50><strong data-v-1d37cf50></strong><p data-v-1d37cf50>/SAN//</p></div></div><div class="attr-item" data-v-1d37cf50><span class="attr-icon" data-v-1d37cf50></span><div class="attr-info" data-v-1d37cf50><strong data-v-1d37cf50></strong><p data-v-1d37cf50></p></div></div></div></section><section class="guide-section" data-v-1d37cf50><h4 data-v-1d37cf50> </h4><div class="cat-explain" data-v-1d37cf50><p data-v-1d37cf50><strong data-v-1d37cf50> </strong>  </p><p data-v-1d37cf50><strong data-v-1d37cf50> </strong>  </p><p data-v-1d37cf50><strong data-v-1d37cf50> </strong>  </p><p data-v-1d37cf50><strong data-v-1d37cf50> </strong>  </p><p data-v-1d37cf50><strong data-v-1d37cf50> </strong>  </p><p data-v-1d37cf50><strong data-v-1d37cf50> </strong>  </p><p data-v-1d37cf50><strong data-v-1d37cf50> </strong>  </p></div></section><section class="guide-section" data-v-1d37cf50><h4 data-v-1d37cf50> </h4><div class="cat-explain" data-v-1d37cf50><p data-v-1d37cf50><strong data-v-1d37cf50> </strong>  SAN </p><p data-v-1d37cf50><strong data-v-1d37cf50> </strong>  </p><p data-v-1d37cf50><strong data-v-1d37cf50> </strong>  </p></div></section><section class="guide-section" data-v-1d37cf50><h4 data-v-1d37cf50> </h4><p data-v-1d37cf50> <strong data-v-1d37cf50></strong> <strong data-v-1d37cf50></strong> </p><p class="guide-highlight" data-v-1d37cf50> 12&quot;&quot; </p></section><section class="guide-section" data-v-1d37cf50><h4 data-v-1d37cf50> </h4><ul class="tips-list" data-v-1d37cf50><li data-v-1d37cf50></li><li data-v-1d37cf50>SAN</li><li data-v-1d37cf50>-8300</li><li data-v-1d37cf50></li><li data-v-1d37cf50></li></ul></section></div>',1))])])):createCommentVNode("",!0),R.value?(openBlock(),createElementBlock("div",{key:3,class:"modal-overlay",onClick:withModifiers(St,["self"])},[createBaseVNode("div",{class:"guide-modal"},[createBaseVNode("div",{class:"guide-header"},[B[55]||(B[55]=createBaseVNode("h3",null," ",-1)),createBaseVNode("button",{class:"modal-close",onClick:St},"")]),B[56]||(B[56]=createStaticVNode('<div class="guide-content" data-v-1d37cf50><section class="guide-section" data-v-1d37cf50><p data-v-1d37cf50></p><p data-v-1d37cf50></p><p class="guide-highlight" style="font-style:italic;" data-v-1d37cf50> &quot;&quot; </p><p style="opacity:0.5;font-size:0.75em;" data-v-1d37cf50></p></section><section class="guide-section" data-v-1d37cf50><p data-v-1d37cf50>  SAN</p><p data-v-1d37cf50></p></section><section class="guide-section" data-v-1d37cf50><p data-v-1d37cf50></p></section></div>',1))])])):createCommentVNode("",!0),v.value?(openBlock(),createElementBlock("div",{key:4,class:"modal-overlay",onClick:B[3]||(B[3]=withModifiers(Q=>v.value=!1,["self"]))},[createBaseVNode("div",_hoisted_1$7,[createBaseVNode("div",_hoisted_2$7,[createBaseVNode("button",{class:"modal-close",onClick:B[2]||(B[2]=Q=>v.value=!1)},"")]),createBaseVNode("div",_hoisted_3$6,[createBaseVNode("div",_hoisted_4$5,[createBaseVNode("img",{src:pe.value,alt:"avatar"},null,8,_hoisted_5$5),createBaseVNode("div",_hoisted_6$5,toDisplayString(le.value.role),1)]),createBaseVNode("h3",_hoisted_7$5,toDisplayString(le.value.name),1),createBaseVNode("p",_hoisted_8$5,toDisplayString(le.value.bio),1),createBaseVNode("div",_hoisted_9$5,[(openBlock(!0),createElementBlock(Fragment,null,renderList(le.value.traits,Q=>(openBlock(),createElementBlock("span",{key:Q,class:"trait-tag"},toDisplayString(Q),1))),128))])])])])):createCommentVNode("",!0),r.value?createCommentVNode("",!0):(openBlock(),createElementBlock(Fragment,{key:5},[createBaseVNode("header",_hoisted_10$5,[createBaseVNode("div",_hoisted_11$4,[createBaseVNode("div",_hoisted_12$4,toDisplayString(((an=Ce.value)==null?void 0:an.name)||Te.value),1),createBaseVNode("div",_hoisted_13$4,"  "+toDisplayString(Y.value)+"   "+toDisplayString(((rn=Ce.value)==null?void 0:rn.theme)||""),1)]),createBaseVNode("div",_hoisted_14$4,[(openBlock(),createElementBlock(Fragment,null,renderList(12,Q=>createBaseVNode("div",{key:Q,class:normalizeClass(["month-dot",{completed:Q<Y.value,current:Q===Y.value,future:Q>Y.value}])},null,2)),64))])]),createBaseVNode("div",_hoisted_15$4,[createBaseVNode("aside",_hoisted_16$4,[createBaseVNode("div",{class:"char-card",onClick:B[4]||(B[4]=Q=>v.value=!0)},[createBaseVNode("div",_hoisted_17$4,[createBaseVNode("img",{src:pe.value,alt:"avatar"},null,8,_hoisted_18$4),createBaseVNode("div",{class:normalizeClass(["avatar-ring",be.value])},null,2)]),createBaseVNode("div",_hoisted_19$4,[createBaseVNode("div",_hoisted_20$4,toDisplayString(le.value.name),1),createBaseVNode("div",_hoisted_21$4,toDisplayString(le.value.role),1)]),B[57]||(B[57]=createBaseVNode("div",{class:"char-expand"},"",-1))]),createBaseVNode("div",_hoisted_22$4,[B[60]||(B[60]=createBaseVNode("div",{class:"section-title"},"",-1)),createBaseVNode("div",_hoisted_23$3,[createBaseVNode("div",{class:normalizeClass(["core-stat risk-resist",{critical:me.value<30,warning:me.value<50}])},[B[58]||(B[58]=createBaseVNode("div",{class:"core-stat-header"},[createBaseVNode("span",{class:"core-icon"},""),createBaseVNode("span",{class:"core-label"},"")],-1)),createBaseVNode("div",_hoisted_24$3,[createBaseVNode("div",{class:"core-bar-fill risk",style:normalizeStyle$1({width:me.value+"%"})},null,4)]),createBaseVNode("div",_hoisted_25$3,[createVNode(AnimatedNumber,{value:me.value,suffix:"/100"},null,8,["value"])])],2),createBaseVNode("div",_hoisted_26$2,[B[59]||(B[59]=createBaseVNode("div",{class:"core-stat-header"},[createBaseVNode("span",{class:"core-icon"},""),createBaseVNode("span",{class:"core-label"},"")],-1)),createBaseVNode("div",_hoisted_27$2,[createVNode(AnimatedNumber,{value:j.value,prefix:"$"},null,8,["value"])])])])]),createBaseVNode("div",_hoisted_28$2,[B[61]||(B[61]=createBaseVNode("div",{class:"section-title"},"",-1)),createBaseVNode("div",_hoisted_29$2,[(openBlock(!0),createElementBlock(Fragment,null,renderList(Ae.value,Q=>(openBlock(),createElementBlock("div",{key:Q.id,class:normalizeClass(["attr-row",{low:Q.status==="low"}]),onClick:Re=>Ze(Q.id)},[createBaseVNode("span",_hoisted_31$2,toDisplayString(Q.icon),1),createBaseVNode("span",_hoisted_32$2,toDisplayString(Q.label),1),createBaseVNode("div",_hoisted_33$2,[createBaseVNode("div",{class:"attr-bar-fill",style:normalizeStyle$1({width:Q.percent+"%",background:Q.color})},null,4)]),createBaseVNode("span",_hoisted_34$2,[createVNode(AnimatedNumber,{value:Q.value},null,8,["value"])])],10,_hoisted_30$2))),128))])])]),createBaseVNode("main",_hoisted_35$2,[createVNode(Transition,{name:"tip-fade"},{default:withCtx(()=>[y.value?(openBlock(),createElementBlock("div",{key:0,class:"attr-tip-overlay",onClick:B[7]||(B[7]=Q=>y.value=!1)},[createBaseVNode("div",{class:"attr-tip-card",onClick:B[6]||(B[6]=withModifiers(()=>{},["stop"]))},[createBaseVNode("div",_hoisted_36$2,[createBaseVNode("span",_hoisted_37$2,toDisplayString(b.value.icon),1),createBaseVNode("span",_hoisted_38$2,toDisplayString(b.value.name),1),createBaseVNode("span",_hoisted_39$2,toDisplayString(b.value.value),1)]),createBaseVNode("p",_hoisted_40$2,toDisplayString(b.value.desc),1),b.value.effect?(openBlock(),createElementBlock("div",_hoisted_41$2,[B[62]||(B[62]=createBaseVNode("span",{class:"effect-label"},"",-1)),createBaseVNode("span",_hoisted_42$2,toDisplayString(b.value.effect),1)])):createCommentVNode("",!0),b.value.detail?(openBlock(),createElementBlock("div",_hoisted_43$2,[createBaseVNode("pre",_hoisted_44$2,toDisplayString(b.value.detail),1)])):createCommentVNode("",!0),createBaseVNode("button",{class:"attr-tip-close",onClick:B[5]||(B[5]=Q=>y.value=!1)},"  ")])])):createCommentVNode("",!0)]),_:1}),K.value==="action"?(openBlock(),createElementBlock("div",_hoisted_45$2,[createBaseVNode("div",_hoisted_46$2,[createBaseVNode("div",{class:"player-info",onClick:B[8]||(B[8]=Q=>v.value=!0)},[createBaseVNode("div",_hoisted_47$2,[createBaseVNode("img",{src:pe.value,class:"player-avatar"},null,8,_hoisted_48$2),createBaseVNode("div",{class:normalizeClass(["player-ring",be.value])},null,2)]),createBaseVNode("div",_hoisted_49$2,[createBaseVNode("span",_hoisted_50$2,toDisplayString(le.value.name),1),createBaseVNode("span",_hoisted_51$2,toDisplayString(le.value.role),1)])]),createBaseVNode("div",{class:"core-item money",onClick:B[9]||(B[9]=Q=>Ze("money"))},[B[63]||(B[63]=createBaseVNode("span",{class:"core-icon"},"",-1)),createBaseVNode("span",_hoisted_52$2,[createVNode(AnimatedNumber,{value:j.value,prefix:"$"},null,8,["value"])])]),createBaseVNode("div",{class:normalizeClass(["core-item risk",{warning:me.value<50,critical:me.value<30}]),onClick:B[10]||(B[10]=Q=>Ze("risk_resist"))},[B[64]||(B[64]=createBaseVNode("span",{class:"core-icon"},"",-1)),createBaseVNode("div",_hoisted_53$2,[createBaseVNode("div",{class:"risk-bar-fill",style:normalizeStyle$1({width:me.value+"%"})},null,4)]),createBaseVNode("span",_hoisted_54$2,[createVNode(AnimatedNumber,{value:me.value},null,8,["value"])])],2)]),createBaseVNode("div",_hoisted_55$2,[(openBlock(!0),createElementBlock(Fragment,null,renderList(Ae.value,Q=>(openBlock(),createElementBlock("div",{key:Q.id,class:normalizeClass(["mobile-attr-item",{low:Q.status==="low"}]),onClick:Re=>Ze(Q.id)},[createBaseVNode("span",_hoisted_57$2,toDisplayString(Q.icon),1),createBaseVNode("span",_hoisted_58$2,toDisplayString(Q.value),1)],10,_hoisted_56$2))),128))]),createBaseVNode("div",_hoisted_59$1,[createBaseVNode("div",{class:"context-item",onClick:B[11]||(B[11]=Q=>g("mission"))},[B[65]||(B[65]=createBaseVNode("span",{class:"context-label"},"",-1)),createBaseVNode("span",_hoisted_60$1,toDisplayString(["","","","","",""][(Y.value||1)%6]),1)]),createBaseVNode("div",{class:"context-item",onClick:B[12]||(B[12]=Q=>g("housing"))},[B[66]||(B[66]=createBaseVNode("span",{class:"context-label"},"",-1)),createBaseVNode("span",_hoisted_61$1,toDisplayString({1:"",2:"",3:""}[(on=Ne.value)==null?void 0:on.id]||""),1)]),createBaseVNode("div",{class:"context-item",onClick:B[13]||(B[13]=Q=>g("food"))},[B[67]||(B[67]=createBaseVNode("span",{class:"context-label"},"",-1)),createBaseVNode("span",_hoisted_62$1,toDisplayString({diet_1:"",diet_2:"",diet_3:"",instant_noodles:"",street_food:"",home_cooking:"",restaurant_meal:"",dumpster_diving:"",church_meal:""}[(sn=ot.value)==null?void 0:sn.id]||""),1)])]),createVNode(Transition,{name:"modal-fade"},{default:withCtx(()=>{var Q,Re;return[_.value?(openBlock(),createElementBlock("div",{key:0,class:"context-modal-overlay",onClick:B[20]||(B[20]=Be=>_.value=null)},[createBaseVNode("div",{class:"context-modal",onClick:B[19]||(B[19]=withModifiers(()=>{},["stop"]))},[_.value==="mission"?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("div",_hoisted_63$1,[createBaseVNode("span",_hoisted_64$1,toDisplayString(["","","","","",""][(Y.value||1)%6])+" "+toDisplayString(((Q=Ce.value)==null?void 0:Q.name)||""),1),createBaseVNode("button",{class:"modal-close",onClick:B[14]||(B[14]=Be=>_.value=null)},"  ")]),(Re=Ce.value)!=null&&Re.openingNarrative?(openBlock(),createElementBlock("div",_hoisted_65$1,[createBaseVNode("p",_hoisted_66$1,toDisplayString(Ce.value.openingNarrative),1)])):createCommentVNode("",!0)],64)):_.value==="housing"?(openBlock(),createElementBlock("div",_hoisted_67$1,[createVNode(HousingPanel,{"housing-options":ze.value,"current-housing":Ne.value,"player-money":j.value,"has-changed-this-round":$e.value,onSelect:B[15]||(B[15]=Be=>{ft(Be),_.value=null}),onClose:B[16]||(B[16]=Be=>_.value=null)},null,8,["housing-options","current-housing","player-money","has-changed-this-round"])])):_.value==="food"?(openBlock(),createElementBlock("div",_hoisted_68$1,[createVNode(FoodPanel,{"food-items":Ye.value,"has-chosen":We.value,"current-strategy":ot.value,onSelect:B[17]||(B[17]=Be=>{ht(Be),_.value=null}),onClose:B[18]||(B[18]=Be=>_.value=null)},null,8,["food-items","has-chosen","current-strategy"])])):createCommentVNode("",!0)])])):createCommentVNode("",!0)]}),_:1})])):createCommentVNode("",!0),K.value==="action"?(openBlock(),createElementBlock(Fragment,{key:1},[createVNode(StatusBar,{class:"desktop-only","housing-options":ze.value,"current-housing":Ne.value,"food-items":Ye.value,"has-chosen":We.value,"current-strategy":ot.value,"player-money":j.value,"has-changed-housing-this-round":$e.value,onSwitchHousing:ft,onSelectStrategy:ht},null,8,["housing-options","current-housing","food-items","has-chosen","current-strategy","player-money","has-changed-housing-this-round"]),createBaseVNode("div",_hoisted_69$1,[createBaseVNode("div",{class:"time-mission-row",onClick:B[21]||(B[21]=Q=>d.value=!d.value)},[createBaseVNode("div",_hoisted_70$1,[B[68]||(B[68]=createBaseVNode("span",{class:"mission-badge"},"",-1)),createBaseVNode("span",_hoisted_71$1,toDisplayString(((ln=Ce.value)==null?void 0:ln.theme)||"..."),1),createBaseVNode("span",_hoisted_72$1,toDisplayString(d.value?"":""),1)])]),withDirectives(createBaseVNode("div",_hoisted_73$1,[(cn=Ce.value)!=null&&cn.openingNarrative?(openBlock(),createElementBlock("p",_hoisted_74$1,toDisplayString(Ce.value.openingNarrative),1)):createCommentVNode("",!0)],512),[[vShow,d.value]])])],64)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_75$1,[K.value==="action"?(openBlock(),createElementBlock("div",_hoisted_76$1,[createBaseVNode("nav",_hoisted_77$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(st.value,Q=>(openBlock(),createElementBlock("button",{key:Q.id,class:normalizeClass(["category-btn",{active:c.value===Q.id,breathing:Q.id==="credit"&&Y.value===1&&!u.value}]),onClick:Re=>c.value=Q.id},[createBaseVNode("span",_hoisted_79$1,toDisplayString(Q.icon),1),createBaseVNode("span",_hoisted_80$1,toDisplayString(Q.name),1),Q.count>0?(openBlock(),createElementBlock("span",_hoisted_81,toDisplayString(Q.count),1)):createCommentVNode("",!0)],10,_hoisted_78$1))),128))]),createBaseVNode("div",_hoisted_82,[(openBlock(!0),createElementBlock(Fragment,null,renderList(vt.value,Q=>{var Re,Be,Fe;return openBlock(),createElementBlock("div",{key:Q.id,class:normalizeClass(["behavior-item",{locked:!Q.unlocked,disabled:!Q.canExecute,available:Q.unlocked&&Q.canExecute,breathing:Q.id==="SP03"&&Y.value===1&&!u.value}]),onClick:Pe=>vn(Q)},[createBaseVNode("div",_hoisted_84,[createBaseVNode("span",_hoisted_85,toDisplayString(_t(Q)),1),createBaseVNode("span",_hoisted_86,toDisplayString(Q.name),1),Q.unlocked&&Q.staminaCost>0?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(["behavior-energy",{insufficient:(((Re=F.value.attributes)==null?void 0:Re.stamina)||0)<(Q.staminaCost||0)}])}," "+toDisplayString(Q.staminaCost||0),3)):createCommentVNode("",!0),Q.unlocked&&Q.sanCost>0?(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(["behavior-san",{insufficient:(((Be=F.value.attributes)==null?void 0:Be.san)||0)<(Q.sanCost||0)}])}," -"+toDisplayString(Q.sanCost),3)):createCommentVNode("",!0),Q.unlocked&&Q.moneyCost>0?(openBlock(),createElementBlock("span",{key:2,class:normalizeClass(["behavior-money",{insufficient:(F.value.money||0)<(Q.moneyCost||0)}])}," -"+toDisplayString(Q.moneyCost),3)):createCommentVNode("",!0),Q.unlocked&&Q.healthCost>0?(openBlock(),createElementBlock("span",{key:3,class:normalizeClass(["behavior-health",{insufficient:(((Fe=F.value.attributes)==null?void 0:Fe.health)||0)<(Q.healthCost||0)}])}," -"+toDisplayString(Q.healthCost),3)):createCommentVNode("",!0)]),createBaseVNode("p",_hoisted_87,toDisplayString(Q.description),1),Q.unlocked&&Q.effectPreview?(openBlock(),createElementBlock("div",_hoisted_88,[(openBlock(!0),createElementBlock(Fragment,null,renderList(Q.effectPreview,(Pe,je)=>(openBlock(),createElementBlock("span",{key:je,class:normalizeClass(["effect-tag",{positive:Pe>0,negative:Pe<0}])},toDisplayString(pn(je))+" "+toDisplayString(Pe>0?"+":"")+toDisplayString(Pe),3))),128))])):createCommentVNode("",!0),Q.unlocked?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_89,[createBaseVNode("div",_hoisted_90,[B[69]||(B[69]=createBaseVNode("span",{class:"lock-icon"},"",-1)),createBaseVNode("span",_hoisted_91,toDisplayString(Q.unlockReason),1)])]))],10,_hoisted_83)}),128)),vt.value.length===0?(openBlock(),createElementBlock("div",_hoisted_92,[...B[70]||(B[70]=[createBaseVNode("p",null,"",-1)])])):createCommentVNode("",!0)])])):(openBlock(),createElementBlock("div",_hoisted_93,[createBaseVNode("div",_hoisted_94,toDisplayString(K.value==="settlement"?"":J.value?"":""),1),createBaseVNode("div",_hoisted_95,toDisplayString(K.value==="settlement"?"...":J.value?"":""),1),K.value==="result"&&!J.value?(openBlock(),createElementBlock("button",{key:0,class:"wait-btn",onClick:Tn},"   ")):createCommentVNode("",!0)])),J.value&&!ge.value?(openBlock(),createElementBlock("div",_hoisted_96,[createBaseVNode("div",_hoisted_97,[createBaseVNode("div",_hoisted_98,toDisplayString(ee.value==="victory"?"":""),1),createBaseVNode("h2",_hoisted_99,toDisplayString(ee.value==="victory"?"!":""),1),createBaseVNode("div",_hoisted_100,[createBaseVNode("div",_hoisted_101,[createBaseVNode("span",_hoisted_102,toDisplayString(te.value.roundsCompleted||0),1),B[71]||(B[71]=createBaseVNode("span",{class:"gstat-label"},"",-1))]),createBaseVNode("div",_hoisted_103,[createBaseVNode("span",_hoisted_104,"$"+toDisplayString(te.value.totalMoneyEarned||0),1),B[72]||(B[72]=createBaseVNode("span",{class:"gstat-label"},"",-1))]),createBaseVNode("div",_hoisted_105,[createBaseVNode("span",_hoisted_106,toDisplayString(te.value.totalBehaviorsExecuted||0),1),B[73]||(B[73]=createBaseVNode("span",{class:"gstat-label"},"",-1))])]),createBaseVNode("button",{class:"gameover-btn",onClick:Cn},"  ")])])):createCommentVNode("",!0)]),K.value==="action"?(openBlock(),createElementBlock("footer",_hoisted_107,[createBaseVNode("button",{class:"footer-btn log-btn",onClick:B[22]||(B[22]=Q=>l.value=!l.value)},[B[74]||(B[74]=createBaseVNode("span",{class:"btn-icon"},"",-1)),B[75]||(B[75]=createBaseVNode("span",{class:"btn-text"},"",-1)),gt.value>0?(openBlock(),createElementBlock("span",_hoisted_108,toDisplayString(gt.value),1)):createCommentVNode("",!0)]),createBaseVNode("button",{class:"footer-btn shop-btn",onClick:B[23]||(B[23]=Q=>ue.value=!0)},[B[76]||(B[76]=createBaseVNode("span",{class:"btn-icon"},"",-1)),B[77]||(B[77]=createBaseVNode("span",{class:"btn-text"},"",-1)),hn.value?(openBlock(),createElementBlock("span",_hoisted_109)):createCommentVNode("",!0)]),createBaseVNode("button",{class:"footer-btn primary-btn",onClick:bn},[...B[78]||(B[78]=[createBaseVNode("span",{class:"btn-label"},"",-1),createBaseVNode("span",{class:"btn-icon-right"},"",-1)])]),createBaseVNode("button",{class:"footer-btn guide-btn",onClick:B[24]||(B[24]=Q=>f.value=!0)},[...B[79]||(B[79]=[createBaseVNode("span",{class:"btn-icon"},"",-1),createBaseVNode("span",{class:"btn-text"},"",-1)])])])):createCommentVNode("",!0)]),createBaseVNode("aside",_hoisted_110,[createBaseVNode("div",_hoisted_111,[B[80]||(B[80]=createBaseVNode("div",{class:"panel-header"},[createBaseVNode("span",{class:"panel-title"}," ")],-1)),createBaseVNode("div",_hoisted_112,[(openBlock(!0),createElementBlock(Fragment,null,renderList(Xe.value,Q=>(openBlock(),createElementBlock("div",{key:Q.id,class:normalizeClass(["log-item",Q.kind||"normal"])},[createBaseVNode("span",_hoisted_113,toDisplayString(mt(Q.at)),1),createBaseVNode("span",_hoisted_114,toDisplayString(Q.text),1)],2))),128)),Xe.value.length===0?(openBlock(),createElementBlock("div",_hoisted_115,"  ")):createCommentVNode("",!0)])])])]),createBaseVNode("aside",{class:normalizeClass(["log-drawer",{open:l.value}])},[createBaseVNode("div",_hoisted_116,[B[81]||(B[81]=createBaseVNode("span",{class:"log-title"}," ",-1)),createBaseVNode("button",{class:"log-close",onClick:B[25]||(B[25]=Q=>l.value=!1)},"")]),createBaseVNode("div",_hoisted_117,[(openBlock(!0),createElementBlock(Fragment,null,renderList(Xe.value,Q=>(openBlock(),createElementBlock("div",{key:Q.id,class:normalizeClass(["log-item",Q.kind||"normal"])},[createBaseVNode("span",_hoisted_118,toDisplayString(mt(Q.at)),1),createBaseVNode("span",_hoisted_119,toDisplayString(Q.text),1)],2))),128)),Xe.value.length===0?(openBlock(),createElementBlock("div",_hoisted_120,"")):createCommentVNode("",!0)])],2),l.value?(openBlock(),createElementBlock("div",{key:0,class:"log-backdrop",onClick:B[26]||(B[26]=Q=>l.value=!1)})):createCommentVNode("",!0)],64)),(dn=(un=Ce.value)==null?void 0:un.rumor)!=null&&dn.content&&K.value==="action"&&!r.value?(openBlock(),createElementBlock("div",{key:6,class:"rumor-bar",onClick:B[27]||(B[27]=Q=>T.value=!0)},[createBaseVNode("span",_hoisted_121,toDisplayString(Ee.value),1),createBaseVNode("div",_hoisted_122,[createBaseVNode("span",_hoisted_123,toDisplayString(Ce.value.rumor.content.split(`
`)[0]),1)])])):createCommentVNode("",!0),createVNode(Transition,{name:"modal-fade"},{default:withCtx(()=>{var Q,Re,Be,Fe;return[T.value?(openBlock(),createElementBlock("div",{key:0,class:"rumor-modal-overlay",onClick:B[29]||(B[29]=withModifiers(Pe=>T.value=!1,["self"]))},[createBaseVNode("div",_hoisted_124,[createBaseVNode("div",_hoisted_125,[B[82]||(B[82]=createBaseVNode("span",{class:"rumor-modal-icon"},"",-1)),createBaseVNode("span",_hoisted_126,toDisplayString(((Re=(Q=Ce.value)==null?void 0:Q.rumor)==null?void 0:Re.title)||""),1),createBaseVNode("button",{class:"rumor-modal-close",onClick:B[28]||(B[28]=Pe=>T.value=!1)},"  ")]),createBaseVNode("div",_hoisted_127,[createBaseVNode("p",{class:"rumor-modal-text",innerHTML:(((Fe=(Be=Ce.value)==null?void 0:Be.rumor)==null?void 0:Fe.content)||"").replace(/\n/g,"<br>")},null,8,_hoisted_128)])])])):createCommentVNode("",!0)]}),_:1}),unref(a)?(openBlock(),createElementBlock("div",{key:7,class:"devtools-toggle",onClick:B[30]||(B[30]=Q=>ie.value=!ie.value)},[...B[83]||(B[83]=[createBaseVNode("span",null,"",-1)])])):createCommentVNode("",!0),createVNode(Transition,{name:"devtools-slide"},{default:withCtx(()=>{var Q,Re,Be,Fe,Pe,je;return[ie.value?(openBlock(),createElementBlock("div",_hoisted_129,[createBaseVNode("div",_hoisted_130,[B[84]||(B[84]=createBaseVNode("span",{class:"devtools-title"}," DevTools",-1)),createBaseVNode("button",{class:"devtools-close",onClick:B[31]||(B[31]=Se=>ie.value=!1)},"  ")]),createBaseVNode("div",_hoisted_131,[createBaseVNode("div",_hoisted_132,[B[85]||(B[85]=createBaseVNode("div",{class:"devtools-section-title"}," ",-1)),createBaseVNode("div",_hoisted_133,[(openBlock(),createElementBlock(Fragment,null,renderList(12,Se=>createBaseVNode("button",{key:Se,class:normalizeClass(["devtools-round-btn",{active:Y.value===Se}]),onClick:Gn=>In(Se)},toDisplayString(Se),11,_hoisted_134)),64))])]),createBaseVNode("div",_hoisted_135,[B[93]||(B[93]=createBaseVNode("div",{class:"devtools-section-title"}," ",-1)),createBaseVNode("div",_hoisted_136,[createBaseVNode("div",_hoisted_137,[B[86]||(B[86]=createBaseVNode("span",{class:"devtools-attr-label"}," ",-1)),createBaseVNode("div",_hoisted_138,[createBaseVNode("button",{class:"devtools-btn minus",onClick:B[32]||(B[32]=Se=>we("money",-100))}," -100 "),createBaseVNode("input",{type:"number",class:"devtools-input",value:j.value,onChange:B[33]||(B[33]=Se=>Ge("money",Se.target.value))},null,40,_hoisted_139),createBaseVNode("button",{class:"devtools-btn plus",onClick:B[34]||(B[34]=Se=>we("money",100))}," +100 ")])]),createBaseVNode("div",_hoisted_140,[B[87]||(B[87]=createBaseVNode("span",{class:"devtools-attr-label"}," ",-1)),createBaseVNode("div",_hoisted_141,[createBaseVNode("button",{class:"devtools-btn minus",onClick:B[35]||(B[35]=Se=>we("health",-10))}," -10 "),createBaseVNode("input",{type:"number",class:"devtools-input",value:((Q=F.value.attributes)==null?void 0:Q.health)||0,onChange:B[36]||(B[36]=Se=>Ge("health",Se.target.value))},null,40,_hoisted_142),createBaseVNode("button",{class:"devtools-btn plus",onClick:B[37]||(B[37]=Se=>we("health",10))}," +10 ")])]),createBaseVNode("div",_hoisted_143,[B[88]||(B[88]=createBaseVNode("span",{class:"devtools-attr-label"}," ",-1)),createBaseVNode("div",_hoisted_144,[createBaseVNode("button",{class:"devtools-btn minus",onClick:B[38]||(B[38]=Se=>we("income",-5))}," -5 "),createBaseVNode("input",{type:"number",class:"devtools-input",value:((Re=F.value.attributes)==null?void 0:Re.income)||0,onChange:B[39]||(B[39]=Se=>Ge("income",Se.target.value))},null,40,_hoisted_145),createBaseVNode("button",{class:"devtools-btn plus",onClick:B[40]||(B[40]=Se=>we("income",5))}," +5 ")])]),createBaseVNode("div",_hoisted_146,[B[89]||(B[89]=createBaseVNode("span",{class:"devtools-attr-label"}," ",-1)),createBaseVNode("div",_hoisted_147,[createBaseVNode("button",{class:"devtools-btn minus",onClick:B[41]||(B[41]=Se=>we("stealth",-10))}," -10 "),createBaseVNode("input",{type:"number",class:"devtools-input",value:((Be=F.value.attributes)==null?void 0:Be.stealth)||0,onChange:B[42]||(B[42]=Se=>Ge("stealth",Se.target.value))},null,40,_hoisted_148),createBaseVNode("button",{class:"devtools-btn plus",onClick:B[43]||(B[43]=Se=>we("stealth",10))}," +10 ")])]),createBaseVNode("div",_hoisted_149,[B[90]||(B[90]=createBaseVNode("span",{class:"devtools-attr-label"}," ",-1)),createBaseVNode("div",_hoisted_150,[createBaseVNode("button",{class:"devtools-btn minus",onClick:B[44]||(B[44]=Se=>we("luck",-5))}," -5 "),createBaseVNode("input",{type:"number",class:"devtools-input",value:((Fe=F.value.attributes)==null?void 0:Fe.luck)||0,onChange:B[45]||(B[45]=Se=>Ge("luck",Se.target.value))},null,40,_hoisted_151),createBaseVNode("button",{class:"devtools-btn plus",onClick:B[46]||(B[46]=Se=>we("luck",5))}," +5 ")])]),createBaseVNode("div",_hoisted_152,[B[91]||(B[91]=createBaseVNode("span",{class:"devtools-attr-label"}," ",-1)),createBaseVNode("div",_hoisted_153,[createBaseVNode("button",{class:"devtools-btn minus",onClick:B[47]||(B[47]=Se=>we("san",-10))}," -10 "),createBaseVNode("input",{type:"number",class:"devtools-input",value:((Pe=F.value.attributes)==null?void 0:Pe.san)||0,onChange:B[48]||(B[48]=Se=>Ge("san",Se.target.value))},null,40,_hoisted_154),createBaseVNode("button",{class:"devtools-btn plus",onClick:B[49]||(B[49]=Se=>we("san",10))}," +10 ")])]),createBaseVNode("div",_hoisted_155,[B[92]||(B[92]=createBaseVNode("span",{class:"devtools-attr-label"}," ",-1)),createBaseVNode("div",_hoisted_156,[createBaseVNode("button",{class:"devtools-btn minus",onClick:B[50]||(B[50]=Se=>we("stamina",-10))}," -10 "),createBaseVNode("input",{type:"number",class:"devtools-input",value:((je=F.value.attributes)==null?void 0:je.stamina)||0,onChange:B[51]||(B[51]=Se=>Ge("stamina",Se.target.value))},null,40,_hoisted_157),createBaseVNode("button",{class:"devtools-btn plus",onClick:B[52]||(B[52]=Se=>we("stamina",10))}," +10 ")])])])]),createBaseVNode("div",{class:"devtools-section"},[B[94]||(B[94]=createBaseVNode("div",{class:"devtools-section-title"}," ",-1)),createBaseVNode("div",{class:"devtools-quick-btns"},[createBaseVNode("button",{class:"devtools-quick-btn",onClick:Ln},"   "),createBaseVNode("button",{class:"devtools-quick-btn",onClick:Vn},"   "),createBaseVNode("button",{class:"devtools-quick-btn",onClick:Pn},"  +1000 "),createBaseVNode("button",{class:"devtools-quick-btn",onClick:On},"   ")])])])])):createCommentVNode("",!0)]}),_:1}),createVNode(Transition,{name:"toast"},{default:withCtx(()=>[se.value?(openBlock(),createElementBlock("div",_hoisted_158,toDisplayString(se.value),1)):createCommentVNode("",!0)]),_:1})],2)}}},StageS06LoopV3=_export_sfc(_sfc_main$a,[["__scopeId","data-v-1d37cf50"]]),_hoisted_1$6={class:"transcript-screen"},_hoisted_2$6={key:0,class:"loading-state"},_hoisted_3$5={class:"card-header"},_hoisted_4$4={class:"card-body"},_hoisted_5$4={class:"box personality-box"},_hoisted_6$4={class:"personality-header"},_hoisted_7$4={class:"type-code"},_hoisted_8$4={class:"type-name"},_hoisted_9$4={class:"personality-slogan"},_hoisted_10$4={class:"exp-grid"},_hoisted_11$3={class:"exp-letter"},_hoisted_12$3={class:"exp-label"},_hoisted_13$3={class:"box radar-box"},_hoisted_14$3={class:"radar-center"},_hoisted_15$3={class:"radar-wrapper"},_hoisted_16$3={class:"g-label g-top"},_hoisted_17$3={class:"g-label g-right"},_hoisted_18$3={class:"g-label g-bottom"},_hoisted_19$3={class:"g-label g-left"},_hoisted_20$3={class:"ability-summary"},_hoisted_21$3={class:"leek-section"},_hoisted_22$3={class:"leek-bar-row"},_hoisted_23$2={class:"leek-track"},_hoisted_24$2={class:"leek-comment"},_hoisted_25$2={class:"death-header"},_hoisted_26$1={class:"death-icon"},_hoisted_27$1={class:"death-info"},_hoisted_28$1={class:"death-title"},_hoisted_29$1={class:"death-tag"},_hoisted_30$1={class:"death-desc"},_hoisted_31$1={class:"death-stats"},_hoisted_32$1={class:"stat-item"},_hoisted_33$1={class:"stat-val"},_hoisted_34$1={class:"stat-item"},_hoisted_35$1={class:"stat-item highlight"},_hoisted_36$1={class:"stat-val"},_hoisted_37$1={class:"box epitaph-box"},_hoisted_38$1={class:"epitaph-content"},_hoisted_39$1={class:"epitaph-text"},_hoisted_40$1={class:"card-footer"},_hoisted_41$1={key:2,class:"action-bar"},_hoisted_42$1={class:"card-header"},_hoisted_43$1={class:"card-body"},_hoisted_44$1={class:"box personality-box"},_hoisted_45$1={class:"personality-header"},_hoisted_46$1={class:"type-code"},_hoisted_47$1={class:"type-name"},_hoisted_48$1={class:"personality-slogan"},_hoisted_49$1={class:"exp-grid"},_hoisted_50$1={class:"exp-letter"},_hoisted_51$1={class:"exp-label"},_hoisted_52$1={class:"box radar-box"},_hoisted_53$1={class:"radar-center"},_hoisted_54$1={class:"radar-wrapper"},_hoisted_55$1={class:"g-label g-top"},_hoisted_56$1={class:"g-label g-right"},_hoisted_57$1={class:"g-label g-bottom"},_hoisted_58$1={class:"g-label g-left"},_hoisted_59={class:"ability-summary"},_hoisted_60={class:"leek-section"},_hoisted_61={class:"leek-bar-row"},_hoisted_62={class:"leek-track"},_hoisted_63={class:"leek-comment"},_hoisted_64={class:"death-header"},_hoisted_65={class:"death-icon"},_hoisted_66={class:"death-info"},_hoisted_67={class:"death-title"},_hoisted_68={class:"death-tag"},_hoisted_69={class:"death-desc"},_hoisted_70={class:"death-stats"},_hoisted_71={class:"stat-item"},_hoisted_72={class:"stat-val"},_hoisted_73={class:"stat-item"},_hoisted_74={class:"stat-item highlight"},_hoisted_75={class:"stat-val"},_hoisted_76={class:"box epitaph-box"},_hoisted_77={class:"epitaph-content"},_hoisted_78={class:"epitaph-text"},_hoisted_79={class:"card-footer"},_hoisted_80={key:0,class:"toast"},_sfc_main$9={__name:"StageS08FinalBill",setup(t){use([install,install$a,install$5]);const n=useGameStore(),a=ref(null),r=ref(""),o=ref(!1),s=computed(()=>n.s.death||{month:1,type:"bankrupt",reason:""}),l=ref(null);function c(){if(s.value.forcedEnding){console.log("[S08] Using forced ending:",s.value.forcedEnding.title);const S=s.value.forcedEnding,C=generateTranscript(S.type||"bankrupt",n.s);C.death={cause:S.title,tagline:S.tagline,description:S.description,icon:S.icon,color:S.color},l.value=C}else l.value=generateTranscript(s.value.type||"bankrupt",n.s)}onMounted(()=>{c()}),watch(()=>{var S;return(S=n.s.death)==null?void 0:S.forcedEnding},S=>{S&&(console.log("[S08] forcedEnding changed, regenerating:",S.title),c())},{immediate:!0});const u=computed(()=>{const S=l.value.personality.breakdown;return[{letter:S.K.letter,text:S.K.letter==="K"?"":""},{letter:S.I.letter,text:S.I.letter==="I"?"":""},{letter:S.L1.letter,text:S.L1.letter==="L"?"":""},{letter:S.L2.letter,text:S.L2.letter==="L"?"":""}]}),d={excellent:["","","",""],good:["","","",""],average:["","","","",""],poor:["","","",""],terrible:["","","","",""]},f=computed(()=>{if(!l.value)return"";const S=l.value.abilities,E=[S.survival.grade,S.moral.grade,S.mental.grade].reduce((N,M)=>N+({S:6,A:5,B:4,C:3,D:2,F:1}[M]||1),0)/3;let x;E>=5?x=d.excellent:E>=4?x=d.good:E>=3?x=d.average:E>=2?x=d.poor:x=d.terrible;const A=l.value.id.charCodeAt(0)+l.value.id.charCodeAt(1);return x[A%x.length]}),v=computed(()=>{const S=l.value.abilities;return{backgroundColor:"transparent",radar:{indicator:[{name:"",max:100},{name:"",max:100},{name:"",max:100},{name:"",max:100}],shape:"polygon",radius:"70%",splitNumber:3,splitLine:{lineStyle:{color:"rgba(255,255,255,0.12)"}},splitArea:{show:!1},axisLine:{lineStyle:{color:"rgba(255,255,255,0.15)"}}},series:[{type:"radar",data:[{value:[S.survival.value,S.moral.value,S.mental.value,S.theory.value],symbol:"circle",symbolSize:4,lineStyle:{color:"#ff6b6b",width:2},areaStyle:{color:"rgba(255,107,107,0.35)"},itemStyle:{color:"#ff6b6b"}}]}]}});function _(S){r.value=S,setTimeout(()=>r.value="",2e3)}async function g(){var C;const S=generateShareText(l.value);try{await((C=navigator.clipboard)==null?void 0:C.writeText(S)),_("")}catch{prompt(":",S)}}async function y(){const S=a.value;if(S)try{const C=(await __vitePreload(async()=>{const{default:A}=await import("./html2canvas.esm-CBrSDip1.js");return{default:A}},[])).default,E=await C(S,{backgroundColor:"#12121f",scale:2,useCORS:!0,logging:!1});if(/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)){const A=window.open();A?(A.document.write(`<html><body style="margin:0;background:#000;display:flex;justify-content:center;align-items:center;min-height:100vh"><img src="${E.toDataURL()}" style="max-width:100%"/></body></html>`),_("")):b(E)}else b(E)}catch{_("")}}function b(S){const C=document.createElement("a");C.download=`_${l.value.id}.png`,C.href=S.toDataURL(),C.click(),_("")}function T(){n.reset(),location.reload()}return(S,C)=>(openBlock(),createElementBlock("div",_hoisted_1$6,[l.value?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(["transcript-card",{clickable:!o.value}]),ref_key:"cardRef",ref:a,onClick:C[0]||(C[0]=E=>o.value=!0)},[createBaseVNode("div",_hoisted_3$5,[C[5]||(C[5]=createBaseVNode("div",{class:"header-left"},[createBaseVNode("span",{class:"logo-icon"},""),createBaseVNode("span",{class:"logo-text"},"")],-1)),createBaseVNode("div",{class:"rarity-badge",style:normalizeStyle$1({background:l.value.rarity.bgColor})},toDisplayString(l.value.rarity.name),5)]),createBaseVNode("div",_hoisted_4$4,[createBaseVNode("div",_hoisted_5$4,[C[6]||(C[6]=createBaseVNode("div",{class:"box-label"}," ",-1)),createBaseVNode("div",_hoisted_6$4,[createBaseVNode("div",_hoisted_7$4,toDisplayString(l.value.personality.type),1),createBaseVNode("div",_hoisted_8$4,""+toDisplayString(l.value.personality.name)+"",1)]),createBaseVNode("div",_hoisted_9$4,' "'+toDisplayString(l.value.personality.slogan)+'" ',1),createBaseVNode("div",_hoisted_10$4,[(openBlock(!0),createElementBlock(Fragment,null,renderList(u.value,(E,x)=>(openBlock(),createElementBlock("div",{class:"exp-item",key:x},[createBaseVNode("span",_hoisted_11$3,toDisplayString(E.letter),1),createBaseVNode("span",_hoisted_12$3,toDisplayString(E.text),1)]))),128))])]),createBaseVNode("div",_hoisted_13$3,[C[12]||(C[12]=createBaseVNode("div",{class:"box-label"}," ",-1)),createBaseVNode("div",_hoisted_14$3,[createBaseVNode("div",_hoisted_15$3,[createVNode(unref(src_default),{class:"radar-chart",option:v.value,autoresize:""},null,8,["option"]),createBaseVNode("div",_hoisted_16$3,[C[7]||(C[7]=createBaseVNode("span",{class:"g-name"},"",-1)),createBaseVNode("span",{class:normalizeClass(["g-val","c-"+l.value.abilities.survival.grade])},toDisplayString(l.value.abilities.survival.grade),3)]),createBaseVNode("div",_hoisted_17$3,[C[8]||(C[8]=createBaseVNode("span",{class:"g-name"},"",-1)),createBaseVNode("span",{class:normalizeClass(["g-val","c-"+l.value.abilities.moral.grade])},toDisplayString(l.value.abilities.moral.grade),3)]),createBaseVNode("div",_hoisted_18$3,[C[9]||(C[9]=createBaseVNode("span",{class:"g-name"},"",-1)),createBaseVNode("span",{class:normalizeClass(["g-val","c-"+l.value.abilities.mental.grade])},toDisplayString(l.value.abilities.mental.grade),3)]),createBaseVNode("div",_hoisted_19$3,[C[10]||(C[10]=createBaseVNode("span",{class:"g-name"},"",-1)),createBaseVNode("span",{class:normalizeClass(["g-val","c-"+l.value.abilities.theory.grade])},toDisplayString(l.value.abilities.theory.grade),3)])])]),createBaseVNode("div",_hoisted_20$3,toDisplayString(f.value),1),createBaseVNode("div",_hoisted_21$3,[C[11]||(C[11]=createBaseVNode("div",{class:"leek-title"}," ",-1)),createBaseVNode("div",_hoisted_22$3,[createBaseVNode("div",_hoisted_23$2,[createBaseVNode("div",{class:"leek-fill",style:normalizeStyle$1({width:l.value.abilities.leek.value+"%"})},null,4)]),createBaseVNode("span",{class:normalizeClass(["leek-val","c-"+l.value.abilities.leek.grade])},toDisplayString(l.value.abilities.leek.grade)+"+",3)]),createBaseVNode("div",_hoisted_24$2,toDisplayString(l.value.abilities.leek.comment),1)])]),createBaseVNode("div",{class:"box death-box",style:normalizeStyle$1({"--accent":l.value.death.color})},[C[18]||(C[18]=createBaseVNode("div",{class:"box-label"}," ",-1)),createBaseVNode("div",_hoisted_25$2,[createBaseVNode("div",_hoisted_26$1,toDisplayString(l.value.death.icon),1),createBaseVNode("div",_hoisted_27$1,[createBaseVNode("div",_hoisted_28$1,toDisplayString(l.value.death.cause),1),createBaseVNode("div",_hoisted_29$1,'"'+toDisplayString(l.value.death.tagline)+'"',1)])]),createBaseVNode("div",_hoisted_30$1,toDisplayString(l.value.death.description),1),createBaseVNode("div",_hoisted_31$1,[createBaseVNode("div",_hoisted_32$1,[C[13]||(C[13]=createBaseVNode("span",{class:"stat-icon"},"",-1)),createBaseVNode("span",_hoisted_33$1,toDisplayString(l.value.month),1),C[14]||(C[14]=createBaseVNode("span",{class:"stat-label"},"",-1))]),createBaseVNode("div",_hoisted_34$1,[C[15]||(C[15]=createBaseVNode("span",{class:"stat-icon"},"",-1)),createBaseVNode("span",{class:normalizeClass(["stat-val",l.value.money<0?"negative":""])},toDisplayString(l.value.money>=0?"+":"")+"$"+toDisplayString(l.value.money.toLocaleString()),3)]),createBaseVNode("div",_hoisted_35$1,[C[16]||(C[16]=createBaseVNode("span",{class:"stat-icon"},"",-1)),createBaseVNode("span",_hoisted_36$1,toDisplayString(l.value.rankings.survival.percent)+"%",1),C[17]||(C[17]=createBaseVNode("span",{class:"stat-label"},"",-1))])])],4),createBaseVNode("div",_hoisted_37$1,[C[19]||(C[19]=createBaseVNode("div",{class:"box-label"}," ",-1)),createBaseVNode("div",_hoisted_38$1,[createBaseVNode("div",_hoisted_39$1,toDisplayString(l.value.epitaph),1)]),C[20]||(C[20]=createBaseVNode("div",{class:"epitaph-foot"},"  ",-1))])]),createBaseVNode("div",_hoisted_40$1,[createBaseVNode("span",null,"#"+toDisplayString(l.value.id),1),C[21]||(C[21]=createBaseVNode("span",null,[createBaseVNode("b",null,"US"),createTextVNode(" KILL LINE")],-1)),C[22]||(C[22]=createBaseVNode("span",{class:"tag"},"#",-1))]),C[23]||(C[23]=createBaseVNode("div",{class:"stamp"},"TERMINATED",-1))],2)):(openBlock(),createElementBlock("div",_hoisted_2$6,[...C[4]||(C[4]=[createBaseVNode("div",{class:"loading-text"},"...",-1)])])),l.value?(openBlock(),createElementBlock("div",_hoisted_41$1,[createBaseVNode("button",{class:"btn",onClick:y}," "),createBaseVNode("button",{class:"btn",onClick:g}," "),createBaseVNode("button",{class:"btn btn-red",onClick:T}," ")])):createCommentVNode("",!0),createVNode(Transition,{name:"zoom"},{default:withCtx(()=>[o.value&&l.value?(openBlock(),createElementBlock("div",{key:0,class:"zoom-overlay",onClick:C[3]||(C[3]=E=>o.value=!1)},[C[43]||(C[43]=createBaseVNode("div",{class:"zoom-hint"},"",-1)),createBaseVNode("div",{class:"zoom-card",onClick:C[1]||(C[1]=withModifiers(()=>{},["stop"]))},[createBaseVNode("div",_hoisted_42$1,[C[24]||(C[24]=createBaseVNode("div",{class:"header-left"},[createBaseVNode("span",{class:"logo-icon"},""),createBaseVNode("span",{class:"logo-text"},"")],-1)),createBaseVNode("div",{class:"rarity-badge",style:normalizeStyle$1({background:l.value.rarity.bgColor})},toDisplayString(l.value.rarity.name),5)]),createBaseVNode("div",_hoisted_43$1,[createBaseVNode("div",_hoisted_44$1,[C[25]||(C[25]=createBaseVNode("div",{class:"box-label"}," ",-1)),createBaseVNode("div",_hoisted_45$1,[createBaseVNode("div",_hoisted_46$1,toDisplayString(l.value.personality.type),1),createBaseVNode("div",_hoisted_47$1," "+toDisplayString(l.value.personality.name)+" ",1)]),createBaseVNode("div",_hoisted_48$1,' "'+toDisplayString(l.value.personality.slogan)+'" ',1),createBaseVNode("div",_hoisted_49$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(u.value,(E,x)=>(openBlock(),createElementBlock("div",{class:"exp-item",key:x},[createBaseVNode("span",_hoisted_50$1,toDisplayString(E.letter),1),createBaseVNode("span",_hoisted_51$1,toDisplayString(E.text),1)]))),128))])]),createBaseVNode("div",_hoisted_52$1,[C[31]||(C[31]=createBaseVNode("div",{class:"box-label"}," ",-1)),createBaseVNode("div",_hoisted_53$1,[createBaseVNode("div",_hoisted_54$1,[createVNode(unref(src_default),{class:"radar-chart",option:v.value,autoresize:""},null,8,["option"]),createBaseVNode("div",_hoisted_55$1,[C[26]||(C[26]=createBaseVNode("span",{class:"g-name"},"",-1)),createBaseVNode("span",{class:normalizeClass(["g-val","c-"+l.value.abilities.survival.grade])},toDisplayString(l.value.abilities.survival.grade),3)]),createBaseVNode("div",_hoisted_56$1,[C[27]||(C[27]=createBaseVNode("span",{class:"g-name"},"",-1)),createBaseVNode("span",{class:normalizeClass(["g-val","c-"+l.value.abilities.moral.grade])},toDisplayString(l.value.abilities.moral.grade),3)]),createBaseVNode("div",_hoisted_57$1,[C[28]||(C[28]=createBaseVNode("span",{class:"g-name"},"",-1)),createBaseVNode("span",{class:normalizeClass(["g-val","c-"+l.value.abilities.mental.grade])},toDisplayString(l.value.abilities.mental.grade),3)]),createBaseVNode("div",_hoisted_58$1,[C[29]||(C[29]=createBaseVNode("span",{class:"g-name"},"",-1)),createBaseVNode("span",{class:normalizeClass(["g-val","c-"+l.value.abilities.theory.grade])},toDisplayString(l.value.abilities.theory.grade),3)])])]),createBaseVNode("div",_hoisted_59,toDisplayString(f.value),1),createBaseVNode("div",_hoisted_60,[C[30]||(C[30]=createBaseVNode("div",{class:"leek-title"}," ",-1)),createBaseVNode("div",_hoisted_61,[createBaseVNode("div",_hoisted_62,[createBaseVNode("div",{class:"leek-fill",style:normalizeStyle$1({width:l.value.abilities.leek.value+"%"})},null,4)]),createBaseVNode("span",{class:normalizeClass(["leek-val","c-"+l.value.abilities.leek.grade])},toDisplayString(l.value.abilities.leek.grade)+"+",3)]),createBaseVNode("div",_hoisted_63,toDisplayString(l.value.abilities.leek.comment),1)])]),createBaseVNode("div",{class:"box death-box",style:normalizeStyle$1({"--accent":l.value.death.color})},[C[37]||(C[37]=createBaseVNode("div",{class:"box-label"}," ",-1)),createBaseVNode("div",_hoisted_64,[createBaseVNode("div",_hoisted_65,toDisplayString(l.value.death.icon),1),createBaseVNode("div",_hoisted_66,[createBaseVNode("div",_hoisted_67,toDisplayString(l.value.death.cause),1),createBaseVNode("div",_hoisted_68,'"'+toDisplayString(l.value.death.tagline)+'"',1)])]),createBaseVNode("div",_hoisted_69,toDisplayString(l.value.death.description),1),createBaseVNode("div",_hoisted_70,[createBaseVNode("div",_hoisted_71,[C[32]||(C[32]=createBaseVNode("span",{class:"stat-icon"},"",-1)),createBaseVNode("span",_hoisted_72,toDisplayString(l.value.month),1),C[33]||(C[33]=createBaseVNode("span",{class:"stat-label"},"",-1))]),createBaseVNode("div",_hoisted_73,[C[34]||(C[34]=createBaseVNode("span",{class:"stat-icon"},"",-1)),createBaseVNode("span",{class:normalizeClass(["stat-val",l.value.money<0?"negative":""])},toDisplayString(l.value.money>=0?"+":"")+"$"+toDisplayString(l.value.money.toLocaleString()),3)]),createBaseVNode("div",_hoisted_74,[C[35]||(C[35]=createBaseVNode("span",{class:"stat-icon"},"",-1)),createBaseVNode("span",_hoisted_75,toDisplayString(l.value.rankings.survival.percent)+"%",1),C[36]||(C[36]=createBaseVNode("span",{class:"stat-label"},"",-1))])])],4),createBaseVNode("div",_hoisted_76,[C[38]||(C[38]=createBaseVNode("div",{class:"box-label"}," ",-1)),createBaseVNode("div",_hoisted_77,[createBaseVNode("div",_hoisted_78,toDisplayString(l.value.epitaph),1)]),C[39]||(C[39]=createBaseVNode("div",{class:"epitaph-foot"},"  ",-1))])]),createBaseVNode("div",_hoisted_79,[createBaseVNode("span",null,"#"+toDisplayString(l.value.id),1),C[40]||(C[40]=createBaseVNode("span",null,[createBaseVNode("b",null,"US"),createTextVNode(" KILL LINE")],-1)),C[41]||(C[41]=createBaseVNode("span",{class:"tag"},"#",-1))]),C[42]||(C[42]=createBaseVNode("div",{class:"stamp"},"TERMINATED",-1))]),createBaseVNode("button",{class:"zoom-close",onClick:C[2]||(C[2]=E=>o.value=!1)}," ")])):createCommentVNode("",!0)]),_:1}),createVNode(Transition,{name:"toast"},{default:withCtx(()=>[r.value?(openBlock(),createElementBlock("div",_hoisted_80," "+toDisplayString(r.value),1)):createCommentVNode("",!0)]),_:1})]))}},StageS08FinalBill=_export_sfc(_sfc_main$9,[["__scopeId","data-v-eaddb03f"]]),_sfc_main$8={__name:"StageRouter",setup(t){const n=useGameStore(),a=computed(()=>{switch(n.s.stage){case"S00":return StageS00Background;case"S01":return StageS01InnerStruggle;case"S02":return StageS02ChoosePath;case"S02b":return StageS02bOpening;case"S03":return StageS03Loading;case"S04":return StageS04Opening;case"S05":return StageS05Tutorial;case"S06":return StageS06LoopV3;case"S07":return StageS06LoopV3;case"S08":return StageS08FinalBill;default:return StageS00Background}});return(r,o)=>(openBlock(),createBlock(resolveDynamicComponent(a.value)))}},_hoisted_1$5={class:"mini-stat"},_hoisted_2$5={class:"mini-stat"},_hoisted_3$4={class:"mini-stat"},_hoisted_4$3={class:"mini-stat"},_hoisted_5$3={class:"profile-section"},_hoisted_6$3=["src"],_hoisted_7$3={class:"profile-info"},_hoisted_8$3={class:"profile-header"},_hoisted_9$3={class:"char-name"},_hoisted_10$3={class:"char-tag"},_hoisted_11$2={class:"char-story"},_hoisted_12$2={class:"stat-rows"},_hoisted_13$2={class:"stat-icon"},_hoisted_14$2={class:"stat-bar"},_hoisted_15$2={class:"stat-value"},_hoisted_16$2={class:"toggle-row"},_hoisted_17$2={key:0,class:"stat-detail"},_hoisted_18$2={class:"detail-header"},_hoisted_19$2={class:"detail-icon"},_hoisted_20$2={class:"detail-name"},_hoisted_21$2={class:"detail-desc"},_hoisted_22$2={key:0,class:"detail-warning"},_sfc_main$7={__name:"MobileStatusBar",setup(t){const n=useGameStore(),a=ref(!1),r=computed(()=>n.s.v3||{}),o=computed(()=>r.value.money||0),s=computed(()=>r.value.currentRound||1),l=computed(()=>n.s.stage==="S06"?!1:["S05","S07"].includes(n.s.stage)),c=computed(()=>{var g;return((g=n.s.ui)==null?void 0:g.statusBarCollapsed)||!1});function u(){n.s.ui&&(n.s.ui.statusBarCollapsed=!1)}function d(){n.s.ui&&(n.s.ui.statusBarCollapsed=!0)}const f=computed(()=>{const g=n.s.character;return g&&g.name?{name:g.name,role:g.archetype||"",story:g.description||"",seed:g.name}:{name:"",role:"",story:"",seed:"default"}}),v=computed(()=>`https://api.dicebear.com/7.x/notionists/svg?seed=${f.value.seed}`),_=computed(()=>{const g=r.value.attributes||{},y=o.value,b=Math.min(100,y/1e3*100);return[{key:"money",icon:"",name:"",display:"$"+y,percent:b,barClass:"bar-money",critical:y<100,desc:"",warning:y<100?"":null},{key:"health",icon:"",name:"",display:(g.health||0)+"",percent:g.health||0,barClass:"bar-health",critical:(g.health||0)<=25,desc:"",warning:(g.health||0)<=25?"":null},{key:"san",icon:"",name:"SAN",display:(g.san||0)+"",percent:g.san||0,barClass:"bar-sanity",critical:(g.san||0)<=25,desc:"",warning:(g.san||0)<=25?"":null},{key:"stealth",icon:"",name:"",display:(g.stealth||0)+"",percent:g.stealth||0,barClass:"bar-security",critical:(g.stealth||0)<=25,desc:"",warning:(g.stealth||0)<=25?"":null},{key:"stamina",icon:"",name:"",display:(g.stamina||0)+"",percent:g.stamina||0,barClass:"bar-mental",critical:(g.stamina||0)<=20,desc:"SAN",warning:(g.stamina||0)<=20?"":null},{key:"luck",icon:"",name:"",display:(g.luck||0)+"",percent:g.luck||0,barClass:"bar-luck",critical:!1,desc:"",warning:null}]});return(g,y)=>{var b,T;return l.value?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["mobile-status-bar",{collapsed:c.value}])},[c.value?(openBlock(),createElementBlock("div",{key:0,class:"collapsed-bar",onClick:u},[createBaseVNode("span",_hoisted_1$5," "+toDisplayString(s.value)+"/12",1),createBaseVNode("span",_hoisted_2$5," $"+toDisplayString(o.value),1),createBaseVNode("span",_hoisted_3$4," "+toDisplayString(((b=r.value.attributes)==null?void 0:b.health)||0),1),createBaseVNode("span",_hoisted_4$3," "+toDisplayString(((T=r.value.attributes)==null?void 0:T.san)||0),1),y[1]||(y[1]=createBaseVNode("span",{class:"expand-hint"}," ",-1))])):(openBlock(),createElementBlock(Fragment,{key:1},[createBaseVNode("div",_hoisted_5$3,[createBaseVNode("img",{src:v.value,class:"avatar",alt:"avatar"},null,8,_hoisted_6$3),createBaseVNode("div",_hoisted_7$3,[createBaseVNode("div",_hoisted_8$3,[createBaseVNode("span",_hoisted_9$3,toDisplayString(f.value.name),1),createBaseVNode("span",_hoisted_10$3,toDisplayString(f.value.role),1)]),createBaseVNode("div",_hoisted_11$2,toDisplayString(f.value.story),1)])]),createBaseVNode("div",_hoisted_12$2,[(openBlock(!0),createElementBlock(Fragment,null,renderList(_.value,S=>(openBlock(),createElementBlock("div",{class:normalizeClass(["stat-row",{critical:S.critical}]),key:S.key},[createBaseVNode("span",_hoisted_13$2,toDisplayString(S.icon),1),createBaseVNode("div",_hoisted_14$2,[createBaseVNode("div",{class:normalizeClass(["stat-fill",S.barClass]),style:normalizeStyle$1({width:S.percent+"%"})},null,6)]),createBaseVNode("span",_hoisted_15$2,toDisplayString(S.display),1)],2))),128))]),createBaseVNode("div",_hoisted_16$2,[createBaseVNode("button",{class:"toggle-btn",onClick:y[0]||(y[0]=S=>a.value=!a.value)},toDisplayString(a.value?" ":" "),1),createBaseVNode("button",{class:"collapse-btn",onClick:d},"   ")]),a.value?(openBlock(),createElementBlock("div",_hoisted_17$2,[(openBlock(!0),createElementBlock(Fragment,null,renderList(_.value,S=>(openBlock(),createElementBlock("div",{class:normalizeClass(["detail-row",{critical:S.critical}]),key:S.key},[createBaseVNode("div",_hoisted_18$2,[createBaseVNode("span",_hoisted_19$2,toDisplayString(S.icon),1),createBaseVNode("span",_hoisted_20$2,toDisplayString(S.name),1)]),createBaseVNode("div",_hoisted_21$2,toDisplayString(S.desc),1),S.warning?(openBlock(),createElementBlock("div",_hoisted_22$2,"  "+toDisplayString(S.warning),1)):createCommentVNode("",!0)],2))),128))])):createCommentVNode("",!0)],64))],2)):createCommentVNode("",!0)}}},MobileStatusBar=_export_sfc(_sfc_main$7,[["__scopeId","data-v-261edb55"]]),_hoisted_1$4={class:"sys-header v3-header"},_hoisted_2$4={class:"header-center"},_hoisted_3$3={key:0,class:"v3-header-info"},_hoisted_4$2={key:1,class:"phase-info"},_hoisted_5$2={class:"main-interface v3-layout"},_hoisted_6$2={class:"col-left panel-glass"},_hoisted_7$2={class:"scroll-content"},_hoisted_8$2={class:"profile-header"},_hoisted_9$2={class:"avatar-box"},_hoisted_10$2=["src"],_hoisted_11$1={class:"char-details"},_hoisted_12$1={class:"char-role"},_hoisted_13$1={class:"story-text"},_hoisted_14$1={class:"resource-row"},_hoisted_15$1={class:"res-card"},_hoisted_16$1={class:"res-value text-gold"},_hoisted_17$1={class:"res-card"},_hoisted_18$1={class:"res-value"},_hoisted_19$1={class:"stats-group"},_hoisted_20$1={class:"stat-item"},_hoisted_21$1={class:"stat-head"},_hoisted_22$1={class:"progress-bg"},_hoisted_23$1={class:"stat-item"},_hoisted_24$1={class:"stat-head"},_hoisted_25$1={class:"progress-bg"},_hoisted_26={class:"stat-item"},_hoisted_27={class:"stat-head"},_hoisted_28={class:"progress-bg"},_hoisted_29={class:"stat-item"},_hoisted_30={class:"stat-head"},_hoisted_31={class:"progress-bg"},_hoisted_32={class:"stat-item"},_hoisted_33={class:"stat-head"},_hoisted_34={class:"progress-bg"},_hoisted_35={key:0},_hoisted_36={class:"threat-title"},_hoisted_37={class:"threat-desc"},_hoisted_38={key:1},_hoisted_39={class:"debuff-list"},_hoisted_40={class:"debuff-name"},_hoisted_41={class:"debuff-effect"},_hoisted_42={class:"debuff-tag housing-tag"},_hoisted_43={class:"debuff-name"},_hoisted_44={key:0,class:"debuff-effect"},_hoisted_45={key:1,class:"debuff-effect"},_hoisted_46={class:"col-center panel-glass"},_hoisted_47={class:"col-right panel-glass"},_hoisted_48={class:"log-time"},_hoisted_49={key:0,class:"log-empty"},_hoisted_50={class:"mobile-log-header"},_hoisted_51={class:"log-time"},_hoisted_52={key:0,class:"log-empty"},_hoisted_53={key:1,class:"tutorial-overlay"},_hoisted_54={class:"guide-header"},_hoisted_55={class:"guide-step"},_hoisted_56={class:"guide-title"},_hoisted_57={class:"guide-content"},_hoisted_58={class:"guide-actions"},STORAGE_KEY$1="logBtnPosition",_sfc_main$6={__name:"StandardLayout",setup(t){const n=useGameStore(),a=ref(null),r=ref(null),o=ref("00:00"),s=ref(!1);ref(!1);let l=null;const c=computed(()=>n.s.v3||{}),u=computed(()=>c.value.money||0),d=computed(()=>c.value.currentRound||1),f=computed(()=>c.value.attributes||{health:0,san:0,stealth:0,stamina:0,luck:0}),v=computed(()=>typeof n.getHousingStatusText=="function"?n.getHousingStatusText():c.value.housingStatus||""),_=computed(()=>typeof n.getCurrentHousingRent=="function"?n.getCurrentHousingRent():0);ref(!1);const g=ref({x:null,y:null});ref({x:0,y:0,btnX:0,btnY:0}),ref(!1);function y(){try{const ae=localStorage.getItem(STORAGE_KEY$1);if(ae){const ie=JSON.parse(ae);ie.x>=0&&ie.x<=window.innerWidth-48&&ie.y>=0&&ie.y<=window.innerHeight-48&&(g.value=ie)}}catch{}}computed(()=>g.value.x===null?{}:{left:g.value.x+"px",top:g.value.y+"px",right:"auto",bottom:"auto"});const b=computed(()=>[...n.s.feed].reverse()),T=computed(()=>{const ae=n.s.character;return ae&&ae.name?{name:ae.name,role:ae.archetype||"",story:ae.description||"",seed:ae.name}:{name:"",role:"",story:"",seed:"default"}}),S=computed(()=>`https://api.dicebear.com/7.x/notionists/svg?seed=${T.value.seed}`),C=computed(()=>f.value.stealth<30||f.value.san<20?"bg-danger":"bg-normal"),E=computed(()=>n.s.stage==="S05"?" // TUTORIAL":n.s.stage==="S06"?" // SURVIVAL":""),x=computed(()=>{const ae=[];return f.value.stealth<30&&ae.push({title:"",desc:""}),u.value<100&&ae.push({title:"",desc:""}),f.value.health<30&&ae.push({title:"",desc:""}),ae}),A=computed(()=>{const ae=[];return f.value.health<30&&ae.push({name:"",effect:""}),f.value.san<30&&ae.push({name:"",effect:""}),f.value.stamina<20&&ae.push({name:"",effect:""}),ae});function N(){const ae=new Date;o.value=`${String(ae.getHours()).padStart(2,"0")}:${String(ae.getMinutes()).padStart(2,"0")}`}function M(ae){const ie=new Date(ae);return`${String(ie.getHours()).padStart(2,"0")}:${String(ie.getMinutes()).padStart(2,"0")}`}function R(){n.s.feed.splice(0)}function D(){confirm("...")&&(n.reset(),n.load())}watch(()=>n.s.feed.length,()=>{nextTick(()=>{a.value&&(a.value.scrollTop=a.value.scrollHeight)})});const L=ref(0),I=ref({top:0,left:0,width:0,height:0}),$=ref(!1);function V(){$.value=window.innerWidth<=1024}const H=[{target:null,title:"",content:`




ICE
12...
`},{target:".sys-header",title:"",content:`

12




`},{target:".col-left",title:"",content:`

 [] $100  
    

 [] 25%  
    

 [] 25%  
    

 [] 70%  
    ICE`},{target:".week-tracker",title:"",content:`46





240%

2-3 + 1-2`},{target:".action-matrix",title:"",content:`

[] $40~90
    ...

[] 
    ...

[] 

[] 
    `},{target:".col-right",title:"",content:`

 
 
 
 
 


`},{target:".week-advance",title:"",content:`




1. 
2. 
3. 

`}],X=[{target:null,title:"",content:`


`},{target:".mobile-status-bar",title:"",content:`
   

=`},{target:".week-tracker",title:"",content:`412

240%`},{target:".action-group:first-child",title:"",content:`
2-3+1-2`},{target:".week-advance",title:"",content:`
`}],q=computed(()=>$.value?X:H),z=computed(()=>q.value[L.value]),G=computed(()=>{var W,w,P;const ae=I.value,ie=window.innerWidth,ve=window.innerHeight,le=$.value?10:20,pe=$.value?150:280;if(!((W=z.value)!=null&&W.target)||ae.width===0)return{top:"50%",left:"50%",transform:"translate(-50%, -50%)"};if($.value){const F=(w=z.value)==null?void 0:w.target,Y=L.value,K=q.value.length,j=Y===K-1;if(F!=null&&F.includes("action-group"))return{top:"10%",left:"50%",transform:"translateX(-50%)"};if(F!=null&&F.includes("week-advance")||j)return{bottom:"30%",left:"50%",transform:"translateX(-50%)"};const J=ve-(ae.top+ae.height);return ae.top<ve*.4&&J>=pe+le?{top:ae.top+ae.height+le+"px",left:"50%",transform:"translateX(-50%)"}:{top:Math.max(le,ae.top-pe-le)+"px",left:"50%",transform:"translateX(-50%)"}}if(((P=z.value)==null?void 0:P.target)===".matrix-container"||ae.height>ve*.6)return{top:"50%",left:"50%",transform:"translate(-50%, -50%)"};if(ae.left<100&&ae.width<ie*.4)return{top:Math.min(Math.max(le,ae.top+50),ve-pe)+"px",left:ae.left+ae.width+le+"px",transform:"none"};if(ae.left>ie*.6)return{top:Math.min(Math.max(le,ae.top+50),ve-pe)+"px",right:ie-ae.left+le+"px",left:"auto",transform:"none"};const Te=ve-(ae.top+ae.height),U=ae.top;return Te<pe&&U>pe?{bottom:ve-ae.top+le+"px",left:"50%",transform:"translateX(-50%)"}:{top:ae.top+ae.height+le+"px",left:"50%",transform:"translateX(-50%)"}});function oe(){var ve;if(n.s.stage!=="S05")return;const ae=(ve=z.value)==null?void 0:ve.target;let ie=null;if(!ae){I.value={top:0,left:0,width:0,height:0};return}if(ie=document.querySelector(ae),ie){const le=ie.getBoundingClientRect();le.width>0&&le.height>0?I.value={top:le.top,left:le.left,width:le.width,height:le.height}:I.value={top:0,left:0,width:0,height:0}}else I.value={top:0,left:0,width:0,height:0}}function ne(){L.value<q.value.length-1?(L.value++,nextTick(oe)):n.enterS06()}function ue(){n.enterS06()}let se=null;onMounted(()=>{N(),l=setInterval(N,1e3),y(),V(),nextTick(()=>{oe(),window.addEventListener("resize",fe),se=new ResizeObserver(()=>{oe()}),se.observe(document.body)})});function fe(){const ae=$.value;V(),ae!==$.value&&n.s.stage==="S05"&&(L.value=0),oe()}return onUnmounted(()=>{clearInterval(l),window.removeEventListener("resize",fe),se&&se.disconnect()}),watch(()=>n.s.stage,ae=>{ae==="S05"&&(L.value=0,nextTick(oe))}),watch(L,()=>{nextTick(oe)}),(ae,ie)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["dashboard-layout",C.value])},[ie[19]||(ie[19]=createBaseVNode("div",{class:"crt-layer"},[createBaseVNode("div",{class:"scanlines"}),createBaseVNode("div",{class:"vignette"}),createBaseVNode("div",{class:"noise"})],-1)),createBaseVNode("header",_hoisted_1$4,[createBaseVNode("div",_hoisted_2$4,[unref(n).s.stage==="S06"?(openBlock(),createElementBlock("div",_hoisted_3$3,[...ie[1]||(ie[1]=[createBaseVNode("span",{class:"v3-title"},"",-1)])])):(openBlock(),createElementBlock("div",_hoisted_4$2,toDisplayString(E.value),1))])]),createVNode(MobileStatusBar),createBaseVNode("main",_hoisted_5$2,[createBaseVNode("aside",_hoisted_6$2,[ie[13]||(ie[13]=createBaseVNode("div",{class:"panel-deco corner-tl"},null,-1)),ie[14]||(ie[14]=createBaseVNode("div",{class:"panel-deco corner-br"},null,-1)),createBaseVNode("div",_hoisted_7$2,[createBaseVNode("div",_hoisted_8$2,[createBaseVNode("div",_hoisted_9$2,[createBaseVNode("img",{src:S.value,class:"avatar-img",alt:"Subject"},null,8,_hoisted_10$2),ie[2]||(ie[2]=createBaseVNode("div",{class:"avatar-glitch"},null,-1))]),createBaseVNode("div",_hoisted_11$1,[createBaseVNode("h2",null,toDisplayString(T.value.name),1),createBaseVNode("span",_hoisted_12$1,toDisplayString(T.value.role),1)])]),createBaseVNode("div",null,[ie[3]||(ie[3]=createBaseVNode("div",{class:"info-section-title"}," // BACKGROUND",-1)),createBaseVNode("div",_hoisted_13$1,toDisplayString(T.value.story),1)]),createBaseVNode("div",_hoisted_14$1,[createBaseVNode("div",_hoisted_15$1,[ie[4]||(ie[4]=createBaseVNode("span",{class:"res-label"},"",-1)),createBaseVNode("span",_hoisted_16$1," $"+toDisplayString(u.value),1)]),createBaseVNode("div",_hoisted_17$1,[ie[5]||(ie[5]=createBaseVNode("span",{class:"res-label"},"",-1)),createBaseVNode("span",_hoisted_18$1,toDisplayString(d.value)+"/12",1)])]),createBaseVNode("div",_hoisted_19$1,[createBaseVNode("div",_hoisted_20$1,[createBaseVNode("div",_hoisted_21$1,[ie[6]||(ie[6]=createBaseVNode("span",null," ",-1)),createBaseVNode("span",null,toDisplayString(f.value.health),1)]),createBaseVNode("div",_hoisted_22$1,[createBaseVNode("div",{class:"progress-bar bar-hp",style:normalizeStyle$1({width:f.value.health+"%"})},null,4)])]),createBaseVNode("div",_hoisted_23$1,[createBaseVNode("div",_hoisted_24$1,[ie[7]||(ie[7]=createBaseVNode("span",null," SAN",-1)),createBaseVNode("span",null,toDisplayString(f.value.san),1)]),createBaseVNode("div",_hoisted_25$1,[createBaseVNode("div",{class:"progress-bar bar-san",style:normalizeStyle$1({width:f.value.san+"%"})},null,4)])]),createBaseVNode("div",_hoisted_26,[createBaseVNode("div",_hoisted_27,[ie[8]||(ie[8]=createBaseVNode("span",null," ",-1)),createBaseVNode("span",null,toDisplayString(f.value.stealth),1)]),createBaseVNode("div",_hoisted_28,[createBaseVNode("div",{class:"progress-bar bar-stealth",style:normalizeStyle$1({width:f.value.stealth+"%"})},null,4)])]),createBaseVNode("div",_hoisted_29,[createBaseVNode("div",_hoisted_30,[ie[9]||(ie[9]=createBaseVNode("span",null," ",-1)),createBaseVNode("span",null,toDisplayString(f.value.stamina),1)]),createBaseVNode("div",_hoisted_31,[createBaseVNode("div",{class:"progress-bar bar-stamina",style:normalizeStyle$1({width:f.value.stamina+"%"})},null,4)])]),createBaseVNode("div",_hoisted_32,[createBaseVNode("div",_hoisted_33,[ie[10]||(ie[10]=createBaseVNode("span",null," ",-1)),createBaseVNode("span",null,toDisplayString(f.value.luck),1)]),createBaseVNode("div",_hoisted_34,[createBaseVNode("div",{class:"progress-bar bar-luck",style:normalizeStyle$1({width:f.value.luck+"%"})},null,4)])])]),x.value.length>0?(openBlock(),createElementBlock("div",_hoisted_35,[ie[11]||(ie[11]=createBaseVNode("div",{class:"info-section-title",style:{color:"var(--primary)"}},"  // THREATS ",-1)),(openBlock(!0),createElementBlock(Fragment,null,renderList(x.value,(ve,le)=>(openBlock(),createElementBlock("div",{key:le,class:"threat-box"},[createBaseVNode("div",_hoisted_36," "+toDisplayString(ve.title),1),createBaseVNode("div",_hoisted_37,toDisplayString(ve.desc),1)]))),128))])):createCommentVNode("",!0),A.value.length>0?(openBlock(),createElementBlock("div",_hoisted_38,[ie[12]||(ie[12]=createBaseVNode("div",{class:"info-section-title"}," // STATUS",-1)),createBaseVNode("div",_hoisted_39,[(openBlock(!0),createElementBlock(Fragment,null,renderList(A.value,(ve,le)=>(openBlock(),createElementBlock("div",{key:le,class:"debuff-tag"},[createBaseVNode("span",_hoisted_40,toDisplayString(ve.name),1),createBaseVNode("span",_hoisted_41,toDisplayString(ve.effect),1)]))),128))])])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_42,[createBaseVNode("span",_hoisted_43," : "+toDisplayString(v.value),1),_.value>0?(openBlock(),createElementBlock("span",_hoisted_44,": $"+toDisplayString(_.value),1)):(openBlock(),createElementBlock("span",_hoisted_45,""))])])]),createBaseVNode("section",_hoisted_46,[ie[15]||(ie[15]=createBaseVNode("div",{class:"panel-deco corner-tl"},null,-1)),ie[16]||(ie[16]=createBaseVNode("div",{class:"panel-deco corner-br"},null,-1)),createVNode(_sfc_main$8)]),createBaseVNode("aside",_hoisted_47,[createBaseVNode("div",{class:"panel-header"},[ie[17]||(ie[17]=createBaseVNode("span",null," // SURVIVAL LOG",-1)),createBaseVNode("button",{class:"icon-btn",onClick:R,title:""},"")]),createBaseVNode("div",{class:"log-container",ref_key:"logContainer",ref:a},[(openBlock(!0),createElementBlock(Fragment,null,renderList(b.value,ve=>(openBlock(),createElementBlock("div",{key:ve.id,class:normalizeClass(["log-entry",ve.kind||"normal"])},[createBaseVNode("span",_hoisted_48,"["+toDisplayString(M(ve.at))+"]",1),createTextVNode(" "+toDisplayString(ve.text),1)],2))),128)),b.value.length?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_49," ... "))],512),createBaseVNode("div",{class:"sys-actions"},[createBaseVNode("button",{class:"reset-btn",onClick:D},"  // GIVE UP ")])])]),s.value?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["mobile-log-panel",{active:s.value}])},[createBaseVNode("div",_hoisted_50,[ie[18]||(ie[18]=createBaseVNode("span",null," // SURVIVAL LOG",-1)),createBaseVNode("button",{class:"close-btn",onClick:ie[0]||(ie[0]=ve=>s.value=!1)},"")]),createBaseVNode("div",{class:"mobile-log-content",ref_key:"mobileLogContainer",ref:r},[(openBlock(!0),createElementBlock(Fragment,null,renderList(b.value,ve=>(openBlock(),createElementBlock("div",{key:ve.id,class:normalizeClass(["log-entry",ve.kind||"normal"])},[createBaseVNode("span",_hoisted_51,"["+toDisplayString(M(ve.at))+"]",1),createTextVNode(" "+toDisplayString(ve.text),1)],2))),128)),b.value.length?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_52," ... "))],512),createBaseVNode("div",{class:"mobile-log-actions"},[createBaseVNode("button",{class:"clear-btn",onClick:R},""),createBaseVNode("button",{class:"reset-btn",onClick:D},"")])],2)):createCommentVNode("",!0),unref(n).s.stage==="S05"&&L.value<q.value.length?(openBlock(),createElementBlock("div",_hoisted_53,[createBaseVNode("div",{class:"mask-top",style:normalizeStyle$1({height:I.value.top+"px"})},null,4),createBaseVNode("div",{class:"mask-bottom",style:normalizeStyle$1({top:I.value.top+I.value.height+"px"})},null,4),createBaseVNode("div",{class:"mask-left",style:normalizeStyle$1({top:I.value.top+"px",height:I.value.height+"px",width:I.value.left+"px"})},null,4),createBaseVNode("div",{class:"mask-right",style:normalizeStyle$1({top:I.value.top+"px",height:I.value.height+"px",left:I.value.left+I.value.width+"px"})},null,4),createBaseVNode("div",{class:"highlight-border",style:normalizeStyle$1({top:I.value.top+"px",left:I.value.left+"px",width:I.value.width+"px",height:I.value.height+"px",opacity:I.value.width>0?1:0})},null,4),createBaseVNode("div",{class:"guide-card",style:normalizeStyle$1(G.value)},[createBaseVNode("div",_hoisted_54,[createBaseVNode("span",_hoisted_55,"STEP "+toDisplayString(L.value+1)+" / "+toDisplayString(q.value.length),1),createBaseVNode("div",{class:"header-right-group"},[createBaseVNode("button",{class:"skip-btn",onClick:ue},"SKIP ")])]),createBaseVNode("div",_hoisted_56,toDisplayString(z.value.title),1),createBaseVNode("div",_hoisted_57,toDisplayString(z.value.content),1),createBaseVNode("div",_hoisted_58,[createBaseVNode("button",{class:"guide-btn",onClick:ne},toDisplayString(L.value===q.value.length-1?" // START":" // NEXT"),1)])],4)])):createCommentVNode("",!0)],2))}},StandardLayout=_export_sfc(_sfc_main$6,[["__scopeId","data-v-24466ba5"]]),_hoisted_1$3={class:"layout-immersive"},_hoisted_2$3={class:"immersive-shell"},_sfc_main$5={__name:"ImmersiveLayout",setup(t){const n=useGameStore(),a=computed(()=>n.s.stage==="S00");return(r,o)=>(openBlock(),createElementBlock("div",_hoisted_1$3,[createBaseVNode("div",_hoisted_2$3,[createBaseVNode("div",{class:normalizeClass(["immersive-content",{start:a.value}])},[createVNode(_sfc_main$8)],2)])]))}},ImmersiveLayout=_export_sfc(_sfc_main$5,[["__scopeId","data-v-34a91269"]]),_hoisted_1$2={class:"m-head"},_hoisted_2$2={class:"m-title-group"},_hoisted_3$2={class:"sys-icon"},_hoisted_4$1={class:"title-wrapper"},_hoisted_5$1={class:"tiny-label"},_hoisted_6$1={class:"m-body"},_hoisted_7$1={class:"content-text",style:{"white-space":"pre-wrap"}},_hoisted_8$1={class:"m-actions"},_hoisted_9$1=["onClick"],_hoisted_10$1={class:"btn-text"},_sfc_main$4={__name:"ModalHost",setup(t){const n=useGameStore(),a=ref(null);let r=null;onMounted(()=>{r=n.modals.onChange(f=>a.value=f.active)}),onUnmounted(()=>r&&r());const o=computed(()=>{if(!a.value)return"normal";if(a.value.type)return a.value.type;const f=(a.value.title+a.value.body).toLowerCase();return/||||||error|warning|danger|critical|die|death/.test(f)?"severe":/|||||||lost|pay|fail|damage|hurt/.test(f)?"bad":/|||||bonus|gain|recover|success/.test(f)?"good":"normal"}),s=computed(()=>{switch(o.value){case"good":return"#00ffa3";case"bad":return"#ff9d00";case"severe":return"#ff2a2a";case"normal":default:return"#00e1ff"}}),l=computed(()=>{switch(o.value){case"good":return"";case"bad":return"";case"severe":return"";case"normal":default:return""}}),c=computed(()=>{var f;if((f=a.value)!=null&&f.label)return a.value.label;switch(o.value){case"good":return"";case"bad":return"";case"severe":return"";case"normal":default:return""}});function u(f){n.modals.close(f)}function d(){u("close")}return(f,v)=>(openBlock(),createBlock(Teleport,{to:"body"},[createVNode(Transition,{name:"modal-fade"},{default:withCtx(()=>[a.value?(openBlock(),createElementBlock("div",{key:0,class:"modal-mask",onClick:d},[createBaseVNode("div",{class:normalizeClass(["modal f-window",o.value]),onClick:v[1]||(v[1]=withModifiers(()=>{},["stop"])),style:normalizeStyle$1({"--theme-color":s.value})},[v[6]||(v[6]=createBaseVNode("div",{class:"bg-grid"},null,-1)),v[7]||(v[7]=createBaseVNode("div",{class:"bg-noise"},null,-1)),createBaseVNode("div",_hoisted_1$2,[createBaseVNode("div",_hoisted_2$2,[createBaseVNode("span",_hoisted_3$2,toDisplayString(l.value),1),createBaseVNode("div",_hoisted_4$1,[createBaseVNode("span",_hoisted_5$1,toDisplayString(c.value),1),createBaseVNode("h3",null,toDisplayString(a.value.title),1)])]),createBaseVNode("button",{class:"close-btn",onClick:v[0]||(v[0]=_=>u("close"))},[...v[2]||(v[2]=[createBaseVNode("span",{class:"close-x"},"",-1)])])]),createBaseVNode("div",_hoisted_6$1,[v[3]||(v[3]=createBaseVNode("div",{class:"scan-line"},null,-1)),createBaseVNode("div",_hoisted_7$1,toDisplayString(a.value.body),1)]),createBaseVNode("div",_hoisted_8$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.value.actions||[],_=>(openBlock(),createElementBlock("button",{key:_.id,class:normalizeClass(["fui-btn",{primary:o.value==="severe"||o.value==="good"}]),onClick:g=>u(_.id)},[v[4]||(v[4]=createBaseVNode("div",{class:"btn-bg"},null,-1)),v[5]||(v[5]=createBaseVNode("div",{class:"btn-deco"},null,-1)),createBaseVNode("span",_hoisted_10$1,toDisplayString(_.label),1)],10,_hoisted_9$1))),128))]),v[8]||(v[8]=createBaseVNode("div",{class:"m-status-bar"},[createBaseVNode("span",{class:"status-block"}),createBaseVNode("span",{class:"status-block"}),createBaseVNode("span",{class:"status-block fill"})],-1))],6)])):createCommentVNode("",!0)]),_:1})]))}},ModalHost=_export_sfc(_sfc_main$4,[["__scopeId","data-v-3d7a6df1"]]),_hoisted_1$1={class:"screen-root"},_hoisted_2$1={class:"spotlight-body"},_hoisted_3$1={class:"spotlight-footer"},_sfc_main$3={__name:"GameScreen",setup(t){const n=useGameStore(),a=new Set(["S00","S01","S02","S03"]),r=computed(()=>a.has(n.s.stage));return onMounted(()=>{n.load()}),(o,s)=>(openBlock(),createElementBlock("div",_hoisted_1$1,[r.value?(openBlock(),createBlock(ImmersiveLayout,{key:1})):(openBlock(),createBlock(StandardLayout,{key:0})),createVNode(Transition,{name:"spotlight-fade"},{default:withCtx(()=>[unref(n).s.spotlight?(openBlock(),createElementBlock("div",{key:0,class:"spotlight-mask",onClick:s[2]||(s[2]=l=>unref(n).clearSpotlight())},[createBaseVNode("div",{class:"spotlight-card",onClick:s[1]||(s[1]=withModifiers(()=>{},["stop"]))},[s[3]||(s[3]=createBaseVNode("div",{class:"card-line top"},null,-1)),s[4]||(s[4]=createBaseVNode("div",{class:"card-line bottom"},null,-1)),s[5]||(s[5]=createBaseVNode("div",{class:"spotlight-header"},[createBaseVNode("span",{class:"icon"},"!"),createBaseVNode("div",{class:"spotlight-title"},"INCOMING MESSAGE // ")],-1)),createBaseVNode("div",_hoisted_2$1,toDisplayString(unref(n).s.spotlight.tip),1),createBaseVNode("div",_hoisted_3$1,[createBaseVNode("button",{class:"ack-btn",onClick:s[0]||(s[0]=l=>unref(n).clearSpotlight())}," [ ACKNOWLEDGE /  ] ")])])])):createCommentVNode("",!0)]),_:1}),createVNode(ModalHost,{queue:unref(n).modals},null,8,["queue"])]))}},GameScreen=_export_sfc(_sfc_main$3,[["__scopeId","data-v-963b24ff"]]),events=[{id:"event_benefactor",name:"",type:"positive",trigger:{type:"crit"},priority:1,effects:{money:50,san:5,luck:1},narrative:`

$50



`},{id:"event_referral",name:"",type:"positive",trigger:{type:"action",category:"social"},chance:.2,priority:2,effects:{luck:2},narrative:`



`},{id:"event_windfall",name:"",type:"positive",trigger:{type:"random"},chance:.05,priority:1,effects:{money:100,san:5},narrative:`$100

`},{id:"event_good_weather",name:"",type:"positive",trigger:{type:"random"},chance:.15,priority:0,effects:{health:3,san:5},narrative:`

`},{id:"event_theft",name:"",type:"negative",trigger:{type:"stat",stat:"stealth",op:"lt",value:30},chance:.15,priority:3,effects:{money:-100,san:-5},narrative:`





`},{id:"event_police",name:"",type:"negative",trigger:{type:"stat",stat:"stealth",op:"lt",value:40},chance:.1,priority:4,effects:{stealth:-5,san:-10},narrative:`Stop. Can I see your ID?





`},{id:"event_injury",name:"",type:"negative",trigger:{type:"action",category:"work"},chance:.1,priority:5,effects:{health:-10},narrative:`



`},{id:"event_sick",name:"",type:"negative",trigger:{type:"stat",stat:"health",op:"lt",value:50},chance:.2,priority:6,duration:1,effects:{health:-10,san:-5},ongoingEffects:{workEfficiency:.8},narrative:`



`},{id:"event_homesick",name:"",type:"negative",trigger:{type:"round",rounds:[3,6,9,12]},chance:.3,priority:7,effects:{san:-8},narrative:`





`},{id:"event_fight",name:"",type:"negative",trigger:{type:"stat",stat:"stealth",op:"lt",value:25},chance:.1,priority:8,effects:{health:-15,stealth:-10,san:-5},narrative:`



`},{id:"event_ice_warning",name:"ICE",type:"crisis",trigger:{type:"round",rounds:[4]},chance:1,priority:10,effects:{stealth:-5},roundModifier:{stealthLoss:1.2},narrative:`

ICE`},{id:"event_ice_raid",name:"ICE",type:"crisis",trigger:{type:"round",rounds:[9]},chance:1,priority:10,effects:{stealth:-10},roundModifier:{stealthLoss:1.5},narrative:`

ICE



`}],eventsData={events},EVENTS=eventsData.events||[];function getEventById(t){return EVENTS.find(n=>n.id===t)||null}function getEventsByType(t){return EVENTS.filter(n=>n.type===t)}EVENTS.length;getEventsByType("positive");getEventsByType("negative");getEventsByType("crisis");const _hoisted_1={key:0,class:"dev-toolbar"},_hoisted_2={class:"dev-status"},_hoisted_3={class:"dev-section"},_hoisted_4={class:"toggle-icon"},_hoisted_5={class:"section-content"},_hoisted_6={class:"dev-section"},_hoisted_7={class:"toggle-icon"},_hoisted_8={class:"section-content"},_hoisted_9={class:"btn-row"},_hoisted_10=["value"],_hoisted_11=["disabled"],_hoisted_12={class:"dev-section"},_hoisted_13={class:"toggle-icon"},_hoisted_14={class:"section-content"},_hoisted_15={class:"btn-row"},_hoisted_16=["disabled"],_hoisted_17={class:"dev-section"},_hoisted_18={class:"toggle-icon"},_hoisted_19={class:"section-content"},_hoisted_20={class:"btn-row"},_hoisted_21={class:"btn-row"},_hoisted_22={class:"dev-section"},_hoisted_23={class:"toggle-icon"},_hoisted_24={class:"section-content"},_hoisted_25=["disabled"],_sfc_main$2={__name:"DevToolbar",setup(t){const n=useGameStore(),a=ref(!1),r=!1,o=reactive({basic:!0,event:!0,kill:!0,audio:!1,ending:!1}),s=ref(""),l=ref(!1),c=ref(""),u=ref(""),d=ref(0),f=ref(""),v=computed(()=>EVENTS),_=ref(0),g=ref(""),y=["bankrupt","health","exposure","sanity","choice","cascade_collapse","utility_bill","property_tax","insurance_lapse","bill_tsunami","medical_bill","insurance_denial","ambulance_fear","fish_antibiotics","painkiller_slide","credit_collapse","payday_loan","rental_rejection","job_rejection","no_address","homeless_final","identity_theft","gig_economy","tip_dependent","rich_neighbor","workplace_injury","american_dream","thanksgiving","black_friday","christmas"],b=ref("");function T(z){o[z]=!o[z]}function S(){a.value=!a.value}function C(){c.value&&(n.jumpToStage(c.value),c.value="")}function E(){u.value&&(n.devSelectPath(u.value),u.value="")}function x(){confirm("")&&(n.reset(),location.reload())}function A(){const z=EVENTS;if(z.length===0)return;R();const G=z[d.value%z.length];M(G),d.value=(d.value+1)%z.length}function N(){if(!f.value)return;R();const z=getEventById(f.value);z?M(z):alert(` "${f.value}" `)}function M(z){var G;n.s.stage!=="S06"&&(n.s.stage="S06"),n.s.loopV2||(G=n._initV2State)==null||G.call(n),n.s.loopV2||(n.s.loopV2={currentEvent:null,pendingEvents:[],triggeredEventIds:[],weekCategoryCounts:{work:0,rest:0,social:0,risk:0},weekTotalActions:0,actionProgress:{active:!1},monthlyStats:{}}),n.s.loopV2.currentEvent=JSON.parse(JSON.stringify(z)),console.log("[DevToolbar] Triggered event:",z.id,z.title)}function R(){n.s.loopV2&&(n.s.loopV2.currentEvent=null)}function D(){$();const z=y[_.value%y.length];I(z),_.value=(_.value+1)%y.length}function L(){g.value&&($(),I(g.value))}function I(z){console.log("[DevToolbar] Triggering kill:",z),typeof n.triggerDeath=="function"?n.triggerDeath({type:z,reason:`[DEV] : ${z}`}):alert("triggerDeath ")}function $(){n.s.death=null,n.s.stage==="S07"&&(n.s.stage="S06")}function V(){var z;(z=n.audio)!=null&&z.toggleMute?(n.audio.toggleMute(),l.value=!l.value):console.warn("[DevToolbar] Audio system not available")}function H(){var z;s.value&&((z=n.audio)!=null&&z.playBGM?n.audio.playBGM(s.value):console.warn("[DevToolbar] Audio system not available"))}function X(z){var G;(G=n.audio)!=null&&G.playSFX?n.audio.playSFX(z):console.warn("[DevToolbar] Audio system not available")}function q(){var G,oe,ne,ue,se,fe,ae,ie,ve,le;if(!b.value)return;const z=ENDINGS.find(pe=>pe.id===b.value);if(!z){alert(` "${b.value}" `);return}console.log("[DevToolbar] Jumping to ending:",z.title),n.s.death={active:!0,type:z.type||"default",reason:`[DEV] : ${z.title}`,month:((G=n.s.loop)==null?void 0:G.month)||6,week:((oe=n.s.loop)==null?void 0:oe.week)||2,at:Date.now(),stats:{money:((ne=n.s.v3)==null?void 0:ne.money)||100,health:((se=(ue=n.s.v3)==null?void 0:ue.attributes)==null?void 0:se.health)||50,san:((ae=(fe=n.s.v3)==null?void 0:fe.attributes)==null?void 0:ae.san)||50,stealth:((ve=(ie=n.s.v3)==null?void 0:ie.attributes)==null?void 0:ve.stealth)||50},currentRound:4,showingResult:!1,currentResult:null,choiceHistory:[],completed:!0,showingEnding:!0,forcedEnding:z},n.s.stage="S08",(le=n.save)==null||le.call(n)}return onMounted(()=>{}),onUnmounted(()=>{}),(z,G)=>(openBlock(),createElementBlock(Fragment,null,[unref(r)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["shortcut-hint",{visible:!a.value}])},[...G[13]||(G[13]=[createBaseVNode("kbd",null,"Ctrl",-1),createTextVNode(" + ",-1),createBaseVNode("kbd",null,"D",-1)])],2)):createCommentVNode("",!0),createVNode(Transition,{name:"slide-right"},{default:withCtx(()=>{var oe;return[unref(r)&&a.value?(openBlock(),createElementBlock("div",_hoisted_1,[createBaseVNode("div",{class:"dev-header"},[G[14]||(G[14]=createBaseVNode("span",{class:"dev-title"},"DEV",-1)),createBaseVNode("button",{onClick:S,class:"dev-close",title:" (Ctrl+D)"},"")]),createBaseVNode("div",_hoisted_2,toDisplayString(unref(n).s.stage)+" | "+toDisplayString(unref(n).s.pathId||"-")+" | "+toDisplayString(((oe=unref(n).s.loop)==null?void 0:oe.month)||0)+"/24 ",1),createBaseVNode("div",_hoisted_3,[createBaseVNode("div",{class:"section-title",onClick:G[0]||(G[0]=ne=>T("basic"))},[G[15]||(G[15]=createTextVNode("   ",-1)),createBaseVNode("span",_hoisted_4,toDisplayString(o.basic?"":""),1)]),withDirectives(createBaseVNode("div",_hoisted_5,[withDirectives(createBaseVNode("select",{"onUpdate:modelValue":G[1]||(G[1]=ne=>c.value=ne),onChange:C,class:"dev-select"},[...G[16]||(G[16]=[createBaseVNode("option",{value:""},"...",-1),createBaseVNode("option",{value:"S00"},"S00 ",-1),createBaseVNode("option",{value:"S01"},"S01 ",-1),createBaseVNode("option",{value:"S02"},"S02 ",-1),createBaseVNode("option",{value:"S03"},"S03 Loading",-1),createBaseVNode("option",{value:"S04"},"S04 ",-1),createBaseVNode("option",{value:"S05"},"S05 ",-1),createBaseVNode("option",{value:"S06"},"S06 ",-1),createBaseVNode("option",{value:"S07"},"S07 ",-1),createBaseVNode("option",{value:"S08"},"S08 ",-1)])],544),[[vModelSelect,c.value]]),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":G[2]||(G[2]=ne=>u.value=ne),onChange:E,class:"dev-select"},[...G[17]||(G[17]=[createBaseVNode("option",{value:""},"...",-1),createBaseVNode("option",{value:"A"},"A ",-1),createBaseVNode("option",{value:"B"},"B ",-1),createBaseVNode("option",{value:"C"},"C ",-1),createBaseVNode("option",{value:"D"},"D ",-1)])],544),[[vModelSelect,u.value]]),createBaseVNode("button",{onClick:x,class:"dev-btn danger"},"")],512),[[vShow,o.basic]])]),createBaseVNode("div",_hoisted_6,[createBaseVNode("div",{class:"section-title",onClick:G[3]||(G[3]=ne=>T("event"))},[G[18]||(G[18]=createTextVNode("   ",-1)),createBaseVNode("span",_hoisted_7,toDisplayString(o.event?"":""),1)]),withDirectives(createBaseVNode("div",_hoisted_8,[createBaseVNode("div",_hoisted_9,[createBaseVNode("button",{onClick:A,class:"dev-btn primary"},"  #"+toDisplayString(d.value+1),1),createBaseVNode("button",{onClick:R,class:"dev-btn"},"")]),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":G[4]||(G[4]=ne=>f.value=ne),class:"dev-select"},[G[19]||(G[19]=createBaseVNode("option",{value:""},"...",-1)),(openBlock(!0),createElementBlock(Fragment,null,renderList(v.value,ne=>(openBlock(),createElementBlock("option",{key:ne.id,value:ne.id},toDisplayString(ne.numId||"?")+". "+toDisplayString(ne.title||ne.id),9,_hoisted_10))),128))],512),[[vModelSelect,f.value]]),createBaseVNode("button",{onClick:N,class:"dev-btn",disabled:!f.value},"  ",8,_hoisted_11)],512),[[vShow,o.event]])]),createBaseVNode("div",_hoisted_12,[createBaseVNode("div",{class:"section-title",onClick:G[5]||(G[5]=ne=>T("kill"))},[G[20]||(G[20]=createTextVNode("   ",-1)),createBaseVNode("span",_hoisted_13,toDisplayString(o.kill?"":""),1)]),withDirectives(createBaseVNode("div",_hoisted_14,[createBaseVNode("div",_hoisted_15,[createBaseVNode("button",{onClick:D,class:"dev-btn primary"},"  #"+toDisplayString(_.value+1),1),createBaseVNode("button",{onClick:$,class:"dev-btn"},"")]),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":G[6]||(G[6]=ne=>g.value=ne),class:"dev-select"},[...G[21]||(G[21]=[createBaseVNode("option",{value:""},"...",-1),createBaseVNode("optgroup",{label:""},[createBaseVNode("option",{value:"bankrupt"},""),createBaseVNode("option",{value:"health"},""),createBaseVNode("option",{value:"exposure"},""),createBaseVNode("option",{value:"sanity"},""),createBaseVNode("option",{value:"choice"},""),createBaseVNode("option",{value:"cascade_collapse"},"")],-1),createBaseVNode("optgroup",{label:""},[createBaseVNode("option",{value:"utility_bill"},""),createBaseVNode("option",{value:"property_tax"},""),createBaseVNode("option",{value:"insurance_lapse"},""),createBaseVNode("option",{value:"bill_tsunami"},"")],-1),createBaseVNode("optgroup",{label:""},[createBaseVNode("option",{value:"medical_bill"},""),createBaseVNode("option",{value:"insurance_denial"},""),createBaseVNode("option",{value:"ambulance_fear"},""),createBaseVNode("option",{value:"fish_antibiotics"},""),createBaseVNode("option",{value:"painkiller_slide"},"")],-1),createBaseVNode("optgroup",{label:""},[createBaseVNode("option",{value:"credit_collapse"},""),createBaseVNode("option",{value:"payday_loan"},""),createBaseVNode("option",{value:"rental_rejection"},""),createBaseVNode("option",{value:"job_rejection"},"")],-1),createBaseVNode("optgroup",{label:""},[createBaseVNode("option",{value:"no_address"},""),createBaseVNode("option",{value:"homeless_final"},""),createBaseVNode("option",{value:"identity_theft"},"")],-1),createBaseVNode("optgroup",{label:""},[createBaseVNode("option",{value:"gig_economy"},""),createBaseVNode("option",{value:"tip_dependent"},""),createBaseVNode("option",{value:"rich_neighbor"},""),createBaseVNode("option",{value:"workplace_injury"},"")],-1),createBaseVNode("optgroup",{label:""},[createBaseVNode("option",{value:"american_dream"},""),createBaseVNode("option",{value:"thanksgiving"},""),createBaseVNode("option",{value:"black_friday"},""),createBaseVNode("option",{value:"christmas"},"")],-1)])],512),[[vModelSelect,g.value]]),createBaseVNode("button",{onClick:L,class:"dev-btn",disabled:!g.value},"  ",8,_hoisted_16)],512),[[vShow,o.kill]])]),createBaseVNode("div",_hoisted_17,[createBaseVNode("div",{class:"section-title",onClick:G[7]||(G[7]=ne=>T("audio"))},[G[22]||(G[22]=createTextVNode("   ",-1)),createBaseVNode("span",_hoisted_18,toDisplayString(o.audio?"":""),1)]),withDirectives(createBaseVNode("div",_hoisted_19,[createBaseVNode("div",_hoisted_20,[createBaseVNode("button",{onClick:V,class:normalizeClass(["dev-btn",{primary:!l.value}])},toDisplayString(l.value?" ":" "),3)]),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":G[8]||(G[8]=ne=>s.value=ne),onChange:H,class:"dev-select"},[...G[23]||(G[23]=[createBaseVNode("option",{value:""},"BGM...",-1),createBaseVNode("option",{value:"act1_hope"}," - Hope",-1),createBaseVNode("option",{value:"act1_work"}," - Work",-1),createBaseVNode("option",{value:"act2_struggle"}," - Struggle",-1),createBaseVNode("option",{value:"act2_tension"}," - Tension",-1),createBaseVNode("option",{value:"act3_despair"}," - Despair",-1),createBaseVNode("option",{value:"act3_final"}," - Final",-1),createBaseVNode("option",{value:"death_requiem"}," - Requiem",-1)])],544),[[vModelSelect,s.value]]),createBaseVNode("div",_hoisted_21,[createBaseVNode("button",{onClick:G[9]||(G[9]=ne=>X("warning")),class:"dev-btn"},""),createBaseVNode("button",{onClick:G[10]||(G[10]=ne=>X("coins")),class:"dev-btn"},"")])],512),[[vShow,o.audio]])]),createBaseVNode("div",_hoisted_22,[createBaseVNode("div",{class:"section-title",onClick:G[11]||(G[11]=ne=>T("ending"))},[G[24]||(G[24]=createTextVNode("   ",-1)),createBaseVNode("span",_hoisted_23,toDisplayString(o.ending?"":""),1)]),withDirectives(createBaseVNode("div",_hoisted_24,[withDirectives(createBaseVNode("select",{"onUpdate:modelValue":G[12]||(G[12]=ne=>b.value=ne),class:"dev-select"},[...G[25]||(G[25]=[createBaseVNode("option",{value:""},"...",-1),createBaseVNode("optgroup",{label:""},[createBaseVNode("option",{value:"consumerist_martyr"},""),createBaseVNode("option",{value:"paycheck_juggler"},""),createBaseVNode("option",{value:"king_of_leeks"},""),createBaseVNode("option",{value:"debt_slave"},""),createBaseVNode("option",{value:"donut_god"},"")],-1),createBaseVNode("optgroup",{label:""},[createBaseVNode("option",{value:"996_warrior"},""),createBaseVNode("option",{value:"noodle_sommelier"},""),createBaseVNode("option",{value:"chronic_collapse"},""),createBaseVNode("option",{value:"organ_failure"},""),createBaseVNode("option",{value:"north_american_jungler"},""),createBaseVNode("option",{value:"short_lived_species"},""),createBaseVNode("option",{value:"medical_assassin_victim"},"")],-1),createBaseVNode("optgroup",{label:""},[createBaseVNode("option",{value:"illegal_alien"},""),createBaseVNode("option",{value:"system_glitch"},""),createBaseVNode("option",{value:"deportation_express"},""),createBaseVNode("option",{value:"big_data_prey"},""),createBaseVNode("option",{value:"zero_dollar_shopper"},""),createBaseVNode("option",{value:"silky_walker"},"")],-1),createBaseVNode("optgroup",{label:""},[createBaseVNode("option",{value:"reality_denier"},""),createBaseVNode("option",{value:"dissociation"},""),createBaseVNode("option",{value:"nihilist"},""),createBaseVNode("option",{value:"trauma_overflow"},""),createBaseVNode("option",{value:"sanhe_god_usa"},"")],-1),createBaseVNode("optgroup",{label:""},[createBaseVNode("option",{value:"cascade_collapse"},""),createBaseVNode("option",{value:"total_system_failure"},""),createBaseVNode("option",{value:"american_dreamer"},""),createBaseVNode("option",{value:"high_roller"},""),createBaseVNode("option",{value:"final_exit"},""),createBaseVNode("option",{value:"npc"},""),createBaseVNode("option",{value:"electronic_pet_death"},""),createBaseVNode("option",{value:"california_warlord"},""),createBaseVNode("option",{value:"live_begging_streamer"},"")],-1)])],512),[[vModelSelect,b.value]]),createBaseVNode("button",{onClick:q,class:"dev-btn",disabled:!b.value},"  ",8,_hoisted_25)],512),[[vShow,o.ending]])])])):createCommentVNode("",!0)]}),_:1})],64))}},DevToolbar=_export_sfc(_sfc_main$2,[["__scopeId","data-v-2de79b28"]]),items=[{id:"item_r1",round:1,name:"",icon:"",image:"/shops/01.png",price:1e3,rarity:"common",description:'""',flavor:'Payday Loan400%""'},{id:"item_r2",round:2,name:"",icon:"",image:"/shops/02.png",price:1200,rarity:"common",description:"",flavor:'A""A'},{id:"item_r3",round:3,name:"",icon:"",image:"/shops/03.png",price:1500,rarity:"common",description:"",flavor:'""'},{id:"item_r4",round:4,name:"",icon:"",image:"/shops/04.png",price:1500,rarity:"common",description:"",flavor:'A""'},{id:"item_r5",round:5,name:"ICE",icon:"",image:"/shops/05.png",price:2e3,rarity:"rare",description:'""',flavor:"ICE"},{id:"item_r6",round:6,name:"",icon:"",image:"/shops/06.png",price:2e3,rarity:"rare",description:"",flavor:'""---A'},{id:"item_r7",round:7,name:"",icon:"",image:"/shops/07.png",price:2500,rarity:"rare",description:"",flavor:'""'},{id:"item_r8",round:8,name:"",icon:"",image:"/shops/08.png",price:2500,rarity:"rare",description:'""',flavor:'""""""'},{id:"item_r9",round:9,name:"",icon:"",image:"/shops/09.png",price:3e3,rarity:"epic",description:'""',flavor:'A/""'},{id:"item_r10",round:10,name:"",icon:"",image:"/shops/10.png",price:3e3,rarity:"epic",description:'""""',flavor:'""""""""'},{id:"item_r11",round:11,name:"",icon:"",image:"/shops/11.png",price:4e3,rarity:"legendary",description:'""""""',flavor:"3K"},{id:"item_r12",round:12,name:"",icon:"",image:"/shops/12.png",price:5e3,rarity:"legendary",description:'""5000',flavor:'A""'}],rarityColors={common:"#9ca3af",rare:"#3b82f6",epic:"#a855f7",legendary:"#f59e0b"},rarityNames={common:"",rare:"",epic:"",legendary:""},shopData={items,rarityColors,rarityNames},titles=[{minCollected:0,maxCollected:0,title:"",description:"",icon:""},{minCollected:1,maxCollected:3,title:"",description:"",icon:""},{minCollected:4,maxCollected:6,title:"",description:"",icon:""},{minCollected:7,maxCollected:9,title:"",description:"",icon:""},{minCollected:10,maxCollected:11,title:"",description:"",icon:""},{minCollected:12,maxCollected:12,title:"",description:"",icon:""}],collectionBonuses=[{id:"perfect_consumer",name:"",condition:{type:"all_collected"},description:"",icon:""},{id:"medical_victim",name:"",condition:{type:"has_items",items:["item_r2","item_r9"]},description:"",icon:""},{id:"zen_master",name:"",condition:{type:"none_collected"},description:"",icon:""},{id:"debt_veteran",name:"",condition:{type:"has_items",items:["item_r5","item_r9","item_r4"]},description:"401K",icon:""},{id:"worker_bee",name:"",condition:{type:"has_items",items:["item_r3","item_r7"]},description:"",icon:""},{id:"dream_chaser",name:"",condition:{type:"has_items",items:["item_r1","item_r12"]},description:"",icon:""}],victoryEndingsData={titles,collectionBonuses},SHARE_URL="http://us-killline.com/",_sfc_main$1={__name:"FloatingQR",setup(t){const n=ref(!1),a=ref(null),r=ref(null),o=ref({x:0,y:0});function s(){o.value={x:window.innerWidth-80,y:window.innerHeight-90}}let l=!1,c={x:0,y:0};function u(g){return g.touches&&g.touches.length>0?{x:g.touches[0].clientX,y:g.touches[0].clientY}:{x:g.clientX,y:g.clientY}}function d(g){l=!0;const{x:y,y:b}=u(g);c={x:y-o.value.x,y:b-o.value.y},document.addEventListener("mousemove",f),document.addEventListener("mouseup",v),document.addEventListener("touchmove",f,{passive:!1}),document.addEventListener("touchend",v)}function f(g){if(!l)return;g.cancelable&&g.preventDefault();const{x:y,y:b}=u(g);o.value={x:Math.max(0,Math.min(window.innerWidth-70,y-c.x)),y:Math.max(0,Math.min(window.innerHeight-70,b-c.y))}}function v(){l=!1,document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",v),document.removeEventListener("touchmove",f),document.removeEventListener("touchend",v)}function _(){r.value&&browser.toCanvas(r.value,SHARE_URL,{width:40,margin:1,color:{dark:"#ffffff",light:"#00000000"}})}return onMounted(()=>{s(),nextTick(_)}),onBeforeUnmount(()=>{document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",v),document.removeEventListener("touchmove",f),document.removeEventListener("touchend",v)}),(g,y)=>n.value?createCommentVNode("",!0):(openBlock(),createElementBlock("div",{key:0,ref_key:"floatingEl",ref:a,class:"floating-qr",style:normalizeStyle$1({top:o.value.y+"px",left:o.value.x+"px"})},[createBaseVNode("div",{class:"drag-area",onMousedown:d,onTouchstartPassive:d},[createBaseVNode("span",{class:"close-text",onClick:y[0]||(y[0]=withModifiers(b=>n.value=!0,["stop"]))},""),createBaseVNode("canvas",{ref_key:"qrCanvas",ref:r,class:"qr-canvas"},null,512),y[1]||(y[1]=createBaseVNode("span",{class:"qr-label"},"us-killline.com",-1))],32)],4))}},FloatingQR=_export_sfc(_sfc_main$1,[["__scopeId","data-v-65758656"]]),_sfc_main={__name:"App",setup(t){const n=useGameStore(),a=computed(()=>{var r,o;return((r=n.s.v3)==null?void 0:r.roundPhase)==="ending"&&((o=n.s.v3)==null?void 0:o.endingFlow)});return onMounted(()=>{n.load(),Analytics.siteVisit()}),(r,o)=>(openBlock(),createElementBlock(Fragment,null,[createVNode(DevToolbar),createCommentVNode("",!0),a.value?createCommentVNode("",!0):(openBlock(),createBlock(FloatingQR,{key:1})),createVNode(GameScreen)],64))}},SAVE_KEY="us_killline_save_v1",DEBOUNCE_DELAY=300;function attachPersist(t){let n=null,a=!1,r=0,o=0;t._syncSave=function(){const l=performance.now();try{const c=serializeState(t.s),u=JSON.stringify(c);localStorage.setItem(SAVE_KEY,u);const f=performance.now()-l,v=new Blob([u]).size;r++,o=Date.now(),a=!1}catch(c){console.error("[Save] Failed:",c)}},t.save=function(){a=!0,n&&clearTimeout(n),n=setTimeout(()=>{t._syncSave(),n=null},DEBOUNCE_DELAY)},t.saveNow=function(){n&&(clearTimeout(n),n=null),(a||r===0)&&t._syncSave()},t.load=function(){t.s=defaultState()},t.reset=function(){n&&(clearTimeout(n),n=null),t.s=defaultState(),localStorage.removeItem(SAVE_KEY),a=!1,r=0},typeof window<"u"&&window.addEventListener("beforeunload",()=>{a&&t._syncSave()})}function serializeState(t){const{feed:n,history:a,spotlight:r,_loadingIdx:o,bgLineIdx:s,innerClick:l,...c}=t;return{...c,feed:Array.isArray(n)?n.slice(-10):[],_v:t._v||1}}function attachFeed(t){t.log=function(a,r){t.s.history.push({t:a,at:Date.now(),...r}),t.s.history.length>300&&t.s.history.shift()},t.pushFeed=function(a,r={}){const o={id:`${Date.now()}_${Math.random().toString(16).slice(2)}`,at:Date.now(),text:a,...r};t.s.feed.push(o),t.s.feed.length>80&&t.s.feed.shift(),t.s.fullGameLog||(t.s.fullGameLog=[]),t.s.fullGameLog.push(o)},t.getDisplayFeed=function(){return[...t.s.feed].reverse()}}function initNPCState(){}function attachEffects(t){t.applyEffects=function(a=[]){var r,o,s,l,c;for(const u of a){const d=t.s.currentAct==="ACT_3"?2:1;if(u.triggerEnding||u.triggerDeath){(r=t.triggerDeath)==null||r.call(t,{type:"choice",reason:""});return}if(u.unlock){const f=u.unlock||{};if(f.actions){this.s.unlockedActions=this.s.unlockedActions||[];for(const v of f.actions)this.s.unlockedActions.includes(v)||this.s.unlockedActions.push(v)}f.action&&(this.s.unlockedActions=this.s.unlockedActions||[],this.s.unlockedActions.includes(f.action)||this.s.unlockedActions.push(f.action)),f.eventChain&&(this.s.activeEventChains=this.s.activeEventChains||[],this.s.activeEventChains.includes(f.eventChain)||this.s.activeEventChains.push(f.eventChain)),f.npc&&(f.npc,this.s,void 0)}if(u.unlockActions){this.s.unlockedActions=this.s.unlockedActions||[];for(const f of u.unlockActions)this.s.unlockedActions.includes(f)||this.s.unlockedActions.push(f)}if(u.lockActions){this.s.lockedActions=this.s.lockedActions||[];for(const f of u.lockActions)this.s.lockedActions.includes(f)||this.s.lockedActions.push(f)}if(u.unlockTier){const f=`_tier_${u.unlockTier}_unlocked`;this.s[f]=!0}if(u.t){if(u.t==="money"){const f=u.delta<0?u.delta*d:u.delta;this.s.money+=f}if(u.t==="health"){const f=u.delta<0?u.delta*d:u.delta;this.s.health=clamp$1(this.s.health+f,0,100)}if(u.t==="sanity"){const f=u.delta<0?u.delta*d:u.delta;this.s.sanity=clamp$1(this.s.sanity+f,0,100)}if(u.t==="exposure"){const f=u.delta>0?u.delta*d:u.delta;this.s.exposure=clamp$1(this.s.exposure+f,0,100)}if(u.t==="exposureSet"&&(this.s.exposure=clamp$1(u.value,0,100)),u.t==="heat"&&(this.s.heat=clamp$1((this.s.heat||0)+u.delta,0,6)),u.t==="bodyClock"&&(this.s.bodyClock=clamp$1((this.s.bodyClock||0)+u.delta,0,12)),u.t==="tagAdd"){const f=u.tag,v=u.stack??1;this.s.tags[f]=(this.s.tags[f]||0)+v}if(u.t==="housingSet"&&(this.s.housing={type:u.housingType,rent:u.rent,daysToRent:u.daysToRent}),u.t.startsWith("deepStats.")){const f=u.t.replace("deepStats.","").split(".");if(f[0]==="traumaStack"&&u.push){this.s.deepStats.traumaStack=this.s.deepStats.traumaStack||[],this.s.deepStats.traumaStack.includes(u.push)||this.s.deepStats.traumaStack.push(u.push);continue}if(f[0]==="criminalRecord"&&u.push){this.s.deepStats.criminalRecord=this.s.deepStats.criminalRecord||[],this.s.deepStats.criminalRecord.push(u.push);continue}if(f.length===1){u.set!==void 0?this.s.deepStats[f[0]]=u.set:u.delta!==void 0&&(this.s.deepStats[f[0]]=(this.s.deepStats[f[0]]||0)+u.delta);continue}if(f.length===2){const[v,_]=f;this.s.deepStats[v]=this.s.deepStats[v]||{},u.set!==void 0?this.s.deepStats[v][_]=u.set:u.delta!==void 0&&(this.s.deepStats[v][_]=(this.s.deepStats[v][_]||0)+u.delta);continue}}if(u.t.startsWith("addictions.")){const f=u.t.replace("addictions.",""),v=((o=this.s.addictions)==null?void 0:o[f])||0;this.s.addictions||(this.s.addictions={}),u.set!==void 0?this.s.addictions[f]=clamp$1(u.set,0,100):u.delta!==void 0&&(this.s.addictions[f]=clamp$1(v+u.delta,0,100))}if(u.t.startsWith("npc.")){const[,f,v]=u.t.split(".");if((s=this.s.npcs)!=null&&s[f]||(this.s,void 0),!((l=this.s.npcs)!=null&&l[f]))continue;u.set!==void 0?this.s.npcs[f][v]=u.set:u.delta!==void 0&&(this.s.npcs[f][v]=(this.s.npcs[f][v]||0)+u.delta)}if(u.t.startsWith("flags.")){const f=u.t.replace("flags.","");this.s.flags||(this.s.flags={}),u.set!==void 0?this.s.flags[f]=u.set:u.delta!==void 0&&(this.s.flags[f]=(this.s.flags[f]||0)+u.delta)}if(u.t.startsWith("debt.")){const f=u.t.replace("debt.","");this.s.debt||(this.s.debt={principal:0,dailyInterest:0}),u.set!==void 0?this.s.debt[f]=u.set:u.delta!==void 0&&(this.s.debt[f]=(this.s.debt[f]||0)+u.delta)}if(u.t.startsWith("housing.")){const f=u.t.replace("housing.","");this.s.housing||(this.s.housing={type:"",rent:0,daysToRent:0}),u.set!==void 0?(this.s.housing[f]=u.set,f==="type"&&u.set==="homeless"&&!this.s._homelessStartMonth&&(this.s._homelessStartMonth=((c=this.s.loop)==null?void 0:c.month)||1)):u.delta!==void 0&&(this.s.housing[f]=(this.s.housing[f]||0)+u.delta)}}}if(this.save(),t.s.stage==="S06"){t.s.killlineState||(t.s.killlineState={healthCrossed:!1,sanityCrossed:!1,exposureCrossed:!1});let u=null,d=null;t.s.health<=0&&!t.s.killlineState.healthCrossed&&(console.log("[Killline] Health killline triggered! health =",t.s.health),t.s.killlineState.healthCrossed=!0,u="health",d=""),t.s.sanity<=0&&!t.s.killlineState.sanityCrossed&&(console.log("[Killline] Sanity killline triggered! sanity =",t.s.sanity),t.s.killlineState.sanityCrossed=!0,u="sanity",d=""),t.s.exposure>=100&&!t.s.killlineState.exposureCrossed&&(console.log("[Killline] Exposure killline triggered! exposure =",t.s.exposure),t.s.killlineState.exposureCrossed=!0,u="exposure",d=""),u&&(console.log("[Killline] Triggering death with type:",u),console.log("[Killline] store.triggerDeath exists:",typeof t.triggerDeath),typeof t.triggerDeath=="function"?t.triggerDeath({type:u,reason:d}):console.error("[Killline] triggerDeath is not a function!"))}},t.clearSpotlight=function(){this.s.spotlight=null,this.save()}}function attachStageFlows(t){if(t.modals&&!t.modals._hooked){const n=t.modals.close;t.modals.close=function(a){if(n&&n.call(this,a),typeof a=="string"&&a.startsWith("confirm_run_")){const r=parseInt(a.split("_").pop(),10)+1;t.triggerConfirmStep(r)}},t.modals._hooked=!0}t.startGame=function(){this.s.bgLineIdx=0,this.s.stage="S01"},t.goToHome=function(){this.s.stage="S00",this.s.bgLineIdx=0},t.nextBackground=async function(){const a=STAGES.S00.lines;if(this.s.bgLineIdx<a.length-1){this.s.bgLineIdx+=1,this.log("bg_line",{text:a[this.s.bgLineIdx]});return}this.s.stage="S01"},t.clickInnerStruggle=function(){this.s.innerClick=0,this.s.stage="S02"},t.choosePath=function(a){var s,l;this.s.pathId=a.id,this.s.money=a.stats.money,this.s.health=clamp$1(a.stats.health,0,100),this.s.sanity=clamp$1(a.stats.san,0,100),this.s.exposure=0,this.s.debt=a.stats.debt?a.stats.debt:{principal:0,dailyInterest:0},this.s.v3||(s=this.initV3State)==null||s.call(this),this.s.v3&&(this.s.v3.money=a.stats.money,this.s.v3.attributes={health:clamp$1(a.stats.health,0,100),san:clamp$1(a.stats.san,0,100),credit:clamp$1(a.stats.credit||620,300,850),luck:clamp$1(a.stats.luck,0,100)}),this.s.ui.hudUnlocked=!0,this.s.feed=[],this.s.fullGameLog=[],this.log("choose_path",{pathId:a.id,name:a.name});const r={id:`init_${Date.now()}`,at:Date.now(),text:`${((l=this.s.character)==null?void 0:l.name)||""}`,kind:"system"},o={id:`init_stats_${Date.now()+1}`,at:Date.now()+1,text:` | $${a.stats.money} | ${a.stats.health} | ${a.stats.san} | ${a.stats.credit||620} | ${a.stats.luck}`,kind:"effect"};this.s.fullGameLog.push(r),this.s.fullGameLog.push(o)},t.confirmIdentityAndStart=function(){this.s.pathId&&(this.s.housing||(this.s.housing={type:null,rent:0,daysToRent:0}),this.s.stage="S02b")},t.startLoading=async function(){this.s.pathId&&this.triggerConfirmStep(0)},t.triggerConfirmStep=function(n){const a=STAGES.S01.steps||[];if(n>=a.length){this.realStartLoading();return}const r=a[n];this.modals.push({title:r.title||"...",label:r.label||"",body:r.monologue,actions:[{id:`confirm_run_${n}`,label:r.button}]})},t.realStartLoading=async function(){this.s.stage="S03";const n=STAGES.S03.byPath[this.s.pathId]||[];n.length&&this.pushFeed(n[0],{kind:"log"}),this.s._loadingIdx=0},t.nextLoadingLine=function(){const a=STAGES.S03.byPath[this.s.pathId]||[],r=this.s._loadingIdx??0;if(r<a.length-1){this.s._loadingIdx=r+1,this.pushFeed(a[this.s._loadingIdx],{kind:"log"});return}this.s.stage="S04";const o=STAGES.S04.byPath[this.s.pathId];this.pushFeed(`${o.scene}`,{kind:"scene"}),this.pushFeed(o.monologue,{kind:"mono"})},t.startTutorial=async function(){this.s.pathId&&(this.s.stage="S05",this.s.tutorial.started=!0,this.s.tutorial.done=!1,this.s.tutorial.stepIndex=0,this.s.day=1,this.s.loop={month:1,week:1,phase:"weeks",grace:!1,weekActionCounts:{},monthActionCounts:{}})},t.runTutorialNext=function(){const a=STAGES.S05.tutorialByPath[this.s.pathId],r=(a==null?void 0:a.script)||[],o=this.s.tutorial.stepIndex;if(o>=r.length){this.s.stage==="S05"&&this.enterS06();return}const s=r[o];if(this.s.day=s.day,this.pushFeed(`Day ${s.day}: ${s.text}`,{kind:"tutorial"}),this.applyEffects(s.effects||[]),this.log("tutorial_step",{pathId:this.s.pathId,day:s.day,text:s.text}),s.spotlight&&(this.s.spotlight=s.spotlight),this.s.tutorial.stepIndex+=1,this.s.tutorial.stepIndex>=r.length){this.s.tutorial.done=!0;const l=a.weekReport;try{this.modals.push({title:"",body:`${l.housing} $${l.rent}/ ${this.s.housing.daysToRent} 
${l.status}
$${this.s.money}

`,actions:[{id:"ok",label:"S06"}]})}catch(c){console.warn("[S05] week report modal failed",c)}this.enterS06()}},t.enterS06=function(){var a;this.s.stage="S06",this.s.loop={month:1,week:1,phase:"weeks",grace:!1,selectedActionId:null,selectedVariantId:null,killPhase:"NONE",billData:null,weekActionCounts:{},monthActionCounts:{}},this.s.loopV2={weekCategoryCounts:{work:0,rest:0,social:0,risk:0},weekTotalActions:0,triggeredEventIds:[],actionProgress:{active:!1,actionId:null,optionId:null,inProgressText:"",startTime:0},currentEvent:null},this.s.tags=this.s.tags||{},this.pushFeed(`"" ${LOOP_CONFIG.v3.totalRounds} `,{kind:"narrative"}),this.pushFeed("",{kind:"narrative"}),(a=this.saveNow)==null||a.call(this)},t.jumpToStage=function(a){var r,o;switch(console.log(`[DEV] Jumping to stage: ${a}`),!this.s.pathId&&a!=="S00"&&a!=="S01"&&a!=="S02"&&(console.log("[DEV] Auto-selecting path A"),this.devSelectPath("A")),this.s.stage=a,a){case"S00":this.s.bgLineIdx=0;break;case"S01":break;case"S02":this.s.innerClick=0;break;case"S02b":break;case"S03":if(this.s.pathId){const s=STAGES.S03.byPath[this.s.pathId]||[];s.length&&this.pushFeed(s[0],{kind:"log"}),this.s._loadingIdx=0}break;case"S04":if(this.s.pathId){const s=STAGES.S04.byPath[this.s.pathId];this.pushFeed(`${s.scene}`,{kind:"scene"}),this.pushFeed(s.monologue,{kind:"mono"})}break;case"S05":this.s.tutorial.started=!0,this.s.tutorial.done=!1,this.s.tutorial.stepIndex=0,this.s.day=1,this.pushFeed("1",{kind:"narrative"});break;case"S06":this.enterS06();return;case"S07":this.s.death.active||(this.s.death={active:!0,type:"health",reason:"[DEV] ",month:((r=this.s.loop)==null?void 0:r.month)||1,week:((o=this.s.loop)==null?void 0:o.week)||1,at:Date.now(),stats:{health:0,sanity:this.s.sanity,exposure:this.s.exposure},stepIndex:0});break}console.log(`[DEV] Current stage: ${this.s.stage}, path: ${this.s.pathId}`)},t.devSelectPath=function(a){console.log(`[DEV] Selecting path: ${a}`);const o={A:{id:"A",name:"",stats:{money:500,health:70,san:55,stealth:30,stamina:75,luck:50}},B:{id:"B",name:"",stats:{money:200,health:50,san:45,stealth:70,stamina:60,luck:55}},C:{id:"C",name:"",stats:{money:80,health:40,san:40,stealth:85,stamina:50,luck:70}},D:{id:"D",name:"",stats:{money:400,health:65,san:55,stealth:45,stamina:80,luck:25}}}[a];if(!o){console.warn(`[DEV] Invalid path: ${a}`);return}this.choosePath(o),console.log(`[DEV] Path selected: ${a}`)}}const BANKRUPT_SCRIPTS={name:"",opening:"",scenes:[{id:"bankrupt_1",narrative:"",choices:[{id:"steal",label:"",nextScene:"bankrupt_2a"},{id:"leave",label:"",nextScene:"bankrupt_2b"}]},{id:"bankrupt_2a",narrative:"",choices:[{id:"run",label:"",nextScene:"bankrupt_3a"},{id:"beg",label:"",nextScene:"bankrupt_3b"}]},{id:"bankrupt_2b",narrative:"",choices:[{id:"eat",label:"",nextScene:"bankrupt_3c"},{id:"keep_walking",label:"",nextScene:"bankrupt_3d"}]},{id:"bankrupt_3a",narrative:"",choices:[{id:"hide",label:"",nextScene:"bankrupt_final_cold"},{id:"subway",label:"",nextScene:"bankrupt_final_subway"}]},{id:"bankrupt_3b",narrative:"",choices:[{id:"crawl",label:"",nextScene:"bankrupt_final_shame"},{id:"scream",label:"",nextScene:"bankrupt_final_breakdown"}]},{id:"bankrupt_3c",narrative:"",choices:[{id:"call_911",label:"911",nextScene:"bankrupt_final_hospital"},{id:"endure",label:"",nextScene:"bankrupt_final_poison"}]},{id:"bankrupt_3d",narrative:"",choices:[{id:"enter",label:"",nextScene:"bankrupt_final_construction"},{id:"bench",label:"",nextScene:"bankrupt_final_cold"}]},{id:"bankrupt_final_cold",narrative:"",isFinal:!0,deathMethod:"",lastWords:""},{id:"bankrupt_final_subway",narrative:"",isFinal:!0,deathMethod:"",lastWords:""},{id:"bankrupt_final_shame",narrative:"''",isFinal:!0,deathMethod:"",lastWords:""},{id:"bankrupt_final_breakdown",narrative:"",isFinal:!0,deathMethod:"",lastWords:"''"},{id:"bankrupt_final_hospital",narrative:"$47,000",isFinal:!0,deathMethod:"",lastWords:""},{id:"bankrupt_final_poison",narrative:"",isFinal:!0,deathMethod:"",lastWords:""},{id:"bankrupt_final_construction",narrative:"",isFinal:!0,deathMethod:"",lastWords:""}]},HEALTH_SCRIPTS={name:"",opening:"",scenes:[{id:"health_1",narrative:"",choices:[{id:"go_hospital",label:"",nextScene:"health_2a"},{id:"buy_pills",label:"",nextScene:"health_2b"}]},{id:"health_2a",narrative:"",choices:[{id:"do_test",label:"",nextScene:"health_3a"},{id:"leave_hospital",label:"...",nextScene:"health_3b"}]},{id:"health_2b",narrative:"",choices:[{id:"double_dose",label:"",nextScene:"health_3c"},{id:"endure_night",label:"",nextScene:"health_3d"}]},{id:"health_3a",narrative:"",choices:[{id:"sign_paper",label:"",nextScene:"health_final_debt"},{id:"refuse_surgery",label:"",nextScene:"health_final_refuse"}]},{id:"health_3b",narrative:"",choices:[{id:"call_help",label:"",nextScene:"health_final_street"},{id:"walk_away",label:"",nextScene:"health_final_alley"}]},{id:"health_3c",narrative:"",choices:[{id:"sleep",label:"",nextScene:"health_final_overdose"},{id:"try_vomit",label:"",nextScene:"health_final_vomit"}]},{id:"health_3d",narrative:"",choices:[{id:"crawl_phone",label:"",nextScene:"health_final_stroke"},{id:"wait",label:"",nextScene:"health_final_alone"}]},{id:"health_final_debt",narrative:"",isFinal:!0,deathMethod:"",lastWords:""},{id:"health_final_refuse",narrative:"",isFinal:!0,deathMethod:"",lastWords:""},{id:"health_final_street",narrative:"''",isFinal:!0,deathMethod:"",lastWords:"$3,800"},{id:"health_final_alley",narrative:"",isFinal:!0,deathMethod:"",lastWords:""},{id:"health_final_overdose",narrative:"",isFinal:!0,deathMethod:"",lastWords:""},{id:"health_final_vomit",narrative:"",isFinal:!0,deathMethod:"",lastWords:"''"},{id:"health_final_stroke",narrative:"",isFinal:!0,deathMethod:"",lastWords:"911"},{id:"health_final_alone",narrative:"",isFinal:!0,deathMethod:"",lastWords:""}]},EXPOSURE_SCRIPTS={name:"",opening:"30",scenes:[{id:"exposure_1",narrative:"OPTH1B3030",choices:[{id:"find_job",label:"",nextScene:"exposure_2a"},{id:"overstay",label:"",nextScene:"exposure_2b"}]},{id:"exposure_2a",narrative:"200sponsor H1B''",choices:[{id:"accept",label:"",nextScene:"exposure_3a"},{id:"refuse",label:"",nextScene:"exposure_3b"}]},{id:"exposure_2b",narrative:"",choices:[{id:"work_cash",label:"",nextScene:"exposure_3c"},{id:"hide",label:"",nextScene:"exposure_3d"}]},{id:"exposure_3a",narrative:"12''sponsor",choices:[{id:"despair",label:"",nextScene:"exposure_final_depression"},{id:"lawyer",label:"",nextScene:"exposure_final_lawyer"}]},{id:"exposure_3b",narrative:"30''",choices:[{id:"leave",label:"",nextScene:"exposure_final_return"},{id:"stay",label:"",nextScene:"exposure_final_overstay"}]},{id:"exposure_3c",narrative:"",choices:[{id:"panic",label:"",nextScene:"exposure_final_caught"},{id:"accept",label:"",nextScene:"exposure_final_accept"}]},{id:"exposure_3d",narrative:"''",choices:[{id:"run",label:"",nextScene:"exposure_final_flee"},{id:"wait",label:"",nextScene:"exposure_final_wait"}]},{id:"exposure_final_depression",narrative:"",isFinal:!0,deathMethod:"",lastWords:""},{id:"exposure_final_lawyer",narrative:"$5000''",isFinal:!0,deathMethod:"",lastWords:""},{id:"exposure_final_return",narrative:"",isFinal:!0,deathMethod:"",lastWords:""},{id:"exposure_final_overstay",narrative:"",isFinal:!0,deathMethod:"",lastWords:""},{id:"exposure_final_caught",narrative:"30",isFinal:!0,deathMethod:"",lastWords:""},{id:"exposure_final_accept",narrative:"''",isFinal:!0,deathMethod:"",lastWords:""},{id:"exposure_final_flee",narrative:"",isFinal:!0,deathMethod:"",lastWords:""},{id:"exposure_final_wait",narrative:"",isFinal:!0,deathMethod:"",lastWords:""}]},SANITY_SCRIPTS={name:"",opening:"",scenes:[{id:"sanity_1",narrative:"",choices:[{id:"ignore",label:"",nextScene:"sanity_2a"},{id:"go_check",label:"",nextScene:"sanity_2b"}]},{id:"sanity_2a",narrative:"",choices:[{id:"scream",label:"",nextScene:"sanity_3a"},{id:"freeze",label:"",nextScene:"sanity_3b"}]},{id:"sanity_2b",narrative:"",choices:[{id:"keep_chopping",label:"",nextScene:"sanity_3c"},{id:"realize",label:"...",nextScene:"sanity_3d"}]},{id:"sanity_3a",narrative:"''",choices:[{id:"go_with",label:"",nextScene:"sanity_final_hospital"},{id:"fight",label:"",nextScene:"sanity_final_fight"}]},{id:"sanity_3b",narrative:"",choices:[{id:"smash_mirror",label:"",nextScene:"sanity_final_mirror"},{id:"talk",label:"",nextScene:"sanity_final_talk"}]},{id:"sanity_3c",narrative:"",choices:[{id:"attack",label:"",nextScene:"sanity_final_attack"},{id:"drop_knife",label:"",nextScene:"sanity_final_arrest"}]},{id:"sanity_3d",narrative:"",choices:[{id:"call_help",label:"...",nextScene:"sanity_final_helpme"},{id:"its_ok",label:"",nextScene:"sanity_final_denial"}]},{id:"sanity_final_hospital",narrative:"",isFinal:!0,deathMethod:"",lastWords:""},{id:"sanity_final_fight",narrative:"",isFinal:!0,deathMethod:"",lastWords:""},{id:"sanity_final_mirror",narrative:"",isFinal:!0,deathMethod:"",lastWords:""},{id:"sanity_final_talk",narrative:"''''",isFinal:!0,deathMethod:"",lastWords:""},{id:"sanity_final_attack",narrative:"",isFinal:!0,deathMethod:"",lastWords:""},{id:"sanity_final_arrest",narrative:"",isFinal:!0,deathMethod:"",lastWords:""},{id:"sanity_final_helpme",narrative:"911",isFinal:!0,deathMethod:"",lastWords:""},{id:"sanity_final_denial",narrative:"",isFinal:!0,deathMethod:"",lastWords:""}]},CHOICE_SCRIPTS={name:"",opening:"",scenes:[{id:"choice_1",narrative:"",choices:[{id:"alcohol",label:"",nextScene:"choice_2a"},{id:"pills",label:"",nextScene:"choice_2b"},{id:"gun",label:"",nextScene:"choice_2c"}]},{id:"choice_2a",narrative:"",choices:[{id:"drink_more",label:"",nextScene:"choice_final_alcohol"},{id:"go_outside",label:"",nextScene:"choice_final_wander"}]},{id:"choice_2b",narrative:"",choices:[{id:"swallow_all",label:"",nextScene:"choice_final_overdose"},{id:"hesitate",label:"",nextScene:"choice_3_hesitate"}]},{id:"choice_2c",narrative:"",choices:[{id:"pull_trigger",label:"",nextScene:"choice_final_gun"},{id:"put_down",label:"",nextScene:"choice_3_putdown"}]},{id:"choice_3_hesitate",narrative:"",choices:[{id:"swallow",label:"",nextScene:"choice_final_overdose"},{id:"cry",label:"",nextScene:"choice_final_cry"}]},{id:"choice_3_putdown",narrative:"",choices:[{id:"drink",label:"",nextScene:"choice_final_drunk_gun"},{id:"leave_room",label:"",nextScene:"choice_final_leave"}]},{id:"choice_final_alcohol",narrative:"",isFinal:!0,deathMethod:"",lastWords:""},{id:"choice_final_wander",narrative:"",isFinal:!0,deathMethod:"",lastWords:""},{id:"choice_final_overdose",narrative:"",isFinal:!0,deathMethod:"",lastWords:""},{id:"choice_final_gun",narrative:"",isFinal:!0,deathMethod:"",lastWords:""},{id:"choice_final_cry",narrative:"",isFinal:!0,deathMethod:"",lastWords:""},{id:"choice_final_drunk_gun",narrative:"",isFinal:!0,deathMethod:"",lastWords:""},{id:"choice_final_leave",narrative:"",isFinal:!0,deathMethod:"",lastWords:""}]},CASCADE_SCRIPTS={name:"",opening:"",scenes:[{id:"cascade_1",narrative:"ICE",choices:[{id:"run_home",label:"",nextScene:"cascade_2a"},{id:"stand_still",label:"",nextScene:"cascade_2b"}]},{id:"cascade_2a",narrative:"",choices:[{id:"beg_landlord",label:"",nextScene:"cascade_3a"},{id:"pack_up",label:"",nextScene:"cascade_3b"}]},{id:"cascade_2b",narrative:"ICE",choices:[{id:"wait_pass",label:"",nextScene:"cascade_3c"},{id:"seek_help",label:"",nextScene:"cascade_3d"}]},{id:"cascade_3a",narrative:"",choices:[{id:"open",label:"",nextScene:"cascade_final_arrest"},{id:"window",label:"",nextScene:"cascade_final_fall"}]},{id:"cascade_3b",narrative:"",choices:[{id:"shelter",label:"",nextScene:"cascade_final_shelter"},{id:"street",label:"",nextScene:"cascade_final_street"}]},{id:"cascade_3c",narrative:"",choices:[{id:"crawl",label:"",nextScene:"cascade_final_crawl"},{id:"accept",label:"",nextScene:"cascade_final_accept"}]},{id:"cascade_3d",narrative:"''''",choices:[{id:"give_up",label:"",nextScene:"cascade_final_abandon"},{id:"last_try",label:"",nextScene:"cascade_final_try"}]},{id:"cascade_final_arrest",narrative:"",isFinal:!0,deathMethod:"",lastWords:""},{id:"cascade_final_fall",narrative:"",isFinal:!0,deathMethod:"",lastWords:""},{id:"cascade_final_shelter",narrative:"",isFinal:!0,deathMethod:"",lastWords:""},{id:"cascade_final_street",narrative:"''",isFinal:!0,deathMethod:"",lastWords:""},{id:"cascade_final_crawl",narrative:"",isFinal:!0,deathMethod:"",lastWords:""},{id:"cascade_final_accept",narrative:"",isFinal:!0,deathMethod:"",lastWords:""},{id:"cascade_final_abandon",narrative:"",isFinal:!0,deathMethod:"",lastWords:""},{id:"cascade_final_try",narrative:"'......'",isFinal:!0,deathMethod:"",lastWords:""}]},DEATH_SCRIPTS={bankrupt:BANKRUPT_SCRIPTS,health:HEALTH_SCRIPTS,exposure:EXPOSURE_SCRIPTS,sanity:SANITY_SCRIPTS,choice:CHOICE_SCRIPTS,cascade_collapse:CASCADE_SCRIPTS,money:BANKRUPT_SCRIPTS,killline:CASCADE_SCRIPTS};function getSceneById(t,n){return(DEATH_SCRIPTS[t]||DEATH_SCRIPTS.bankrupt).scenes.find(r=>r.id===n)}function getOpeningScene(t){const n=DEATH_SCRIPTS[t]||DEATH_SCRIPTS.bankrupt;return{narrative:n.opening,firstScene:n.scenes[0]}}const BANKRUPT_KILL_SCRIPT={type:"bankrupt",title:"",rounds:[{id:1,narrative:"",actions:[{id:"steal",label:"",disabled:!0,disabledHint:"......"},{id:"beg",label:"",disabled:!0,disabledHint:"..."},{id:"leave",label:"",disabled:!1},{id:"call",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:2,narrative:"",actions:[{id:"construction",label:"",disabled:!0,disabledHint:"..."},{id:"bench",label:"",disabled:!1},{id:"shelter",label:"",disabled:!0,disabledHint:"..."},{id:"keep_walking",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:3,narrative:"",actions:[{id:"stand_up",label:"",disabled:!0,disabledHint:"..."},{id:"call_help",label:"",disabled:!0,disabledHint:"..."},{id:"close_eyes",label:"",disabled:!1},{id:"crawl",label:"",disabled:!0,disabledHint:"......"}],result:""},{id:4,narrative:"",actions:[{id:"wake_up",label:"",disabled:!0,disabledHint:"..."},{id:"go_home",label:"",disabled:!1},{id:"turn_back",label:"",disabled:!0,disabledHint:"..."},{id:"call_mom",label:"",disabled:!0,disabledHint:"..."}],result:null}],ending:{narrative:`



`,deathMethod:"",lastWords:""}},HEALTH_KILL_SCRIPT={type:"health",title:"",rounds:[{id:1,narrative:"",actions:[{id:"hospital",label:"",disabled:!0,disabledHint:"......"},{id:"rest",label:"",disabled:!1},{id:"pills",label:"",disabled:!0,disabledHint:"..."},{id:"call_friend",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:2,narrative:"",actions:[{id:"call_911",label:"911",disabled:!0,disabledHint:"......"},{id:"sit_up",label:"",disabled:!1},{id:"scream",label:"",disabled:!0,disabledHint:"..."},{id:"take_aspirin",label:"",disabled:!0,disabledHint:"..."}],result:"......"},{id:3,narrative:"911...",actions:[{id:"dial",label:"",disabled:!0,disabledHint:"..."},{id:"text",label:"",disabled:!0,disabledHint:"..."},{id:"drop_phone",label:"",disabled:!1},{id:"voice",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:4,narrative:"",actions:[{id:"fight",label:"",disabled:!0,disabledHint:"..."},{id:"let_go",label:"",disabled:!1},{id:"remember",label:"",disabled:!0,disabledHint:"..."},{id:"pray",label:"",disabled:!0,disabledHint:"..."}],result:null}],ending:{narrative:`



`,deathMethod:"",lastWords:"911"}},EXPOSURE_KILL_SCRIPT={type:"exposure",title:"",rounds:[{id:1,narrative:"",actions:[{id:"hide",label:"",disabled:!0,disabledHint:"..."},{id:"window",label:"",disabled:!0,disabledHint:"..."},{id:"open",label:"",disabled:!1},{id:"pretend",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:2,narrative:"",actions:[{id:"lawyer",label:"",disabled:!0,disabledHint:"..."},{id:"explain",label:"",disabled:!0,disabledHint:"..."},{id:"silent",label:"",disabled:!1},{id:"escape",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:3,narrative:"H1B",actions:[{id:"appeal",label:"",disabled:!0,disabledHint:"..."},{id:"call_family",label:"",disabled:!0,disabledHint:"..."},{id:"accept",label:"",disabled:!1},{id:"hunger_strike",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:4,narrative:"",actions:[{id:"go_home",label:"",disabled:!0,disabledHint:"..."},{id:"start_over",label:"",disabled:!0,disabledHint:"..."},{id:"stand_still",label:"",disabled:!1},{id:"cry",label:"",disabled:!0,disabledHint:"..."}],result:null}],ending:{narrative:`



`,deathMethod:"",lastWords:""}},SANITY_KILL_SCRIPT={type:"sanity",title:"",rounds:[{id:1,narrative:"",actions:[{id:"ignore",label:"",disabled:!0,disabledHint:"......"},{id:"check",label:"",disabled:!0,disabledHint:"......"},{id:"listen",label:"",disabled:!1},{id:"call_police",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:2,narrative:"",actions:[{id:"smash",label:"",disabled:!0,disabledHint:"......"},{id:"look_away",label:"",disabled:!1},{id:"talk",label:"",disabled:!0,disabledHint:"..."},{id:"run",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:3,narrative:"",actions:[{id:"fight_back",label:"",disabled:!0,disabledHint:"..."},{id:"seek_help",label:"",disabled:!0,disabledHint:"..."},{id:"agree",label:"",disabled:!1},{id:"medicine",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:4,narrative:"",actions:[{id:"step_back",label:"",disabled:!0,disabledHint:"..."},{id:"close_window",label:"",disabled:!0,disabledHint:"..."},{id:"step_forward",label:"",disabled:!1},{id:"scream",label:"",disabled:!0,disabledHint:"..."}],result:null}],ending:{narrative:`





`,deathMethod:"",lastWords:""}},CHOICE_KILL_SCRIPT={type:"choice",title:"",rounds:[{id:1,narrative:"",actions:[{id:"tear_letter",label:"",disabled:!0,disabledHint:"..."},{id:"put_away",label:"",disabled:!0,disabledHint:"..."},{id:"drink",label:"",disabled:!1},{id:"call_someone",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:2,narrative:"",actions:[{id:"put_back",label:"",disabled:!0,disabledHint:"..."},{id:"flush",label:"",disabled:!0,disabledHint:"..."},{id:"take_some",label:"",disabled:!1},{id:"think",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:3,narrative:"",actions:[{id:"finish_letter",label:"",disabled:!0,disabledHint:"..."},{id:"vomit",label:"",disabled:!0,disabledHint:"..."},{id:"lie_down",label:"",disabled:!1},{id:"fight",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:4,narrative:"",actions:[{id:"open_eyes",label:"",disabled:!0,disabledHint:"..."},{id:"answer",label:"",disabled:!0,disabledHint:"..."},{id:"sleep",label:"",disabled:!1},{id:"remember",label:"",disabled:!0,disabledHint:"..."}],result:null}],ending:{narrative:`



`,deathMethod:"",lastWords:""}},CASCADE_KILL_SCRIPT={type:"cascade_collapse",title:"",rounds:[{id:1,narrative:"ICE",actions:[{id:"run",label:"",disabled:!0,disabledHint:"..."},{id:"hide",label:"",disabled:!0,disabledHint:"..."},{id:"walk",label:"",disabled:!1},{id:"face",label:"",disabled:!0,disabledHint:"..."}],result:"ICE"},{id:2,narrative:"",actions:[{id:"answer",label:"",disabled:!0,disabledHint:"..."},{id:"hang_up",label:"",disabled:!0,disabledHint:"..."},{id:"ignore",label:"",disabled:!1},{id:"throw",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:3,narrative:"",actions:[{id:"grab",label:"",disabled:!0,disabledHint:"..."},{id:"speak",label:"",disabled:!0,disabledHint:"..."},{id:"reach",label:"",disabled:!1},{id:"give_up",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:4,narrative:"",actions:[{id:"get_up",label:"",disabled:!0,disabledHint:"..."},{id:"wave",label:"",disabled:!0,disabledHint:"..."},{id:"close_eyes",label:"",disabled:!1},{id:"shout",label:"",disabled:!0,disabledHint:"..."}],result:null}],ending:{narrative:`



`,deathMethod:"",lastWords:""}},UTILITY_BILL_KILL_SCRIPT={type:"utility_bill",title:"",rounds:[{id:1,narrative:`$487
$180

AI

`,actions:[{id:"pay",label:"",disabled:!0,disabledHint:"..."},{id:"negotiate",label:"",disabled:!0,disabledHint:""},{id:"cut_power",label:"",disabled:!1},{id:"complain",label:"",disabled:!0,disabledHint:"..."}],result:"39"},{id:2,narrative:`
24



`,actions:[{id:"ac_on",label:"",disabled:!0,disabledHint:"..."},{id:"cold_bath",label:"",disabled:!1},{id:"mall",label:"",disabled:!0,disabledHint:"..."},{id:"911",label:"911",disabled:!0,disabledHint:"..."}],result:""},{id:3,narrative:`

...

AIAI
...`,actions:[{id:"call_help",label:"",disabled:!0,disabledHint:"..."},{id:"crawl_out",label:"",disabled:!0,disabledHint:"..."},{id:"lie_down",label:"",disabled:!1},{id:"pray",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:4,narrative:`

......



`,actions:[{id:"reach",label:"",disabled:!0,disabledHint:"..."},{id:"call_grandma",label:"",disabled:!0,disabledHint:"..."},{id:"close_eyes",label:"",disabled:!1},{id:"fight",label:"",disabled:!0,disabledHint:"..."}],result:null}],ending:{narrative:`




AI`,deathMethod:"",lastWords:""}},PROPERTY_TAX_KILL_SCRIPT={type:"property_tax",title:"",rounds:[{id:1,narrative:`$12,000



`,actions:[{id:"pay",label:"",disabled:!0,disabledHint:"$500..."},{id:"appeal",label:"",disabled:!0,disabledHint:""},{id:"ignore",label:"",disabled:!1},{id:"sell",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:2,narrative:`

60
$30,000

`,actions:[{id:"lawyer",label:"",disabled:!0,disabledHint:"$5,000..."},{id:"loan",label:"",disabled:!0,disabledHint:"..."},{id:"wait",label:"",disabled:!1},{id:"protest",label:"",disabled:!0,disabledHint:""}],result:""},{id:3,narrative:`
$85,000
$40,000
30
$40,000
`,actions:[{id:"leave",label:"",disabled:!1},{id:"beg",label:"",disabled:!0,disabledHint:"..."},{id:"burn",label:"",disabled:!0,disabledHint:"..."},{id:"cry",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:4,narrative:`




...`,actions:[{id:"sleep",label:"",disabled:!1},{id:"walk",label:"",disabled:!0,disabledHint:"..."},{id:"fire",label:"",disabled:!0,disabledHint:"..."},{id:"shelter",label:"",disabled:!0,disabledHint:"......"}],result:null}],ending:{narrative:`




Airbnb`,deathMethod:"",lastWords:""}},INSURANCE_LAPSE_KILL_SCRIPT={type:"insurance_lapse",title:"",rounds:[{id:1,narrative:`$2,400
$3,000


`,actions:[{id:"pay",label:"",disabled:!1},{id:"cancel",label:"",disabled:!0,disabledHint:"40..."},{id:"negotiate",label:"",disabled:!0,disabledHint:"..."},{id:"illegal",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:2,narrative:`

15

1515$1,200`,actions:[{id:"borrow",label:"",disabled:!0,disabledHint:"..."},{id:"payday",label:"",disabled:!0,disabledHint:"..."},{id:"pray",label:"",disabled:!1},{id:"sell_car",label:"",disabled:!0,disabledHint:"..."}],result:"15"},{id:3,narrative:`

SUV


911
`,actions:[{id:"wait",label:"",disabled:!1},{id:"move",label:"",disabled:!0,disabledHint:"..."},{id:"call",label:"",disabled:!0,disabledHint:"..."},{id:"check",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:4,narrative:`ICU



$200,000...

$200,000`,actions:[{id:"ask",label:"",disabled:!1},{id:"cry",label:"...",disabled:!0,disabledHint:"..."},{id:"call_family",label:"",disabled:!0,disabledHint:"..."},{id:"sleep",label:"",disabled:!0,disabledHint:"..."}],result:null}],ending:{narrative:`$350,000




`,deathMethod:"",lastWords:""}},BILL_TSUNAMI_KILL_SCRIPT={type:"bill_tsunami",title:"",rounds:[{id:1,narrative:`
$1,800
$450
$200
$180
$80
$65
$320
$150
$280
$3,525
$3,200
-$325
`,actions:[{id:"prioritize",label:"",disabled:!1},{id:"borrow",label:"",disabled:!0,disabledHint:"..."},{id:"ignore",label:"",disabled:!0,disabledHint:"..."},{id:"calculate",label:"",disabled:!0,disabledHint:"..."}],result:"......"},{id:2,narrative:`


Excel

`,actions:[{id:"open",label:"",disabled:!0,disabledHint:"..."},{id:"work",label:"",disabled:!0,disabledHint:"60..."},{id:"drink",label:"",disabled:!1},{id:"plan",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:3,narrative:`

$8,500




`,actions:[{id:"count",label:"",disabled:!1},{id:"burn",label:"",disabled:!0,disabledHint:"..."},{id:"lawyer",label:"",disabled:!0,disabledHint:"..."},{id:"run",label:"",disabled:!0,disabledHint:""}],result:"$67,000"},{id:4,narrative:`


$67,000




`,actions:[{id:"pour",label:"",disabled:!1},{id:"put_away",label:"",disabled:!0,disabledHint:"..."},{id:"call",label:"",disabled:!0,disabledHint:"..."},{id:"sleep",label:"",disabled:!0,disabledHint:"..."}],result:null}],ending:{narrative:`




$2,800
$3,500
$200/
`,deathMethod:"",lastWords:""}},MEDICAL_BILL_KILL_SCRIPT={type:"medical_bill",title:"",rounds:[{id:1,narrative:`



$193,000

cover


`,actions:[{id:"pay",label:"",disabled:!0,disabledHint:"..."},{id:"appeal",label:"",disabled:!0,disabledHint:""},{id:"bankruptcy",label:"",disabled:!1},{id:"ignore",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:2,narrative:`

XXXYYY...


193000193000193000`,actions:[{id:"answer",label:"",disabled:!0,disabledHint:""},{id:"lawyer",label:"",disabled:!0,disabledHint:"..."},{id:"block",label:"",disabled:!1},{id:"new_phone",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:3,narrative:`620380

HR...


...`,actions:[{id:"fight",label:"",disabled:!0,disabledHint:"..."},{id:"hide",label:"",disabled:!1},{id:"protest",label:"",disabled:!0,disabledHint:""},{id:"give_up",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:4,narrative:`
$193,000
25
2540

`,actions:[{id:"call_someone",label:"",disabled:!0,disabledHint:"..."},{id:"put_away",label:"",disabled:!0,disabledHint:"..."},{id:"pour_drink",label:"",disabled:!1},{id:"sleep",label:"",disabled:!0,disabledHint:"..."}],result:null}],ending:{narrative:`




`,deathMethod:"",lastWords:""}},INSURANCE_DENIAL_KILL_SCRIPT={type:"insurance_denial",title:"",rounds:[{id:1,narrative:`

$800

...

`,actions:[{id:"appeal",label:"",disabled:!1},{id:"lawyer",label:"",disabled:!0,disabledHint:"..."},{id:"beg",label:"",disabled:!0,disabledHint:"..."},{id:"pay_self",label:"",disabled:!0,disabledHint:"$280,000..."}],result:"4-6"},{id:2,narrative:`
2019



12`,actions:[{id:"appeal_again",label:"",disabled:!0,disabledHint:"..."},{id:"media",label:"",disabled:!0,disabledHint:"..."},{id:"give_up",label:"",disabled:!1},{id:"protest",label:"",disabled:!0,disabledHint:"..."}],result:"C..."},{id:3,narrative:`
3
85%...20%

$450,00020%
$96,000`,actions:[{id:"surgery",label:"",disabled:!0,disabledHint:"..."},{id:"go_home",label:"",disabled:!1},{id:"mexico",label:"",disabled:!0,disabledHint:"..."},{id:"suicide",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:4,narrative:`





`,actions:[{id:"curse",label:"",disabled:!0,disabledHint:"..."},{id:"forgive",label:"",disabled:!0,disabledHint:"..."},{id:"close_eyes",label:"",disabled:!1},{id:"fight",label:"",disabled:!0,disabledHint:""}],result:null}],ending:{narrative:`





`,deathMethod:"",lastWords:""}},AMBULANCE_FEAR_KILL_SCRIPT={type:"ambulance_fear",title:"",rounds:[{id:1,narrative:`
911

$3,000$5,000

.........
`,actions:[{id:"ambulance",label:"",disabled:!0,disabledHint:"$8,000..."},{id:"rest",label:"",disabled:!1},{id:"uber",label:"Uber",disabled:!0,disabledHint:"..."},{id:"pills",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:2,narrative:`

911
$3,000...
$5,000...
$8,000...

............`,actions:[{id:"call_911",label:"911",disabled:!0,disabledHint:"...$3,000...$3,000..."},{id:"wait",label:"",disabled:!1},{id:"roommate",label:"",disabled:!0,disabledHint:"..."},{id:"aspirin",label:"",disabled:!0,disabledHint:"......"}],result:"..."},{id:3,narrative:`

......


`,actions:[{id:"answer",label:"",disabled:!0,disabledHint:"..."},{id:"stand",label:"",disabled:!0,disabledHint:"..."},{id:"sit",label:"",disabled:!1},{id:"crawl",label:"",disabled:!0,disabledHint:"..."}],result:"..."},{id:4,narrative:`911......

...
$3,000...
$3,000...


`,actions:[{id:"wait_ambulance",label:"",disabled:!0,disabledHint:"..."},{id:"breathe",label:"",disabled:!0,disabledHint:"..."},{id:"hold_on",label:"",disabled:!0,disabledHint:"..."},{id:"let_go",label:"...",disabled:!1}],result:null}],ending:{narrative:`


90%
12

$2,850`,deathMethod:"",lastWords:"$2,850"}},FISH_ANTIBIOTICS_KILL_SCRIPT={type:"fish_antibiotics",title:"",rounds:[{id:1,narrative:`
$2,500

$800

$15`,actions:[{id:"pay",label:"",disabled:!0,disabledHint:"$200..."},{id:"extract",label:"",disabled:!0,disabledHint:"$800..."},{id:"fish_meds",label:"",disabled:!1},{id:"ignore",label:"",disabled:!0,disabledHint:"..."}],result:"AmazonFish Mox500mg100$14.99"},{id:2,narrative:`

$2,500


`,actions:[{id:"stop",label:"",disabled:!0,disabledHint:"..."},{id:"continue",label:"",disabled:!1},{id:"doctor",label:"",disabled:!0,disabledHint:"..."},{id:"research",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:3,narrative:`




...
.........
`,actions:[{id:"hospital",label:"",disabled:!0,disabledHint:"..."},{id:"stop_meds",label:"",disabled:!1},{id:"more_meds",label:"",disabled:!0,disabledHint:"..."},{id:"pray",label:"",disabled:!0,disabledHint:"..."}],result:"......"},{id:4,narrative:`


$14.99
$14.99
$2,500...
$2,500

`,actions:[{id:"call",label:"",disabled:!0,disabledHint:"..."},{id:"crawl",label:"",disabled:!0,disabledHint:"..."},{id:"wait",label:"",disabled:!1},{id:"regret",label:"",disabled:!0,disabledHint:"..."}],result:null}],ending:{narrative:`
48




`,deathMethod:"",lastWords:""}},PAINKILLER_SLIDE_KILL_SCRIPT={type:"painkiller_slide",title:"",rounds:[{id:1,narrative:`




`,actions:[{id:"obey",label:"",disabled:!0,disabledHint:"..."},{id:"another_doctor",label:"",disabled:!1},{id:"cold_turkey",label:"",disabled:!0,disabledHint:"..."},{id:"complain",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:2,narrative:`



$30
$30$2
`,actions:[{id:"buy",label:"",disabled:!1},{id:"refuse",label:"",disabled:!0,disabledHint:""},{id:"clinic",label:"",disabled:!0,disabledHint:"..."},{id:"endure",label:"",disabled:!0,disabledHint:"..."}],result:"$300"},{id:3,narrative:`
dealer




`,actions:[{id:"use",label:"",disabled:!1},{id:"refuse",label:"",disabled:!0,disabledHint:"......"},{id:"hospital",label:"",disabled:!0,disabledHint:"..."},{id:"throw",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:4,narrative:`

Dealer


......
`,actions:[{id:"less",label:"",disabled:!0,disabledHint:"..."},{id:"normal",label:"",disabled:!1},{id:"stop",label:"",disabled:!0,disabledHint:"..."},{id:"test",label:"",disabled:!0,disabledHint:"..."}],result:null}],ending:{narrative:`


CDC2024

`,deathMethod:"",lastWords:""}},CREDIT_COLLAPSE_KILL_SCRIPT={type:"credit_collapse",title:"",rounds:[{id:1,narrative:`350


$500

Hertz350
`,actions:[{id:"improve",label:"",disabled:!0,disabledHint:"......"},{id:"prepaid",label:"",disabled:!1},{id:"explain",label:"",disabled:!0,disabledHint:"..."},{id:"family",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:2,narrative:`
HR

HR


`,actions:[{id:"argue",label:"",disabled:!0,disabledHint:"..."},{id:"next",label:"",disabled:!1},{id:"lie",label:"",disabled:!0,disabledHint:"..."},{id:"gig",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:3,narrative:`
$350
$40



24
350`,actions:[{id:"shelter",label:"",disabled:!0,disabledHint:"..."},{id:"beg",label:"",disabled:!0,disabledHint:"..."},{id:"walk",label:"",disabled:!1},{id:"church",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:4,narrative:`




...
`,actions:[{id:"step_back",label:"",disabled:!0,disabledHint:""},{id:"call",label:"",disabled:!0,disabledHint:"..."},{id:"look_down",label:"",disabled:!1},{id:"sit",label:"",disabled:!0,disabledHint:"..."}],result:null}],ending:{narrative:`



ID

`,deathMethod:"",lastWords:""}},PAYDAY_LOAN_KILL_SCRIPT={type:"payday_loan",title:"",rounds:[{id:1,narrative:`$200

EZ Cash
$100$115
15%
...15%......390%

EZ Cash`,actions:[{id:"refuse",label:"",disabled:!0,disabledHint:"..."},{id:"borrow_less",label:"",disabled:!0,disabledHint:"$200"},{id:"sign",label:"",disabled:!1},{id:"ask_friend",label:"",disabled:!0,disabledHint:"..."}],result:"$230"},{id:2,narrative:`
$800$600$200
$230
$30$230
$30
$30$230
$230
...`,actions:[{id:"pay_full",label:"",disabled:!0,disabledHint:"$200..."},{id:"rollover",label:"",disabled:!1},{id:"run",label:"",disabled:!0,disabledHint:"..."},{id:"calculate",label:"",disabled:!0,disabledHint:"..."}],result:"...$30$200"},{id:3,narrative:`
$180$200
$500

$650
$650$200$650
...

`,actions:[{id:"pay_650",label:"$650",disabled:!0,disabledHint:"..."},{id:"another_loan",label:"",disabled:!1},{id:"sue",label:"",disabled:!0,disabledHint:"..."},{id:"cry",label:"",disabled:!0,disabledHint:"..."}],result:"$700EZ Cash"},{id:4,narrative:`
$3,800
$570
$800



$200$3,800
$3,600`,actions:[{id:"declare_bankruptcy",label:"",disabled:!0,disabledHint:"..."},{id:"keep_paying",label:"",disabled:!0,disabledHint:"..."},{id:"laugh",label:"",disabled:!1},{id:"disappear",label:"",disabled:!0,disabledHint:""}],result:null}],ending:{narrative:`

EZ Cash
2024158,432

`,deathMethod:"",lastWords:"$200$3,800"}},RENTAL_REJECTION_KILL_SCRIPT={type:"rental_rejection",title:"",rounds:[{id:1,narrative:`

580
650



`,actions:[{id:"keep_looking",label:"",disabled:!1},{id:"lower_standard",label:"",disabled:!0,disabledHint:"..."},{id:"airbnb",label:"Airbnb",disabled:!0,disabledHint:"$3,000......"},{id:"hotel",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:2,narrative:`


$1,200


`,actions:[{id:"sign",label:"",disabled:!1},{id:"negotiate",label:"",disabled:!0,disabledHint:""},{id:"refuse",label:"",disabled:!0,disabledHint:""},{id:"report",label:"",disabled:!0,disabledHint:""}],result:"$3,600$50"},{id:3,narrative:`





`,actions:[{id:"endure",label:"",disabled:!1},{id:"move_out",label:"",disabled:!0,disabledHint:"..."},{id:"sue",label:"",disabled:!0,disabledHint:"..."},{id:"health_inspector",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:4,narrative:`


$50,000




`,actions:[{id:"hospital",label:"",disabled:!0,disabledHint:"..."},{id:"sleep",label:"",disabled:!1},{id:"call_family",label:"",disabled:!0,disabledHint:"..."},{id:"pray",label:"",disabled:!0,disabledHint:"..."}],result:null}],ending:{narrative:`





`,deathMethod:"",lastWords:""}},JOB_REJECTION_KILL_SCRIPT={type:"job_rejection",title:"",rounds:[{id:1,narrative:`

HR
...
HR

`,actions:[{id:"explain",label:"",disabled:!0,disabledHint:""},{id:"next_job",label:"",disabled:!1},{id:"sue",label:"",disabled:!0,disabledHint:"..."},{id:"ask",label:"",disabled:!0,disabledHint:""}],result:""},{id:2,narrative:`

qualified



`,actions:[{id:"lower_expectations",label:"",disabled:!1},{id:"freelance",label:"",disabled:!0,disabledHint:"..."},{id:"lie",label:"",disabled:!0,disabledHint:"..."},{id:"give_up",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:3,narrative:`
Home Depot
$80



`,actions:[{id:"continue",label:"",disabled:!1},{id:"rest",label:"",disabled:!0,disabledHint:"..."},{id:"doctor",label:"",disabled:!0,disabledHint:"..."},{id:"find_better",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:4,narrative:`
$100




`,actions:[{id:"borrow",label:"",disabled:!0,disabledHint:"..."},{id:"eat",label:"",disabled:!0,disabledHint:"..."},{id:"sleep",label:"",disabled:!1},{id:"think",label:"",disabled:!0,disabledHint:"..."}],result:null}],ending:{narrative:`





$100
`,deathMethod:"",lastWords:"1"}},NO_ADDRESS_KILL_SCRIPT={type:"no_address",title:"",rounds:[{id:1,narrative:`







`,actions:[{id:"shelter",label:"",disabled:!0,disabledHint:"..."},{id:"friend",label:"",disabled:!0,disabledHint:"..."},{id:"po_box",label:"",disabled:!0,disabledHint:"..."},{id:"accept",label:"",disabled:!1}],result:"404"},{id:2,narrative:`





`,actions:[{id:"honest",label:"",disabled:!0,disabledHint:"..."},{id:"continue",label:"",disabled:!1},{id:"give_up",label:"",disabled:!0,disabledHint:"..."},{id:"day_labor",label:"",disabled:!0,disabledHint:"........."}],result:""},{id:3,narrative:`


...



...
`,actions:[{id:"argue",label:"",disabled:!0,disabledHint:"..."},{id:"leave",label:"",disabled:!1},{id:"cry",label:"",disabled:!0,disabledHint:"..."},{id:"fake",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:4,narrative:`








`,actions:[{id:"free_clinic",label:"",disabled:!0,disabledHint:"..."},{id:"er",label:"",disabled:!0,disabledHint:"......"},{id:"endure",label:"",disabled:!1},{id:"die",label:"",disabled:!0,disabledHint:"......"}],result:null}],ending:{narrative:`







`,deathMethod:"",lastWords:""}},HOMELESS_FINAL_KILL_SCRIPT={type:"homeless_final",title:"",rounds:[{id:1,narrative:`






`,actions:[{id:"adapt",label:"",disabled:!1},{id:"fight",label:"",disabled:!0,disabledHint:""},{id:"shelter",label:"",disabled:!0,disabledHint:"..."},{id:"church",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:2,narrative:`


...



`,actions:[{id:"ignore",label:"",disabled:!1},{id:"confront",label:"",disabled:!0,disabledHint:"..."},{id:"hide",label:"",disabled:!0,disabledHint:"..."},{id:"sign",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:3,narrative:`





`,actions:[{id:"survive",label:"",disabled:!1},{id:"warm_shelter",label:"",disabled:!0,disabledHint:"..."},{id:"hospital",label:"",disabled:!0,disabledHint:"..."},{id:"give_up",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:4,narrative:`






`,actions:[{id:"move",label:"",disabled:!0,disabledHint:"..."},{id:"shout",label:"",disabled:!0,disabledHint:"..."},{id:"watch_snow",label:"",disabled:!1},{id:"close_eyes",label:"",disabled:!0,disabledHint:"......"}],result:null}],ending:{narrative:`





2024+1`,deathMethod:"",lastWords:""}},IDENTITY_THEFT_KILL_SCRIPT={type:"identity_theft",title:"",rounds:[{id:1,narrative:`
$50,000...




`,actions:[{id:"prove",label:"",disabled:!1},{id:"police",label:"",disabled:!0,disabledHint:"..."},{id:"ignore",label:"",disabled:!0,disabledHint:"..."},{id:"lawyer",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:2,narrative:`
$180,000




`,actions:[{id:"freeze_credit",label:"",disabled:!1},{id:"change_ssn",label:"",disabled:!0,disabledHint:"..."},{id:"hide",label:"",disabled:!0,disabledHint:"..."},{id:"find_thief",label:"",disabled:!0,disabledHint:"..."}],result:"700350"},{id:3,narrative:`
$35,000





`,actions:[{id:"appeal",label:"",disabled:!0,disabledHint:"..."},{id:"accept",label:"",disabled:!1},{id:"run",label:"",disabled:!0,disabledHint:"..."},{id:"expose",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:4,narrative:`







`,actions:[{id:"put_away",label:"",disabled:!0,disabledHint:"..."},{id:"call_help",label:"",disabled:!0,disabledHint:""},{id:"drink",label:"",disabled:!1},{id:"wait",label:"",disabled:!0,disabledHint:"..."}],result:null}],ending:{narrative:`






`,deathMethod:"",lastWords:""}},GIG_ECONOMY_KILL_SCRIPT={type:"gig_economy",title:"",rounds:[{id:1,narrative:`







`,actions:[{id:"compete",label:"",disabled:!1},{id:"lower_price",label:"",disabled:!0,disabledHint:"..."},{id:"find_job",label:"",disabled:!0,disabledHint:"..."},{id:"give_up",label:"",disabled:!0,disabledHint:"..."}],result:"145"},{id:2,narrative:`
70%102



$200/
$300$200

`,actions:[{id:"pay",label:"",disabled:!0,disabledHint:"..."},{id:"another_platform",label:"",disabled:!0,disabledHint:"..."},{id:"work_harder",label:"",disabled:!1},{id:"protest",label:"",disabled:!0,disabledHint:"..."}],result:"24"},{id:3,narrative:`

$500
48


48`,actions:[{id:"rest",label:"",disabled:!0,disabledHint:"..."},{id:"do_it",label:"",disabled:!1},{id:"hospital",label:"",disabled:!0,disabledHint:"......"},{id:"decline",label:"",disabled:!0,disabledHint:"$500......"}],result:"12"},{id:4,narrative:`4.94.7
4.7


4872




`,actions:[{id:"sleep",label:"",disabled:!1},{id:"eat",label:"",disabled:!0,disabledHint:"..."},{id:"call",label:"",disabled:!0,disabledHint:""},{id:"fight",label:"",disabled:!0,disabledHint:""}],result:null}],ending:{narrative:`






`,deathMethod:"",lastWords:""}},TIP_DEPENDENT_KILL_SCRIPT={type:"tip_dependent",title:"",rounds:[{id:1,narrative:`
$2.13





$27
$27`,actions:[{id:"accept",label:"",disabled:!1},{id:"complain",label:"",disabled:!0,disabledHint:""},{id:"quit",label:"",disabled:!0,disabledHint:""},{id:"steal",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:2,narrative:`$380


$0
$380$0

`,actions:[{id:"swallow",label:"",disabled:!1},{id:"chase",label:"",disabled:!0,disabledHint:"..."},{id:"cry",label:"",disabled:!0,disabledHint:"..."},{id:"break",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:3,narrative:`
$400$2.13  188
$650
$1,050
$800
$100
$50
$100
$100$3.3
$5

`,actions:[{id:"eat",label:"",disabled:!1},{id:"ask_raise",label:"",disabled:!0,disabledHint:"$2.13"},{id:"second_job",label:"",disabled:!0,disabledHint:"60..."},{id:"food_bank",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:4,narrative:`

$120





`,actions:[{id:"sleep",label:"",disabled:!1},{id:"call_family",label:"",disabled:!0,disabledHint:""},{id:"cry",label:"",disabled:!0,disabledHint:"..."},{id:"count_money",label:"",disabled:!0,disabledHint:"......"}],result:null}],ending:{narrative:`




60
$2.13
`,deathMethod:"",lastWords:"$2.13"}},RICH_NEIGHBOR_KILL_SCRIPT={type:"rich_neighbor",title:"",rounds:[{id:1,narrative:`


$200$800


`,actions:[{id:"stay",label:"",disabled:!1},{id:"move",label:"",disabled:!0,disabledHint:"..."},{id:"complain",label:"",disabled:!0,disabledHint:"..."},{id:"adapt",label:"",disabled:!0,disabledHint:"......"}],result:""},{id:2,narrative:`$680

12
12


24
39`,actions:[{id:"pay",label:"",disabled:!1},{id:"refuse",label:"",disabled:!0,disabledHint:"..."},{id:"sue",label:"",disabled:!0,disabledHint:"..."},{id:"faint",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:3,narrative:`$15,000/
$15,000





$15,000`,actions:[{id:"accept",label:"",disabled:!1},{id:"move_now",label:"",disabled:!0,disabledHint:"......"},{id:"beg_landlord",label:"",disabled:!0,disabledHint:""},{id:"protest",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:4,narrative:`






`,actions:[{id:"more_blankets",label:"",disabled:!1},{id:"emergency",label:"",disabled:!0,disabledHint:"..."},{id:"hotel",label:"",disabled:!0,disabledHint:"..."},{id:"fire",label:"",disabled:!0,disabledHint:"..."}],result:null}],ending:{narrative:`




$50,000

`,deathMethod:"",lastWords:""}},WORKPLACE_INJURY_KILL_SCRIPT={type:"workplace_injury",title:"",rounds:[{id:1,narrative:`$80



50500

`,actions:[{id:"continue",label:"",disabled:!1},{id:"rest",label:"",disabled:!0,disabledHint:"......"},{id:"complain",label:"",disabled:!0,disabledHint:""},{id:"quit",label:"",disabled:!0,disabledHint:"..."}],result:"$80"},{id:2,narrative:`
$150





`,actions:[{id:"lie",label:"",disabled:!1},{id:"stand",label:"",disabled:!0,disabledHint:"..."},{id:"call_911",label:"",disabled:!0,disabledHint:""},{id:"cry",label:"",disabled:!0,disabledHint:"..."}],result:"$500"},{id:3,narrative:`

$500


$500`,actions:[{id:"hospital",label:"",disabled:!0,disabledHint:"..."},{id:"rest",label:"",disabled:!1},{id:"call_boss",label:"",disabled:!0,disabledHint:"..."},{id:"police",label:"",disabled:!0,disabledHint:"......"}],result:""},{id:4,narrative:`

$500






`,actions:[{id:"wait",label:"",disabled:!1},{id:"call_help",label:"",disabled:!0,disabledHint:"..."},{id:"crawl",label:"",disabled:!0,disabledHint:"..."},{id:"give_up",label:"",disabled:!0,disabledHint:"......"}],result:null}],ending:{narrative:`




$80
$500`,deathMethod:"",lastWords:"$500"}},AMERICAN_DREAM_KILL_SCRIPT={type:"american_dream",title:"",rounds:[{id:1,narrative:`


$20,000


$50`,actions:[{id:"remember",label:"",disabled:!1},{id:"cry",label:"",disabled:!0,disabledHint:"..."},{id:"laugh",label:"",disabled:!0,disabledHint:"..."},{id:"forward",label:"",disabled:!0,disabledHint:""}],result:""},{id:2,narrative:`
16




`,actions:[{id:"accept",label:"",disabled:!1},{id:"blame",label:"",disabled:!0,disabledHint:"..."},{id:"blame_others",label:"",disabled:!0,disabledHint:"..."},{id:"hope",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:3,narrative:`






`,actions:[{id:"keep_walking",label:"",disabled:!1},{id:"sit",label:"",disabled:!0,disabledHint:"..."},{id:"beg",label:"",disabled:!0,disabledHint:"..."},{id:"scream",label:"",disabled:!0,disabledHint:""}],result:""},{id:4,narrative:`


142



$20,000
`,actions:[{id:"step_back",label:"",disabled:!0,disabledHint:""},{id:"call",label:"",disabled:!0,disabledHint:""},{id:"look_down",label:"",disabled:!1},{id:"turn_around",label:"",disabled:!0,disabledHint:"..."}],result:null}],ending:{narrative:`








`,deathMethod:"",lastWords:""}},THANKSGIVING_KILL_SCRIPT={type:"thanksgiving",title:"",rounds:[{id:1,narrative:`







`,actions:[{id:"cook",label:"",disabled:!0,disabledHint:"......"},{id:"watch_tv",label:"",disabled:!1},{id:"sleep",label:"",disabled:!0,disabledHint:"..."},{id:"call_friend",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:2,narrative:`






`,actions:[{id:"post",label:"",disabled:!0,disabledHint:"..."},{id:"scroll",label:"",disabled:!0,disabledHint:"..."},{id:"close_phone",label:"",disabled:!1},{id:"video_call",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:3,narrative:`






`,actions:[{id:"join",label:"",disabled:!0,disabledHint:"..."},{id:"watch",label:"",disabled:!1},{id:"close_curtain",label:"",disabled:!0,disabledHint:"..."},{id:"go_out",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:4,narrative:`








`,actions:[{id:"sleep",label:"",disabled:!0,disabledHint:"......"},{id:"drink",label:"",disabled:!1},{id:"write",label:"",disabled:!0,disabledHint:""},{id:"plan_tomorrow",label:"",disabled:!0,disabledHint:""}],result:null}],ending:{narrative:`






`,deathMethod:"",lastWords:""}},BLACK_FRIDAY_KILL_SCRIPT={type:"black_friday",title:"",rounds:[{id:1,narrative:`


50$400$99
$301
4

`,actions:[{id:"stay",label:"",disabled:!1},{id:"leave",label:"",disabled:!0,disabledHint:"..."},{id:"push",label:"",disabled:!0,disabledHint:"..."},{id:"pray",label:"",disabled:!0,disabledHint:""}],result:"$301"},{id:2,narrative:`5









`,actions:[{id:"let_go",label:"",disabled:!0,disabledHint:"..."},{id:"pull",label:"",disabled:!1},{id:"negotiate",label:"",disabled:!0,disabledHint:"..."},{id:"share",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:3,narrative:`





......

`,actions:[{id:"crawl",label:"",disabled:!0,disabledHint:"..."},{id:"shout",label:"",disabled:!0,disabledHint:"..."},{id:"protect",label:"",disabled:!1},{id:"give_up",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:4,narrative:`







$99$301`,actions:[{id:"respond",label:"",disabled:!0,disabledHint:"..."},{id:"breathe",label:"",disabled:!1},{id:"regret",label:"",disabled:!0,disabledHint:"..."},{id:"close_eyes",label:"",disabled:!0,disabledHint:"..."}],result:null}],ending:{narrative:`

6:47


$99
$301
`,deathMethod:"",lastWords:"$301"}},CHRISTMAS_KILL_SCRIPT={type:"christmas",title:"",rounds:[{id:1,narrative:`

We wish you a Merry Christmas~

$299$299
$47


`,actions:[{id:"keep_looking",label:"",disabled:!0,disabledHint:"..."},{id:"leave",label:"",disabled:!1},{id:"buy_small",label:"",disabled:!0,disabledHint:"$20......"},{id:"cry",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:2,narrative:`






`,actions:[{id:"lie",label:"",disabled:!1},{id:"truth",label:"",disabled:!0,disabledHint:"......"},{id:"hang_up",label:"",disabled:!0,disabledHint:"..."},{id:"cry",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:3,narrative:`






`,actions:[{id:"close_curtain",label:"",disabled:!1},{id:"go_out",label:"",disabled:!0,disabledHint:"..."},{id:"self_gift",label:"",disabled:!0,disabledHint:"..."},{id:"pray",label:"",disabled:!0,disabledHint:"..."}],result:""},{id:4,narrative:`





$47



`,actions:[{id:"drink",label:"",disabled:!1},{id:"call_family",label:"",disabled:!0,disabledHint:""},{id:"eat",label:"",disabled:!0,disabledHint:"..."},{id:"hope",label:"",disabled:!0,disabledHint:"..."}],result:null}],ending:{narrative:`




$47



...`,deathMethod:"",lastWords:""}},KILL_PHASE_SCRIPTS={bankrupt:BANKRUPT_KILL_SCRIPT,health:HEALTH_KILL_SCRIPT,exposure:EXPOSURE_KILL_SCRIPT,sanity:SANITY_KILL_SCRIPT,choice:CHOICE_KILL_SCRIPT,cascade_collapse:CASCADE_KILL_SCRIPT,utility_bill:UTILITY_BILL_KILL_SCRIPT,property_tax:PROPERTY_TAX_KILL_SCRIPT,insurance_lapse:INSURANCE_LAPSE_KILL_SCRIPT,bill_tsunami:BILL_TSUNAMI_KILL_SCRIPT,medical_bill:MEDICAL_BILL_KILL_SCRIPT,insurance_denial:INSURANCE_DENIAL_KILL_SCRIPT,ambulance_fear:AMBULANCE_FEAR_KILL_SCRIPT,fish_antibiotics:FISH_ANTIBIOTICS_KILL_SCRIPT,painkiller_slide:PAINKILLER_SLIDE_KILL_SCRIPT,credit_collapse:CREDIT_COLLAPSE_KILL_SCRIPT,payday_loan:PAYDAY_LOAN_KILL_SCRIPT,rental_rejection:RENTAL_REJECTION_KILL_SCRIPT,job_rejection:JOB_REJECTION_KILL_SCRIPT,no_address:NO_ADDRESS_KILL_SCRIPT,homeless_final:HOMELESS_FINAL_KILL_SCRIPT,identity_theft:IDENTITY_THEFT_KILL_SCRIPT,gig_economy:GIG_ECONOMY_KILL_SCRIPT,tip_dependent:TIP_DEPENDENT_KILL_SCRIPT,rich_neighbor:RICH_NEIGHBOR_KILL_SCRIPT,workplace_injury:WORKPLACE_INJURY_KILL_SCRIPT,american_dream:AMERICAN_DREAM_KILL_SCRIPT,thanksgiving:THANKSGIVING_KILL_SCRIPT,black_friday:BLACK_FRIDAY_KILL_SCRIPT,christmas:CHRISTMAS_KILL_SCRIPT,money:BANKRUPT_KILL_SCRIPT,killline:CASCADE_KILL_SCRIPT};function getKillScript(t){return KILL_PHASE_SCRIPTS[t]||KILL_PHASE_SCRIPTS.bankrupt}function getKillRound(t,n){return getKillScript(t).rounds.find(r=>r.id===n)}function getKillEnding(t){return getKillScript(t).ending}function attachDeathFlow(t){t.triggerDeath=function({type:a,reason:r}){var s,l,c,u;if(console.log("[DeathFlow] triggerDeath called with type:",a,"reason:",r),(s=t.s.death)!=null&&s.active){console.log("[DeathFlow] Death already active, skipping");return}let o;try{o=getKillScript(a),console.log("[DeathFlow] Got kill script:",o==null?void 0:o.title)}catch(d){console.error("[DeathFlow] Error getting kill script:",d)}t.s.death={active:!0,type:a||"bankrupt",reason:r||"",month:((l=t.s.loop)==null?void 0:l.month)||1,week:((c=t.s.loop)==null?void 0:c.week)||1,at:Date.now(),stats:{money:t.s.money,health:t.s.health,sanity:t.s.sanity,exposure:t.s.exposure},currentRound:1,showingResult:!1,currentResult:null,choiceHistory:[],completed:!1,showingEnding:!1},t.pushFeed("",{kind:"system"}),t.s.stage="S07",(u=t.saveNow)==null||u.call(t)},t.getCurrentKillRound=function(){var a;return(a=t.s.death)!=null&&a.active?getKillRound(t.s.death.type,t.s.death.currentRound):null},t.getKillTitle=function(){var r;if(!((r=t.s.death)!=null&&r.active))return"";const a=getKillScript(t.s.death.type);return(a==null?void 0:a.title)||""},t.handleKillAction=function(a){var s,l,c;if(t.s.stage!=="S07")return{success:!1};if(!((s=t.s.death)!=null&&s.active))return{success:!1};if(t.s.death.completed)return{success:!1};if(t.s.death.showingResult)return{success:!1};const r=t.getCurrentKillRound();if(!r)return{success:!1};const o=r.actions.find(u=>u.id===a);return o?o.disabled?{success:!1,disabled:!0,hint:o.disabledHint||"..."}:(Array.isArray(t.s.death.choiceHistory)||(t.s.death.choiceHistory=[]),t.s.death.choiceHistory.push({round:t.s.death.currentRound,actionId:a,timestamp:Date.now()}),t.s.death.currentRound>=4?(t.s.death.completed=!0,t.s.death.showingEnding=!0,(l=t.save)==null||l.call(t),{success:!0,isEnding:!0}):(t.s.death.showingResult=!0,t.s.death.currentResult=r.result,(c=t.save)==null||c.call(t),{success:!0,result:r.result})):{success:!1}},t.advanceKillRound=function(){var a,r;(a=t.s.death)!=null&&a.active&&(t.s.death.completed||(t.s.death.currentRound+=1,t.s.death.showingResult=!1,t.s.death.currentResult=null,(r=t.save)==null||r.call(t)))},t.getKillEnding=function(){var a;return(a=t.s.death)!=null&&a.active?getKillEnding(t.s.death.type):null},t.getCurrentDeathScene=function(){var o;if(!((o=t.s.death)!=null&&o.active))return null;const a=t.s.death.type,r=t.s.death.currentSceneId;return r?getSceneById(a,r):getOpeningScene(a).firstScene},t.makeDeathChoice=function(a){var l,c,u;if(t.s.stage!=="S07"||!((l=t.s.death)!=null&&l.active)||t.s.death.completed)return;const r=t.getCurrentDeathScene();if(!r)return;const o=(c=r.choices)==null?void 0:c.find(d=>d.id===a);if(!o)return;Array.isArray(t.s.death.sceneHistory)||(t.s.death.sceneHistory=[]),t.s.death.sceneHistory.push({sceneId:t.s.death.currentSceneId,choiceId:a,timestamp:Date.now()});const s=getSceneById(t.s.death.type,o.nextScene);s!=null&&s.isFinal?(t.s.death.currentSceneId=s.id,t.s.death.finalScene=s,t.s.death.completed=!0,t.pushFeed(`${s.deathMethod}${s.lastWords}`,{kind:"log"})):t.s.death.currentSceneId=o.nextScene,(u=t.save)==null||u.call(t)},t.getDeathProgress=function(){var a,r,o,s;return(a=t.s.death)!=null&&a.active?{stepsCompleted:((r=t.s.death.sceneHistory)==null?void 0:r.length)||0,isCompleted:t.s.death.completed,finalScene:t.s.death.finalScene,deathMethod:((o=t.s.death.finalScene)==null?void 0:o.deathMethod)||null,lastWords:((s=t.s.death.finalScene)==null?void 0:s.lastWords)||null}:null},t.enterFinalBill=function(){var a,r;(a=t.s.death)!=null&&a.active&&(t.s.stage="S08",(r=t.saveNow)==null||r.call(t))},t.restartAfterDeath=function(){t.reset()}}const BGM_TRACKS={act1_hope:{id:"act1_hope",name:"Comfortable Mystery",path:"/audio/bgm/act1_hope.mp3",act:"ACT_1",mood:"hope",loop:!0},act1_work:{id:"act1_work",name:"Crypto",path:"/audio/bgm/act1_work.mp3",act:"ACT_1",mood:"work",loop:!0},act2_struggle:{id:"act2_struggle",name:"Echoes of Time",path:"/audio/bgm/act2_struggle.mp3",act:"ACT_2",mood:"struggle",loop:!0},act2_tension:{id:"act2_tension",name:"Anxiety",path:"/audio/bgm/act2_tension.mp3",act:"ACT_2",mood:"tension",loop:!0},act3_despair:{id:"act3_despair",name:"Darkest Child",path:"/audio/bgm/act3_despair.mp3",act:"ACT_3",mood:"despair",loop:!0},act3_final:{id:"act3_final",name:"Nightmare Machine",path:"/audio/bgm/act3_final.mp3",act:"ACT_3",mood:"final",loop:!0},death_requiem:{id:"death_requiem",name:"Funeral March for Brass",path:"/audio/bgm/death_requiem.mp3",act:"DEATH",mood:"requiem",loop:!1},ambient_fog:{id:"ambient_fog",name:"Dark Fog",path:"/audio/bgm/ambient_fog.mp3",act:"ANY",mood:"ambient",loop:!0}},SFX_TRACKS={warning:{id:"warning",name:"Warning Alarm",path:"/audio/sfx/warning.mp3"},notification:{id:"notification",name:"Notification",path:"/audio/sfx/notification.mp3"},heartbeat:{id:"heartbeat",name:"Heartbeat",path:"/audio/sfx/heartbeat.mp3"},coins:{id:"coins",name:"Coins",path:"/audio/sfx/coins.mp3"},door_knock:{id:"door_knock",name:"Door Knock",path:"/audio/sfx/door_knock.mp3"}},ACT_BGM_MAP={ACT_1:"act1_hope",ACT_2:"act2_struggle",ACT_3:"act3_despair"},STAGE_BGM_MAP={S00:null,S01:null,S02:null,S03:null,S04:"act1_hope",S05:"act1_hope",S06:null,S07:"death_requiem",S08:"death_requiem"},MOOD_BGM_MAP={lowSanity:{ACT_1:"act1_work",ACT_2:"act2_tension",ACT_3:"act3_final"},highExposure:{ACT_1:"act1_work",ACT_2:"act2_tension",ACT_3:"act3_final"},lowHealth:{ACT_1:"act1_work",ACT_2:"act2_tension",ACT_3:"act3_final"}};function getActByMonth(t){return t<=8?"ACT_1":t<=16?"ACT_2":"ACT_3"}function getBGMForState(t){const{stage:n,currentAct:a,loop:r,sanity:o,health:s,exposure:l}=t,c=STAGE_BGM_MAP[n];if(c!=null)return c;if(n==="S06"){const u=a||getActByMonth((r==null?void 0:r.month)||1);return o<30?MOOD_BGM_MAP.lowSanity[u]||ACT_BGM_MAP[u]:l>70?MOOD_BGM_MAP.highExposure[u]||ACT_BGM_MAP[u]:s<30&&MOOD_BGM_MAP.lowHealth[u]||ACT_BGM_MAP[u]}return null}const DEFAULT_VOLUMES={master:.7,bgm:.5,sfx:.6},FADE_CONFIG={duration:2e3},STORAGE_KEY="killline_audio_settings";class AudioController{constructor(){this.currentBGM=null,this.currentBGMId=null,this.nextBGM=null,this.sfxPool=new Map,this.volumes={master:.7,bgm:.5,sfx:.6},this.fadeAnimation=null,this.userInteracted=!1,this.pendingBGM=null,this._bindUserInteraction()}_bindUserInteraction(){const n=()=>{this.userInteracted||(this.userInteracted=!0,this.pendingBGM&&(this.playBGM(this.pendingBGM),this.pendingBGM=null),document.removeEventListener("click",n),document.removeEventListener("touchstart",n),document.removeEventListener("keydown",n))};document.addEventListener("click",n),document.addEventListener("touchstart",n),document.addEventListener("keydown",n)}setVolume(n,a){this.volumes[n]=Math.max(0,Math.min(1,a)),this.currentBGM&&(n==="master"||n==="bgm")&&(this.currentBGM.volume=this._getBGMVolume())}_getBGMVolume(){return this.volumes.master*this.volumes.bgm}_getSFXVolume(){return this.volumes.master*this.volumes.sfx}_createAudio(n,a=!1){const r=new Audio(n);return r.loop=a,r.preload="auto",r.onerror=o=>{console.error("[AudioController] Audio load error:",n,o)},r}_playWithTimeout(n,a=5e3){return Promise.race([n.play(),new Promise((r,o)=>setTimeout(()=>o(new Error("Audio play timeout")),a))])}async playBGM(n){if(!this.userInteracted){this.pendingBGM=n,console.log("[AudioController] Pending BGM:",n);return}if(this.currentBGMId===n)return;const a=BGM_TRACKS[n];if(!a){console.warn("[AudioController] Track not found:",n);return}console.log("[AudioController] Playing BGM:",a.name),this.currentBGM&&await this.stopBGM(),this.currentBGM=this._createAudio(a.path,a.loop),this.currentBGMId=n,this.currentBGM.volume=0;try{await this._playWithTimeout(this.currentBGM),await this._fadeIn(this.currentBGM,this._getBGMVolume())}catch(r){console.warn("[AudioController] Play failed:",r.message),this.pendingBGM=n,this.currentBGM=null,this.currentBGMId=null}}async crossfadeTo(n){if(!this.userInteracted){this.pendingBGM=n;return}if(!this.currentBGM)return this.playBGM(n);if(this.currentBGMId===n)return;const a=BGM_TRACKS[n];if(!a){console.warn("[AudioController] Track not found:",n);return}console.log("[AudioController] Crossfade to:",a.name),this.nextBGM=this._createAudio(a.path,a.loop),this.nextBGM.volume=0;const r=this.currentBGM;this.currentBGMId;try{await this._playWithTimeout(this.nextBGM),await Promise.all([this._fadeOut(r),this._fadeIn(this.nextBGM,this._getBGMVolume())]),r.pause(),r.src="",this.currentBGM=this.nextBGM,this.currentBGMId=n,this.nextBGM=null}catch(o){console.warn("[AudioController] Crossfade failed:",o.message),this.nextBGM&&(this.nextBGM.pause(),this.nextBGM.src="",this.nextBGM=null)}}async stopBGM(n=!0){this.currentBGM&&(n&&await this._fadeOut(this.currentBGM),this.currentBGM.pause(),this.currentBGM.src="",this.currentBGM=null,this.currentBGMId=null)}pauseBGM(){this.currentBGM&&this.currentBGM.pause()}async resumeBGM(){if(this.currentBGM&&this.currentBGM.paused)try{await this.currentBGM.play()}catch(n){console.warn("[AudioController] Resume failed:",n.message)}}async playSFX(n){const a=SFX_TRACKS[n];if(!a){console.warn("[AudioController] SFX not found:",n);return}const r=this._createAudio(a.path,!1);r.volume=this._getSFXVolume();try{await r.play(),r.onended=()=>{r.src=""}}catch(o){console.warn("[AudioController] SFX play failed:",o.message)}}_fadeIn(n,a,r=FADE_CONFIG.duration){return new Promise(o=>{const s=performance.now(),l=n.volume,c=u=>{const d=u-s,f=Math.min(d/r,1),v=1-(1-f)*(1-f);n.volume=l+(a-l)*v,f<1?requestAnimationFrame(c):(n.volume=a,o())};requestAnimationFrame(c)})}_fadeOut(n,a=FADE_CONFIG.duration){return new Promise(r=>{const o=performance.now(),s=n.volume,l=c=>{const u=c-o,d=Math.min(u/a,1),f=d*d;n.volume=s*(1-f),d<1?requestAnimationFrame(l):(n.volume=0,r())};requestAnimationFrame(l)})}setMuted(n){this.currentBGM&&(this.currentBGM.muted=n)}getState(){return{currentTrackId:this.currentBGMId,isPlaying:this.currentBGM&&!this.currentBGM.paused,volumes:{...this.volumes},userInteracted:this.userInteracted}}destroy(){this.currentBGM&&(this.currentBGM.pause(),this.currentBGM.src="",this.currentBGM=null),this.nextBGM&&(this.nextBGM.pause(),this.nextBGM.src="",this.nextBGM=null),this.sfxPool.clear()}}const audioController=new AudioController,useAudioStore=defineStore("audio",{state:()=>({volumes:{master:DEFAULT_VOLUMES.master,bgm:DEFAULT_VOLUMES.bgm,sfx:DEFAULT_VOLUMES.sfx},isMuted:!1,currentTrackId:null,isPlaying:!1,audioUnlocked:!1,initialized:!1}),getters:{currentTrack:t=>t.currentTrackId?BGM_TRACKS[t.currentTrackId]:null,currentTrackName:t=>{const n=t.currentTrackId?BGM_TRACKS[t.currentTrackId]:null;return n?n.name:""},effectiveBGMVolume:t=>t.isMuted?0:t.volumes.master*t.volumes.bgm,effectiveSFXVolume:t=>t.isMuted?0:t.volumes.master*t.volumes.sfx},actions:{init(){this.initialized||(this._loadSettings(),this._syncVolumesToController(),this.initialized=!0,console.log("[AudioStore] Initialized with volumes:",this.volumes))},async playBGM(t){if(!t){await this.stopBGM();return}await audioController.playBGM(t),this.currentTrackId=t,this.isPlaying=!0,this._updateAudioUnlocked()},async crossfadeTo(t){if(!t){await this.stopBGM();return}await audioController.crossfadeTo(t),this.currentTrackId=t,this.isPlaying=!0,this._updateAudioUnlocked()},async stopBGM(){await audioController.stopBGM(),this.currentTrackId=null,this.isPlaying=!1},pauseBGM(){audioController.pauseBGM(),this.isPlaying=!1},async resumeBGM(){await audioController.resumeBGM(),this.isPlaying=!0},async playSFX(t){this.isMuted||await audioController.playSFX(t)},setVolume(t,n){const a=Math.max(0,Math.min(1,n));this.volumes[t]=a,audioController.setVolume(t,a),this._saveSettings()},toggleMute(){this.isMuted=!this.isMuted,audioController.setMuted(this.isMuted),this._saveSettings()},setMuted(t){this.isMuted=t,audioController.setMuted(t),this._saveSettings()},async updateBGMForGameState(t){try{const n=getBGMForState(t);if(n===null){this.currentTrackId&&await this.stopBGM();return}n!==this.currentTrackId&&(this.currentTrackId?await this.crossfadeTo(n):await this.playBGM(n))}catch(n){console.error("[AudioStore] updateBGMForGameState error:",n)}},_syncVolumesToController(){audioController.setVolume("master",this.volumes.master),audioController.setVolume("bgm",this.volumes.bgm),audioController.setVolume("sfx",this.volumes.sfx),audioController.setMuted(this.isMuted)},_updateAudioUnlocked(){const t=audioController.getState();this.audioUnlocked=t.userInteracted},_loadSettings(){try{const t=localStorage.getItem(STORAGE_KEY);if(t){const n=JSON.parse(t);n.volumes&&(this.volumes={...this.volumes,...n.volumes}),typeof n.isMuted=="boolean"&&(this.isMuted=n.isMuted)}}catch(t){console.warn("[AudioStore] Failed to load settings:",t)}},_saveSettings(){try{const t={volumes:this.volumes,isMuted:this.isMuted};localStorage.setItem(STORAGE_KEY,JSON.stringify(t))}catch(t){console.warn("[AudioStore] Failed to save settings:",t)}}}});function attachAudioIntegration(t){if(t.__audio_attached)return;t.__audio_attached=!0;let n=null,a=!1;const r=()=>{a||(a=!0,n=useAudioStore(),n.init(),console.log("[AudioIntegration] Audio system initialized"),o())},o=()=>{if(!n)return;const l={stage:t.s.stage,currentAct:t.s.currentAct,loop:t.s.loop,sanity:t.s.sanity,health:t.s.health,exposure:t.s.exposure,death:t.s.death};n.updateBGMForGameState(l).catch(c=>{console.warn("[AudioIntegration] BGM update failed:",c)})},s=l=>{n&&n.playSFX(l)};watch(()=>t.s.stage,(l,c)=>{if(!a){["S04","S05","S06","S07","S08"].includes(l)&&r();return}console.log("[AudioIntegration] Stage changed:",c,"->",l),o(),l==="S07"&&s("warning")},{immediate:!0}),watch(()=>t.s.currentAct,(l,c)=>{!a||!l||(console.log("[AudioIntegration] Act changed:",c,"->",l),o())}),watch(()=>{var l;return(l=t.s.loop)==null?void 0:l.month},(l,c)=>{!a||!l||(console.log("[AudioIntegration] Month changed:",c,"->",l),o())}),watch(()=>{var l;return(l=t.s.death)==null?void 0:l.active},l=>{a&&l&&(console.log("[AudioIntegration] Death triggered"),o())}),watch(()=>({sanity:t.s.sanity,health:t.s.health,exposure:t.s.exposure}),(l,c)=>{if(!a)return;const u=c.sanity>=30&&c.health>=30&&c.exposure<=70,d=l.sanity<30||l.health<30||l.exposure>70;u!==d&&(console.log("[AudioIntegration] Stress state changed, updating BGM"),o()),l.sanity<20&&c.sanity>=20&&s("warning"),l.health<20&&c.health>=20&&s("warning"),l.exposure>80&&c.exposure<=80&&s("warning")},{deep:!0}),watch(()=>t.s.money,(l,c)=>{!a||c===void 0||l>c&&l-c>=50&&s("coins")}),t.audio={playBGM:l=>{a||r(),n==null||n.playBGM(l)},playSFX:l=>{a||r(),n==null||n.playSFX(l)},stopBGM:()=>{n==null||n.stopBGM()},toggleMute:()=>{a||r(),n==null||n.toggleMute()},getStore:()=>(a||r(),n)},console.log("[AudioIntegration] Attached to game store")}const settlementChoices=[{round:1,roundName:"",roundIntro:"",rumor:"500",eventId:"rent_payment",narrative:`



App

 =  = 

`,escapeHint:"",survivalCheck:{conditions:[{stat:"money",safe:400,kill:320}],failureEndingId:"month1_evicted"},choices:[{id:"pay_full",label:"",description:"",requires:[{type:"money",value:400}],effects:{money:-400,credit:5,san:5},rentAction:"pay_full",resultNarrative:{safe:`





`,marked:`



`}},{id:"ask_grace",label:"",description:"",requires:[{type:"money",value:320}],effects:{money:-320,san:-10,credit:-5},rentAction:"grace",resultNarrative:{safe:`







+`,marked:`



`}},{id:"give_up",label:"",description:"",requires:[],effects:{},rentAction:"fail",resultNarrative:{safe:`





`,marked:`



`}}],markedEffect:{tagAdd:"landlord_suspicious",narrative:`



`}},{round:2,roundName:"Review",roundIntro:"...",rumor:"HR",eventId:"forced_contact_building_check",narrative:`

Calendar1:1 with HR - Quick Sync



PIP

commit



`,escapeHint:"HR",survivalCheck:{conditions:[{stat:"credit",safe:40,kill:35}],failureEndingId:"month2_exposed_dead"},choices:[{id:"stay_calm_pass",label:"",description:"",effects:{credit:2,san:-1},resultNarrative:{safe:`





`,marked:`



`}},{id:"talk_your_way_out",label:"",description:"",effects:{credit:-8,san:-5},resultNarrative:{safe:`



`,marked:`





`}},{id:"bolt_run",label:"",description:"",effects:{credit:-15},resultNarrative:{safe:`





`,marked:`







`}}],markedEffect:{tagAdd:"marked_stage1",narrative:`



`}},{round:3,roundName:"",roundIntro:"",rumor:"120HRdeeply saddenedwork-life balance",eventId:"coworker_death",narrative:`









Slack

`,escapeHint:"",survivalCheck:{conditions:[{stat:"san",safe:30,kill:20}],failureEndingId:"month3_breakdown"},choices:[{id:"freeze_stare",label:"",description:"",effects:{san:-8},resultNarrative:{safe:`





`,marked:`





`}},{id:"force_leave",label:"",description:"",effects:{san:-5},resultNarrative:{safe:`





`,marked:`



`}},{id:"ask_around",label:"",description:"",effects:{san:-5},resultNarrative:{safe:`



`,marked:`



`}}],markedEffect:{tagAdd:"nightmare_mild",narrative:`



`}},{round:4,roundName:"All-hands",roundIntro:"",rumor:"LinkedInOpen to work",eventId:"street_incident",narrative:`

CEO



SlackRIPF

15%



`,escapeHint:"",survivalCheck:{conditions:[{stat:"credit",safe:56,kill:41}],failureEndingId:"month4_caught"},choices:[{id:"detour_avoid",label:"",description:"",effects:{credit:3,san:-5},resultNarrative:{safe:`



`,marked:`



`}},{id:"blend_crowd",label:"",description:"",effects:{credit:-5,san:-3},resultNarrative:{safe:`





`,marked:`



`}},{id:"wait_somewhere",label:"",description:"",effects:{san:-3},resultNarrative:{safe:`



`,marked:`





`}}],markedEffect:{tagAdd:"marked_stage2",narrative:`

`}},{round:5,roundName:"",roundIntro:"",rumor:"007deadline",eventId:"body_revolt",narrative:`









`,escapeHint:" =  = ",survivalCheck:{conditions:[{stat:"san",safe:40,kill:25}],failureEndingId:"month5_exhausted"},choices:[{id:"rest_day",label:"",description:"",effects:{san:3,money:-40},resultNarrative:{safe:`





`,marked:`



`}},{id:"push_through",label:"",description:"",effects:{san:-10,money:50},resultNarrative:{safe:`



`,marked:`







`}},{id:"buy_medicine",label:"",description:"",effects:{san:3,money:-20,credit:-3},resultNarrative:{safe:`





`,marked:`





`}}],markedEffect:{tagAdd:"injury_risk_high",narrative:`

`}},{round:6,roundName:"",roundIntro:"",rumor:"",eventId:"money_crisis",narrative:`

minimum payment





 =  = 

`,escapeHint:"",survivalCheck:{conditions:[{stat:"money",safe:500,kill:200}],failureEndingId:"month6_broke"},choices:[{id:"borrow_friend",label:"",description:"",effects:{money:100,san:-8},resultNarrative:{safe:`





`,marked:`



`}},{id:"negotiate_rent",label:"",description:"",effects:{san:-5,credit:-5},resultNarrative:{safe:`





`,marked:`





`}},{id:"grey_work",label:"",description:"",effects:{money:150,credit:-4,san:-3},resultNarrative:{safe:`



`,marked:`



`}}],markedEffect:{tagAdd:"under_observation",narrative:`

`}},{round:7,roundName:"Deductible",roundIntro:"",rumor:"out of network",eventId:"health_crisis",narrative:`



deductible



`,escapeHint:" =  = ",survivalCheck:{conditions:[{stat:"health",safe:45,kill:30}],failureEndingId:"month7_health_dead"},choices:[{id:"endure",label:"",description:"",effects:{san:-2,health:-6,credit:1},resultNarrative:{safe:`



`,marked:`



`}},{id:"black_clinic",label:"",description:"",effects:{money:-120,health:6,san:-1,credit:-2},resultNarrative:{safe:`



`,marked:`





`}},{id:"real_hospital",label:"",description:"",effects:{money:-260,health:10,credit:-6},resultNarrative:{safe:`





`,marked:`





`}}],markedEffect:{tagAdd:"chronic_condition",narrative:`

`}},{round:8,roundName:"Final Round",roundIntro:"",rumor:"offerHRnot eligible for rehireOfferGap",eventId:"window_screening",narrative:`Final Round

offer40%

offer

offer

`,escapeHint:"",survivalCheck:{conditions:[{stat:"san",safe:40,kill:30}],failureEndingId:"month8_rejected"},choices:[{id:"push_hard",label:"",description:"",effects:{money:-180,san:3},resultNarrative:{safe:`





`,marked:`





`}},{id:"use_connections",label:"",description:"",effects:{money:-120,credit:-6,san:2},resultNarrative:{safe:`





`,marked:`



`}},{id:"stay_low",label:"",description:"",effects:{credit:4,san:-3},resultNarrative:{safe:`



`,marked:`





`}}],markedEffect:{tagAdd:"stuck",narrative:`



`}},{round:9,roundName:"Collection Call",roundIntro:"",rumor:"garnish25%emergency fund",eventId:"old_wounds",narrative:`







`,escapeHint:"",survivalCheck:{conditions:[{stat:"health",safe:50,kill:35}],failureEndingId:"month9_injury_dead"},choices:[{id:"keep_working",label:"",description:"",effects:{money:140,health:-10,san:-1},resultNarrative:{safe:`



`,marked:`





`}},{id:"rest_one_day",label:"",description:"",effects:{money:-160,health:8,san:-3,credit:1},resultNarrative:{safe:`



`,marked:`



`}},{id:"spend_fix",label:"",description:"",effects:{money:-220,health:12,credit:-4},resultNarrative:{safe:`



`,marked:`



`}}],markedEffect:{tagAdd:"function_loss",narrative:`

`}},{round:10,roundName:"Sunday Scaries",roundIntro:"",rumor:"memeSlack",eventId:"meaning_collapse",narrative:`













`,escapeHint:"",survivalCheck:{conditions:[{stat:"san",safe:40,kill:25}],failureEndingId:"month10_meaning_dead"},choices:[{id:"keep_scrolling",label:"",description:"",effects:{san:-4,credit:2},resultNarrative:{safe:`





`,marked:`



`}},{id:"write_reason",label:"",description:"",effects:{san:3,credit:-3},resultNarrative:{safe:`





`,marked:`



`}},{id:"talk_someone",label:"",description:"",effects:{san:4,money:-60,credit:-4},resultNarrative:{safe:`





`,marked:`





`}}],markedEffect:{tagAdd:"dissociation",narrative:`

`}},{round:11,roundName:"Year End Review",roundIntro:"",rumor:"top performerappreciate your contributionbonus",eventId:"pre_final",narrative:`







or

`,escapeHint:"",survivalCheck:{conditions:[{stat:"san",safe:35,kill:20},{stat:"health",safe:40,kill:25}],failureEndingId:"month11_collapse"},choices:[{id:"final_push_money",label:"",description:"",effects:{money:260,health:-8,san:-4,credit:-3},resultNarrative:{safe:`





`,marked:`





`}},{id:"final_push_health",label:"",description:"",effects:{health:12,money:-180,san:1,credit:-1},resultNarrative:{safe:`



`,marked:`



`}},{id:"final_push_credit",label:"",description:"",effects:{credit:8,san:-2,money:-90},resultNarrative:{safe:`



`,marked:`



`}}],markedEffect:{tagAdd:"final_anxiety",narrative:`

`}},{round:12,roundName:"W-2",roundIntro:"",rumor:"burnout",eventId:"final_settlement",narrative:`

365





W-2





`,escapeHint:"",survivalCheck:{conditions:[{stat:"san",safe:30,kill:15},{stat:"health",safe:35,kill:20},{stat:"money",safe:300,kill:100}],failureEndingId:"month12_system_death"},choices:[{id:"see_result",label:"",description:"",effects:{},resultNarrative:{safe:`







`,marked:`



`}},{id:"skip_result",label:"",description:"",effects:{san:-1},resultNarrative:{safe:`





`,marked:`



`}},{id:"send_message",label:"",description:"",effects:{san:1,money:-20},resultNarrative:{safe:`







`,marked:`





`}}],markedEffect:{tagAdd:"survivor",narrative:`



`}}],settlementChoicesData={settlementChoices},DEATH_TRIGGERS={healthZero:!1,sanZero:!1,creditZero:!1,missionFailure:!0,survivalCheck:!0,behaviorEnding:!1,forcedEnding:!1,killLine:!0};function isDeathTriggerEnabled(t){return DEATH_TRIGGERS[t]===!0}function isAttributeZeroDeathEnabled(t){return DEATH_TRIGGERS[{health:"healthZero",san:"sanZero",credit:"creditZero"}[t]]===!0}function isKillLineDeathEnabled(){return DEATH_TRIGGERS.killLine===!0}const actionCategories=[{id:"heal",name:"",subtitle:"",icon:"",color:"#ff6b6b"},{id:"earn",name:"",subtitle:"",icon:"",color:"#2ecc71"},{id:"healthToMoney",name:"",subtitle:"",icon:"",color:"#e67e22"},{id:"moneyToHealth",name:"",subtitle:" ",icon:"",color:"#3498db"},{id:"credit",name:"",subtitle:"",icon:"",color:"#9b59b6"},{id:"gamble",name:"",subtitle:"",icon:"",color:"#e74c3c"},{id:"special",name:"",subtitle:"",icon:"",color:"#f1c40f"}],actionTypes={fixed:{name:"",description:""},random:{name:"",description:""},risky:{name:"",description:""},lottery:{name:"",description:""}},debuffs=[{id:"creditCardDebt",name:"",icon:"",effect:{moneyPerRound:-300},duration:4,canClearEarly:!0,clearCost:1e3},{id:"bankLoanDebt",name:"",icon:"",effect:{moneyPerRound:-500},duration:6,canClearEarly:!0,clearCost:2500},{id:"lowInterestDebt",name:"",icon:"",effect:{moneyPerRound:-400},duration:6,canClearEarly:!0,clearCost:2e3},{id:"infected",name:"",icon:"",effect:{healthPerRound:-5},duration:3,canClearEarly:!0,clearCost:1500},{id:"socialDeath",name:"",icon:"",effect:{creditPerRound:-10},duration:3,canClearEarly:!1}],buffs=[{id:"insurance",name:"",icon:"",effect:{healthDamageReduction:.5},duration:3},{id:"wellRested",name:"",icon:"",effect:{sanMaxBonus:20},duration:1},{id:"lucky",name:"",icon:"",effect:{luckBonus:.1},duration:2}],actions={heal:[{id:"H01",name:"",nameEn:"Walmart Clearance Meds",category:"heal",type:"fixed",description:"",quote:"Best By",cost:{san:15},gain:{health:17},unlock:{type:"default"},tags:["basic","cheap"]},{id:"H02",name:"",nameEn:"Mexican Pharmacy Run",category:"heal",type:"fixed",description:"",quote:"",cost:{san:30},gain:{health:38},unlock:{type:"default"},tags:["basic","standard"]},{id:"H03",name:"",nameEn:"ER Dodge",category:"heal",type:"random",description:"50%50%",quote:"",cost:{san:30},outcomes:[{chance:.5,gain:{health:75},text:""},{chance:.5,gain:{health:0,credit:-20},text:""}],unlock:{type:"round",round:2},tags:["random","risky"]},{id:"H04",name:"GoFundMe",nameEn:"GoFundMe Campaign",category:"heal",type:"random",description:"",quote:"",cost:{san:70},outcomes:[{chance:.3,gain:{health:100},text:""},{chance:.5,gain:{health:60,credit:-5},text:""},{chance:.2,gain:{health:20,credit:-10},text:""}],unlock:{type:"round",round:4},tags:["random","high_cost"]},{id:"H05",name:"",nameEn:"YouTube Medical School",category:"heal",type:"risky",description:"",quote:"",cost:{san:40},baseGain:{health:60},risk:{chance:.3,penalty:{health:-30},debuff:{id:"infected",duration:3},text:""},unlock:{type:"round",round:3},tags:["risky","high_efficiency"]},{id:"H06",name:"",nameEn:"Free Clinic",category:"heal",type:"fixed",description:"63",quote:"",cost:{san:35},gain:{health:48,credit:5},unlock:{type:"round",round:2},limit:{usesPerGame:3},tags:["limited","free"]},{id:"H07",name:"",nameEn:"Veterinary Pharmacy",category:"heal",type:"fixed",description:"",quote:"",cost:{san:20},gain:{health:25},unlock:{type:"condition",condition:"health < 40",conditionText:"40"},tags:["emergency","cheap"]},{id:"H08",name:"",nameEn:"Indian Generic Meds",category:"heal",type:"risky",description:"",quote:"FDA",cost:{san:25,money:200},baseGain:{health:45},risk:{chance:.15,penalty:{health:-20,credit:-10},text:""},unlock:{type:"round",round:4},tags:["risky","cheap"]}],earn:[{id:"E01",name:"",nameEn:"DoorDash Delivery",category:"earn",type:"fixed",description:"",quote:"Thank you! God bless you!",cost:{san:30},gain:{money:2500},unlock:{type:"default"},tags:["basic","gig"]},{id:"E02",name:"Uber",nameEn:"Uber Driver",category:"earn",type:"random",description:"",quote:"4.994.7",cost:{san:30},outcomes:[{chance:.3,gain:{money:5e3,credit:5},text:""},{chance:.4,gain:{money:2500},text:""},{chance:.3,gain:{money:500,credit:-10},text:""}],unlock:{type:"round",round:2},tags:["random","gig"]},{id:"E03",name:"DoorDash",nameEn:"996 Tech Grind",category:"earn",type:"fixed",description:"",quote:"",cost:{san:70,health:10},gain:{money:5600,credit:10},unlock:{type:"round",round:3},tags:["high_cost","health_risk"]},{id:"E04",name:"",nameEn:"Plasma Donation",category:"earn",type:"fixed",description:"ATM",quote:"",cost:{san:20,health:5},gain:{money:2200},unlock:{type:"default"},tags:["basic","health_cost"]},{id:"E05",name:"TaskRabbit",nameEn:"TaskRabbit Gigs",category:"earn",type:"random",description:"",quote:"",cost:{san:25},outcomes:[{chance:.3,gain:{money:3500},text:""},{chance:.5,gain:{money:2e3},text:""},{chance:.2,gain:{money:800},text:""}],unlock:{type:"round",round:2},tags:["random","gig"]},{id:"E06",name:"",nameEn:"9-to-5 Job",category:"earn",type:"fixed",description:"",quote:"",cost:{san:50},gain:{money:4500,credit:8,health:-2},unlock:{type:"round",round:2},tags:["stable","credit_gain"]},{id:"E07",name:"",nameEn:"Amazon Warehouse",category:"earn",type:"risky",description:"",quote:"15",cost:{san:60,health:10},baseGain:{money:5500},risk:{chance:.25,penalty:{health:-20},text:""},unlock:{type:"round",round:3},tags:["risky","health_risk"]},{id:"E08",name:"",nameEn:"OnlyFans Creator",category:"earn",type:"risky",description:"",quote:"",cost:{san:25},baseGain:{money:4e3},risk:{chance:.7,penalty:{credit:-40},debuff:{id:"socialDeath",duration:3},text:"..."},unlock:{type:"round",round:5},tags:["risky","high_efficiency"]},{id:"E09",name:"",nameEn:"Can Collecting",category:"earn",type:"fixed",description:"",quote:"5200",cost:{san:15},gain:{money:1200,credit:-3},unlock:{type:"condition",condition:"money < 500",conditionText:"500"},tags:["emergency","cheap"]},{id:"E10",name:"",nameEn:"Clinical Trial",category:"earn",type:"risky",description:"",quote:"",cost:{san:40,health:15},baseGain:{money:5500},risk:{chance:.2,penalty:{health:-35},text:""},unlock:{type:"round",round:4},tags:["risky","health_risk"]}],healthToMoney:[{id:"HM01",name:"",nameEn:"Sell a Kidney",category:"healthToMoney",type:"fixed",description:"",quote:"",cost:{san:50,health:80},gain:{money:1e4,credit:-30},unlock:{type:"round",round:9},limit:{usesPerGame:1},tags:["oneTime","extreme"]},{id:"HM02",name:"",nameEn:"Frequent Plasma",category:"healthToMoney",type:"risky",description:"",quote:"",cost:{san:30,health:15},baseGain:{money:3800},risk:{chance:.25,penalty:{health:-15},text:""},unlock:{type:"round",round:4},limit:{cooldown:2},tags:["cooldown","risky"]},{id:"HM03",name:"",nameEn:"Hazardous Job",category:"healthToMoney",type:"risky",description:"",quote:"",cost:{san:45,health:20},baseGain:{money:5e3},risk:{chance:.2,penalty:{health:-25},text:""},unlock:{type:"round",round:5},tags:["risky","health_cost"]},{id:"HM04",name:"",nameEn:"Art Model",category:"healthToMoney",type:"fixed",description:"",quote:"",cost:{san:20,health:5},gain:{money:2e3},unlock:{type:"round",round:2},tags:["basic","low_cost"]}],moneyToHealth:[{id:"MH01",name:"",nameEn:"Private Hospital",category:"moneyToHealth",type:"fixed",description:"",quote:"",cost:{san:20,money:5e3},gain:{health:60,credit:5},unlock:{type:"round",round:3},tags:["expensive","reliable"]},{id:"MH02",name:"",nameEn:"Supplements",category:"moneyToHealth",type:"random",description:"",quote:"FDAAmazon",cost:{san:10,money:800},outcomes:[{chance:.4,gain:{health:25},text:""},{chance:.4,gain:{health:15},text:""},{chance:.2,gain:{health:5},text:""}],unlock:{type:"round",round:3},tags:["random","cheap"]},{id:"MH03",name:"",nameEn:"Gym Membership",category:"moneyToHealth",type:"fixed",description:"",quote:"",cost:{san:10,money:500},gain:{health:15},unlock:{type:"round",round:2},tags:["basic","cheap"]},{id:"MH04",name:"",nameEn:"Therapy",category:"moneyToHealth",type:"fixed",description:"",quote:"200''",cost:{san:25,money:2e3},gain:{health:20,san:20},unlock:{type:"round",round:3},tags:["san_gain","expensive"]},{id:"MH05",name:"",nameEn:"Medical Tourism",category:"moneyToHealth",type:"risky",description:"",quote:"+70%",cost:{san:40,money:3500},baseGain:{health:75},risk:{chance:.15,penalty:{health:-30},text:"..."},unlock:{type:"round",round:7},tags:["risky","high_efficiency"]},{id:"MH06",name:"",nameEn:"Health Insurance",category:"moneyToHealth",type:"risky",description:"3",quote:"5008000",cost:{san:10,money:2500},baseGain:{credit:15},buff:{id:"insurance",duration:3},risk:{chance:.25,penalty:{money:-500},noBuff:!0,text:""},unlock:{type:"round",round:3},tags:["risky","buff"]}],credit:[{id:"SP03",name:"",nameEn:"Payday Loan",category:"credit",type:"fixed",description:"",quote:"",cost:{san:10},gain:{san:25,money:5e3},unlock:{type:"default"},limit:{usesPerGame:2},tags:["limited","support"]},{id:"CR01",name:"",nameEn:"Pay Bills",category:"credit",type:"fixed",description:"",quote:"",cost:{san:10,money:300},gain:{credit:20},unlock:{type:"round",round:2},limit:{cooldown:1},tags:["basic","credit_gain"]},{id:"CR02",name:"",nameEn:"Big Payment",category:"credit",type:"fixed",description:"",quote:"0",cost:{san:15,money:1200},gain:{credit:40},unlock:{type:"round",round:2},tags:["credit_gain","expensive"]},{id:"CR03",name:"",nameEn:"Credit Repair",category:"credit",type:"random",description:"",quote:"",cost:{san:25,money:1e3},outcomes:[{chance:.6,gain:{credit:50},text:""},{chance:.3,gain:{credit:20},text:""},{chance:.1,gain:{credit:0},text:""}],unlock:{type:"condition",condition:"credit < 375",conditionText:"375"},tags:["random","credit_gain"]},{id:"CR04",name:"",nameEn:"New Credit Card",category:"credit",type:"fixed",description:"3004",quote:"0%1229.99%",cost:{san:15},gain:{money:2e3,credit:-10},debuff:{id:"creditCardDebt",duration:4},unlock:{type:"condition",condition:"credit >= 580",conditionText:"580"},tags:["loan","debuff"]},{id:"CR05",name:"",nameEn:"Bank Loan",category:"credit",type:"fixed",description:"",quote:"Bro",cost:{san:20},gain:{money:5e3,credit:-10},debuff:{id:"bankLoanDebt",duration:6},unlock:{type:"condition",condition:"credit >= 650",conditionText:"650"},tags:["loan","debuff","large"]},{id:"CR06",name:"",nameEn:"Low Interest Loan",category:"credit",type:"fixed",description:"400",quote:"",cost:{san:25},gain:{money:5e3,credit:-5},debuff:{id:"lowInterestDebt",duration:6},unlock:{type:"condition",condition:"credit >= 750",conditionText:"750"},tags:["loan","debuff","premium"]},{id:"CR07",name:"",nameEn:"Bankruptcy",category:"credit",type:"fixed",description:"Debuff300",quote:"",cost:{san:80,money:1500},gain:{},setCreditTo:300,clearAllDebuffs:!0,unlock:{type:"round",round:10},limit:{usesPerGame:1},tags:["oneTime","extreme","reset"]}],gamble:[{id:"G01",name:"",nameEn:"Lottery",category:"gamble",type:"lottery",description:"1%",quote:"You can't win if you don't play.",cost:{san:5,money:100},outcomes:[{chance:.99,gain:{money:0},text:""},{chance:.01,gain:{money:5e4},text:"..."}],unlock:{type:"default"},tags:["lottery","cheap"]},{id:"G02",name:"",nameEn:"Scratch Card",category:"gamble",type:"lottery",description:"",quote:"......",cost:{san:3,money:50},outcomes:[{chance:.6,gain:{money:0},text:""},{chance:.3,gain:{money:100},text:""},{chance:.1,gain:{money:500},text:""}],unlock:{type:"default"},tags:["lottery","cheap"]},{id:"G03",name:"MemeWSB",nameEn:"WSB Meme Stocks",category:"gamble",type:"lottery",description:"",quote:"I'm not a cat. I just like the stock. ",cost:{san:30,money:2e3},outcomes:[{chance:.2,gain:{money:8e3},text:" To the moon!!!"},{chance:.3,gain:{money:3e3},text:""},{chance:.3,gain:{money:1e3},text:""},{chance:.2,gain:{money:0},text:" "}],unlock:{type:"round",round:5},tags:["lottery","meme"]},{id:"G04",name:"",nameEn:"YOLO Crypto",category:"gamble",type:"lottery",description:"WAGMINGMI",quote:"",cost:{san:40,money:3e3},outcomes:[{chance:.15,gain:{money:15e3},text:"WAGMI!!! "},{chance:.25,gain:{money:5e3},text:""},{chance:.3,gain:{money:1500},text:""},{chance:.3,gain:{money:0,credit:-15},text:"NGMI. "}],unlock:{type:"round",round:7},tags:["lottery","crypto"]},{id:"G05",name:"",nameEn:"Sue Insurance",category:"gamble",type:"lottery",description:"",quote:"I'm gonna sue you!",cost:{san:60,money:1e3},outcomes:[{chance:.2,gain:{money:25e3,credit:15},text:""},{chance:.3,gain:{money:5e3},text:""},{chance:.5,gain:{money:-3e3,credit:-20},text:""}],unlock:{type:"round",round:8},tags:["lottery","lawsuit"]},{id:"G06",name:"",nameEn:"Texas Hold'em",category:"gamble",type:"lottery",description:"+",quote:"",cost:{san:25,money:2e3},outcomes:[{chance:.25,gain:{money:6e3},text:"All in"},{chance:.35,gain:{money:2500},text:""},{chance:.25,gain:{money:1e3},text:""},{chance:.15,gain:{money:0},text:"Bad beat. "}],unlock:{type:"round",round:6},tags:["lottery","poker"]}],special:[{id:"SP01",name:"",nameEn:"Lie Flat",category:"special",type:"fixed",description:"",quote:"",cost:{san:0},gain:{san:10,health:5,credit:-25},unlock:{type:"default"},limit:{cooldown:1},tags:["rest","cooldown"]},{id:"SP02",name:"",nameEn:"Give Up",category:"special",type:"fixed",description:"",quote:"",cost:{san:0},gain:{san:25,health:10,credit:-50,money:-500},unlock:{type:"condition",condition:"san < 30",conditionText:"30"},limit:{usesPerGame:2},tags:["rest","emergency"]},{id:"SP04",name:"",nameEn:"Church Charity",category:"special",type:"fixed",description:"",quote:"",cost:{san:20},gain:{health:15,money:500},unlock:{type:"condition",condition:"money < 1000",conditionText:"1000"},limit:{cooldown:1},tags:["emergency","support"]},{id:"SP05",name:"",nameEn:"Unemployment",category:"special",type:"fixed",description:"4",quote:"3-6",cost:{san:25},gain:{money:2e3,credit:-5},unlock:{type:"round",round:6},limit:{cooldown:4},tags:["support","cooldown"]}]},actionsData={actionCategories,actionTypes,debuffs,buffs,actions},BEHAVIOR_CATEGORIES={};for(const t of actionsData.actionCategories||[])BEHAVIOR_CATEGORIES[t.id]={id:t.id,name:t.name,subtitle:t.subtitle,icon:t.icon,color:t.color};const ACTION_TYPES=actionsData.actionTypes||{fixed:{name:"",description:""},random:{name:"",description:""},risky:{name:"",description:""},lottery:{name:"",description:""}},DEBUFFS=actionsData.debuffs||[],BUFFS=actionsData.buffs||[];function getDebuffById(t){return DEBUFFS.find(n=>n.id===t)||null}function getBuffById(t){return BUFFS.find(n=>n.id===t)||null}function convertAction(t,n){var r,o,s;const a=BEHAVIOR_CATEGORIES[n]||{};return{id:t.id,category:n,name:t.name,nameEn:t.nameEn,description:t.description,quote:t.quote,actionNarrative:t.actionNarrative||null,icon:a.icon||"",color:a.color||"#888",type:t.type||"fixed",unlock:t.unlock||{type:"default"},sanCost:((r=t.cost)==null?void 0:r.san)||0,moneyCost:((o=t.cost)==null?void 0:o.money)||0,healthCost:((s=t.cost)==null?void 0:s.health)||0,gain:t.gain||null,baseGain:t.baseGain||null,risk:t.risk||null,outcomes:t.outcomes||null,debuff:t.debuff||null,buff:t.buff||null,setCreditTo:t.setCreditTo,clearAllDebuffs:t.clearAllDebuffs||!1,limit:t.limit||null,tags:t.tags||[]}}function canAffordBehavior(t,n){const a=t.sanCost||0;return a>0&&n<a?{canAfford:!1,reason:`SAN ( ${a} ${n})`}:{canAfford:!0,reason:null}}const BEHAVIORS=[],actionsObj=actionsData.actions||{};for(const t of Object.keys(actionsObj)){const n=actionsObj[t];if(Array.isArray(n))for(const a of n)BEHAVIORS.push(convertAction(a,t))}function getBehaviorById(t){return BEHAVIORS.find(n=>n.id===t)||null}function parseCondition(t){const n=t.match(/^(\w+)\s*([<>=!]+)\s*(\d+)$/);return n?{stat:n[1],op:n[2],value:parseInt(n[3],10)}:null}function evaluateCondition(t,n){var o,s;const a=parseCondition(t);if(!a)return!0;let r;switch(a.stat==="money"?r=n.money||0:a.stat==="credit"?r=((o=n.attributes)==null?void 0:o.credit)||0:r=((s=n.attributes)==null?void 0:s[a.stat])||0,a.op){case"<":return r<a.value;case"<=":return r<=a.value;case">":return r>a.value;case">=":return r>=a.value;case"==":case"=":return r===a.value;case"!=":return r!==a.value;default:return!0}}function checkUnlockCondition(t,n){if(!t)return{unlocked:!0,reason:null};switch(t.type){case"default":return{unlocked:!0,reason:null};case"round":const a=n.currentRound>=t.round;return{unlocked:a,reason:a?null:` ${t.round} `};case"condition":const r=evaluateCondition(t.condition,n);return{unlocked:r,reason:r?null:t.conditionText||`: ${t.condition}`};default:return{unlocked:!0,reason:null}}}function checkBehaviorUnlock(t,n){return checkUnlockCondition(t.unlock,n)}function checkBehaviorLimit(t,n){var r,o;const a=t.limit;if(!a)return{canUse:!0,reason:null};if(a.usesPerGame!==void 0&&(((r=n.behaviorUseCount)==null?void 0:r[t.id])||0)>=a.usesPerGame)return{canUse:!1,reason:`${a.usesPerGame}/`};if(a.cooldown!==void 0&&a.cooldown>0){const s=((o=n.behaviorCooldowns)==null?void 0:o[t.id])||0,l=n.currentRound||1;if(s>0&&l-s<a.cooldown)return{canUse:!1,reason:` ${a.cooldown-(l-s)} `}}return{canUse:!0,reason:null}}function checkBehaviorRequirements(t,n){var f,v;const a=[],r=checkBehaviorUnlock(t,n);r.unlocked||a.push(r.reason);const o=checkBehaviorLimit(t,n);o.canUse||a.push(o.reason);const s=t.sanCost||0,l=((f=n.attributes)==null?void 0:f.san)||0;s>0&&l<s&&a.push(`SAN ( ${s} ${l})`);const c=t.moneyCost||0;c>0&&(n.money||0)<c&&a.push(` ( $${c})`);const u=t.healthCost||0,d=((v=n.attributes)==null?void 0:v.health)||0;return u>0&&d<u&&a.push(` ( ${u} ${d})`),{canExecute:a.length===0,reasons:a}}function getAllBehaviorsWithStatus(t){return BEHAVIORS.map(n=>{const a=checkBehaviorUnlock(n,t),r=checkBehaviorRequirements(n,t);return{...n,unlocked:a.unlocked,unlockReason:a.reason,canExecute:r.canExecute,executeReasons:r.reasons}})}function getBehaviorCostPreview(t){return{sanCost:t.sanCost||0,moneyCost:t.moneyCost||0,healthCost:t.healthCost||0}}function getBehaviorGainPreview(t){switch(t.type){case"fixed":return{type:"fixed",gain:t.gain};case"risky":return{type:"risky",baseGain:t.baseGain,risk:t.risk};case"random":case"lottery":return{type:t.type,outcomes:t.outcomes};default:return{type:"unknown",gain:t.gain}}}function resolveBehaviorOutcome(t,n=0){const a=t.type;if(a==="fixed")return{success:!0,gain:t.gain||{},text:null,debuff:t.debuff||null,buff:t.buff||null};if(a==="risky"){const r=t.baseGain||{},o=t.risk||{},s=Math.max(0,(o.chance||0)-n*.1);if(Math.random()<s){const c=o.penalty||{},u={};for(const d of new Set([...Object.keys(r),...Object.keys(c)]))u[d]=(r[d]||0)+(c[d]||0);return{success:!1,gain:u,text:o.text||"...",debuff:o.debuff||null,buff:o.noBuff?null:t.buff||null}}else return{success:!0,gain:r,text:null,debuff:null,buff:t.buff||null}}if(a==="random"||a==="lottery"){const r=t.outcomes||[];if(r.length===0)return{success:!0,gain:{},text:null,debuff:null,buff:null};let o=Math.random();n>0&&(o=o*(1-n*.05));let s=0;for(const c of r)if(s+=c.chance,o<s)return{success:!0,gain:c.gain||{},text:c.text||null,debuff:null,buff:null};const l=r[r.length-1];return{success:!0,gain:l.gain||{},text:l.text||null,debuff:null,buff:null}}return{success:!0,gain:t.gain||{},text:null,debuff:null,buff:null}}function behaviorHasTag(t,n){var a;return((a=t.tags)==null?void 0:a.includes(n))||!1}BEHAVIORS.length;const DAMAGE_CONVERSION={san:1,health:1.25,credit:2,money:100},KILL_THRESHOLDS={health:0,money:-3e3,credit:300,san:0},ROUND_DOMINANT_ATTR={1:{dominant:"money",domRatio:.7},2:{dominant:"health",domRatio:.7},3:{dominant:"money",domRatio:.6},4:{dominant:"credit",domRatio:.7},5:{dominant:"credit",domRatio:.7},6:{dominant:"money",domRatio:.6},7:{dominant:"health",domRatio:.7},8:{dominant:"credit",domRatio:.7},9:{dominant:"money",domRatio:.7},10:{dominant:"health",domRatio:.7},11:{dominant:"health",domRatio:.6},12:{dominant:"money",domRatio:.8}},KILL_LINE_EVENTS={1:{round:1,month:"January",roundName:"",damage:90,eventNarrative:"",rumor:"",choices:[{id:"pay_full",label:"",description:"",damageMod:-.1,allocation:{money:1},bonusEffects:{credit:5},resultNarrative:{success:"",kill:""}},{id:"minimum_payment",label:"",description:"",damageMod:0,allocation:{money:.7,credit:.3},bonusEffects:null,debuff:"credit_interest",resultNarrative:{success:"",kill:""}},{id:"installment",label:"",description:"",damageMod:.05,allocation:{money:.6,credit:.4},bonusEffects:null,resultNarrative:{success:"Loss of emotion",kill:""}}]},2:{round:2,month:"February",roundName:"",damage:115,eventNarrative:"",rumor:"",choices:[{id:"immediate_surgery",label:"",description:"",damageMod:-.1,allocation:{health:.4,money:.6},bonusEffects:{health:10},resultNarrative:{success:"",kill:""}},{id:"delay_observe",label:"",description:"",damageMod:0,allocation:{health:.7,money:.3},bonusEffects:null,resultNarrative:{success:"",kill:""}},{id:"tough_ignore",label:"",description:"",damageMod:.1,allocation:{health:1},bonusEffects:null,resultNarrative:{success:"",kill:""}}]},3:{round:3,month:"March",roundName:"",damage:95,eventNarrative:`3

$150$4000,`,rumor:"",choices:[{id:"proper_repair",label:"",description:"",damageMod:-.1,allocation:{money:1},bonusEffects:{health:10},resultNarrative:{success:"",kill:""}},{id:"cheap_fix",label:"",description:"",damageMod:0,allocation:{money:.7,health:.3},bonusEffects:null,resultNarrative:{success:"",kill:""}},{id:"take_bus",label:"",description:"",damageMod:.05,allocation:{money:.6,health:.4},bonusEffects:null,resultNarrative:{success:"",kill:""}}]},4:{round:4,month:"April",roundName:"",damage:100,eventNarrative:`415

++`,rumor:"$300-500",choices:[{id:"honest_tax",label:"",description:"",damageMod:-.1,allocation:{money:.8,credit:.2},bonusEffects:{credit:10},resultNarrative:{success:"IRS",kill:"IRS"}},{id:"gray_accountant",label:"",description:"",damageMod:0,allocation:{money:.5,credit:.3,san:.2},bonusEffects:null,resultNarrative:{success:"",kill:"IRS"}},{id:"gamble_ignore",label:"",description:"IRS+",damageMod:.1,allocation:{credit:.5,san:.5},bonusEffects:null,resultNarrative:{success:"",kill:"IRS"}}]},5:{round:5,month:"May",roundName:"",damage:95,eventNarrative:`ICE

 ICE`,rumor:" 72  ",choices:[{id:"accept_layoff",label:"",description:"",damageMod:-.1,allocation:{credit:1},bonusEffects:{credit:5},resultNarrative:{success:"",kill:""}},{id:"negotiate_package",label:"",description:"",damageMod:0,allocation:{credit:.7,health:.3},bonusEffects:null,resultNarrative:{success:" ",kill:""}},{id:"threaten_lawsuit",label:"",description:"",damageMod:.05,allocation:{credit:.6,health:.4},bonusEffects:null,resultNarrative:{success:"",kill:""}}]},6:{round:6,month:"June",roundName:"",damage:110,eventNarrative:`6

foreclosure30`,rumor:"",choices:[{id:"move_quickly",label:"",description:"",damageMod:-.1,allocation:{money:1},bonusEffects:{credit:10},resultNarrative:{success:"",kill:""}},{id:"stay_fight",label:"",description:"",damageMod:0,allocation:{money:.7,credit:.3},bonusEffects:null,resultNarrative:{success:"",kill:""}},{id:"skip_rent",label:"",description:"",damageMod:.05,allocation:{money:.6,credit:.4},bonusEffects:{money:200},resultNarrative:{success:"",kill:""}}]},7:{round:7,month:"July",roundName:"",damage:120,eventNarrative:`7100

`,rumor:"",choices:[{id:"buy_new_ac",label:"",description:"",damageMod:-.1,allocation:{money:.7,health:.3},bonusEffects:{health:15},resultNarrative:{success:"",kill:""}},{id:"endure_heat",label:"",description:"",damageMod:0,allocation:{health:.7,money:.3},bonusEffects:null,resultNarrative:{success:"",kill:""}},{id:"library_homeless",label:"",description:"",damageMod:.1,allocation:{health:1},bonusEffects:null,resultNarrative:{success:"",kill:""}}]},8:{round:8,month:"August",roundName:"",damage:115,eventNarrative:`8

`,rumor:"$500DIY",choices:[{id:"hire_lawyer",label:"",description:"",damageMod:-.1,allocation:{money:.7,credit:.3},bonusEffects:{credit:20},resultNarrative:{success:"",kill:""}},{id:"diy_fix",label:"",description:"",damageMod:0,allocation:{credit:.6,money:.2,san:.2},bonusEffects:null,resultNarrative:{success:"",kill:"......"}},{id:"ignore_problem",label:"",description:"......",damageMod:.1,allocation:{credit:1},bonusEffects:null,resultNarrative:{success:"......",kill:""}}]},9:{round:9,month:"September",roundName:"",damage:100,eventNarrative:`9/

`,rumor:"......",choices:[{id:"send_money",label:"",description:"",damageMod:-.1,allocation:{money:1},bonusEffects:{san:10},resultNarrative:{success:"",kill:""}},{id:"take_loan",label:"",description:"",damageMod:0,allocation:{money:.7,san:.3},bonusEffects:null,debuff:"loan_burden",resultNarrative:{success:"",kill:""}},{id:"say_sorry",label:"",description:"",damageMod:.05,allocation:{money:.6,san:.4},bonusEffects:null,resultNarrative:{success:"''",kill:"'......'"}}]},10:{round:10,month:"October",roundName:"",damage:100,eventNarrative:`10

`,rumor:"Worker's Comp",choices:[{id:"claim_comp",label:"",description:"",damageMod:-.1,allocation:{health:.5,credit:.5},bonusEffects:{money:500,health:10},resultNarrative:{success:"",kill:"performance"}},{id:"private_settle",label:"",description:"",damageMod:0,allocation:{health:.7,credit:.3},bonusEffects:{money:200},resultNarrative:{success:"",kill:""}},{id:"pretend_fine",label:"",description:"",damageMod:.1,allocation:{health:.8,credit:.2},bonusEffects:null,resultNarrative:{success:"",kill:""}}]},11:{round:11,month:"November",roundName:"",damage:105,eventNarrative:`11

`,rumor:"",choices:[{id:"go_home",label:"",description:"",damageMod:-.1,allocation:{health:.6,credit:.4},bonusEffects:{san:15},resultNarrative:{success:"",kill:""}},{id:"stay_work",label:"",description:"",damageMod:0,allocation:{health:.5,credit:.5},bonusEffects:{money:100},resultNarrative:{success:"",kill:""}},{id:"go_dark",label:"",description:"",damageMod:.1,allocation:{health:.3,credit:.7},bonusEffects:null,resultNarrative:{success:"",kill:""}}]},12:{round:12,month:"December",roundName:"",damage:125,eventNarrative:`12

......`,rumor:"12",choices:[{id:"settle_all",label:"",description:"",damageMod:-.1,allocation:{money:1},bonusEffects:{credit:30},resultNarrative:{success:"",kill:""}},{id:"negotiate_delay",label:"",description:"",damageMod:0,allocation:{money:.6,credit:.4},bonusEffects:null,resultNarrative:{success:"",kill:""}},{id:"selective_default",label:"",description:"......",damageMod:.1,allocation:{money:.4,credit:.6},bonusEffects:null,resultNarrative:{success:"",kill:"......"}}]}};function calculateAllocationCost(t,n){const a={};for(const[r,o]of Object.entries(n))a[r]=Math.ceil(t*o*DAMAGE_CONVERSION[r]);return a}function calculateNewAllocationCost(t,n,a){if(a.allocation){const g=a.damageMod??0,y=Math.ceil(n*(1+g));return calculateAllocationCost(y,a.allocation)}const r=ROUND_DOMINANT_ATTR[t];if(!r)return calculateAllocationCost(n,{money:1});const{dominant:o,domRatio:s}=r,l=a.damageMod??0,c=Math.ceil(n*(1+l)),u=Math.ceil(c*s),d=c-u,f={},v=Math.ceil(u*DAMAGE_CONVERSION[o]);v>0&&(f[o]=v);const _=a.sideAllocation;if(_&&d>0)for(const[g,y]of Object.entries(_)){const b=Math.ceil(d*y*DAMAGE_CONVERSION[g]);b>0&&(f[g]=(f[g]||0)+b)}return f}function checkKillThreshold(t,n){const a=KILL_THRESHOLDS[t];return t==="credit"?n<a:n<=a}function getKillLineDeathNarrative(t){return{health:"",money:"",credit:"",san:""}[t]||""}const LUCK_EVENTS=[{id:"lucky_find",name:"",description:"",effects:{money:50},weight:3},{id:"good_mood",name:"",description:"",effects:{san:5},weight:2},{id:"helpful_stranger",name:"",description:"",effects:{health:5,san:3},weight:2},{id:"lucky_opportunity",name:"",description:"",effects:{money:100},weight:1},{id:"energy_boost",name:"",description:"",effects:{san:5},weight:2},{id:"anonymous_gift",name:"",description:"",effects:{health:3,san:5},weight:1}],RISK_EVENTS={mild:[{id:"minor_illness",name:"",description:"",effects:{health:-5},weight:2},{id:"bad_weather",name:"",description:"",effects:{san:-5},weight:2},{id:"minor_expense",name:"",description:"",effects:{money:-20},weight:2},{id:"bad_sleep",name:"",description:"",effects:{san:-5},weight:2}],moderate:[{id:"getting_sick",name:"",description:"",effects:{health:-10,san:-5},weight:2},{id:"suspicious_look",name:"",description:"",effects:{credit:-5,san:-5},weight:2},{id:"lost_money",name:"",description:"",effects:{money:-50},weight:1},{id:"work_accident",name:"",description:"",effects:{health:-8,san:-5},weight:2},{id:"bad_news",name:"",description:"",effects:{san:-8},weight:2}],severe:[{id:"serious_illness",name:"",description:"",effects:{health:-20,san:-10},weight:2},{id:"close_call",name:"",description:"ICE",effects:{credit:-15,san:-10},weight:2},{id:"robbed",name:"",description:"",effects:{money:-100,health:-10},weight:1},{id:"workplace_raid",name:"",description:"",effects:{credit:-10,san:-15},weight:1},{id:"severe_anxiety",name:"",description:"",effects:{san:-15,health:-5},weight:2}]},MONTHLY_EVENTS_CONFIG={luck:{divisor:100,events:LUCK_EVENTS},risk:{divisor:100,thresholds:{high:70,medium:40},events:RISK_EVENTS},skipRounds:[1]};function selectEventByWeight(t){if(!t||t.length===0)return null;const n=t.reduce((r,o)=>r+(o.weight||1),0);let a=Math.random()*n;for(const r of t)if(a-=r.weight||1,a<=0)return r;return t[t.length-1]}function getRiskSeverity(t){const n=MONTHLY_EVENTS_CONFIG.risk.thresholds;return t>=n.high?"mild":t>=n.medium?"moderate":"severe"}function getLuckEventChance(t){const n=MONTHLY_EVENTS_CONFIG.luck.divisor;return Math.min(1,Math.max(0,t/n))}function getRiskEventChance(t){const n=MONTHLY_EVENTS_CONFIG.risk.divisor;return Math.min(1,Math.max(0,(100-t)/n))}const initialState=createInitialAttributeState("normal");function getHousingDescription(t){const n=constants.housing[t];return(n==null?void 0:n.description)||""}const V3_STATE_DEFAULTS={currentRound:1,roundPhase:"action",difficulty:"normal",attributes:{health:initialState.health,san:initialState.san,credit:initialState.credit,luck:initialState.luck},sanMax:100,money:initialState.money,housingLevel:1,dietLevel:1,consumables:{dietAppliedThisRound:!1},roundBehaviors:[],roundBehaviorCounts:{heal:0,earn:0,healthToMoney:0,moneyToHealth:0,credit:0,gamble:0,special:0},grayActionsCount:0,behaviorCooldowns:{},behaviorUseCount:{},usedOneTimeBehaviors:[],unlockedBehaviors:[],knownUnlockedBehaviors:[],pendingUnlocks:[],playerTags:[],doneCategories:[],delayedEffects:[],persistentEffects:[],debt:0,activeDebuffs:[],activeBuffs:[],creditBankruptPenaltyApplied:!1,rentPaidThisRound:!1,rentFailedThisRound:!1,survivalCheckFailed:!1,survivalCheckFailureData:null,gameEnded:!1,endType:null,deathInfo:null,endingFlow:null,roundHistory:[],stats:{totalMoneyEarned:0,totalMoneySpent:0,totalBehaviorsExecuted:0,behaviorsByCategory:{heal:0,earn:0,healthToMoney:0,moneyToHealth:0,credit:0,gamble:0,special:0},roundsCompleted:0},roundStartSnapshot:{attributes:{},money:0},roundFinancials:{income:0,expense:0},monthlyEvents:{luckyEvent:null,riskEvent:null,calculatedForRound:0,appliedForRound:0},killLineEventAppliedForRound:0,monthlyExpensesDeductedForRound:0,shopPurchases:[],shopViewedRound:0};function attachGameV3(t){t.__game_v3_attached||(t.__game_v3_attached=!0,t._attributeChangeQueue=[],t._emitAttributeChange=function(a){t._attributeChangeQueue.push({...a,timestamp:Date.now()})},t._consumeAttributeChanges=function(){const a=[...t._attributeChangeQueue];return t._attributeChangeQueue=[],a},t._peekAttributeChanges=function(){return[...t._attributeChangeQueue]},t.initV3State=function(){const a=!t.s.v3;a&&(t.s.v3=JSON.parse(JSON.stringify(V3_STATE_DEFAULTS)));for(const r in V3_STATE_DEFAULTS)t.s.v3[r]===void 0&&(t.s.v3[r]=JSON.parse(JSON.stringify(V3_STATE_DEFAULTS[r])));a&&(t.s.v3.roundStartSnapshot={attributes:{...t.s.v3.attributes},money:t.s.v3.money},t.s.v3.roundFinancials={income:0,expense:0})},t.resetV3State=function(){var a;t.s.v3=JSON.parse(JSON.stringify(V3_STATE_DEFAULTS)),t.s.fullGameLog=[],(a=t.save)==null||a.call(t)},t.snapshotRoundStart=function(){var a;t.initV3State(),t.s.v3.roundStartSnapshot={attributes:{...t.s.v3.attributes},money:t.s.v3.money},t.s.v3.roundFinancials={income:0,expense:0},(a=t.save)==null||a.call(t)},t.getMonthlyReportData=function(){var _,g;t.initV3State();const a=t.s.v3,r=a.roundBehaviors.map(y=>({id:y.id,name:y.name,category:y.category})),o={income:a.roundFinancials.income,expense:a.roundFinancials.expense,net:a.roundFinancials.income-a.roundFinancials.expense},s=a.roundStartSnapshot||{attributes:{},money:0},l=[];for(const y of ATTRIBUTE_IDS){const b=s.attributes[y]??a.attributes[y],T=a.attributes[y],S=T-b;if(S!==0){const C=ATTRIBUTES[y];l.push({id:y,name:(C==null?void 0:C.name)||y,icon:(C==null?void 0:C.icon)||"",oldValue:b,newValue:T,delta:S})}}const c=s.money??a.money,u=a.money,d=u-c;d!==0&&l.push({id:"money",name:"",icon:"",oldValue:c,newValue:u,delta:d});const f=(_=t.getCurrentStrategy)==null?void 0:_.call(t),v=(g=t.getCurrentHousing)==null?void 0:g.call(t);return{round:a.currentRound,behaviors:r,behaviorCount:r.length,financials:o,attributeChanges:l,foodStrategy:f,housing:v}},t.getConsequencesData=function(){t.initV3State();const a=t.s.v3,r=[],o=a.dietLevel||1,s=constants.diet[o],l={dietLevel:o,diet:s,effects:{health:(s==null?void 0:s.healthChange)||0}};if(s){const f=s.healthChange||0;let v="neutral";f<0&&(v="warning"),f>0&&(v="good"),r.push({type:"food",icon:o===1?"":o===3?"":"",title:`${s.name}`,description:s.description||"",effects:{health:f,money:-(s.moneyCost||0)},severity:v})}const c=a.housingStatus||"1",u=constants.housing[c],d={housingId:c,housing:u,effects:{sanMax:(u==null?void 0:u.sanMax)||100},rentCost:(u==null?void 0:u.cost)||0};if(u){let f="neutral";c==="1"?f="danger":c==="2"?f="warning":c==="3"&&(f="good"),r.push({type:"housing",icon:c==="1"?"":c==="2"?"":"",title:`${u.name}`,description:u.description||getHousingDescription(parseInt(c)),effects:{sanMax:u.sanMax||100,money:-(u.cost||0)},severity:f})}return{round:a.currentRound,consequences:r,foodData:l,housingData:d}},t.getUnlocksData=function(){t.initV3State();const a=t.s.v3,r=[...a.pendingUnlocks];return{round:a.currentRound,unlocks:r,hasUnlocks:r.length>0}},t.clearAllPendingUnlocks=function(){var a;t.initV3State(),t.s.v3.pendingUnlocks=[],(a=t.save)==null||a.call(t)},t.getV3Attribute=function(a){return t.initV3State(),a==="money"?t.s.v3.money:t.s.v3.attributes[a]??0},t.setV3Attribute=function(a,r){var o;t.initV3State(),a==="money"?t.s.v3.money=r:t.s.v3.attributes[a]=clampAttribute(r,a),(o=t.save)==null||o.call(t)},t.modifyV3Attribute=function(a,r,o=""){var u,d,f;t.initV3State();let s,l,c=r;if(a==="money")s=t.s.v3.money,r>0?(t.s.v3.stats.totalMoneyEarned+=r,t.s.v3.roundFinancials.income+=r):(t.s.v3.stats.totalMoneySpent+=Math.abs(r),t.s.v3.roundFinancials.expense+=Math.abs(r)),l=s+c,t.s.v3.money=l;else if(a==="san"){s=t.s.v3.attributes.san;const v=t.s.v3.sanMax||100;l=Math.max(0,Math.min(v,s+r)),c=l-s,t.s.v3.attributes.san=l}else s=t.s.v3.attributes[a],l=clampAttribute(s+r,a),c=l-s,t.s.v3.attributes[a]=l;if(c!==0&&t._emitAttributeChange({attrId:a,oldValue:s,newValue:l,delta:c,reason:o}),o&&t.pushFeed&&c!==0){const v=c>=0?"+":"",_=((u=ATTRIBUTES[a])==null?void 0:u.name)||a;t.pushFeed(`${_} ${v}${Math.round(c)} (${o})`,{kind:"effect"})}return(d=ATTRIBUTES[a])!=null&&d.zeroTrigger&&l<=0&&isAttributeZeroDeathEnabled(a)&&t._checkV3Death(a),a==="credit"&&l<=0&&t._applyV3CreditZeroPenalty(),t.checkNewUnlocks(),(f=t.save)==null||f.call(t),{oldValue:s,newValue:l,delta:c}},t._applyV3CreditZeroPenalty=function(){const a=t.s.v3;if(a.creditBankruptPenaltyApplied)return;const r=checkCreditZeroPenalty(a.attributes.credit);if(r){if(a.creditBankruptPenaltyApplied=!0,r.sanPenalty&&t.modifyV3Attribute("san",r.sanPenalty,""),r.forceHousingDowngrade&&a.housingLevel>1&&(a.housingLevel=1,a.sanMax=constants.housing[1].sanMax,t.pushFeed&&t.pushFeed("",{kind:"danger"})),r.lockBehaviors&&Array.isArray(r.lockBehaviors)){a.lockedBehaviors||(a.lockedBehaviors=[]);for(const o of r.lockBehaviors)a.lockedBehaviors.includes(o)||a.lockedBehaviors.push(o)}t.pushFeed&&r.narrative&&t.pushFeed(r.narrative,{kind:"danger"})}},t.applyV3Effects=function(a,r=""){if(t.initV3State(),!a||typeof a!="object")return;const o=[],s={...t.s.v3.attributes,money:t.s.v3.money};for(const c of ATTRIBUTE_IDS){let u=a[c];if(u!==void 0&&u!==0&&(typeof u=="object"&&u.formula&&(u=calculateFormula(u.formula,s)),u!==0)){const d=t.modifyV3Attribute(c,u,r);o.push({attrId:c,...d})}}let l=a.money;if(l!==void 0&&l!==0&&(typeof l=="object"&&l.formula&&(l=calculateFormula(l.formula,s)),l!==0)){const c=t.modifyV3Attribute("money",l,r);o.push({attrId:"money",...c})}if(a.unlocks&&Array.isArray(a.unlocks))for(const c of a.unlocks)t.s.v3.unlockedBehaviors.includes(c)||(t.s.v3.unlockedBehaviors.push(c),t.pushFeed&&t.pushFeed("",{kind:"unlock"}));return o},t.getV3RiskResist=function(){return t.initV3State(),calculateRiskResist$1(t.s.v3.attributes)},t.getV3LuckAdjustedChance=function(a){return t.initV3State(),calculateLuckModifier(t.s.v3.attributes.luck,a)},t.checkV3BehaviorRestriction=function(a){return t.initV3State(),checkBehaviorRestriction(t.s.v3.attributes.san,a)},t.getV3DerivedAttribute=function(a){t.initV3State();const r=DERIVED_ATTRIBUTES$1[a];return r&&r.calculate?r.calculate(t.s.v3.attributes):0},t.getV3CurrentRound=function(){var c;t.initV3State();const a=t.s.v3.currentRound,r=getRoundConfig(a),o=getMissionByRound(a),s=settlementChoicesData.settlementChoices.find(u=>u.round===a),l=o?{...o,rumor:o.rumor||(s==null?void 0:s.rumor)||null}:null;return{round:a,phase:t.s.v3.roundPhase,san:((c=t.s.v3.attributes)==null?void 0:c.san)||0,sanMax:t.s.v3.sanMax||100,mission:l,config:r}},t.getV3SanMax=function(){return t.initV3State(),t.s.v3.sanMax||100},t.useV3San=function(a=15){var o;return t.initV3State(),(((o=t.s.v3.attributes)==null?void 0:o.san)||0)>=a?(t.modifyV3Attribute("san",-a,""),!0):!1},t.canV3Act=function(){var r;return t.initV3State(),(((r=t.s.v3.attributes)==null?void 0:r.san)||0)>0&&t.s.v3.roundPhase==="action"&&!t.s.v3.gameEnded},t.canAffordV3Behavior=function(a){var o;t.initV3State();const r=((o=t.s.v3.attributes)==null?void 0:o.san)||0;return canAffordBehavior(a,r)},t.endV3ActionPhase=function(){var r;if(t.initV3State(),t.s.v3.roundPhase!=="action")return{success:!1,error:"Not in action phase"};if(t.processDelayedEffects){const o=t.processDelayedEffects();for(const s of o)t.pushFeed&&s.narrative&&t.pushFeed(s.narrative,{kind:"delayed"})}t.s.v3.roundPhase="settlement",t.pushFeed&&(t.pushFeed("",{kind:"system"}),t.pushFeed(` ${t.s.v3.currentRound} `,{kind:"scene"}));const a=applyRoundEndEffects(t.s.v3.currentRound,t.s.v3);return t.applyV3Effects(a,""),(r=t.save)==null||r.call(t),{success:!0}},t.checkV3Mission=function(){var l;t.initV3State();const a=getMissionByRound(t.s.v3.currentRound);if(!a)return{passed:!0,mission:null};const r={attributes:t.s.v3.attributes,money:t.s.v3.money,grayActionsCount:t.s.v3.grayActionsCount},{passed:o,results:s}=checkMissionRequirements(a,r);return o||t.triggerV3MissionFailure(a),t.s.v3.roundPhase="result",(l=t.save)==null||l.call(t),{passed:o,mission:a,results:s}},t.advanceV3Round=function(){var l;if(t.initV3State(),t.s.v3.roundPhase!=="result")return{success:!1,error:"Not in result phase"};const a=t.s.v3.currentRound;if(t._processV3DelayedEffects(),t._processV3PersistentEffects(),t._processV3Debuffs(),t._applyV3CreditDecay(),t.s.v3.roundHistory.push({round:a,behaviors:[...t.s.v3.roundBehaviors],endAttributes:{...t.s.v3.attributes},endMoney:t.s.v3.money,rentPaid:t.s.v3.rentPaidThisRound,rentFailed:t.s.v3.rentFailedThisRound}),t.s.v3.stats.roundsCompleted++,a>=TOTAL_ROUNDS)return t._triggerV3Victory(),{success:!0,gameEnded:!0,endType:"victory"};t.s.v3.currentRound++,t.s.v3.roundPhase="action";const r=t.s.v3.housingStatus||"1",o=constants.housing[r],s=(o==null?void 0:o.sanMax)||100;if(t.s.v3.sanMax=s,t.s.v3.attributes.san=s,t.s.v3.roundBehaviors=[],t.s.v3.roundBehaviorCounts={heal:0,earn:0,healthToMoney:0,moneyToHealth:0,credit:0,gamble:0,special:0},t.s.v3.grayActionsCount=0,t.s.v3.behaviorUseCount=t.s.v3.behaviorUseCount||{},t.s.v3.housingChangedThisRound=!1,t.s.v3.rentPaidThisRound=!1,t.s.v3.rentFailedThisRound=!1,t.s.v3.settlementChoiceMadeThisRound=!1,t.s.v3.survivalCheckFailed=!1,t.s.v3.survivalCheckFailureData=null,t.s.v3.consumables.dietAppliedThisRound=!1,t.pushFeed){const c=getMissionByRound(t.s.v3.currentRound);t.pushFeed("",{kind:"system"}),t.pushFeed(` ${t.s.v3.currentRound}${(c==null?void 0:c.name)||""}`,{kind:"scene"}),c!=null&&c.openingNarrative&&t.pushFeed(c.openingNarrative,{kind:"log"});const u=t.s.v3;t.pushFeed(` | $${u.money} | ${u.attributes.health} | ${u.attributes.san} | ${u.attributes.credit} | ${u.attributes.luck}`,{kind:"effect"})}return t._applyDebuffRoundStartEffects(),t.checkNewUnlocks(),t.snapshotRoundStart(),(l=t.save)==null||l.call(t),{success:!0,newRound:t.s.v3.currentRound}},t._applyV3CreditDecay=function(){const a=constants.creditDecay;t.modifyV3Attribute("credit",a,"")},t.recordV3Behavior=function(a){var r;t.initV3State(),t.s.v3.roundBehaviors.push({id:a.id,name:a.name,category:a.category,round:t.s.v3.currentRound,timestamp:Date.now()}),t.s.v3.roundBehaviorCounts[a.category]=(t.s.v3.roundBehaviorCounts[a.category]||0)+1,t.s.v3.doneCategories.includes(a.category)||t.s.v3.doneCategories.push(a.category),behaviorHasTag(a,"gray")&&(t.s.v3.grayActionsCount++,t.s.v3.doneCategories.includes("gray")||t.s.v3.doneCategories.push("gray")),behaviorHasTag(a,"crime")&&(t.s.v3.doneCategories.includes("crime")||t.s.v3.doneCategories.push("crime")),behaviorHasTag(a,"desperate")&&(t.s.v3.doneCategories.includes("desperate")||t.s.v3.doneCategories.push("desperate")),t.s.v3.stats.totalBehaviorsExecuted++,t.s.v3.stats.behaviorsByCategory[a.category]=(t.s.v3.stats.behaviorsByCategory[a.category]||0)+1,a.cooldown>0&&(t.s.v3.behaviorCooldowns[a.id]=t.s.v3.currentRound),a.oneTime&&t.s.v3.usedOneTimeBehaviors.push(a.id),t.checkNewUnlocks(),(r=t.save)==null||r.call(t)},t.addPlayerTag=function(a){var r;t.initV3State(),t.s.v3.playerTags.includes(a)||(t.s.v3.playerTags.push(a),t.checkNewUnlocks(),(r=t.save)==null||r.call(t))},t.hasPlayerTag=function(a){return t.initV3State(),t.s.v3.playerTags.includes(a)},t.addV3DelayedEffect=function(a,r,o=""){var s;t.initV3State(),t.s.v3.delayedEffects.push({triggerRound:t.s.v3.currentRound+a,effects:r,narrative:o}),(s=t.save)==null||s.call(t)},t.addV3PersistentEffect=function(a,r,o){var s;t.initV3State(),t.s.v3.persistentEffects=t.s.v3.persistentEffects.filter(l=>l.id!==a),t.s.v3.persistentEffects.push({id:a,remainingRounds:r,perRound:o}),(s=t.save)==null||s.call(t)},t._processV3DelayedEffects=function(){const a=t.s.v3.currentRound,r=t.s.v3.delayedEffects.filter(o=>o.triggerRound<=a);t.s.v3.delayedEffects=t.s.v3.delayedEffects.filter(o=>o.triggerRound>a);for(const o of r)o.narrative&&t.pushFeed&&t.pushFeed(o.narrative,{kind:"log"}),t.applyV3Effects(o.effects,"")},t._processV3PersistentEffects=function(){const a=[];for(const r of t.s.v3.persistentEffects)t.applyV3Effects(r.perRound,""),r.remainingRounds--,r.remainingRounds>0?a.push(r):t.pushFeed&&t.pushFeed("",{kind:"system"});t.s.v3.persistentEffects=a},t._processV3Debuffs=function(){const a=t.s.v3;if(!a.activeDebuffs||a.activeDebuffs.length===0)return;const r=[];for(const o of a.activeDebuffs){const s=getDebuffById$1(o.id);if(!s){r.push(o);continue}s.perRound&&t.applyV3Effects(s.perRound,s.name),t._checkDebuffClearCondition(o,s)?t.pushFeed&&t.pushFeed(`${s.icon} ${s.name} `,{kind:"unlock"}):r.push(o)}a.activeDebuffs=r},t._checkDebuffClearCondition=function(a,r){const o=t.s.v3,s=r.clearCondition;if(!s)return!1;const l=s.target==="money"?o.money:o.attributes[s.target]||0;switch(s.type){case"threshold":return l>=s.value;case"consecutive_threshold":if(l>=s.value){if(a.consecutiveMetCount=(a.consecutiveMetCount||0)+1,a.consecutiveMetCount>=s.consecutiveRounds)return!0}else a.consecutiveMetCount=0;return!1;default:return!1}},t._applyDebuffRoundStartEffects=function(){const a=t.s.v3;if(!(!a.activeDebuffs||a.activeDebuffs.length===0))for(const r of a.activeDebuffs){const o=getDebuffById$1(r.id);o&&o.onRoundStart&&t.applyV3Effects(o.onRoundStart,o.name)}},t.setV3Difficulty=function(a){var s;t.initV3State(),["easy","normal","hard","hell"].includes(a)||(a="normal"),t.s.v3.difficulty=a;const o=createInitialAttributeState(a);t.s.v3.attributes={health:o.health,san:o.san,credit:o.credit,luck:o.luck},t.s.v3.money=o.money,(s=t.save)==null||s.call(t)},t.setV3HousingLevel=function(a){var s;t.initV3State(),[1,2,3].includes(a)||(a=1),t.s.v3.housingLevel=a;const o=constants.housing[a];t.s.v3.sanMax=(o==null?void 0:o.sanMax)||100,(s=t.save)==null||s.call(t)},t.setV3DietLevel=function(a){var o;t.initV3State(),[1,2,3].includes(a)||(a=2),t.s.v3.dietLevel=a,(o=t.save)==null||o.call(t)},t.getV3MonsterDamage=function(){t.initV3State();const a=t.s.v3.currentRound;return constants.monsterDamage[a]||80},t.allocateV3MonsterDamage=function(a){t.initV3State();const r=[];return a.health&&a.health>0&&(t.modifyV3Attribute("health",-a.health,"Monster"),r.push({attr:"health",damage:a.health})),a.san&&a.san>0&&(t.modifyV3Attribute("san",-a.san,"Monster"),r.push({attr:"san",damage:a.san})),a.money&&a.money>0&&(t.modifyV3Attribute("money",-a.money,"Monster"),r.push({attr:"money",damage:a.money})),{success:!0,results:r}},t.getActiveDebuffs=function(){return t.initV3State(),t.s.v3.activeDebuffs.map(a=>{const r=getDebuffById$1(a.id);return{...a,definition:r}})},t.addDebuff=function(a){var l;t.initV3State();const r=t.s.v3,o=getDebuffById$1(a);if(!o)return console.warn(`Debuff not found: ${a}`),!1;const s=r.activeDebuffs.findIndex(c=>c.id===a);if(s>=0)r.activeDebuffs[s].consecutiveMetCount=0,t.pushFeed&&t.pushFeed(`${o.icon} ${o.name} `,{kind:"warning"});else{if(r.activeDebuffs.length>=MAX_DEBUFFS)return t.pushFeed&&t.pushFeed(`debuff(${MAX_DEBUFFS})${o.name}`,{kind:"log"}),!1;r.activeDebuffs.push({id:a,name:o.name,icon:o.icon,consecutiveMetCount:0,appliedThisRound:!0}),t.pushFeed&&(t.pushFeed(`${o.icon} debuff: ${o.name}`,{kind:"danger"}),t.pushFeed(o.description,{kind:"log"}))}return(l=t.save)==null||l.call(t),!0},t.removeDebuff=function(a){var s;t.initV3State();const r=t.s.v3,o=r.activeDebuffs.findIndex(l=>l.id===a);if(o>=0){const l=r.activeDebuffs.splice(o,1)[0],c=getDebuffById$1(a);return t.pushFeed&&c&&t.pushFeed(`${c.icon} ${c.name} `,{kind:"unlock"}),(s=t.save)==null||s.call(t),l}return null},t._checkV3Death=function(a){var o,s,l;if(t.initV3State(),t.s.v3.gameEnded)return;const r=mapAttributeZeroToEnding(a);if(t.s.v3.gameEnded=!0,t.s.v3.endType="death",t.s.v3.deathInfo={type:r,endingId:r,round:t.s.v3.currentRound,attributes:{...t.s.v3.attributes},money:t.s.v3.money,cause:a},Analytics.killed(t.s.v3.currentRound,a),t.s.v3.endingFlow=createEndingFlowState(r),t.s.v3.roundPhase="ending",t.pushFeed){t.pushFeed("",{kind:"system"});const c=getEndingByType(r),u=((s=(o=c==null?void 0:c.phases)==null?void 0:o[0])==null?void 0:s.title)||"";t.pushFeed(`${u}`,{kind:"scene"})}(l=t.save)==null||l.call(t)},t.triggerV3MissionFailure=function(a,r={}){var l;if(t.initV3State(),t.s.v3.gameEnded||!isDeathTriggerEnabled("missionFailure"))return;const o=mapFailureTriggerToEnding(a.failureTrigger,{overrideEndingId:r.overrideEndingId,round:t.s.v3.currentRound}),s=r.failurePreview||a.failurePreview;t.s.v3.gameEnded=!0,t.s.v3.endType="death",t.s.v3.deathInfo={type:o,endingId:o,round:t.s.v3.currentRound,mission:a,attributes:{...t.s.v3.attributes},money:t.s.v3.money,failurePreview:s,failureTrigger:a.failureTrigger,failureReason:r.failureReason},Analytics.killed(t.s.v3.currentRound,a.failureTrigger||"mission_failure"),t.s.v3.endingFlow=createEndingFlowState(o),t.s.v3.roundPhase="ending",t.pushFeed&&(t.pushFeed("",{kind:"system"}),t.pushFeed("",{kind:"scene"}),s&&t.pushFeed(s,{kind:"log"})),(l=t.save)==null||l.call(t)},t._triggerV3Victory=function(){var a;t.s.v3.gameEnded=!0,t.s.v3.endType="victory",Analytics.gameComplete(t.s.v3.currentRound),t.s.v3.endingFlow=createEndingFlowState("survival"),t.s.v3.roundPhase="ending",t.pushFeed&&(t.pushFeed("",{kind:"system"}),t.pushFeed("",{kind:"scene"})),(a=t.save)==null||a.call(t)},t.advanceV3EndingFlow=function(a){var o;t.initV3State();const r=t.s.v3;return!r.endingFlow||r.endingFlow.completed?null:(r.endingFlow=advanceEndingFlow(r.endingFlow,a),(o=t.save)==null||o.call(t),{completed:r.endingFlow.completed,currentPhase:r.endingFlow.currentPhase})},t.getV3CurrentEndingPhase=function(){t.initV3State();const a=t.s.v3;return a.endingFlow?getCurrentPhaseData(a.endingFlow):null},t.checkNewUnlocks=function(){var s;t.initV3State();const a=t.s.v3,r={currentRound:a.currentRound,attributes:a.attributes,money:a.money,behaviorCooldowns:a.behaviorCooldowns,usedOneTimeBehaviors:a.usedOneTimeBehaviors,unlockedBehaviors:a.unlockedBehaviors,playerTags:a.playerTags||[],doneCategories:a.doneCategories||[]},o=[];for(const l of BEHAVIORS){if(a.knownUnlockedBehaviors.includes(l.id))continue;const{unlocked:c}=checkBehaviorUnlock(l,r);c&&(a.knownUnlockedBehaviors.push(l.id),a.pendingUnlocks.push({id:l.id,name:l.name,category:l.category,description:l.description,unlockStory:l.unlockStory||l.quote||"",effectHint:l.effectHint,icon:l.icon}),o.push(l))}return o.length>0&&((s=t.save)==null||s.call(t)),o},t.getNextPendingUnlock=function(){return t.initV3State(),t.s.v3.pendingUnlocks[0]||null},t.acknowledgePendingUnlock=function(){var a;t.initV3State(),t.s.v3.pendingUnlocks.length>0&&(t.s.v3.pendingUnlocks.shift(),(a=t.save)==null||a.call(t))},t.getPendingUnlockCount=function(){return t.initV3State(),t.s.v3.pendingUnlocks.length},t.clearPendingUnlocks=function(){var a;t.initV3State(),t.s.v3.pendingUnlocks=[],(a=t.save)==null||a.call(t)},t.calculateMonthlyEvents=function(){var s,l;t.initV3State();const a=t.s.v3;if(a.monthlyEvents.calculatedForRound===a.currentRound)return{luckyEvent:a.monthlyEvents.luckyEvent,riskEvent:a.monthlyEvents.riskEvent};if(MONTHLY_EVENTS_CONFIG.skipRounds.includes(a.currentRound))return a.monthlyEvents.luckyEvent=null,a.monthlyEvents.riskEvent=null,a.monthlyEvents.calculatedForRound=a.currentRound,(s=t.save)==null||s.call(t),{luckyEvent:null,riskEvent:null};let r=null,o=null;{const c=a.attributes.luck||50,u=getLuckEventChance(c);Math.random()<u&&(r=selectEventByWeight(MONTHLY_EVENTS_CONFIG.luck.events))}{const c=calculateRiskResist$1(a.attributes),u=getRiskEventChance(c);if(Math.random()<u){const f=getRiskSeverity(c),v=MONTHLY_EVENTS_CONFIG.risk.events[f]||[];o=selectEventByWeight(v)}}return a.monthlyEvents.luckyEvent=r,a.monthlyEvents.riskEvent=o,a.monthlyEvents.calculatedForRound=a.currentRound,(l=t.save)==null||l.call(t),{luckyEvent:r,riskEvent:o}},t.getMonthlyEventsData=function(){t.initV3State();const a=t.s.v3,{luckyEvent:r,riskEvent:o}=t.calculateMonthlyEvents();return{round:a.currentRound,luckyEvent:r,riskEvent:o,hasEvents:r!==null||o!==null}},t.applyMonthlyEventsEffects=function(){var l;t.initV3State();const a=t.s.v3;if(a.monthlyEvents.appliedForRound===a.currentRound)return{alreadyApplied:!0};const r={luckyApplied:!1,riskApplied:!1,totalEffects:{}},o=a.monthlyEvents.luckyEvent,s=a.monthlyEvents.riskEvent;if((o||s)&&t.pushFeed&&(t.pushFeed("",{kind:"system"}),t.pushFeed("",{kind:"scene"})),o&&o.effects){t.applyV3Effects(o.effects,o.name),r.luckyApplied=!0;for(const[c,u]of Object.entries(o.effects))r.totalEffects[c]=(r.totalEffects[c]||0)+u;t.pushFeed&&t.pushFeed(` ${o.name}${o.description}`,{kind:"luck"})}if(s&&s.effects){t.applyV3Effects(s.effects,s.name),r.riskApplied=!0;for(const[c,u]of Object.entries(s.effects))r.totalEffects[c]=(r.totalEffects[c]||0)+u;t.pushFeed&&t.pushFeed(` ${s.name}${s.description}`,{kind:"danger"})}return a.monthlyEvents.appliedForRound=a.currentRound,(l=t.save)==null||l.call(t),r},t.hasMonthlyEventsApplied=function(){return t.initV3State(),t.s.v3.monthlyEvents.appliedForRound===t.s.v3.currentRound},t.resetMonthlyEventsState=function(){t.initV3State()},t.hasSurvivalCheckApplied=function(){return t.initV3State(),t.s.v3.survivalCheckAppliedForRound===t.s.v3.currentRound},t.getSurvivalCheckData=function(){t.initV3State();const a=t.s.v3,r=a.currentRound===1,o=a.dietLevel||1,s=constants.diet[o],l=(s==null?void 0:s.healthChange)||0,c=(s==null?void 0:s.moneyCost)||400,u={hasStrategy:!0,strategy:{id:`diet_${o}`,name:(s==null?void 0:s.name)||"",icon:o===1?"":o===3?"":"",flavorText:(s==null?void 0:s.description)||""},effects:{health:l,money:-c},moneyCost:c},d=a.housingStatus||"1",f=constants.housing[d],v=(f==null?void 0:f.cost)||0,_=r?0:v,g={housing:{id:d,name:(f==null?void 0:f.name)||"",sanMax:(f==null?void 0:f.sanMax)||100},effects:{sanMax:(f==null?void 0:f.sanMax)||100,money:-_},rentPaid:_,rentFailed:a.rentFailedThisRound||!1,isFirstRound:r};return{foodData:u,housingData:g}},t.applySurvivalCheckEffects=function(){var o;t.initV3State();const a=t.s.v3;if(a.survivalCheckAppliedForRound===a.currentRound)return{alreadyApplied:!0};const r={foodApplied:!1,housingApplied:!1,totalEffects:{}};if(t.applyFoodStrategyEffects){const s=t.applyFoodStrategyEffects();if(r.foodApplied=!0,r.foodResult=s,s.effects)for(const[l,c]of Object.entries(s.effects))r.totalEffects[l]=(r.totalEffects[l]||0)+c}if(t.applyHousingMonthlyEffects){const s=t.applyHousingMonthlyEffects();if(r.housingApplied=!0,r.housingResult=s,s.effectsApplied)for(const[l,c]of Object.entries(s.effectsApplied))r.totalEffects[l]=(r.totalEffects[l]||0)+c}return a.survivalCheckAppliedForRound=a.currentRound,(o=t.save)==null||o.call(t),r},t.getMonthlyExpenses=function(){t.initV3State();const a=t.s.v3,r=[];let o=0;const s=a.dietLevel||1,l=constants.diet[s],c=(l==null?void 0:l.moneyCost)||400;c>0&&(r.push({type:"food",name:(l==null?void 0:l.name)||"",cost:c,icon:s===1?"":s===3?"":""}),o+=c);const u=a.housingStatus||"1",d=constants.housing[u],f=(d==null?void 0:d.cost)||0,_=a.currentRound===1?0:f;return _>0&&(r.push({type:"rent",name:(d==null?void 0:d.name)||"",cost:_,icon:u==="1"?"":u==="2"?"":""}),o+=_),{foodCost:c,rentCost:_,totalCost:o,details:r,canAfford:a.money>=o}},t.deductMonthlyExpenses=function(){var _;t.initV3State();const a=t.s.v3;if(a.monthlyExpensesDeductedForRound===a.currentRound)return{alreadyDeducted:!0};const r={foodDeducted:0,rentDeducted:0,totalDeducted:0},o=a.dietLevel||1,s=constants.diet[o],l=(s==null?void 0:s.moneyCost)||400;l>0&&(t.modifyV3Attribute("money",-l,(s==null?void 0:s.name)||""),r.foodDeducted=l,r.totalDeducted+=l);const c=a.housingStatus||"1",u=constants.housing[c],d=(u==null?void 0:u.cost)||0,f=a.currentRound===1,v=a.rentPaidThisRound||a.rentFailedThisRound||f;return t.pushFeed&&(t.pushFeed(` ${(u==null?void 0:u.name)||""} $${d}`,{kind:"log"}),t.pushFeed(` ${(s==null?void 0:s.name)||""} $${l}`,{kind:"log"})),d>0&&!v?a.money>=d?(t.modifyV3Attribute("money",-d,(u==null?void 0:u.name)||""),r.rentDeducted=d,r.totalDeducted+=d,a.rentPaidThisRound=!0):(r.rentFailed=!0,r.oldHousingId=c,a.housingStatus="1",a.sanMax=constants.housing[1].sanMax,a.rentFailedThisRound=!0,t.pushFeed&&t.pushFeed(`${(u==null?void 0:u.name)||""}...`,{kind:"danger"})):v&&(r.rentAlreadyPaid=!0,!a.rentPaidThisRound&&!a.rentFailedThisRound&&(a.rentPaidThisRound=!0)),a.monthlyExpensesDeductedForRound=a.currentRound,t.pushFeed&&r.totalDeducted>0&&t.pushFeed(`$${r.totalDeducted}`,{kind:"expense"}),(_=t.save)==null||_.call(t),r},t.hasMonthlyExpensesDeducted=function(){return t.initV3State(),t.s.v3.monthlyExpensesDeductedForRound===t.s.v3.currentRound},t.getV3GameSummary=function(){var s;t.initV3State();const a=t.s.v3,r=getMissionByRound(a.currentRound),o=getRoundConfig(a.currentRound);return{round:a.currentRound,totalRounds:TOTAL_ROUNDS,phase:a.roundPhase,difficulty:a.difficulty,san:((s=a.attributes)==null?void 0:s.san)||0,sanMax:a.sanMax||100,housingLevel:a.housingLevel,dietLevel:a.dietLevel,attributes:{...a.attributes},money:a.money,mission:r?{name:r.name,theme:r.theme,objective:r.objective,failurePreview:r.failurePreview}:null,roundConfig:o,gameEnded:a.gameEnded,endType:a.endType,stats:{...a.stats},derived:{survivalIndex:t.getV3DerivedAttribute("survivalIndex"),riskResist:t.getV3RiskResist()}}},t.getV3AttributesForUI=function(){t.initV3State();const a=[];for(const r of ATTRIBUTE_IDS){const o=t.s.v3.attributes[r],s=ATTRIBUTES[r],l=getAttributeStatus$1(r,o);a.push({id:r,name:s.name,description:s.description,flavorText:s.flavorText,icon:s.icon,value:o,displayValue:formatAttributeValue(r,o),min:s.min,max:s.max,color:s.color,status:l,dangerLine:s.dangerLine})}return a},t.getV3MissionStatus=function(){t.initV3State();const a=getMissionByRound(t.s.v3.currentRound);if(!a)return null;const r={attributes:t.s.v3.attributes,money:t.s.v3.money,grayActionsCount:t.s.v3.grayActionsCount},{passed:o,results:s}=checkMissionRequirements(a,r);return{mission:a,passed:o,results:s}},t.getKillLineEvent=function(){t.initV3State();const a=t.s.v3.currentRound,r=KILL_LINE_EVENTS[a];if(!r)return null;const o=r.choices.map(s=>({...s,calculatedCost:calculateNewAllocationCost(a,r.damage,s)}));return{...r,choices:o,roundConfig:ROUND_DOMINANT_ATTR[a]}},t.checkKillLineChoice=function(a){t.initV3State();const r=t.s.v3,o={};if(!a.calculatedCost)return{willKill:!1,warnings:{}};for(const[s,l]of Object.entries(a.calculatedCost)){const c=s==="money"?r.money:r.attributes[s]||0,u=c-l;checkKillThreshold(s,u)&&(o[s]={current:c,cost:l,afterValue:u})}return{willKill:Object.keys(o).length>0,warnings:o}},t.executeKillLineChoice=function(a){var c;t.initV3State();const r=t.getKillLineEvent();if(!r)return{success:!1,error:"No kill line event for current round"};const o=r.choices.find(u=>u.id===a);if(!o)return{success:!1,error:"Choice not found"};const s=t.checkKillLineChoice(o);for(const[u,d]of Object.entries(o.calculatedCost))t.modifyV3Attribute(u,-d,o.label);o.bonusEffects&&t.applyV3Effects(o.bonusEffects,""),o.debuff&&t.addDebuff(o.debuff);const l=s.willKill?o.resultNarrative.kill:o.resultNarrative.success;return t.pushFeed&&(t.pushFeed("",{kind:"system"}),t.pushFeed(`${r.roundName}${o.label}`,{kind:"scene"}),l&&!s.willKill&&t.pushFeed(l,{kind:"log"})),t.s.v3.killLineEventAppliedForRound=t.s.v3.currentRound,(c=t.save)==null||c.call(t),{success:!0,isKill:s.willKill,killAttribute:s.willKill?Object.keys(s.warnings)[0]:null,killWarnings:s.warnings,narrative:l,costs:o.calculatedCost,bonusEffects:o.bonusEffects}},t.hasKillLineEventApplied=function(){return t.initV3State(),t.s.v3.killLineEventAppliedForRound===t.s.v3.currentRound},t.triggerKillLineDeath=function(a,r){var c;if(t.initV3State(),t.s.v3.gameEnded||!isKillLineDeathEnabled())return;const o=r||getKillLineDeathNarrative(a),s=t.s.v3.currentRound,l=getMonthlyEndingId(s);t.s.v3.gameEnded=!0,t.s.v3.endType="death",t.s.v3.deathInfo={type:"killLine",endingId:l,round:s,attributes:{...t.s.v3.attributes},money:t.s.v3.money,cause:a,killLineNarrative:o},Analytics.killed(s,`killLine_${a}`),t.s.v3.endingFlow=createEndingFlowState(l),t.s.v3.roundPhase="ending",t.pushFeed&&(t.pushFeed("",{kind:"system"}),t.pushFeed("",{kind:"scene"}),t.pushFeed(o,{kind:"log"})),(c=t.save)==null||c.call(t)},t.getShopItemForRound=function(){t.initV3State();const a=t.s.v3.currentRound,r=shopData.items.find(s=>s.round===a);if(!r)return null;const o=t.s.v3.shopPurchases.includes(r.id);return{...r,isPurchased:o,canAfford:t.s.v3.money>=r.price,rarityColor:shopData.rarityColors[r.rarity]||"#9ca3af",rarityName:shopData.rarityNames[r.rarity]||""}},t.purchaseShopItem=function(a){var s;t.initV3State();const r=t.s.v3,o=shopData.items.find(l=>l.id===a);return o?r.shopPurchases.includes(a)?{success:!1,error:""}:o.round!==r.currentRound?{success:!1,error:""}:r.money<o.price?{success:!1,error:""}:(t.modifyV3Attribute("money",-o.price,`${o.name}`),r.shopPurchases.push(a),t.pushFeed&&t.pushFeed(`${o.icon}  ${o.name}`,{kind:"unlock"}),(s=t.save)==null||s.call(t),{success:!0,item:o}):{success:!1,error:""}},t.getCollectedItems=function(){return t.initV3State(),t.s.v3.shopPurchases.map(a=>shopData.items.find(r=>r.id===a)).filter(Boolean).map(a=>({...a,rarityColor:shopData.rarityColors[a.rarity]||"#9ca3af",rarityName:shopData.rarityNames[a.rarity]||""}))},t.getCollectionStats=function(){t.initV3State();const a=t.s.v3.shopPurchases.length,r=shopData.items.length;return{collected:a,total:r,percentage:Math.round(a/r*100)}},t.getAllCollectionSlots=function(){t.initV3State();const a=t.s.v3.shopPurchases||[];return shopData.items.map(r=>{const o=a.includes(r.id);return{round:r.round,purchased:o,name:r.name,icon:r.icon,image:r.image,rarity:r.rarity}})},t.hasNewShopItem=function(){t.initV3State();const a=t.s.v3;if(a.shopViewedRound===a.currentRound)return!1;const r=t.getShopItemForRound();return r&&!r.isPurchased},t.markShopViewed=function(){var a;t.initV3State(),t.s.v3.shopViewedRound=t.s.v3.currentRound,(a=t.save)==null||a.call(t)},t.resetShopState=function(){var a;t.initV3State(),t.s.v3.shopPurchases=[],t.s.v3.shopViewedRound=0,(a=t.save)==null||a.call(t)},t.getVictoryTitle=function(){t.initV3State();const a=t.s.v3.shopPurchases.length;for(const r of victoryEndingsData.titles)if(a>=r.minCollected&&a<=r.maxCollected)return{title:r.title,description:r.description,icon:r.icon};return{title:"",description:"",icon:""}},t.getCollectionBonuses=function(){t.initV3State();const a=t.s.v3.shopPurchases,r=[];for(const o of victoryEndingsData.collectionBonuses){let s=!1;switch(o.condition.type){case"all_collected":s=a.length===12;break;case"none_collected":s=a.length===0;break;case"has_items":s=o.condition.items.every(l=>a.includes(l));break}s&&r.push({id:o.id,name:o.name,description:o.description,icon:o.icon})}return r},t.getVictoryEndingData=function(){return t.initV3State(),{title:t.getVictoryTitle(),collectedItems:t.getCollectedItems(),collectionStats:t.getCollectionStats(),bonuses:t.getCollectionBonuses(),stats:t.s.v3.stats}})}const HOUSING_OPTIONS=constants.housing;function getHousingOption(t){const n=HOUSING_OPTIONS[t];return n?{id:t,...n}:null}function getAllHousingOptions(){return Object.entries(HOUSING_OPTIONS).map(([t,n])=>({id:t,...n}))}function attachHousing(t){t.__housing_attached||(t.__housing_attached=!0,t.initHousingState=function(){t.initV3State(),t.s.v3.housingStatus||(t.s.v3.housingStatus="1"),t.s.v3.housingChangedThisRound===void 0&&(t.s.v3.housingChangedThisRound=!1)},t.resetRoundHousingState=function(){var a;t.initHousingState(),t.s.v3.housingChangedThisRound=!1,(a=t.save)==null||a.call(t)},t.hasChangedHousingThisRound=function(){return t.initHousingState(),t.s.v3.housingChangedThisRound===!0},t.getCurrentHousing=function(){t.initHousingState();const a=t.s.v3.housingStatus,r=getHousingOption(a);return r?{...r,monthlyExpense:r.cost}:{id:"2",name:"",cost:1600,sanMax:110}},t.getHousingOptions=function(){t.initHousingState();const a=t.s.v3.housingStatus,r=t.s.v3.money,o=t.s.v3.housingChangedThisRound,s=t.s.v3.currentRound===1;return getAllHousingOptions().map(l=>{const c=l.id===a,u=r>=l.cost;return{...l,monthlyExpense:l.cost,isCurrent:c,canAfford:u,hasChangedThisRound:o,isFirstRound:s,canSwitch:!c&&u&&!o&&!s}})},t.switchHousing=function(a){var c;t.initHousingState();const r=t.s.v3,o=r.housingStatus;if(a===o)return{success:!1,error:""};if(r.currentRound===1)return{success:!1,error:""};if(r.housingChangedThisRound)return{success:!1,error:""};const s=getHousingOption(a);if(!s)return{success:!1,error:""};const l=getHousingOption(o);return r.housingStatus=a,r.sanMax=s.sanMax||100,r.housingChangedThisRound=!0,t.pushFeed&&t.pushFeed(`${s.name}$${s.cost}/`,{kind:"log"}),(c=t.save)==null||c.call(t),{success:!0,oldHousing:l,newHousing:s,narrative:getHousingChangeNarrative(l==null?void 0:l.id,a)}},t.getHousingSanMax=function(){t.initHousingState();const a=getHousingOption(t.s.v3.housingStatus);return(a==null?void 0:a.sanMax)||100},t.getHousingStatusText=function(){t.initHousingState();const a=getHousingOption(t.s.v3.housingStatus);return a?a.cost>0?`${a.name} $${a.cost}/`:a.name:""},t.getCurrentHousingRent=function(){t.initHousingState();const a=getHousingOption(t.s.v3.housingStatus);return(a==null?void 0:a.cost)||0})}function getHousingChangeNarrative(t,n){var r;return((r={1:{2:"",3:""},2:{1:"...",3:""},3:{1:"...",2:""}}[t])==null?void 0:r[n])||""}function getSurvivalFailureEnding(t){var n;return t&&((n=endingsData.survivalFailures)==null?void 0:n[t])||null}function attachSettlement(t){t.__settlement_attached||(t.__settlement_attached=!0,t.executeV3Settlement=function(){var S,C,E,x;t.initV3State();const a=t.s.v3;if(a.roundPhase!=="settlement")return{success:!1,error:"Not in settlement phase"};const o=a.killLineEventAppliedForRound===a.currentRound||a.rentPaidThisRound||a.graceUsedThisRound||a.rentFailedThisRound||a.settlementChoiceMadeThisRound;if(t.hasV3SettlementChoices()&&!o)return{success:!1,error:"Settlement choice required",requiresChoice:!0,choiceData:t.getV3SettlementChoices()};const s=getMissionByRound(a.currentRound);let l=!0,c=null,u=null,d=!1,f=0,v=null,_=null,g=[];if(s){const A=a.rentPaidThisRound||a.graceUsedThisRound,N={attributes:a.attributes,money:a.money,grayActionsCount:a.grayActionsCount,currentRound:a.currentRound};if(A&&((C=(S=s.objective)==null?void 0:S.primary)==null?void 0:C.target)==="money"){if(l=!0,d=a.graceUsedThisRound,(E=s.objective)!=null&&E.secondary){const M=checkMissionRequirements(s,N);c=M.results,g=M.failedSecondary||[]}}else{const M=checkMissionRequirements(s,N);l=M.passed,c=M.results,u=M.failureReason,d=M.graceTriggered||!1,f=M.debt||0,v=M.gracePenalty,_=M.graceNarrative,g=M.failedSecondary||[]}if(t.pushFeed&&(t.pushFeed(`${s.name}`,{kind:"system"}),c))if(c.type==="primary_secondary"){const M=c.primaryStatus==="passed"?"":c.primaryStatus==="grace"?"":"";if(t.pushFeed(`${M}  ${c.label}: ${c.primary.current}/${c.primary.value}`,{kind:"log"}),c.secondary&&c.secondary.length>0)for(const R of c.secondary){const D=R.met?"":"";t.pushFeed(`${D} : ${R.target} ${R.current}/${R.required}`,{kind:"log"})}}else{const M=l?"":"",R=c.label||"";t.pushFeed(`${M} ${R}: ${c.current}/${c.target}`,{kind:"log"})}}if(!l)return t._handleV3MissionFailure(s,c,u);let y=!1;if(d&&!a.graceUsedThisRound?y=t._applyGracePenalty(v,f,_,s):a.graceUsedThisRound&&(y=!0),g.length>0&&t._applySecondaryPenalties(g),a.debt>0&&!d){const A=Math.min(a.debt,a.money);A>0&&(t.modifyV3Attribute("money",-A,""),a.debt-=A,t.pushFeed&&t.pushFeed(` $${A}`,{kind:"log"}))}const b=a.rentPaidThisRound||a.graceUsedThisRound||y||a.rentFailedThisRound,T=applyHousingEffects(t,a,b);return T&&t.pushFeed&&(T.rentFailed?t.pushFeed(` $${T.oldRent} `,{kind:"danger"}):T.rentPaid>0?t.pushFeed(` $${T.rentPaid}`,{kind:"log"}):T.alreadyPaid||T.graceHandled),s?t._handleV3MissionSuccess(s,c,d,g):(a.roundPhase="result",(x=t.save)==null||x.call(t),{success:!0,passed:!0,results:null})},t._applyGracePenalty=function(a,r,o,s){var u;const l=t.s.v3;if(!a)return!1;t.pushFeed&&o&&(t.pushFeed(" ",{kind:"warning"}),t.pushFeed(o,{kind:"log"}));let c=!1;switch(a.type){case"debt_and_rent_increase":const d=l.money;d>0&&(t.modifyV3Attribute("money",-d,""),t.pushFeed&&t.pushFeed(` $${d}`,{kind:"log"})),r>0&&(l.debt+=r,t.pushFeed&&t.pushFeed(` $${r} `,{kind:"danger"})),a.rentIncrease&&(l.rentModifier+=a.rentIncrease,t.pushFeed&&t.pushFeed(` +$${a.rentIncrease}`,{kind:"warning"})),c=!0;break;case"debuff_only":a.debuff&&t._addDebuff(a.debuff.id);break;case"stat_reduction_only":a.stat&&a.amount&&t.modifyV3Attribute(a.stat,a.amount,"");break}return(u=t.save)==null||u.call(t),c},t._applySecondaryPenalties=function(a){var r;t.s.v3;for(const o of a){const{penalty:s,debuff:l,target:c}=o;if(s)switch(s.type){case"stat_reduction":t.modifyV3Attribute(s.stat,s.amount,`${c}`);break;case"ap_reduction":break;case"heat_increase":t.modifyV3Attribute("credit",-s.amount,`${c}`);break}l&&t._addDebuff(l.id)}(r=t.save)==null||r.call(t)},t._addDebuff=function(a){var l;const r=t.s.v3,o=getDebuffById$1(a);if(!o){console.warn(`Debuff not found: ${a}`);return}const s=r.activeDebuffs.findIndex(c=>c.id===a);if(s>=0)r.activeDebuffs[s].consecutiveMetCount=0,t.pushFeed&&t.pushFeed(`${o.icon} ${o.name} `,{kind:"warning"});else{if(r.activeDebuffs.length>=MAX_DEBUFFS){t.pushFeed&&t.pushFeed(`debuff${o.name}`,{kind:"log"});return}r.activeDebuffs.push({id:a,name:o.name,icon:o.icon,consecutiveMetCount:0,appliedThisRound:!0}),t.pushFeed&&(t.pushFeed(`${o.icon} debuff: ${o.name}`,{kind:"danger"}),t.pushFeed(o.description,{kind:"log"}))}(l=t.save)==null||l.call(t)},t._handleV3MissionSuccess=function(a,r,o,s){var c;const l=t.s.v3;return t.pushFeed&&(t.pushFeed("",{kind:"system"}),o?t.pushFeed(`${a.name}`,{kind:"scene"}):s&&s.length>0?t.pushFeed(`${a.name}`,{kind:"scene"}):t.pushFeed(`${a.name}`,{kind:"scene"})),l.roundPhase="result",(c=t.save)==null||c.call(t),{success:!0,passed:!0,results:r,graceTriggered:o,failedSecondary:s,mission:{name:a.name,theme:a.theme}}},t._handleV3MissionFailure=function(a,r,o){var c,u;t.s.v3;const s=(c=a.failureReasons)==null?void 0:c[o],l=(s==null?void 0:s.preview)||a.failurePreview;return t.pushFeed&&(t.pushFeed("",{kind:"system"}),t.pushFeed(`${a.name}`,{kind:"scene"}),l&&t.pushFeed(l,{kind:"log"})),t.triggerV3MissionFailure(a,{failurePreview:l,failureReason:o}),(u=t.save)==null||u.call(t),{success:!0,passed:!1,results:r,failure:{endingType:mapFailureTriggerToEnding(a.failureTrigger,{round:t.s.v3.currentRound}),failureTrigger:a.failureTrigger,failureReason:o,narrative:l||"..."}}},t.previewV3Settlement=function(){var l,c,u;t.initV3State();const a=t.s.v3,r=getMissionByRound(a.currentRound);if(!r)return{passed:!0,results:null,mission:null};const o={attributes:a.attributes,money:a.money,grayActionsCount:a.grayActionsCount,currentRound:a.currentRound},s=checkMissionRequirements(r,o);return{mission:{round:r.round,name:r.name,theme:r.theme,openingNarrative:r.openingNarrative},passed:s.passed,graceTriggered:s.graceTriggered,debt:s.debt,failedSecondary:s.failedSecondary,results:s.results?{label:s.results.label||"",type:(l=r.objective)==null?void 0:l.type,met:s.results.met,current:s.results.current||((c=s.results.primary)==null?void 0:c.current),target:s.results.target||((u=s.results.primary)==null?void 0:u.value),primaryStatus:s.results.primaryStatus,secondary:s.results.secondary,progress:calculateProgress(s.results)}:null,failurePreview:s.passed?null:r.failurePreview}},t.getV3MissionProgress=function(){const a=t.previewV3Settlement();return a.mission?{round:a.mission.round,name:a.mission.name,theme:a.mission.theme,isComplete:a.passed,graceTriggered:a.graceTriggered,objective:a.results,failurePreview:a.failurePreview}:null},t.getV3SettlementHistory=function(){return t.initV3State(),t.s.v3.roundHistory.map(a=>({round:a.round,behaviors:a.behaviors,endAttributes:a.endAttributes,endMoney:a.endMoney}))},t.startV3Settlement=function(){const a=t.endV3ActionPhase();return a.success?t.executeV3Settlement():a},t.confirmV3Settlement=function(){t.initV3State();const a=t.s.v3;return a.roundPhase!=="result"?{success:!1,error:"Not in result phase"}:a.gameEnded?{success:!0,gameEnded:!0,endType:a.endType}:t.advanceV3Round()},t.getActiveDebuffs=function(){return t.initV3State(),t.s.v3.activeDebuffs.map(a=>{const r=getDebuffById$1(a.id);return{...a,definition:r}})},t.removeDebuff=function(a){var s;t.initV3State();const r=t.s.v3,o=r.activeDebuffs.findIndex(l=>l.id===a);if(o>=0){const l=r.activeDebuffs.splice(o,1)[0],c=getDebuffById$1(a);return t.pushFeed&&c&&t.pushFeed(`${c.icon} ${c.name} `,{kind:"unlock"}),(s=t.save)==null||s.call(t),l}return null},t.getDebuffApReduction=function(){t.initV3State();let a=0;for(const r of t.s.v3.activeDebuffs){const o=getDebuffById$1(r.id);o!=null&&o.apReduction&&(a+=o.apReduction)}return a},t.getV3SettlementChoices=function(){t.initV3State();const a=t.s.v3,r=a.currentRound,o=settlementChoicesData.settlementChoices.find(l=>l.round===r);if(!o)return null;let s=null;return o.survivalCheck&&(s=evaluateSurvivalCheck(o.survivalCheck,a.attributes,a.money)),{round:o.round,roundName:o.roundName,rumor:o.rumor,narrative:o.narrative,escapeHint:o.escapeHint,choices:o.choices,survivalCheck:o.survivalCheck,survivalCheckResult:s,markedEffect:o.markedEffect,playerState:{money:a.money,attributes:{...a.attributes}}}},t.hasV3SettlementChoices=function(){t.initV3State();const a=t.s.v3.currentRound;return settlementChoicesData.settlementChoices.some(r=>r.round===a)},t.executeV3SettlementChoice=function(a){var _,g;t.initV3State();const r=t.s.v3,o=r.currentRound,s=settlementChoicesData.settlementChoices.find(y=>y.round===o);if(!s)return{success:!1,error:""};const l=s.choices.find(y=>y.id===a);if(!l)return{success:!1,error:""};let c="safe",u=null;if(s.survivalCheck&&(console.log("[executeV3SettlementChoice] Running survival check for round",r.currentRound),u=evaluateSurvivalCheck(s.survivalCheck,r.attributes,r.money),c=u.outcome,console.log("[executeV3SettlementChoice] Survival check result:",c)),c==="death"){const y=s.survivalCheck.failureEndingId,b=getSurvivalFailureEnding(y),T=(b==null?void 0:b.triggerNarrative)||s.survivalCheck.failureNarrative||"";r.survivalCheckFailed=!0,r.survivalCheckFailureData={ending:b,endingId:y,narrative:T,endingType:(b==null?void 0:b.type)||"identity_exposed"},r.settlementChoiceMadeThisRound=!0;let S="";typeof l.resultNarrative=="object"&&l.resultNarrative!==null?S=l.resultNarrative.death||l.resultNarrative.marked||l.resultNarrative.safe||"":S=l.resultNarrative||"";const C={};if(l.effects)for(const[E,x]of Object.entries(l.effects))x!==0&&(t.modifyV3Attribute(E,x,l.label),C[E]=x);return(_=t.save)==null||_.call(t),{success:!0,survivalOutcome:"death",choice:{id:l.id,label:l.label,description:l.description},effects:C,resultNarrative:S,survivalCheckFailure:{ending:b,endingId:y,narrative:T}}}if(l.requires&&l.requires.length>0){for(const y of l.requires)if(y.type==="money"){if(r.money<y.value)return{success:!1,error:` ( $${y.value})`}}else if(y.type==="stat"&&(r.attributes[y.stat]||0)<y.value)return{success:!1,error:`${y.stat}  ( ${y.value})`}}let d="";typeof l.resultNarrative=="object"&&l.resultNarrative!==null?d=l.resultNarrative[c]||l.resultNarrative.safe||"":d=l.resultNarrative||"",t.pushFeed&&(t.pushFeed(`${l.label}`,{kind:"scene"}),d&&t.pushFeed(d,{kind:"log"}));let f=null;l.rentAction&&(f=t._handleRentAction(l.rentAction,l));const v={};if(l.effects)for(const[y,b]of Object.entries(l.effects))b!==0&&(t.modifyV3Attribute(y,b,l.label),v[y]=b);if(c==="marked"&&s.markedEffect){const y=s.markedEffect;if(y.tagAdd&&(r.tags=r.tags||[],r.tags.includes(y.tagAdd)||r.tags.push(y.tagAdd)),y.heat&&(t.modifyV3Attribute("credit",-y.heat,""),v.credit=(v.credit||0)-y.heat),t.pushFeed&&y.narrative&&t.pushFeed(` ${y.narrative}`,{kind:"warning"}),l.onDangerZone){if(l.onDangerZone.effects)for(const[b,T]of Object.entries(l.onDangerZone.effects))T!==0&&(t.modifyV3Attribute(b,T,""),v[b]=(v[b]||0)+T);l.onDangerZone.tagAdd&&(r.tags=r.tags||[],r.tags.includes(l.onDangerZone.tagAdd)||r.tags.push(l.onDangerZone.tagAdd)),l.onDangerZone.debuff&&t._addDebuff(l.onDangerZone.debuff.id)}}return l.rentAction||(r.settlementChoiceMadeThisRound=!0),(g=t.save)==null||g.call(t),{success:!0,survivalOutcome:c,choice:{id:l.id,label:l.label,description:l.description},effects:v,rentResult:f,resultNarrative:d}},t._handleRentAction=function(a,r){const o=t.s.v3;switch(a){case"pay_full":return o.rentPaidThisRound=!0,{type:"paid",amount:400};case"grace":const s=o.money,c=400-s;return s>0&&t.modifyV3Attribute("money",-s,""),c>0&&(o.debt+=c,t.pushFeed&&t.pushFeed(` $${c} `,{kind:"warning"})),o.rentModifier+=20,t.pushFeed&&t.pushFeed(" +$20",{kind:"warning"}),o.rentPaidThisRound=!0,o.graceUsedThisRound=!0,{type:"grace",debt:c,rentIncrease:20};case"fail":return o.rentFailedThisRound=!0,{type:"failed"};default:return null}},t.getAllV3SettlementChoices=function(){return settlementChoicesData.settlementChoices},t.triggerSurvivalCheckDeath=function(){var c,u,d;t.initV3State();const a=t.s.v3;if(!isDeathTriggerEnabled("survivalCheck"))return a.survivalCheckFailed=!1,a.survivalCheckFailureData=null,{success:!1,error:""};if(!a.survivalCheckFailed||!a.survivalCheckFailureData)return{success:!1,error:""};const{ending:r,endingId:o,narrative:s,endingType:l}=a.survivalCheckFailureData;return t.pushFeed&&t.pushFeed("",{kind:"danger"}),a.gameEnded=!0,a.endType="death",a.deathInfo={type:l,round:a.currentRound,attributes:{...a.attributes},money:a.money,failurePreview:s,failureReason:"survival_check",endingId:o||"generic_identity_exposed",endingTitle:((u=(c=r==null?void 0:r.phases)==null?void 0:c[0])==null?void 0:u.title)||""},a.endingFlow=createEndingFlowState(o||"generic_identity_exposed"),a.roundPhase="ending",a.survivalCheckFailed=!1,a.survivalCheckFailureData=null,(d=t.save)==null||d.call(t),{success:!0}})}function evaluateSurvivalCheck(t,n,a=0){var u,d,f;if(!t)return console.warn("[evaluateSurvivalCheck] survivalCheck is null/undefined"),{outcome:"safe",details:[]};let r=t.conditions;if(r||(r=[{stat:t.stat,safe:(u=t.thresholds)==null?void 0:u.safe,kill:((d=t.thresholds)==null?void 0:d.kill)||((f=t.thresholds)==null?void 0:f.marked)}]),!Array.isArray(r))return console.warn("[evaluateSurvivalCheck] conditions is not an array:",r),{outcome:"safe",details:[]};const o=[];let s=!1,l=!1;console.log("[evaluateSurvivalCheck] Checking conditions:",r),console.log("[evaluateSurvivalCheck] Attributes:",n,"Money:",a);for(const v of r){let _;v.stat==="money"?_=a:_=n[v.stat],_==null&&(console.warn(`[evaluateSurvivalCheck] stat "${v.stat}" is undefined, defaulting to 0`),_=0);const g=v.safe,y=v.kill;let b="safe";typeof y=="number"&&_<y?(b="death",s=!0):typeof g=="number"&&_<g&&(b="marked",l=!0),console.log(`[evaluateSurvivalCheck] ${v.stat}: value=${_}, safe=${g}, kill=${y}, outcome=${b}`),o.push({stat:v.stat,value:_,safeThreshold:g,killThreshold:y,outcome:b})}let c="safe";return s?c="death":l&&(c="marked"),console.log("[evaluateSurvivalCheck] Final outcome:",c),{outcome:c,details:o}}function calculateProgress(t){if(!t)return 100;if(t.type==="primary_secondary"&&t.primary){const r=t.primary.current||0,o=t.primary.value||1;return Math.min(100,r/o*100)}const n=t.target||1,a=t.current||0;return Math.min(100,a/n*100)}function applyHousingEffects(t,n,a=!1){var d;const r=n.housingStatus;if(!r)return null;const o=getHousingOption(r);if(!o)return null;const s={housing:o,effectsApplied:{},rentPaid:0,rentFailed:!1,oldRent:0,alreadyPaid:!1,graceHandled:!1},l=n.housingChangedThisRound===!0;if(a)return s.graceHandled=!0,s;const u=(o.cost||0)+(n.rentModifier||0);if(u>0&&!l)if(s.oldRent=u,n.money>=u)t.modifyV3Attribute("money",-u,`${o.name}`),s.rentPaid=u;else{s.rentFailed=!0,s.oldHousing=o,n.housingStatus="1";const f=getHousingOption("1");return f&&(n.sanMax=f.sanMax||100),(d=t.save)==null||d.call(t),s}else l&&(s.alreadyPaid=!0);return s}function attachBehaviorEngine(t){t.__behavior_engine_attached||(t.__behavior_engine_attached=!0,t.getV3AllBehaviors=function(){var o;t.initV3State();const a=t.s.v3,r={attributes:a.attributes,money:a.money,unlockedBehaviors:a.unlockedBehaviors,behaviorCooldowns:a.behaviorCooldowns,behaviorUseCount:a.behaviorUseCount||{},usedOneTimeBehaviors:a.usedOneTimeBehaviors||[],currentRound:a.currentRound,currentSan:((o=a.attributes)==null?void 0:o.san)||0};return getAllBehaviorsWithStatus(r)},t.getV3BehaviorsByCategory=function(){t.initV3State();const a=t.getV3AllBehaviors(),r={};for(const o of Object.keys(BEHAVIOR_CATEGORIES))r[o]=[];for(const o of a)r[o.category]&&r[o.category].push(o);for(const o of Object.keys(r))r[o].sort((s,l)=>s.unlocked===l.unlocked?0:s.unlocked?-1:1);return r},t.getV3AvailableBehaviors=function(){return t.getV3AllBehaviors().filter(a=>a.canExecute)},t.canExecuteV3Behavior=function(a){var l;t.initV3State();const r=getBehaviorById(a);if(!r)return{canExecute:!1,reasons:[""]};const o=t.s.v3;if(o.gameEnded)return{canExecute:!1,reasons:[""]};if(o.roundPhase!=="action")return{canExecute:!1,reasons:[""]};const s={attributes:o.attributes,money:o.money,unlockedBehaviors:o.unlockedBehaviors,behaviorCooldowns:o.behaviorCooldowns,behaviorUseCount:o.behaviorUseCount||{},usedOneTimeBehaviors:o.usedOneTimeBehaviors||[],currentRound:o.currentRound,currentSan:((l=o.attributes)==null?void 0:l.san)||0};return checkBehaviorRequirements(r,s)},t.executeV3Behavior=function(a){var b,T,S,C;t.initV3State();const r=getBehaviorById(a);if(!r)return{success:!1,error:""};const o=t.canExecuteV3Behavior(a);if(!o.canExecute)return{success:!1,error:o.reasons.join("; ")};const s=t.s.v3,l=r.sanCost||0;l>0&&t.useV3San(l);const c=r.moneyCost||0;c>0&&t.modifyV3Attribute("money",-c,`${r.name}`);const u=r.healthCost||0;u>0&&t.modifyV3Attribute("health",-u,`${r.name}`);const d=(((b=s.attributes)==null?void 0:b.luck)||50)/100,f=resolveBehaviorOutcome(r,d),v={},_={},g=[];l>0&&(_.san=-l),c>0&&(_.money=-c),u>0&&(_.health=-u);const y=l>0&&((T=constants.sanEfficiency)==null?void 0:T[s.currentRound])||1;if(f.gain){for(const[E,x]of Object.entries(f.gain))if(typeof x=="number"&&x!==0){let A=x;if(E!=="san"&&x>0&&y!==1&&(A=Math.round(x*y)),E==="money")t.modifyV3Attribute("money",A,r.name),v.money=A,g.push(`${A>=0?"+":""}${A}`);else if(E==="health"||E==="san"||E==="credit"||E==="luck"){t.modifyV3Attribute(E,A,r.name),v[E]=A;const N={health:"",san:"SAN",credit:"",luck:""}[E];g.push(`${N}${A>=0?"+":""}${A}`)}}}if(r.setCreditTo!==void 0){const E=((S=s.attributes)==null?void 0:S.credit)||0,x=r.setCreditTo-E;t.modifyV3Attribute("credit",x,`${r.name}()`),v.creditReset=r.setCreditTo,g.push(`${r.setCreditTo}`)}if(r.clearAllDebuffs&&(t._clearAllDebuffs(),g.push("")),f.debuff){t._applyDebuff(f.debuff);const E=getDebuffById(f.debuff.id);E&&g.push(`[${E.name}]`)}if(f.buff){t._applyBuff(f.buff);const E=getBuffById(f.buff.id);E&&g.push(`[${E.name}]`)}return t._recordBehaviorUse(r),t.pushFeed&&(t.pushFeed(`${r.name}`,{kind:"scene"}),f.text?t.pushFeed(f.text,{kind:"log"}):r.quote&&t.pushFeed(r.quote,{kind:"log"}),g.length>0&&t.pushFeed(g.join(" "),{kind:"effect"})),(C=t.save)==null||C.call(t),{success:!0,result:{behavior:{id:r.id,name:r.name,category:r.category,icon:r.icon,type:r.type},outcomeSuccess:f.success,effects:v,costs:_,narrative:f.text||r.quote||r.description||"",text:f.text,effectSummary:g.join(" ")}}},t._applyDebuff=function(a){const r=t.s.v3;r.activeDebuffs||(r.activeDebuffs=[]);const o=getDebuffById(a.id);if(!o)return;const s=r.activeDebuffs.find(l=>l.id===a.id);s?s.remainingDuration=a.duration||o.duration:r.activeDebuffs.push({id:a.id,name:o.name,icon:o.icon,effect:o.effect,remainingDuration:a.duration||o.duration,canClearEarly:o.canClearEarly,clearCost:o.clearCost})},t._applyBuff=function(a){const r=t.s.v3;r.activeBuffs||(r.activeBuffs=[]);const o=getBuffById(a.id);if(!o)return;const s=r.activeBuffs.find(l=>l.id===a.id);s?s.remainingDuration=a.duration||o.duration:r.activeBuffs.push({id:a.id,name:o.name,icon:o.icon,effect:o.effect,remainingDuration:a.duration||o.duration})},t._clearAllDebuffs=function(){const a=t.s.v3;a.activeDebuffs=[]},t.clearDebuffEarly=function(a){var c;const r=t.s.v3;if(!r.activeDebuffs)return{success:!1,error:""};const o=r.activeDebuffs.findIndex(u=>u.id===a);if(o===-1)return{success:!1,error:""};const s=r.activeDebuffs[o];if(!s.canClearEarly)return{success:!1,error:""};const l=s.clearCost||0;return(r.money||0)<l?{success:!1,error:` ( $${l})`}:(t.modifyV3Attribute("money",-l,`${s.name}`),r.activeDebuffs.splice(o,1),(c=t.save)==null||c.call(t),{success:!0})},t.processRoundEndDebuffsBuffs=function(){const a=t.s.v3,r=[];if(a.activeDebuffs&&a.activeDebuffs.length>0){const o=[];for(const s of a.activeDebuffs)s.effect&&(s.effect.moneyPerRound&&(t.modifyV3Attribute("money",s.effect.moneyPerRound,s.name),r.push({type:"debuff",name:s.name,money:s.effect.moneyPerRound})),s.effect.healthPerRound&&(t.modifyV3Attribute("health",s.effect.healthPerRound,s.name),r.push({type:"debuff",name:s.name,health:s.effect.healthPerRound})),s.effect.creditPerRound&&(t.modifyV3Attribute("credit",s.effect.creditPerRound,s.name),r.push({type:"debuff",name:s.name,credit:s.effect.creditPerRound}))),s.remainingDuration--,s.remainingDuration>0?o.push(s):r.push({type:"debuffExpired",name:s.name});a.activeDebuffs=o}if(a.activeBuffs&&a.activeBuffs.length>0){const o=[];for(const s of a.activeBuffs)s.remainingDuration--,s.remainingDuration>0?o.push(s):r.push({type:"buffExpired",name:s.name});a.activeBuffs=o}return r},t.hasBuff=function(a){var o;return((o=t.s.v3.activeBuffs)==null?void 0:o.some(s=>s.id===a))||!1},t.getBuffEffect=function(a,r){var l,c;const s=(l=t.s.v3.activeBuffs)==null?void 0:l.find(u=>u.id===a);return((c=s==null?void 0:s.effect)==null?void 0:c[r])||0},t._recordBehaviorUse=function(a){var o;const r=t.s.v3;r.behaviorUseCount||(r.behaviorUseCount={}),r.behaviorUseCount[a.id]=(r.behaviorUseCount[a.id]||0)+1,(o=a.limit)!=null&&o.cooldown&&(r.behaviorCooldowns||(r.behaviorCooldowns={}),r.behaviorCooldowns[a.id]=r.currentRound),r.roundBehaviors||(r.roundBehaviors=[]),r.roundBehaviors.push({id:a.id,name:a.name,timestamp:Date.now()}),r.statistics||(r.statistics={}),r.statistics.totalBehaviors||(r.statistics.totalBehaviors=0),r.statistics.totalBehaviors++,r.statistics.behaviorsByCategory||(r.statistics.behaviorsByCategory={}),r.statistics.behaviorsByCategory[a.category]=(r.statistics.behaviorsByCategory[a.category]||0)+1},t.getV3BehaviorDetail=function(a){var v,_,g,y;t.initV3State();const r=getBehaviorById(a);if(!r)return null;const o=t.canExecuteV3Behavior(a),s=t.s.v3;let l=0;if((v=r.limit)!=null&&v.cooldown){const b=((_=s.behaviorCooldowns)==null?void 0:_[a])||0;b>0&&(l=Math.max(0,r.limit.cooldown-(s.currentRound-b)))}let c=null;if(((g=r.limit)==null?void 0:g.usesPerGame)!==void 0){const b=((y=s.behaviorUseCount)==null?void 0:y[a])||0;c=r.limit.usesPerGame-b}const u=getBehaviorCostPreview(r),d=getBehaviorGainPreview(r),f=ACTION_TYPES[r.type]||{name:"",description:""};return{...r,canExecute:o.canExecute,executeReasons:o.reasons,cooldownRemaining:l,usesRemaining:c,costPreview:u,gainPreview:d,typeInfo:f,hasDebuff:!!r.debuff,hasBuff:!!r.buff,hasRisk:r.type==="risky",hasOutcomes:r.type==="random"||r.type==="lottery"}},t.getV3BehaviorCategories=function(){return Object.values(BEHAVIOR_CATEGORIES)},t.getV3RoundBehaviorHistory=function(){return t.initV3State(),[...t.s.v3.roundBehaviors||[]]},t.getV3ActiveDebuffs=function(){return t.initV3State(),[...t.s.v3.activeDebuffs||[]]},t.getV3ActiveBuffs=function(){return t.initV3State(),[...t.s.v3.activeBuffs||[]]},t.quickExecuteV3Behavior=function(a){return t.executeV3Behavior(a)})}const diet=[{id:"diet_1",level:1,name:"",description:"",flavorText:"...",icon:"",moneyCost:200,effects:{health:-10},category:"cheap"},{id:"diet_2",level:2,name:"",description:"",flavorText:"",icon:"",moneyCost:400,effects:{health:0},category:"normal"},{id:"diet_3",level:3,name:"",description:"",flavorText:"",icon:"",moneyCost:600,effects:{health:10},category:"luxury"}],consumablesData={diet},DIET_LEVELS=consumablesData.diet;function getDietConfig(t){return DIET_LEVELS.find(n=>n.level===t)||null}function attachConsumables(t){t.__consumables_attached||(t.__consumables_attached=!0,t.initConsumablesState=function(){t.initV3State(),t.s.v3.consumables||(t.s.v3.consumables={dietAppliedThisRound:!1})},t.resetRoundConsumablesState=function(){var a;t.initConsumablesState(),t.s.v3.consumables.dietAppliedThisRound=!1,(a=t.save)==null||a.call(t)},t.getAvailableDiets=function(){t.initConsumablesState();const a=t.s.v3,r=a.dietLevel||1;return DIET_LEVELS.map(o=>{const s=a.money>=o.moneyCost,l=o.level===r;return{...o,canAfford:s,isCurrent:l,canSelect:s}})},t.setDietLevel=function(a){var s;t.initConsumablesState();const r=getDietConfig(a);if(!r)return{success:!1,error:""};const o=t.s.v3;return o.money<r.moneyCost?{success:!1,error:""}:(o.dietLevel=a,t.pushFeed&&t.pushFeed(`${r.name}`,{kind:"log"}),(s=t.save)==null||s.call(t),{success:!0,diet:r,narrative:r.flavorText||`${r.name}`})},t.getCurrentDiet=function(){t.initConsumablesState();const a=t.s.v3.dietLevel||1;return getDietConfig(a)},t.applyDietEffects=function(){var l;t.initConsumablesState();const a=t.s.v3;if(a.consumables.dietAppliedThisRound)return{alreadyApplied:!0};const r=a.dietLevel||1,o=getDietConfig(r);if(!o)return{success:!1,error:""};const s=o.effects||{};return s.health&&s.health!==0&&t.modifyV3Attribute("health",s.health,o.name),a.consumables.dietAppliedThisRound=!0,t.pushFeed&&(s.health<0?t.pushFeed(`${o.name}...`,{kind:"warning"}):s.health>0&&t.pushFeed(`${o.name}`,{kind:"log"})),(l=t.save)==null||l.call(t),{success:!0,diet:o,effects:s}},t.getDietCost=function(){t.initConsumablesState();const a=t.s.v3.dietLevel||1,r=getDietConfig(a);return{cost:(r==null?void 0:r.moneyCost)||400,dietName:(r==null?void 0:r.name)||""}},t.getDietStatusText=function(){t.initConsumablesState();const a=t.getCurrentDiet();return a?`${a.name}`:""},t.getAvailableFoods=t.getAvailableDiets,t.hasChosenStrategy=function(){return!0},t.getCurrentStrategy=t.getCurrentDiet,t.getFoodStatusText=t.getDietStatusText,t.getFoodStrategyCost=t.getDietCost,t.deductFoodStrategyCost=function(){t.initConsumablesState();const{cost:n,dietName:a}=t.getDietCost();return n>0&&t.modifyV3Attribute("money",-n,a),{success:!0,cost:n,strategyName:a}},t.applyFoodStrategyEffects=t.applyDietEffects)}function attachGameStore(t){t.__game_attached||(t.__game_attached=!0,attachPersist(t),attachFeed(t),attachEffects(t),attachStageFlows(t),attachGameV3(t),attachSettlement(t),attachBehaviorEngine(t),attachConsumables(t),attachHousing(t),attachDeathFlow(t),attachAudioIntegration(t))}function gameStoreAutoAttachPlugin({store:t}){t.$id==="game"&&attachGameStore(t)}const app=createApp(_sfc_main),pinia=createPinia();pinia.use(gameStoreAutoAttachPlugin);app.use(pinia);app.mount("#app");
